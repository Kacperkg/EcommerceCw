(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function vS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Yd={exports:{}},Xa={},Xd={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hy;function _S(){if(Hy)return Re;Hy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function E(z){return z===null||typeof z!="object"?null:(z=w&&z[w]||z["@@iterator"],typeof z=="function"?z:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,N={};function V(z,X,ge){this.props=z,this.context=X,this.refs=N,this.updater=ge||A}V.prototype.isReactComponent={},V.prototype.setState=function(z,X){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,X,"setState")},V.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function L(){}L.prototype=V.prototype;function W(z,X,ge){this.props=z,this.context=X,this.refs=N,this.updater=ge||A}var B=W.prototype=new L;B.constructor=W,P(B,V.prototype),B.isPureReactComponent=!0;var Y=Array.isArray,Q=Object.prototype.hasOwnProperty,ee={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function C(z,X,ge){var Pe,Ie={},De=null,Fe=null;if(X!=null)for(Pe in X.ref!==void 0&&(Fe=X.ref),X.key!==void 0&&(De=""+X.key),X)Q.call(X,Pe)&&!R.hasOwnProperty(Pe)&&(Ie[Pe]=X[Pe]);var Be=arguments.length-2;if(Be===1)Ie.children=ge;else if(1<Be){for(var We=Array(Be),St=0;St<Be;St++)We[St]=arguments[St+2];Ie.children=We}if(z&&z.defaultProps)for(Pe in Be=z.defaultProps,Be)Ie[Pe]===void 0&&(Ie[Pe]=Be[Pe]);return{$$typeof:n,type:z,key:De,ref:Fe,props:Ie,_owner:ee.current}}function I(z,X){return{$$typeof:n,type:z.type,key:X,ref:z.ref,props:z.props,_owner:z._owner}}function b(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function O(z){var X={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ge){return X[ge]})}var U=/\/+/g;function D(z,X){return typeof z=="object"&&z!==null&&z.key!=null?O(""+z.key):X.toString(36)}function He(z,X,ge,Pe,Ie){var De=typeof z;(De==="undefined"||De==="boolean")&&(z=null);var Fe=!1;if(z===null)Fe=!0;else switch(De){case"string":case"number":Fe=!0;break;case"object":switch(z.$$typeof){case n:case e:Fe=!0}}if(Fe)return Fe=z,Ie=Ie(Fe),z=Pe===""?"."+D(Fe,0):Pe,Y(Ie)?(ge="",z!=null&&(ge=z.replace(U,"$&/")+"/"),He(Ie,X,ge,"",function(St){return St})):Ie!=null&&(b(Ie)&&(Ie=I(Ie,ge+(!Ie.key||Fe&&Fe.key===Ie.key?"":(""+Ie.key).replace(U,"$&/")+"/")+z)),X.push(Ie)),1;if(Fe=0,Pe=Pe===""?".":Pe+":",Y(z))for(var Be=0;Be<z.length;Be++){De=z[Be];var We=Pe+D(De,Be);Fe+=He(De,X,ge,We,Ie)}else if(We=E(z),typeof We=="function")for(z=We.call(z),Be=0;!(De=z.next()).done;)De=De.value,We=Pe+D(De,Be++),Fe+=He(De,X,ge,We,Ie);else if(De==="object")throw X=String(z),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Fe}function gt(z,X,ge){if(z==null)return z;var Pe=[],Ie=0;return He(z,Pe,"","",function(De){return X.call(ge,De,Ie++)}),Pe}function Ce(z){if(z._status===-1){var X=z._result;X=X(),X.then(function(ge){(z._status===0||z._status===-1)&&(z._status=1,z._result=ge)},function(ge){(z._status===0||z._status===-1)&&(z._status=2,z._result=ge)}),z._status===-1&&(z._status=0,z._result=X)}if(z._status===1)return z._result.default;throw z._result}var ye={current:null},re={transition:null},he={ReactCurrentDispatcher:ye,ReactCurrentBatchConfig:re,ReactCurrentOwner:ee};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:gt,forEach:function(z,X,ge){gt(z,function(){X.apply(this,arguments)},ge)},count:function(z){var X=0;return gt(z,function(){X++}),X},toArray:function(z){return gt(z,function(X){return X})||[]},only:function(z){if(!b(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Re.Component=V,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=W,Re.StrictMode=s,Re.Suspense=f,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,Re.act=ae,Re.cloneElement=function(z,X,ge){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Pe=P({},z.props),Ie=z.key,De=z.ref,Fe=z._owner;if(X!=null){if(X.ref!==void 0&&(De=X.ref,Fe=ee.current),X.key!==void 0&&(Ie=""+X.key),z.type&&z.type.defaultProps)var Be=z.type.defaultProps;for(We in X)Q.call(X,We)&&!R.hasOwnProperty(We)&&(Pe[We]=X[We]===void 0&&Be!==void 0?Be[We]:X[We])}var We=arguments.length-2;if(We===1)Pe.children=ge;else if(1<We){Be=Array(We);for(var St=0;St<We;St++)Be[St]=arguments[St+2];Pe.children=Be}return{$$typeof:n,type:z.type,key:Ie,ref:De,props:Pe,_owner:Fe}},Re.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:a,_context:z},z.Consumer=z},Re.createElement=C,Re.createFactory=function(z){var X=C.bind(null,z);return X.type=z,X},Re.createRef=function(){return{current:null}},Re.forwardRef=function(z){return{$$typeof:d,render:z}},Re.isValidElement=b,Re.lazy=function(z){return{$$typeof:y,_payload:{_status:-1,_result:z},_init:Ce}},Re.memo=function(z,X){return{$$typeof:m,type:z,compare:X===void 0?null:X}},Re.startTransition=function(z){var X=re.transition;re.transition={};try{z()}finally{re.transition=X}},Re.unstable_act=ae,Re.useCallback=function(z,X){return ye.current.useCallback(z,X)},Re.useContext=function(z){return ye.current.useContext(z)},Re.useDebugValue=function(){},Re.useDeferredValue=function(z){return ye.current.useDeferredValue(z)},Re.useEffect=function(z,X){return ye.current.useEffect(z,X)},Re.useId=function(){return ye.current.useId()},Re.useImperativeHandle=function(z,X,ge){return ye.current.useImperativeHandle(z,X,ge)},Re.useInsertionEffect=function(z,X){return ye.current.useInsertionEffect(z,X)},Re.useLayoutEffect=function(z,X){return ye.current.useLayoutEffect(z,X)},Re.useMemo=function(z,X){return ye.current.useMemo(z,X)},Re.useReducer=function(z,X,ge){return ye.current.useReducer(z,X,ge)},Re.useRef=function(z){return ye.current.useRef(z)},Re.useState=function(z){return ye.current.useState(z)},Re.useSyncExternalStore=function(z,X,ge){return ye.current.useSyncExternalStore(z,X,ge)},Re.useTransition=function(){return ye.current.useTransition()},Re.version="18.3.1",Re}var Wy;function hp(){return Wy||(Wy=1,Xd.exports=_S()),Xd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qy;function wS(){if(qy)return Xa;qy=1;var n=hp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var y,w={},E=null,A=null;m!==void 0&&(E=""+m),f.key!==void 0&&(E=""+f.key),f.ref!==void 0&&(A=f.ref);for(y in f)s.call(f,y)&&!a.hasOwnProperty(y)&&(w[y]=f[y]);if(d&&d.defaultProps)for(y in f=d.defaultProps,f)w[y]===void 0&&(w[y]=f[y]);return{$$typeof:e,type:d,key:E,ref:A,props:w,_owner:o.current}}return Xa.Fragment=t,Xa.jsx=u,Xa.jsxs=u,Xa}var Ky;function xS(){return Ky||(Ky=1,Yd.exports=wS()),Yd.exports}var _=xS(),j=hp();const vi=vS(j);var oc={},Jd={exports:{}},an={},Zd={exports:{}},ef={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gy;function ES(){return Gy||(Gy=1,function(n){function e(re,he){var ae=re.length;re.push(he);e:for(;0<ae;){var z=ae-1>>>1,X=re[z];if(0<o(X,he))re[z]=he,re[ae]=X,ae=z;else break e}}function t(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var he=re[0],ae=re.pop();if(ae!==he){re[0]=ae;e:for(var z=0,X=re.length,ge=X>>>1;z<ge;){var Pe=2*(z+1)-1,Ie=re[Pe],De=Pe+1,Fe=re[De];if(0>o(Ie,ae))De<X&&0>o(Fe,Ie)?(re[z]=Fe,re[De]=ae,z=De):(re[z]=Ie,re[Pe]=ae,z=Pe);else if(De<X&&0>o(Fe,ae))re[z]=Fe,re[De]=ae,z=De;else break e}}return he}function o(re,he){var ae=re.sortIndex-he.sortIndex;return ae!==0?ae:re.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],m=[],y=1,w=null,E=3,A=!1,P=!1,N=!1,V=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(re){for(var he=t(m);he!==null;){if(he.callback===null)s(m);else if(he.startTime<=re)s(m),he.sortIndex=he.expirationTime,e(f,he);else break;he=t(m)}}function Y(re){if(N=!1,B(re),!P)if(t(f)!==null)P=!0,Ce(Q);else{var he=t(m);he!==null&&ye(Y,he.startTime-re)}}function Q(re,he){P=!1,N&&(N=!1,L(C),C=-1),A=!0;var ae=E;try{for(B(he),w=t(f);w!==null&&(!(w.expirationTime>he)||re&&!O());){var z=w.callback;if(typeof z=="function"){w.callback=null,E=w.priorityLevel;var X=z(w.expirationTime<=he);he=n.unstable_now(),typeof X=="function"?w.callback=X:w===t(f)&&s(f),B(he)}else s(f);w=t(f)}if(w!==null)var ge=!0;else{var Pe=t(m);Pe!==null&&ye(Y,Pe.startTime-he),ge=!1}return ge}finally{w=null,E=ae,A=!1}}var ee=!1,R=null,C=-1,I=5,b=-1;function O(){return!(n.unstable_now()-b<I)}function U(){if(R!==null){var re=n.unstable_now();b=re;var he=!0;try{he=R(!0,re)}finally{he?D():(ee=!1,R=null)}}else ee=!1}var D;if(typeof W=="function")D=function(){W(U)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,gt=He.port2;He.port1.onmessage=U,D=function(){gt.postMessage(null)}}else D=function(){V(U,0)};function Ce(re){R=re,ee||(ee=!0,D())}function ye(re,he){C=V(function(){re(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){P||A||(P=!0,Ce(Q))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(re){switch(E){case 1:case 2:case 3:var he=3;break;default:he=E}var ae=E;E=he;try{return re()}finally{E=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,he){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ae=E;E=re;try{return he()}finally{E=ae}},n.unstable_scheduleCallback=function(re,he,ae){var z=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?z+ae:z):ae=z,re){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ae+X,re={id:y++,callback:he,priorityLevel:re,startTime:ae,expirationTime:X,sortIndex:-1},ae>z?(re.sortIndex=ae,e(m,re),t(f)===null&&re===t(m)&&(N?(L(C),C=-1):N=!0,ye(Y,ae-z))):(re.sortIndex=X,e(f,re),P||A||(P=!0,Ce(Q))),re},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(re){var he=E;return function(){var ae=E;E=he;try{return re.apply(this,arguments)}finally{E=ae}}}}(ef)),ef}var Qy;function TS(){return Qy||(Qy=1,Zd.exports=ES()),Zd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy;function SS(){if(Yy)return an;Yy=1;var n=hp(),e=TS();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function a(r,i){u(r,i),u(r+"Capture",i)}function u(r,i){for(o[r]=i,r=0;r<i.length;r++)s.add(i[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},w={};function E(r){return f.call(w,r)?!0:f.call(y,r)?!1:m.test(r)?w[r]=!0:(y[r]=!0,!1)}function A(r,i,l,h){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function P(r,i,l,h){if(i===null||typeof i>"u"||A(r,i,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function N(r,i,l,h,p,v,T){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=r,this.type=i,this.sanitizeURL=v,this.removeEmptyString=T}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){V[r]=new N(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];V[i]=new N(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){V[r]=new N(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){V[r]=new N(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){V[r]=new N(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){V[r]=new N(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){V[r]=new N(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){V[r]=new N(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){V[r]=new N(r,5,!1,r.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function W(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(L,W);V[i]=new N(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(L,W);V[i]=new N(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(L,W);V[i]=new N(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){V[r]=new N(r,1,!1,r.toLowerCase(),null,!1,!1)}),V.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){V[r]=new N(r,1,!1,r.toLowerCase(),null,!0,!0)});function B(r,i,l,h){var p=V.hasOwnProperty(i)?V[i]:null;(p!==null?p.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(P(i,l,p,h)&&(l=null),h||p===null?E(i)&&(l===null?r.removeAttribute(i):r.setAttribute(i,""+l)):p.mustUseProperty?r[p.propertyName]=l===null?p.type===3?!1:"":l:(i=p.attributeName,h=p.attributeNamespace,l===null?r.removeAttribute(i):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?r.setAttributeNS(h,i,l):r.setAttribute(i,l))))}var Y=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),ee=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),O=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),He=Symbol.for("react.suspense_list"),gt=Symbol.for("react.memo"),Ce=Symbol.for("react.lazy"),ye=Symbol.for("react.offscreen"),re=Symbol.iterator;function he(r){return r===null||typeof r!="object"?null:(r=re&&r[re]||r["@@iterator"],typeof r=="function"?r:null)}var ae=Object.assign,z;function X(r){if(z===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);z=i&&i[1]||""}return`
`+z+r}var ge=!1;function Pe(r,i){if(!r||ge)return"";ge=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(K){var h=K}Reflect.construct(r,[],i)}else{try{i.call()}catch(K){h=K}r.call(i.prototype)}else{try{throw Error()}catch(K){h=K}r()}}catch(K){if(K&&h&&typeof K.stack=="string"){for(var p=K.stack.split(`
`),v=h.stack.split(`
`),T=p.length-1,k=v.length-1;1<=T&&0<=k&&p[T]!==v[k];)k--;for(;1<=T&&0<=k;T--,k--)if(p[T]!==v[k]){if(T!==1||k!==1)do if(T--,k--,0>k||p[T]!==v[k]){var M=`
`+p[T].replace(" at new "," at ");return r.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",r.displayName)),M}while(1<=T&&0<=k);break}}}finally{ge=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?X(r):""}function Ie(r){switch(r.tag){case 5:return X(r.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return r=Pe(r.type,!1),r;case 11:return r=Pe(r.type.render,!1),r;case 1:return r=Pe(r.type,!0),r;default:return""}}function De(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case R:return"Fragment";case ee:return"Portal";case I:return"Profiler";case C:return"StrictMode";case D:return"Suspense";case He:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case O:return(r.displayName||"Context")+".Consumer";case b:return(r._context.displayName||"Context")+".Provider";case U:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case gt:return i=r.displayName||null,i!==null?i:De(r.type)||"Memo";case Ce:i=r._payload,r=r._init;try{return De(r(i))}catch{}}return null}function Fe(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(i);case 8:return i===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Be(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function We(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function St(r){var i=We(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),h=""+r[i];if(!r.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,v=l.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return p.call(this)},set:function(T){h=""+T,v.call(this,T)}}),Object.defineProperty(r,i,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function yr(r){r._valueTracker||(r._valueTracker=St(r))}function Pi(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var l=i.getValue(),h="";return r&&(h=We(r)?r.checked?"true":"false":r.value),r=h,r!==l?(i.setValue(r),!0):!1}function Kr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Os(r,i){var l=i.checked;return ae({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Ri(r,i){var l=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;l=Be(i.value!=null?i.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ra(r,i){i=i.checked,i!=null&&B(r,"checked",i,!1)}function sa(r,i){ra(r,i);var l=Be(i.value),h=i.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?ki(r,i.type,l):i.hasOwnProperty("defaultValue")&&ki(r,i.type,Be(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function Wl(r,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,l||i===r.value||(r.value=i),r.defaultValue=i}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function ki(r,i,l){(i!=="number"||Kr(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var vr=Array.isArray;function _r(r,i,l,h){if(r=r.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=i.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&h&&(r[l].defaultSelected=!0)}else{for(l=""+Be(l),i=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,h&&(r[p].defaultSelected=!0);return}i!==null||r[p].disabled||(i=r[p])}i!==null&&(i.selected=!0)}}function ia(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Ni(r,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(vr(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}r._wrapperState={initialValue:Be(l)}}function Vi(r,i){var l=Be(i.value),h=Be(i.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),i.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function oa(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function yt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?yt(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var wr,aa=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,h,p){MSApp.execUnsafeLocalFunction(function(){return r(i,l,h,p)})}:r}(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(wr=wr||document.createElement("div"),wr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=wr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Gr(r,i){if(i){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=i;return}}r.textContent=i}var Fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bs=["Webkit","ms","Moz","O"];Object.keys(Fs).forEach(function(r){Bs.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),Fs[i]=Fs[r]})});function la(r,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||Fs.hasOwnProperty(r)&&Fs[r]?(""+i).trim():i+"px"}function ua(r,i){r=r.style;for(var l in i)if(i.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=la(l,i[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,p):r[l]=p}}var ca=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ha(r,i){if(i){if(ca[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function da(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Us=null;function Di(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var bi=null,_n=null,Qn=null;function ji(r){if(r=La(r)){if(typeof bi!="function")throw Error(t(280));var i=r.stateNode;i&&(i=xu(i),bi(r.stateNode,r.type,i))}}function Yn(r){_n?Qn?Qn.push(r):Qn=[r]:_n=r}function fa(){if(_n){var r=_n,i=Qn;if(Qn=_n=null,ji(r),i)for(r=0;r<i.length;r++)ji(i[r])}}function zs(r,i){return r(i)}function pa(){}var xr=!1;function ma(r,i,l){if(xr)return r(i,l);xr=!0;try{return zs(r,i,l)}finally{xr=!1,(_n!==null||Qn!==null)&&(pa(),fa())}}function lt(r,i){var l=r.stateNode;if(l===null)return null;var h=xu(l);if(h===null)return null;l=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var Li=!1;if(d)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){Li=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{Li=!1}function $s(r,i,l,h,p,v,T,k,M){var K=Array.prototype.slice.call(arguments,3);try{i.apply(l,K)}catch(ne){this.onError(ne)}}var Hs=!1,Mi=null,Vn=!1,ga=null,Sh={onError:function(r){Hs=!0,Mi=r}};function Oi(r,i,l,h,p,v,T,k,M){Hs=!1,Mi=null,$s.apply(Sh,arguments)}function ql(r,i,l,h,p,v,T,k,M){if(Oi.apply(this,arguments),Hs){if(Hs){var K=Mi;Hs=!1,Mi=null}else throw Error(t(198));Vn||(Vn=!0,ga=K)}}function Dn(r){var i=r,l=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(l=i.return),r=i.return;while(r)}return i.tag===3?l:null}function Ws(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function bn(r){if(Dn(r)!==r)throw Error(t(188))}function Kl(r){var i=r.alternate;if(!i){if(i=Dn(r),i===null)throw Error(t(188));return i!==r?null:r}for(var l=r,h=i;;){var p=l.return;if(p===null)break;var v=p.alternate;if(v===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===l)return bn(p),r;if(v===h)return bn(p),i;v=v.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=v;else{for(var T=!1,k=p.child;k;){if(k===l){T=!0,l=p,h=v;break}if(k===h){T=!0,h=p,l=v;break}k=k.sibling}if(!T){for(k=v.child;k;){if(k===l){T=!0,l=v,h=p;break}if(k===h){T=!0,h=v,l=p;break}k=k.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:i}function ya(r){return r=Kl(r),r!==null?Fi(r):null}function Fi(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=Fi(r);if(i!==null)return i;r=r.sibling}return null}var Bi=e.unstable_scheduleCallback,va=e.unstable_cancelCallback,Gl=e.unstable_shouldYield,Ah=e.unstable_requestPaint,qe=e.unstable_now,Ql=e.unstable_getCurrentPriorityLevel,qs=e.unstable_ImmediatePriority,Qr=e.unstable_UserBlockingPriority,wn=e.unstable_NormalPriority,_a=e.unstable_LowPriority,Yl=e.unstable_IdlePriority,Ks=null,cn=null;function Xl(r){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Ks,r,void 0,(r.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:Zl,wa=Math.log,Jl=Math.LN2;function Zl(r){return r>>>=0,r===0?32:31-(wa(r)/Jl|0)|0}var Ui=64,zi=4194304;function Yr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Gs(r,i){var l=r.pendingLanes;if(l===0)return 0;var h=0,p=r.suspendedLanes,v=r.pingedLanes,T=l&268435455;if(T!==0){var k=T&~p;k!==0?h=Yr(k):(v&=T,v!==0&&(h=Yr(v)))}else T=l&~p,T!==0?h=Yr(T):v!==0&&(h=Yr(v));if(h===0)return 0;if(i!==0&&i!==h&&(i&p)===0&&(p=h&-h,v=i&-i,p>=v||p===16&&(v&4194240)!==0))return i;if((h&4)!==0&&(h|=l&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=h;0<i;)l=31-Kt(i),p=1<<l,h|=r[l],i&=~p;return h}function Ch(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Er(r,i){for(var l=r.suspendedLanes,h=r.pingedLanes,p=r.expirationTimes,v=r.pendingLanes;0<v;){var T=31-Kt(v),k=1<<T,M=p[T];M===-1?((k&l)===0||(k&h)!==0)&&(p[T]=Ch(k,i)):M<=i&&(r.expiredLanes|=k),v&=~k}}function hn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Qs(){var r=Ui;return Ui<<=1,(Ui&4194240)===0&&(Ui=64),r}function Xr(r){for(var i=[],l=0;31>l;l++)i.push(r);return i}function Jr(r,i,l){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Kt(i),r[i]=l}function $e(r,i){var l=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var p=31-Kt(l),v=1<<p;i[p]=0,h[p]=-1,r[p]=-1,l&=~v}}function Zr(r,i){var l=r.entangledLanes|=i;for(r=r.entanglements;l;){var h=31-Kt(l),p=1<<h;p&i|r[h]&i&&(r[h]|=i),l&=~p}}var Ne=0;function es(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var eu,$i,tu,nu,ru,xa=!1,Xn=[],kt=null,jn=null,Ln=null,ts=new Map,xn=new Map,Jn=[],Ih="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function su(r,i){switch(r){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":ts.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":xn.delete(i.pointerId)}}function Zt(r,i,l,h,p,v){return r===null||r.nativeEvent!==v?(r={blockedOn:i,domEventName:l,eventSystemFlags:h,nativeEvent:v,targetContainers:[p]},i!==null&&(i=La(i),i!==null&&$i(i)),r):(r.eventSystemFlags|=h,i=r.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),r)}function Ph(r,i,l,h,p){switch(i){case"focusin":return kt=Zt(kt,r,i,l,h,p),!0;case"dragenter":return jn=Zt(jn,r,i,l,h,p),!0;case"mouseover":return Ln=Zt(Ln,r,i,l,h,p),!0;case"pointerover":var v=p.pointerId;return ts.set(v,Zt(ts.get(v)||null,r,i,l,h,p)),!0;case"gotpointercapture":return v=p.pointerId,xn.set(v,Zt(xn.get(v)||null,r,i,l,h,p)),!0}return!1}function iu(r){var i=ei(r.target);if(i!==null){var l=Dn(i);if(l!==null){if(i=l.tag,i===13){if(i=Ws(l),i!==null){r.blockedOn=i,ru(r.priority,function(){tu(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Tr(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var l=Hi(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);Us=h,l.target.dispatchEvent(h),Us=null}else return i=La(l),i!==null&&$i(i),r.blockedOn=l,!1;i.shift()}return!0}function Ys(r,i,l){Tr(r)&&l.delete(i)}function ou(){xa=!1,kt!==null&&Tr(kt)&&(kt=null),jn!==null&&Tr(jn)&&(jn=null),Ln!==null&&Tr(Ln)&&(Ln=null),ts.forEach(Ys),xn.forEach(Ys)}function Mn(r,i){r.blockedOn===i&&(r.blockedOn=null,xa||(xa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ou)))}function On(r){function i(p){return Mn(p,r)}if(0<Xn.length){Mn(Xn[0],r);for(var l=1;l<Xn.length;l++){var h=Xn[l];h.blockedOn===r&&(h.blockedOn=null)}}for(kt!==null&&Mn(kt,r),jn!==null&&Mn(jn,r),Ln!==null&&Mn(Ln,r),ts.forEach(i),xn.forEach(i),l=0;l<Jn.length;l++)h=Jn[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<Jn.length&&(l=Jn[0],l.blockedOn===null);)iu(l),l.blockedOn===null&&Jn.shift()}var Sr=Y.ReactCurrentBatchConfig,ns=!0;function Je(r,i,l,h){var p=Ne,v=Sr.transition;Sr.transition=null;try{Ne=1,Ea(r,i,l,h)}finally{Ne=p,Sr.transition=v}}function Rh(r,i,l,h){var p=Ne,v=Sr.transition;Sr.transition=null;try{Ne=4,Ea(r,i,l,h)}finally{Ne=p,Sr.transition=v}}function Ea(r,i,l,h){if(ns){var p=Hi(r,i,l,h);if(p===null)Bh(r,i,h,Xs,l),su(r,h);else if(Ph(p,r,i,l,h))h.stopPropagation();else if(su(r,h),i&4&&-1<Ih.indexOf(r)){for(;p!==null;){var v=La(p);if(v!==null&&eu(v),v=Hi(r,i,l,h),v===null&&Bh(r,i,h,Xs,l),v===p)break;p=v}p!==null&&h.stopPropagation()}else Bh(r,i,h,null,l)}}var Xs=null;function Hi(r,i,l,h){if(Xs=null,r=Di(h),r=ei(r),r!==null)if(i=Dn(r),i===null)r=null;else if(l=i.tag,l===13){if(r=Ws(i),r!==null)return r;r=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return Xs=r,null}function Ta(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ql()){case qs:return 1;case Qr:return 4;case wn:case _a:return 16;case Yl:return 536870912;default:return 16}default:return 16}}var dn=null,Wi=null,en=null;function Sa(){if(en)return en;var r,i=Wi,l=i.length,h,p="value"in dn?dn.value:dn.textContent,v=p.length;for(r=0;r<l&&i[r]===p[r];r++);var T=l-r;for(h=1;h<=T&&i[l-h]===p[v-h];h++);return en=p.slice(r,1<h?1-h:void 0)}function qi(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Zn(){return!0}function Aa(){return!1}function Nt(r){function i(l,h,p,v,T){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(l=r[k],this[k]=l?l(v):v[k]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Zn:Aa,this.isPropagationStopped=Aa,this}return ae(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),i}var Fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ki=Nt(Fn),er=ae({},Fn,{view:0,detail:0}),kh=Nt(er),Gi,Ar,rs,Js=ae({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==rs&&(rs&&r.type==="mousemove"?(Gi=r.screenX-rs.screenX,Ar=r.screenY-rs.screenY):Ar=Gi=0,rs=r),Gi)},movementY:function(r){return"movementY"in r?r.movementY:Ar}}),Qi=Nt(Js),Ca=ae({},Js,{dataTransfer:0}),au=Nt(Ca),Yi=ae({},er,{relatedTarget:0}),Xi=Nt(Yi),lu=ae({},Fn,{animationName:0,elapsedTime:0,pseudoElement:0}),Cr=Nt(lu),uu=ae({},Fn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),cu=Nt(uu),hu=ae({},Fn,{data:0}),Ia=Nt(hu),Ji={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fu(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=du[r])?!!i[r]:!1}function tr(){return fu}var c=ae({},er,{key:function(r){if(r.key){var i=Ji[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=qi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Gt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tr,charCode:function(r){return r.type==="keypress"?qi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?qi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),g=Nt(c),x=ae({},Js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=Nt(x),$=ae({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tr}),G=Nt($),oe=ae({},Fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ze=Nt(oe),_t=ae({},Js,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),be=Nt(_t),At=[9,13,27,32],dt=d&&"CompositionEvent"in window,En=null;d&&"documentMode"in document&&(En=document.documentMode);var fn=d&&"TextEvent"in window&&!En,Zs=d&&(!dt||En&&8<En&&11>=En),Zi=" ",Om=!1;function Fm(r,i){switch(r){case"keyup":return At.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var eo=!1;function mT(r,i){switch(r){case"compositionend":return Bm(i);case"keypress":return i.which!==32?null:(Om=!0,Zi);case"textInput":return r=i.data,r===Zi&&Om?null:r;default:return null}}function gT(r,i){if(eo)return r==="compositionend"||!dt&&Fm(r,i)?(r=Sa(),en=Wi=dn=null,eo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Zs&&i.locale!=="ko"?null:i.data;default:return null}}var yT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Um(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!yT[r.type]:i==="textarea"}function zm(r,i,l,h){Yn(h),i=vu(i,"onChange"),0<i.length&&(l=new Ki("onChange","change",null,l,h),r.push({event:l,listeners:i}))}var Pa=null,Ra=null;function vT(r){og(r,0)}function pu(r){var i=io(r);if(Pi(i))return r}function _T(r,i){if(r==="change")return i}var $m=!1;if(d){var Nh;if(d){var Vh="oninput"in document;if(!Vh){var Hm=document.createElement("div");Hm.setAttribute("oninput","return;"),Vh=typeof Hm.oninput=="function"}Nh=Vh}else Nh=!1;$m=Nh&&(!document.documentMode||9<document.documentMode)}function Wm(){Pa&&(Pa.detachEvent("onpropertychange",qm),Ra=Pa=null)}function qm(r){if(r.propertyName==="value"&&pu(Ra)){var i=[];zm(i,Ra,r,Di(r)),ma(vT,i)}}function wT(r,i,l){r==="focusin"?(Wm(),Pa=i,Ra=l,Pa.attachEvent("onpropertychange",qm)):r==="focusout"&&Wm()}function xT(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return pu(Ra)}function ET(r,i){if(r==="click")return pu(i)}function TT(r,i){if(r==="input"||r==="change")return pu(i)}function ST(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Bn=typeof Object.is=="function"?Object.is:ST;function ka(r,i){if(Bn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var l=Object.keys(r),h=Object.keys(i);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(i,p)||!Bn(r[p],i[p]))return!1}return!0}function Km(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Gm(r,i){var l=Km(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=i&&h>=i)return{node:l,offset:i-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Km(l)}}function Qm(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Qm(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Ym(){for(var r=window,i=Kr();i instanceof r.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)r=i.contentWindow;else break;i=Kr(r.document)}return i}function Dh(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function AT(r){var i=Ym(),l=r.focusedElem,h=r.selectionRange;if(i!==l&&l&&l.ownerDocument&&Qm(l.ownerDocument.documentElement,l)){if(h!==null&&Dh(l)){if(i=h.start,r=h.end,r===void 0&&(r=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(r,l.value.length);else if(r=(i=l.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var p=l.textContent.length,v=Math.min(h.start,p);h=h.end===void 0?v:Math.min(h.end,p),!r.extend&&v>h&&(p=h,h=v,v=p),p=Gm(l,v);var T=Gm(l,h);p&&T&&(r.rangeCount!==1||r.anchorNode!==p.node||r.anchorOffset!==p.offset||r.focusNode!==T.node||r.focusOffset!==T.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),r.removeAllRanges(),v>h?(r.addRange(i),r.extend(T.node,T.offset)):(i.setEnd(T.node,T.offset),r.addRange(i)))}}for(i=[],r=l;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)r=i[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var CT=d&&"documentMode"in document&&11>=document.documentMode,to=null,bh=null,Na=null,jh=!1;function Xm(r,i,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;jh||to==null||to!==Kr(h)||(h=to,"selectionStart"in h&&Dh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Na&&ka(Na,h)||(Na=h,h=vu(bh,"onSelect"),0<h.length&&(i=new Ki("onSelect","select",null,i,l),r.push({event:i,listeners:h}),i.target=to)))}function mu(r,i){var l={};return l[r.toLowerCase()]=i.toLowerCase(),l["Webkit"+r]="webkit"+i,l["Moz"+r]="moz"+i,l}var no={animationend:mu("Animation","AnimationEnd"),animationiteration:mu("Animation","AnimationIteration"),animationstart:mu("Animation","AnimationStart"),transitionend:mu("Transition","TransitionEnd")},Lh={},Jm={};d&&(Jm=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function gu(r){if(Lh[r])return Lh[r];if(!no[r])return r;var i=no[r],l;for(l in i)if(i.hasOwnProperty(l)&&l in Jm)return Lh[r]=i[l];return r}var Zm=gu("animationend"),eg=gu("animationiteration"),tg=gu("animationstart"),ng=gu("transitionend"),rg=new Map,sg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(r,i){rg.set(r,i),a(i,[r])}for(var Mh=0;Mh<sg.length;Mh++){var Oh=sg[Mh],IT=Oh.toLowerCase(),PT=Oh[0].toUpperCase()+Oh.slice(1);ss(IT,"on"+PT)}ss(Zm,"onAnimationEnd"),ss(eg,"onAnimationIteration"),ss(tg,"onAnimationStart"),ss("dblclick","onDoubleClick"),ss("focusin","onFocus"),ss("focusout","onBlur"),ss(ng,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Va="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Va));function ig(r,i,l){var h=r.type||"unknown-event";r.currentTarget=l,ql(h,i,void 0,r),r.currentTarget=null}function og(r,i){i=(i&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],p=h.event;h=h.listeners;e:{var v=void 0;if(i)for(var T=h.length-1;0<=T;T--){var k=h[T],M=k.instance,K=k.currentTarget;if(k=k.listener,M!==v&&p.isPropagationStopped())break e;ig(p,k,K),v=M}else for(T=0;T<h.length;T++){if(k=h[T],M=k.instance,K=k.currentTarget,k=k.listener,M!==v&&p.isPropagationStopped())break e;ig(p,k,K),v=M}}}if(Vn)throw r=ga,Vn=!1,ga=null,r}function Qe(r,i){var l=i[qh];l===void 0&&(l=i[qh]=new Set);var h=r+"__bubble";l.has(h)||(ag(i,r,2,!1),l.add(h))}function Fh(r,i,l){var h=0;i&&(h|=4),ag(l,r,h,i)}var yu="_reactListening"+Math.random().toString(36).slice(2);function Da(r){if(!r[yu]){r[yu]=!0,s.forEach(function(l){l!=="selectionchange"&&(RT.has(l)||Fh(l,!1,r),Fh(l,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[yu]||(i[yu]=!0,Fh("selectionchange",!1,i))}}function ag(r,i,l,h){switch(Ta(i)){case 1:var p=Je;break;case 4:p=Rh;break;default:p=Ea}l=p.bind(null,i,l,r),p=void 0,!Li||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),h?p!==void 0?r.addEventListener(i,l,{capture:!0,passive:p}):r.addEventListener(i,l,!0):p!==void 0?r.addEventListener(i,l,{passive:p}):r.addEventListener(i,l,!1)}function Bh(r,i,l,h,p){var v=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var k=h.stateNode.containerInfo;if(k===p||k.nodeType===8&&k.parentNode===p)break;if(T===4)for(T=h.return;T!==null;){var M=T.tag;if((M===3||M===4)&&(M=T.stateNode.containerInfo,M===p||M.nodeType===8&&M.parentNode===p))return;T=T.return}for(;k!==null;){if(T=ei(k),T===null)return;if(M=T.tag,M===5||M===6){h=v=T;continue e}k=k.parentNode}}h=h.return}ma(function(){var K=v,ne=Di(l),se=[];e:{var te=rg.get(r);if(te!==void 0){var le=Ki,fe=r;switch(r){case"keypress":if(qi(l)===0)break e;case"keydown":case"keyup":le=g;break;case"focusin":fe="focus",le=Xi;break;case"focusout":fe="blur",le=Xi;break;case"beforeblur":case"afterblur":le=Xi;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Qi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=au;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=G;break;case Zm:case eg:case tg:le=Cr;break;case ng:le=ze;break;case"scroll":le=kh;break;case"wheel":le=be;break;case"copy":case"cut":case"paste":le=cu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=S}var pe=(i&4)!==0,ut=!pe&&r==="scroll",H=pe?te!==null?te+"Capture":null:te;pe=[];for(var F=K,q;F!==null;){q=F;var ie=q.stateNode;if(q.tag===5&&ie!==null&&(q=ie,H!==null&&(ie=lt(F,H),ie!=null&&pe.push(ba(F,ie,q)))),ut)break;F=F.return}0<pe.length&&(te=new le(te,fe,null,l,ne),se.push({event:te,listeners:pe}))}}if((i&7)===0){e:{if(te=r==="mouseover"||r==="pointerover",le=r==="mouseout"||r==="pointerout",te&&l!==Us&&(fe=l.relatedTarget||l.fromElement)&&(ei(fe)||fe[Ir]))break e;if((le||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,le?(fe=l.relatedTarget||l.toElement,le=K,fe=fe?ei(fe):null,fe!==null&&(ut=Dn(fe),fe!==ut||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(le=null,fe=K),le!==fe)){if(pe=Qi,ie="onMouseLeave",H="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(pe=S,ie="onPointerLeave",H="onPointerEnter",F="pointer"),ut=le==null?te:io(le),q=fe==null?te:io(fe),te=new pe(ie,F+"leave",le,l,ne),te.target=ut,te.relatedTarget=q,ie=null,ei(ne)===K&&(pe=new pe(H,F+"enter",fe,l,ne),pe.target=q,pe.relatedTarget=ut,ie=pe),ut=ie,le&&fe)t:{for(pe=le,H=fe,F=0,q=pe;q;q=ro(q))F++;for(q=0,ie=H;ie;ie=ro(ie))q++;for(;0<F-q;)pe=ro(pe),F--;for(;0<q-F;)H=ro(H),q--;for(;F--;){if(pe===H||H!==null&&pe===H.alternate)break t;pe=ro(pe),H=ro(H)}pe=null}else pe=null;le!==null&&lg(se,te,le,pe,!1),fe!==null&&ut!==null&&lg(se,ut,fe,pe,!0)}}e:{if(te=K?io(K):window,le=te.nodeName&&te.nodeName.toLowerCase(),le==="select"||le==="input"&&te.type==="file")var me=_T;else if(Um(te))if($m)me=TT;else{me=xT;var _e=wT}else(le=te.nodeName)&&le.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(me=ET);if(me&&(me=me(r,K))){zm(se,me,l,ne);break e}_e&&_e(r,te,K),r==="focusout"&&(_e=te._wrapperState)&&_e.controlled&&te.type==="number"&&ki(te,"number",te.value)}switch(_e=K?io(K):window,r){case"focusin":(Um(_e)||_e.contentEditable==="true")&&(to=_e,bh=K,Na=null);break;case"focusout":Na=bh=to=null;break;case"mousedown":jh=!0;break;case"contextmenu":case"mouseup":case"dragend":jh=!1,Xm(se,l,ne);break;case"selectionchange":if(CT)break;case"keydown":case"keyup":Xm(se,l,ne)}var we;if(dt)e:{switch(r){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else eo?Fm(r,l)&&(Te="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Te="onCompositionStart");Te&&(Zs&&l.locale!=="ko"&&(eo||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&eo&&(we=Sa()):(dn=ne,Wi="value"in dn?dn.value:dn.textContent,eo=!0)),_e=vu(K,Te),0<_e.length&&(Te=new Ia(Te,r,null,l,ne),se.push({event:Te,listeners:_e}),we?Te.data=we:(we=Bm(l),we!==null&&(Te.data=we)))),(we=fn?mT(r,l):gT(r,l))&&(K=vu(K,"onBeforeInput"),0<K.length&&(ne=new Ia("onBeforeInput","beforeinput",null,l,ne),se.push({event:ne,listeners:K}),ne.data=we))}og(se,i)})}function ba(r,i,l){return{instance:r,listener:i,currentTarget:l}}function vu(r,i){for(var l=i+"Capture",h=[];r!==null;){var p=r,v=p.stateNode;p.tag===5&&v!==null&&(p=v,v=lt(r,l),v!=null&&h.unshift(ba(r,v,p)),v=lt(r,i),v!=null&&h.push(ba(r,v,p))),r=r.return}return h}function ro(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function lg(r,i,l,h,p){for(var v=i._reactName,T=[];l!==null&&l!==h;){var k=l,M=k.alternate,K=k.stateNode;if(M!==null&&M===h)break;k.tag===5&&K!==null&&(k=K,p?(M=lt(l,v),M!=null&&T.unshift(ba(l,M,k))):p||(M=lt(l,v),M!=null&&T.push(ba(l,M,k)))),l=l.return}T.length!==0&&r.push({event:i,listeners:T})}var kT=/\r\n?/g,NT=/\u0000|\uFFFD/g;function ug(r){return(typeof r=="string"?r:""+r).replace(kT,`
`).replace(NT,"")}function _u(r,i,l){if(i=ug(i),ug(r)!==i&&l)throw Error(t(425))}function wu(){}var Uh=null,zh=null;function $h(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Hh=typeof setTimeout=="function"?setTimeout:void 0,VT=typeof clearTimeout=="function"?clearTimeout:void 0,cg=typeof Promise=="function"?Promise:void 0,DT=typeof queueMicrotask=="function"?queueMicrotask:typeof cg<"u"?function(r){return cg.resolve(null).then(r).catch(bT)}:Hh;function bT(r){setTimeout(function(){throw r})}function Wh(r,i){var l=i,h=0;do{var p=l.nextSibling;if(r.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){r.removeChild(p),On(i);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);On(i)}function is(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function hg(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return r;i--}else l==="/$"&&i++}r=r.previousSibling}return null}var so=Math.random().toString(36).slice(2),nr="__reactFiber$"+so,ja="__reactProps$"+so,Ir="__reactContainer$"+so,qh="__reactEvents$"+so,jT="__reactListeners$"+so,LT="__reactHandles$"+so;function ei(r){var i=r[nr];if(i)return i;for(var l=r.parentNode;l;){if(i=l[Ir]||l[nr]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(r=hg(r);r!==null;){if(l=r[nr])return l;r=hg(r)}return i}r=l,l=r.parentNode}return null}function La(r){return r=r[nr]||r[Ir],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function io(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function xu(r){return r[ja]||null}var Kh=[],oo=-1;function os(r){return{current:r}}function Ye(r){0>oo||(r.current=Kh[oo],Kh[oo]=null,oo--)}function Ke(r,i){oo++,Kh[oo]=r.current,r.current=i}var as={},Ot=os(as),tn=os(!1),ti=as;function ao(r,i){var l=r.type.contextTypes;if(!l)return as;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var p={},v;for(v in l)p[v]=i[v];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=p),p}function nn(r){return r=r.childContextTypes,r!=null}function Eu(){Ye(tn),Ye(Ot)}function dg(r,i,l){if(Ot.current!==as)throw Error(t(168));Ke(Ot,i),Ke(tn,l)}function fg(r,i,l){var h=r.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in i))throw Error(t(108,Fe(r)||"Unknown",p));return ae({},l,h)}function Tu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||as,ti=Ot.current,Ke(Ot,r),Ke(tn,tn.current),!0}function pg(r,i,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=fg(r,i,ti),h.__reactInternalMemoizedMergedChildContext=r,Ye(tn),Ye(Ot),Ke(Ot,r)):Ye(tn),Ke(tn,l)}var Pr=null,Su=!1,Gh=!1;function mg(r){Pr===null?Pr=[r]:Pr.push(r)}function MT(r){Su=!0,mg(r)}function ls(){if(!Gh&&Pr!==null){Gh=!0;var r=0,i=Ne;try{var l=Pr;for(Ne=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}Pr=null,Su=!1}catch(p){throw Pr!==null&&(Pr=Pr.slice(r+1)),Bi(qs,ls),p}finally{Ne=i,Gh=!1}}return null}var lo=[],uo=0,Au=null,Cu=0,Tn=[],Sn=0,ni=null,Rr=1,kr="";function ri(r,i){lo[uo++]=Cu,lo[uo++]=Au,Au=r,Cu=i}function gg(r,i,l){Tn[Sn++]=Rr,Tn[Sn++]=kr,Tn[Sn++]=ni,ni=r;var h=Rr;r=kr;var p=32-Kt(h)-1;h&=~(1<<p),l+=1;var v=32-Kt(i)+p;if(30<v){var T=p-p%5;v=(h&(1<<T)-1).toString(32),h>>=T,p-=T,Rr=1<<32-Kt(i)+p|l<<p|h,kr=v+r}else Rr=1<<v|l<<p|h,kr=r}function Qh(r){r.return!==null&&(ri(r,1),gg(r,1,0))}function Yh(r){for(;r===Au;)Au=lo[--uo],lo[uo]=null,Cu=lo[--uo],lo[uo]=null;for(;r===ni;)ni=Tn[--Sn],Tn[Sn]=null,kr=Tn[--Sn],Tn[Sn]=null,Rr=Tn[--Sn],Tn[Sn]=null}var pn=null,mn=null,Ze=!1,Un=null;function yg(r,i){var l=Pn(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=r,i=r.deletions,i===null?(r.deletions=[l],r.flags|=16):i.push(l)}function vg(r,i){switch(r.tag){case 5:var l=r.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,pn=r,mn=is(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,pn=r,mn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=ni!==null?{id:Rr,overflow:kr}:null,r.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=Pn(18,null,null,0),l.stateNode=i,l.return=r,r.child=l,pn=r,mn=null,!0):!1;default:return!1}}function Xh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Jh(r){if(Ze){var i=mn;if(i){var l=i;if(!vg(r,i)){if(Xh(r))throw Error(t(418));i=is(l.nextSibling);var h=pn;i&&vg(r,i)?yg(h,l):(r.flags=r.flags&-4097|2,Ze=!1,pn=r)}}else{if(Xh(r))throw Error(t(418));r.flags=r.flags&-4097|2,Ze=!1,pn=r}}}function _g(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;pn=r}function Iu(r){if(r!==pn)return!1;if(!Ze)return _g(r),Ze=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!$h(r.type,r.memoizedProps)),i&&(i=mn)){if(Xh(r))throw wg(),Error(t(418));for(;i;)yg(r,i),i=is(i.nextSibling)}if(_g(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(i===0){mn=is(r.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}r=r.nextSibling}mn=null}}else mn=pn?is(r.stateNode.nextSibling):null;return!0}function wg(){for(var r=mn;r;)r=is(r.nextSibling)}function co(){mn=pn=null,Ze=!1}function Zh(r){Un===null?Un=[r]:Un.push(r)}var OT=Y.ReactCurrentBatchConfig;function Ma(r,i,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var p=h,v=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===v?i.ref:(i=function(T){var k=p.refs;T===null?delete k[v]:k[v]=T},i._stringRef=v,i)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function Pu(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function xg(r){var i=r._init;return i(r._payload)}function Eg(r){function i(H,F){if(r){var q=H.deletions;q===null?(H.deletions=[F],H.flags|=16):q.push(F)}}function l(H,F){if(!r)return null;for(;F!==null;)i(H,F),F=F.sibling;return null}function h(H,F){for(H=new Map;F!==null;)F.key!==null?H.set(F.key,F):H.set(F.index,F),F=F.sibling;return H}function p(H,F){return H=gs(H,F),H.index=0,H.sibling=null,H}function v(H,F,q){return H.index=q,r?(q=H.alternate,q!==null?(q=q.index,q<F?(H.flags|=2,F):q):(H.flags|=2,F)):(H.flags|=1048576,F)}function T(H){return r&&H.alternate===null&&(H.flags|=2),H}function k(H,F,q,ie){return F===null||F.tag!==6?(F=Hd(q,H.mode,ie),F.return=H,F):(F=p(F,q),F.return=H,F)}function M(H,F,q,ie){var me=q.type;return me===R?ne(H,F,q.props.children,ie,q.key):F!==null&&(F.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ce&&xg(me)===F.type)?(ie=p(F,q.props),ie.ref=Ma(H,F,q),ie.return=H,ie):(ie=Ju(q.type,q.key,q.props,null,H.mode,ie),ie.ref=Ma(H,F,q),ie.return=H,ie)}function K(H,F,q,ie){return F===null||F.tag!==4||F.stateNode.containerInfo!==q.containerInfo||F.stateNode.implementation!==q.implementation?(F=Wd(q,H.mode,ie),F.return=H,F):(F=p(F,q.children||[]),F.return=H,F)}function ne(H,F,q,ie,me){return F===null||F.tag!==7?(F=hi(q,H.mode,ie,me),F.return=H,F):(F=p(F,q),F.return=H,F)}function se(H,F,q){if(typeof F=="string"&&F!==""||typeof F=="number")return F=Hd(""+F,H.mode,q),F.return=H,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Q:return q=Ju(F.type,F.key,F.props,null,H.mode,q),q.ref=Ma(H,null,F),q.return=H,q;case ee:return F=Wd(F,H.mode,q),F.return=H,F;case Ce:var ie=F._init;return se(H,ie(F._payload),q)}if(vr(F)||he(F))return F=hi(F,H.mode,q,null),F.return=H,F;Pu(H,F)}return null}function te(H,F,q,ie){var me=F!==null?F.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return me!==null?null:k(H,F,""+q,ie);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case Q:return q.key===me?M(H,F,q,ie):null;case ee:return q.key===me?K(H,F,q,ie):null;case Ce:return me=q._init,te(H,F,me(q._payload),ie)}if(vr(q)||he(q))return me!==null?null:ne(H,F,q,ie,null);Pu(H,q)}return null}function le(H,F,q,ie,me){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return H=H.get(q)||null,k(F,H,""+ie,me);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case Q:return H=H.get(ie.key===null?q:ie.key)||null,M(F,H,ie,me);case ee:return H=H.get(ie.key===null?q:ie.key)||null,K(F,H,ie,me);case Ce:var _e=ie._init;return le(H,F,q,_e(ie._payload),me)}if(vr(ie)||he(ie))return H=H.get(q)||null,ne(F,H,ie,me,null);Pu(F,ie)}return null}function fe(H,F,q,ie){for(var me=null,_e=null,we=F,Te=F=0,Pt=null;we!==null&&Te<q.length;Te++){we.index>Te?(Pt=we,we=null):Pt=we.sibling;var Oe=te(H,we,q[Te],ie);if(Oe===null){we===null&&(we=Pt);break}r&&we&&Oe.alternate===null&&i(H,we),F=v(Oe,F,Te),_e===null?me=Oe:_e.sibling=Oe,_e=Oe,we=Pt}if(Te===q.length)return l(H,we),Ze&&ri(H,Te),me;if(we===null){for(;Te<q.length;Te++)we=se(H,q[Te],ie),we!==null&&(F=v(we,F,Te),_e===null?me=we:_e.sibling=we,_e=we);return Ze&&ri(H,Te),me}for(we=h(H,we);Te<q.length;Te++)Pt=le(we,H,Te,q[Te],ie),Pt!==null&&(r&&Pt.alternate!==null&&we.delete(Pt.key===null?Te:Pt.key),F=v(Pt,F,Te),_e===null?me=Pt:_e.sibling=Pt,_e=Pt);return r&&we.forEach(function(ys){return i(H,ys)}),Ze&&ri(H,Te),me}function pe(H,F,q,ie){var me=he(q);if(typeof me!="function")throw Error(t(150));if(q=me.call(q),q==null)throw Error(t(151));for(var _e=me=null,we=F,Te=F=0,Pt=null,Oe=q.next();we!==null&&!Oe.done;Te++,Oe=q.next()){we.index>Te?(Pt=we,we=null):Pt=we.sibling;var ys=te(H,we,Oe.value,ie);if(ys===null){we===null&&(we=Pt);break}r&&we&&ys.alternate===null&&i(H,we),F=v(ys,F,Te),_e===null?me=ys:_e.sibling=ys,_e=ys,we=Pt}if(Oe.done)return l(H,we),Ze&&ri(H,Te),me;if(we===null){for(;!Oe.done;Te++,Oe=q.next())Oe=se(H,Oe.value,ie),Oe!==null&&(F=v(Oe,F,Te),_e===null?me=Oe:_e.sibling=Oe,_e=Oe);return Ze&&ri(H,Te),me}for(we=h(H,we);!Oe.done;Te++,Oe=q.next())Oe=le(we,H,Te,Oe.value,ie),Oe!==null&&(r&&Oe.alternate!==null&&we.delete(Oe.key===null?Te:Oe.key),F=v(Oe,F,Te),_e===null?me=Oe:_e.sibling=Oe,_e=Oe);return r&&we.forEach(function(yS){return i(H,yS)}),Ze&&ri(H,Te),me}function ut(H,F,q,ie){if(typeof q=="object"&&q!==null&&q.type===R&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case Q:e:{for(var me=q.key,_e=F;_e!==null;){if(_e.key===me){if(me=q.type,me===R){if(_e.tag===7){l(H,_e.sibling),F=p(_e,q.props.children),F.return=H,H=F;break e}}else if(_e.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ce&&xg(me)===_e.type){l(H,_e.sibling),F=p(_e,q.props),F.ref=Ma(H,_e,q),F.return=H,H=F;break e}l(H,_e);break}else i(H,_e);_e=_e.sibling}q.type===R?(F=hi(q.props.children,H.mode,ie,q.key),F.return=H,H=F):(ie=Ju(q.type,q.key,q.props,null,H.mode,ie),ie.ref=Ma(H,F,q),ie.return=H,H=ie)}return T(H);case ee:e:{for(_e=q.key;F!==null;){if(F.key===_e)if(F.tag===4&&F.stateNode.containerInfo===q.containerInfo&&F.stateNode.implementation===q.implementation){l(H,F.sibling),F=p(F,q.children||[]),F.return=H,H=F;break e}else{l(H,F);break}else i(H,F);F=F.sibling}F=Wd(q,H.mode,ie),F.return=H,H=F}return T(H);case Ce:return _e=q._init,ut(H,F,_e(q._payload),ie)}if(vr(q))return fe(H,F,q,ie);if(he(q))return pe(H,F,q,ie);Pu(H,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,F!==null&&F.tag===6?(l(H,F.sibling),F=p(F,q),F.return=H,H=F):(l(H,F),F=Hd(q,H.mode,ie),F.return=H,H=F),T(H)):l(H,F)}return ut}var ho=Eg(!0),Tg=Eg(!1),Ru=os(null),ku=null,fo=null,ed=null;function td(){ed=fo=ku=null}function nd(r){var i=Ru.current;Ye(Ru),r._currentValue=i}function rd(r,i,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),r===l)break;r=r.return}}function po(r,i){ku=r,ed=fo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(rn=!0),r.firstContext=null)}function An(r){var i=r._currentValue;if(ed!==r)if(r={context:r,memoizedValue:i,next:null},fo===null){if(ku===null)throw Error(t(308));fo=r,ku.dependencies={lanes:0,firstContext:r}}else fo=fo.next=r;return i}var si=null;function sd(r){si===null?si=[r]:si.push(r)}function Sg(r,i,l,h){var p=i.interleaved;return p===null?(l.next=l,sd(i)):(l.next=p.next,p.next=l),i.interleaved=l,Nr(r,h)}function Nr(r,i){r.lanes|=i;var l=r.alternate;for(l!==null&&(l.lanes|=i),l=r,r=r.return;r!==null;)r.childLanes|=i,l=r.alternate,l!==null&&(l.childLanes|=i),l=r,r=r.return;return l.tag===3?l.stateNode:null}var us=!1;function id(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ag(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Vr(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function cs(r,i,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Me&2)!==0){var p=h.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),h.pending=i,Nr(r,l)}return p=h.interleaved,p===null?(i.next=i,sd(h)):(i.next=p.next,p.next=i),h.interleaved=i,Nr(r,l)}function Nu(r,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var h=i.lanes;h&=r.pendingLanes,l|=h,i.lanes=l,Zr(r,l)}}function Cg(r,i){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?p=v=T:v=v.next=T,l=l.next}while(l!==null);v===null?p=v=i:v=v.next=i}else p=v=i;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=i:r.next=i,l.lastBaseUpdate=i}function Vu(r,i,l,h){var p=r.updateQueue;us=!1;var v=p.firstBaseUpdate,T=p.lastBaseUpdate,k=p.shared.pending;if(k!==null){p.shared.pending=null;var M=k,K=M.next;M.next=null,T===null?v=K:T.next=K,T=M;var ne=r.alternate;ne!==null&&(ne=ne.updateQueue,k=ne.lastBaseUpdate,k!==T&&(k===null?ne.firstBaseUpdate=K:k.next=K,ne.lastBaseUpdate=M))}if(v!==null){var se=p.baseState;T=0,ne=K=M=null,k=v;do{var te=k.lane,le=k.eventTime;if((h&te)===te){ne!==null&&(ne=ne.next={eventTime:le,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var fe=r,pe=k;switch(te=i,le=l,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){se=fe.call(le,se,te);break e}se=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,te=typeof fe=="function"?fe.call(le,se,te):fe,te==null)break e;se=ae({},se,te);break e;case 2:us=!0}}k.callback!==null&&k.lane!==0&&(r.flags|=64,te=p.effects,te===null?p.effects=[k]:te.push(k))}else le={eventTime:le,lane:te,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ne===null?(K=ne=le,M=se):ne=ne.next=le,T|=te;if(k=k.next,k===null){if(k=p.shared.pending,k===null)break;te=k,k=te.next,te.next=null,p.lastBaseUpdate=te,p.shared.pending=null}}while(!0);if(ne===null&&(M=se),p.baseState=M,p.firstBaseUpdate=K,p.lastBaseUpdate=ne,i=p.shared.interleaved,i!==null){p=i;do T|=p.lane,p=p.next;while(p!==i)}else v===null&&(p.shared.lanes=0);ai|=T,r.lanes=T,r.memoizedState=se}}function Ig(r,i,l){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var h=r[i],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var Oa={},rr=os(Oa),Fa=os(Oa),Ba=os(Oa);function ii(r){if(r===Oa)throw Error(t(174));return r}function od(r,i){switch(Ke(Ba,i),Ke(Fa,r),Ke(rr,Oa),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:vt(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=vt(i,r)}Ye(rr),Ke(rr,i)}function mo(){Ye(rr),Ye(Fa),Ye(Ba)}function Pg(r){ii(Ba.current);var i=ii(rr.current),l=vt(i,r.type);i!==l&&(Ke(Fa,r),Ke(rr,l))}function ad(r){Fa.current===r&&(Ye(rr),Ye(Fa))}var tt=os(0);function Du(r){for(var i=r;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ld=[];function ud(){for(var r=0;r<ld.length;r++)ld[r]._workInProgressVersionPrimary=null;ld.length=0}var bu=Y.ReactCurrentDispatcher,cd=Y.ReactCurrentBatchConfig,oi=0,nt=null,wt=null,Ct=null,ju=!1,Ua=!1,za=0,FT=0;function Ft(){throw Error(t(321))}function hd(r,i){if(i===null)return!1;for(var l=0;l<i.length&&l<r.length;l++)if(!Bn(r[l],i[l]))return!1;return!0}function dd(r,i,l,h,p,v){if(oi=v,nt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,bu.current=r===null||r.memoizedState===null?$T:HT,r=l(h,p),Ua){v=0;do{if(Ua=!1,za=0,25<=v)throw Error(t(301));v+=1,Ct=wt=null,i.updateQueue=null,bu.current=WT,r=l(h,p)}while(Ua)}if(bu.current=Ou,i=wt!==null&&wt.next!==null,oi=0,Ct=wt=nt=null,ju=!1,i)throw Error(t(300));return r}function fd(){var r=za!==0;return za=0,r}function sr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?nt.memoizedState=Ct=r:Ct=Ct.next=r,Ct}function Cn(){if(wt===null){var r=nt.alternate;r=r!==null?r.memoizedState:null}else r=wt.next;var i=Ct===null?nt.memoizedState:Ct.next;if(i!==null)Ct=i,wt=r;else{if(r===null)throw Error(t(310));wt=r,r={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Ct===null?nt.memoizedState=Ct=r:Ct=Ct.next=r}return Ct}function $a(r,i){return typeof i=="function"?i(r):i}function pd(r){var i=Cn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=wt,p=h.baseQueue,v=l.pending;if(v!==null){if(p!==null){var T=p.next;p.next=v.next,v.next=T}h.baseQueue=p=v,l.pending=null}if(p!==null){v=p.next,h=h.baseState;var k=T=null,M=null,K=v;do{var ne=K.lane;if((oi&ne)===ne)M!==null&&(M=M.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),h=K.hasEagerState?K.eagerState:r(h,K.action);else{var se={lane:ne,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};M===null?(k=M=se,T=h):M=M.next=se,nt.lanes|=ne,ai|=ne}K=K.next}while(K!==null&&K!==v);M===null?T=h:M.next=k,Bn(h,i.memoizedState)||(rn=!0),i.memoizedState=h,i.baseState=T,i.baseQueue=M,l.lastRenderedState=h}if(r=l.interleaved,r!==null){p=r;do v=p.lane,nt.lanes|=v,ai|=v,p=p.next;while(p!==r)}else p===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function md(r){var i=Cn(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,p=l.pending,v=i.memoizedState;if(p!==null){l.pending=null;var T=p=p.next;do v=r(v,T.action),T=T.next;while(T!==p);Bn(v,i.memoizedState)||(rn=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),l.lastRenderedState=v}return[v,h]}function Rg(){}function kg(r,i){var l=nt,h=Cn(),p=i(),v=!Bn(h.memoizedState,p);if(v&&(h.memoizedState=p,rn=!0),h=h.queue,gd(Dg.bind(null,l,h,r),[r]),h.getSnapshot!==i||v||Ct!==null&&Ct.memoizedState.tag&1){if(l.flags|=2048,Ha(9,Vg.bind(null,l,h,p,i),void 0,null),It===null)throw Error(t(349));(oi&30)!==0||Ng(l,i,p)}return p}function Ng(r,i,l){r.flags|=16384,r={getSnapshot:i,value:l},i=nt.updateQueue,i===null?(i={lastEffect:null,stores:null},nt.updateQueue=i,i.stores=[r]):(l=i.stores,l===null?i.stores=[r]:l.push(r))}function Vg(r,i,l,h){i.value=l,i.getSnapshot=h,bg(i)&&jg(r)}function Dg(r,i,l){return l(function(){bg(i)&&jg(r)})}function bg(r){var i=r.getSnapshot;r=r.value;try{var l=i();return!Bn(r,l)}catch{return!0}}function jg(r){var i=Nr(r,1);i!==null&&Wn(i,r,1,-1)}function Lg(r){var i=sr();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:r},i.queue=r,r=r.dispatch=zT.bind(null,nt,r),[i.memoizedState,r]}function Ha(r,i,l,h){return r={tag:r,create:i,destroy:l,deps:h,next:null},i=nt.updateQueue,i===null?(i={lastEffect:null,stores:null},nt.updateQueue=i,i.lastEffect=r.next=r):(l=i.lastEffect,l===null?i.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,i.lastEffect=r)),r}function Mg(){return Cn().memoizedState}function Lu(r,i,l,h){var p=sr();nt.flags|=r,p.memoizedState=Ha(1|i,l,void 0,h===void 0?null:h)}function Mu(r,i,l,h){var p=Cn();h=h===void 0?null:h;var v=void 0;if(wt!==null){var T=wt.memoizedState;if(v=T.destroy,h!==null&&hd(h,T.deps)){p.memoizedState=Ha(i,l,v,h);return}}nt.flags|=r,p.memoizedState=Ha(1|i,l,v,h)}function Og(r,i){return Lu(8390656,8,r,i)}function gd(r,i){return Mu(2048,8,r,i)}function Fg(r,i){return Mu(4,2,r,i)}function Bg(r,i){return Mu(4,4,r,i)}function Ug(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function zg(r,i,l){return l=l!=null?l.concat([r]):null,Mu(4,4,Ug.bind(null,i,r),l)}function yd(){}function $g(r,i){var l=Cn();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&hd(i,h[1])?h[0]:(l.memoizedState=[r,i],r)}function Hg(r,i){var l=Cn();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&hd(i,h[1])?h[0]:(r=r(),l.memoizedState=[r,i],r)}function Wg(r,i,l){return(oi&21)===0?(r.baseState&&(r.baseState=!1,rn=!0),r.memoizedState=l):(Bn(l,i)||(l=Qs(),nt.lanes|=l,ai|=l,r.baseState=!0),i)}function BT(r,i){var l=Ne;Ne=l!==0&&4>l?l:4,r(!0);var h=cd.transition;cd.transition={};try{r(!1),i()}finally{Ne=l,cd.transition=h}}function qg(){return Cn().memoizedState}function UT(r,i,l){var h=ps(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Kg(r))Gg(i,l);else if(l=Sg(r,i,l,h),l!==null){var p=Yt();Wn(l,r,h,p),Qg(l,i,h)}}function zT(r,i,l){var h=ps(r),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Kg(r))Gg(i,p);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var T=i.lastRenderedState,k=v(T,l);if(p.hasEagerState=!0,p.eagerState=k,Bn(k,T)){var M=i.interleaved;M===null?(p.next=p,sd(i)):(p.next=M.next,M.next=p),i.interleaved=p;return}}catch{}finally{}l=Sg(r,i,p,h),l!==null&&(p=Yt(),Wn(l,r,h,p),Qg(l,i,h))}}function Kg(r){var i=r.alternate;return r===nt||i!==null&&i===nt}function Gg(r,i){Ua=ju=!0;var l=r.pending;l===null?i.next=i:(i.next=l.next,l.next=i),r.pending=i}function Qg(r,i,l){if((l&4194240)!==0){var h=i.lanes;h&=r.pendingLanes,l|=h,i.lanes=l,Zr(r,l)}}var Ou={readContext:An,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},$T={readContext:An,useCallback:function(r,i){return sr().memoizedState=[r,i===void 0?null:i],r},useContext:An,useEffect:Og,useImperativeHandle:function(r,i,l){return l=l!=null?l.concat([r]):null,Lu(4194308,4,Ug.bind(null,i,r),l)},useLayoutEffect:function(r,i){return Lu(4194308,4,r,i)},useInsertionEffect:function(r,i){return Lu(4,2,r,i)},useMemo:function(r,i){var l=sr();return i=i===void 0?null:i,r=r(),l.memoizedState=[r,i],r},useReducer:function(r,i,l){var h=sr();return i=l!==void 0?l(i):i,h.memoizedState=h.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},h.queue=r,r=r.dispatch=UT.bind(null,nt,r),[h.memoizedState,r]},useRef:function(r){var i=sr();return r={current:r},i.memoizedState=r},useState:Lg,useDebugValue:yd,useDeferredValue:function(r){return sr().memoizedState=r},useTransition:function(){var r=Lg(!1),i=r[0];return r=BT.bind(null,r[1]),sr().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,l){var h=nt,p=sr();if(Ze){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),It===null)throw Error(t(349));(oi&30)!==0||Ng(h,i,l)}p.memoizedState=l;var v={value:l,getSnapshot:i};return p.queue=v,Og(Dg.bind(null,h,v,r),[r]),h.flags|=2048,Ha(9,Vg.bind(null,h,v,l,i),void 0,null),l},useId:function(){var r=sr(),i=It.identifierPrefix;if(Ze){var l=kr,h=Rr;l=(h&~(1<<32-Kt(h)-1)).toString(32)+l,i=":"+i+"R"+l,l=za++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=FT++,i=":"+i+"r"+l.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},HT={readContext:An,useCallback:$g,useContext:An,useEffect:gd,useImperativeHandle:zg,useInsertionEffect:Fg,useLayoutEffect:Bg,useMemo:Hg,useReducer:pd,useRef:Mg,useState:function(){return pd($a)},useDebugValue:yd,useDeferredValue:function(r){var i=Cn();return Wg(i,wt.memoizedState,r)},useTransition:function(){var r=pd($a)[0],i=Cn().memoizedState;return[r,i]},useMutableSource:Rg,useSyncExternalStore:kg,useId:qg,unstable_isNewReconciler:!1},WT={readContext:An,useCallback:$g,useContext:An,useEffect:gd,useImperativeHandle:zg,useInsertionEffect:Fg,useLayoutEffect:Bg,useMemo:Hg,useReducer:md,useRef:Mg,useState:function(){return md($a)},useDebugValue:yd,useDeferredValue:function(r){var i=Cn();return wt===null?i.memoizedState=r:Wg(i,wt.memoizedState,r)},useTransition:function(){var r=md($a)[0],i=Cn().memoizedState;return[r,i]},useMutableSource:Rg,useSyncExternalStore:kg,useId:qg,unstable_isNewReconciler:!1};function zn(r,i){if(r&&r.defaultProps){i=ae({},i),r=r.defaultProps;for(var l in r)i[l]===void 0&&(i[l]=r[l]);return i}return i}function vd(r,i,l,h){i=r.memoizedState,l=l(h,i),l=l==null?i:ae({},i,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Fu={isMounted:function(r){return(r=r._reactInternals)?Dn(r)===r:!1},enqueueSetState:function(r,i,l){r=r._reactInternals;var h=Yt(),p=ps(r),v=Vr(h,p);v.payload=i,l!=null&&(v.callback=l),i=cs(r,v,p),i!==null&&(Wn(i,r,p,h),Nu(i,r,p))},enqueueReplaceState:function(r,i,l){r=r._reactInternals;var h=Yt(),p=ps(r),v=Vr(h,p);v.tag=1,v.payload=i,l!=null&&(v.callback=l),i=cs(r,v,p),i!==null&&(Wn(i,r,p,h),Nu(i,r,p))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var l=Yt(),h=ps(r),p=Vr(l,h);p.tag=2,i!=null&&(p.callback=i),i=cs(r,p,h),i!==null&&(Wn(i,r,h,l),Nu(i,r,h))}};function Yg(r,i,l,h,p,v,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,v,T):i.prototype&&i.prototype.isPureReactComponent?!ka(l,h)||!ka(p,v):!0}function Xg(r,i,l){var h=!1,p=as,v=i.contextType;return typeof v=="object"&&v!==null?v=An(v):(p=nn(i)?ti:Ot.current,h=i.contextTypes,v=(h=h!=null)?ao(r,p):as),i=new i(l,v),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Fu,r.stateNode=i,i._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=p,r.__reactInternalMemoizedMaskedChildContext=v),i}function Jg(r,i,l,h){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,h),i.state!==r&&Fu.enqueueReplaceState(i,i.state,null)}function _d(r,i,l,h){var p=r.stateNode;p.props=l,p.state=r.memoizedState,p.refs={},id(r);var v=i.contextType;typeof v=="object"&&v!==null?p.context=An(v):(v=nn(i)?ti:Ot.current,p.context=ao(r,v)),p.state=r.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(vd(r,i,v,l),p.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&Fu.enqueueReplaceState(p,p.state,null),Vu(r,l,p,h),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308)}function go(r,i){try{var l="",h=i;do l+=Ie(h),h=h.return;while(h);var p=l}catch(v){p=`
Error generating stack: `+v.message+`
`+v.stack}return{value:r,source:i,stack:p,digest:null}}function wd(r,i,l){return{value:r,source:null,stack:l??null,digest:i??null}}function xd(r,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var qT=typeof WeakMap=="function"?WeakMap:Map;function Zg(r,i,l){l=Vr(-1,l),l.tag=3,l.payload={element:null};var h=i.value;return l.callback=function(){qu||(qu=!0,Ld=h),xd(r,i)},l}function ey(r,i,l){l=Vr(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var p=i.value;l.payload=function(){return h(p)},l.callback=function(){xd(r,i)}}var v=r.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){xd(r,i),typeof h!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var T=i.stack;this.componentDidCatch(i.value,{componentStack:T!==null?T:""})}),l}function ty(r,i,l){var h=r.pingCache;if(h===null){h=r.pingCache=new qT;var p=new Set;h.set(i,p)}else p=h.get(i),p===void 0&&(p=new Set,h.set(i,p));p.has(l)||(p.add(l),r=oS.bind(null,r,i,l),i.then(r,r))}function ny(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function ry(r,i,l,h,p){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Vr(-1,1),i.tag=2,cs(l,i,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=p,r)}var KT=Y.ReactCurrentOwner,rn=!1;function Qt(r,i,l,h){i.child=r===null?Tg(i,null,l,h):ho(i,r.child,l,h)}function sy(r,i,l,h,p){l=l.render;var v=i.ref;return po(i,p),h=dd(r,i,l,h,v,p),l=fd(),r!==null&&!rn?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~p,Dr(r,i,p)):(Ze&&l&&Qh(i),i.flags|=1,Qt(r,i,h,p),i.child)}function iy(r,i,l,h,p){if(r===null){var v=l.type;return typeof v=="function"&&!$d(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=v,oy(r,i,v,h,p)):(r=Ju(l.type,null,h,i,i.mode,p),r.ref=i.ref,r.return=i,i.child=r)}if(v=r.child,(r.lanes&p)===0){var T=v.memoizedProps;if(l=l.compare,l=l!==null?l:ka,l(T,h)&&r.ref===i.ref)return Dr(r,i,p)}return i.flags|=1,r=gs(v,h),r.ref=i.ref,r.return=i,i.child=r}function oy(r,i,l,h,p){if(r!==null){var v=r.memoizedProps;if(ka(v,h)&&r.ref===i.ref)if(rn=!1,i.pendingProps=h=v,(r.lanes&p)!==0)(r.flags&131072)!==0&&(rn=!0);else return i.lanes=r.lanes,Dr(r,i,p)}return Ed(r,i,l,h,p)}function ay(r,i,l){var h=i.pendingProps,p=h.children,v=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(vo,gn),gn|=l;else{if((l&1073741824)===0)return r=v!==null?v.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,Ke(vo,gn),gn|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=v!==null?v.baseLanes:l,Ke(vo,gn),gn|=h}else v!==null?(h=v.baseLanes|l,i.memoizedState=null):h=l,Ke(vo,gn),gn|=h;return Qt(r,i,p,l),i.child}function ly(r,i){var l=i.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function Ed(r,i,l,h,p){var v=nn(l)?ti:Ot.current;return v=ao(i,v),po(i,p),l=dd(r,i,l,h,v,p),h=fd(),r!==null&&!rn?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~p,Dr(r,i,p)):(Ze&&h&&Qh(i),i.flags|=1,Qt(r,i,l,p),i.child)}function uy(r,i,l,h,p){if(nn(l)){var v=!0;Tu(i)}else v=!1;if(po(i,p),i.stateNode===null)Uu(r,i),Xg(i,l,h),_d(i,l,h,p),h=!0;else if(r===null){var T=i.stateNode,k=i.memoizedProps;T.props=k;var M=T.context,K=l.contextType;typeof K=="object"&&K!==null?K=An(K):(K=nn(l)?ti:Ot.current,K=ao(i,K));var ne=l.getDerivedStateFromProps,se=typeof ne=="function"||typeof T.getSnapshotBeforeUpdate=="function";se||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(k!==h||M!==K)&&Jg(i,T,h,K),us=!1;var te=i.memoizedState;T.state=te,Vu(i,h,T,p),M=i.memoizedState,k!==h||te!==M||tn.current||us?(typeof ne=="function"&&(vd(i,l,ne,h),M=i.memoizedState),(k=us||Yg(i,l,k,h,te,M,K))?(se||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(i.flags|=4194308)):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=M),T.props=h,T.state=M,T.context=K,h=k):(typeof T.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{T=i.stateNode,Ag(r,i),k=i.memoizedProps,K=i.type===i.elementType?k:zn(i.type,k),T.props=K,se=i.pendingProps,te=T.context,M=l.contextType,typeof M=="object"&&M!==null?M=An(M):(M=nn(l)?ti:Ot.current,M=ao(i,M));var le=l.getDerivedStateFromProps;(ne=typeof le=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(k!==se||te!==M)&&Jg(i,T,h,M),us=!1,te=i.memoizedState,T.state=te,Vu(i,h,T,p);var fe=i.memoizedState;k!==se||te!==fe||tn.current||us?(typeof le=="function"&&(vd(i,l,le,h),fe=i.memoizedState),(K=us||Yg(i,l,K,h,te,fe,M)||!1)?(ne||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(h,fe,M),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(h,fe,M)),typeof T.componentDidUpdate=="function"&&(i.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof T.componentDidUpdate!="function"||k===r.memoizedProps&&te===r.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&te===r.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=fe),T.props=h,T.state=fe,T.context=M,h=K):(typeof T.componentDidUpdate!="function"||k===r.memoizedProps&&te===r.memoizedState||(i.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&te===r.memoizedState||(i.flags|=1024),h=!1)}return Td(r,i,l,h,v,p)}function Td(r,i,l,h,p,v){ly(r,i);var T=(i.flags&128)!==0;if(!h&&!T)return p&&pg(i,l,!1),Dr(r,i,v);h=i.stateNode,KT.current=i;var k=T&&typeof l.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,r!==null&&T?(i.child=ho(i,r.child,null,v),i.child=ho(i,null,k,v)):Qt(r,i,k,v),i.memoizedState=h.state,p&&pg(i,l,!0),i.child}function cy(r){var i=r.stateNode;i.pendingContext?dg(r,i.pendingContext,i.pendingContext!==i.context):i.context&&dg(r,i.context,!1),od(r,i.containerInfo)}function hy(r,i,l,h,p){return co(),Zh(p),i.flags|=256,Qt(r,i,l,h),i.child}var Sd={dehydrated:null,treeContext:null,retryLane:0};function Ad(r){return{baseLanes:r,cachePool:null,transitions:null}}function dy(r,i,l){var h=i.pendingProps,p=tt.current,v=!1,T=(i.flags&128)!==0,k;if((k=T)||(k=r!==null&&r.memoizedState===null?!1:(p&2)!==0),k?(v=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(p|=1),Ke(tt,p&1),r===null)return Jh(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(T=h.children,r=h.fallback,v?(h=i.mode,v=i.child,T={mode:"hidden",children:T},(h&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=T):v=Zu(T,h,0,null),r=hi(r,h,l,null),v.return=i,r.return=i,v.sibling=r,i.child=v,i.child.memoizedState=Ad(l),i.memoizedState=Sd,r):Cd(i,T));if(p=r.memoizedState,p!==null&&(k=p.dehydrated,k!==null))return GT(r,i,T,h,k,p,l);if(v){v=h.fallback,T=i.mode,p=r.child,k=p.sibling;var M={mode:"hidden",children:h.children};return(T&1)===0&&i.child!==p?(h=i.child,h.childLanes=0,h.pendingProps=M,i.deletions=null):(h=gs(p,M),h.subtreeFlags=p.subtreeFlags&14680064),k!==null?v=gs(k,v):(v=hi(v,T,l,null),v.flags|=2),v.return=i,h.return=i,h.sibling=v,i.child=h,h=v,v=i.child,T=r.child.memoizedState,T=T===null?Ad(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},v.memoizedState=T,v.childLanes=r.childLanes&~l,i.memoizedState=Sd,h}return v=r.child,r=v.sibling,h=gs(v,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=l),h.return=i,h.sibling=null,r!==null&&(l=i.deletions,l===null?(i.deletions=[r],i.flags|=16):l.push(r)),i.child=h,i.memoizedState=null,h}function Cd(r,i){return i=Zu({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Bu(r,i,l,h){return h!==null&&Zh(h),ho(i,r.child,null,l),r=Cd(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function GT(r,i,l,h,p,v,T){if(l)return i.flags&256?(i.flags&=-257,h=wd(Error(t(422))),Bu(r,i,T,h)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(v=h.fallback,p=i.mode,h=Zu({mode:"visible",children:h.children},p,0,null),v=hi(v,p,T,null),v.flags|=2,h.return=i,v.return=i,h.sibling=v,i.child=h,(i.mode&1)!==0&&ho(i,r.child,null,T),i.child.memoizedState=Ad(T),i.memoizedState=Sd,v);if((i.mode&1)===0)return Bu(r,i,T,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var k=h.dgst;return h=k,v=Error(t(419)),h=wd(v,h,void 0),Bu(r,i,T,h)}if(k=(T&r.childLanes)!==0,rn||k){if(h=It,h!==null){switch(T&-T){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|T))!==0?0:p,p!==0&&p!==v.retryLane&&(v.retryLane=p,Nr(r,p),Wn(h,r,p,-1))}return zd(),h=wd(Error(t(421))),Bu(r,i,T,h)}return p.data==="$?"?(i.flags|=128,i.child=r.child,i=aS.bind(null,r),p._reactRetry=i,null):(r=v.treeContext,mn=is(p.nextSibling),pn=i,Ze=!0,Un=null,r!==null&&(Tn[Sn++]=Rr,Tn[Sn++]=kr,Tn[Sn++]=ni,Rr=r.id,kr=r.overflow,ni=i),i=Cd(i,h.children),i.flags|=4096,i)}function fy(r,i,l){r.lanes|=i;var h=r.alternate;h!==null&&(h.lanes|=i),rd(r.return,i,l)}function Id(r,i,l,h,p){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=l,v.tailMode=p)}function py(r,i,l){var h=i.pendingProps,p=h.revealOrder,v=h.tail;if(Qt(r,i,h.children,l),h=tt.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&fy(r,l,i);else if(r.tag===19)fy(r,l,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Ke(tt,h),(i.mode&1)===0)i.memoizedState=null;else switch(p){case"forwards":for(l=i.child,p=null;l!==null;)r=l.alternate,r!==null&&Du(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),Id(i,!1,p,l,v);break;case"backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(r=p.alternate,r!==null&&Du(r)===null){i.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}Id(i,!0,l,null,v);break;case"together":Id(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Uu(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function Dr(r,i,l){if(r!==null&&(i.dependencies=r.dependencies),ai|=i.lanes,(l&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,l=gs(r,r.pendingProps),i.child=l,l.return=i;r.sibling!==null;)r=r.sibling,l=l.sibling=gs(r,r.pendingProps),l.return=i;l.sibling=null}return i.child}function QT(r,i,l){switch(i.tag){case 3:cy(i),co();break;case 5:Pg(i);break;case 1:nn(i.type)&&Tu(i);break;case 4:od(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,p=i.memoizedProps.value;Ke(Ru,h._currentValue),h._currentValue=p;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(Ke(tt,tt.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?dy(r,i,l):(Ke(tt,tt.current&1),r=Dr(r,i,l),r!==null?r.sibling:null);Ke(tt,tt.current&1);break;case 19:if(h=(l&i.childLanes)!==0,(r.flags&128)!==0){if(h)return py(r,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ke(tt,tt.current),h)break;return null;case 22:case 23:return i.lanes=0,ay(r,i,l)}return Dr(r,i,l)}var my,Pd,gy,yy;my=function(r,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Pd=function(){},gy=function(r,i,l,h){var p=r.memoizedProps;if(p!==h){r=i.stateNode,ii(rr.current);var v=null;switch(l){case"input":p=Os(r,p),h=Os(r,h),v=[];break;case"select":p=ae({},p,{value:void 0}),h=ae({},h,{value:void 0}),v=[];break;case"textarea":p=ia(r,p),h=ia(r,h),v=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=wu)}ha(l,h);var T;l=null;for(K in p)if(!h.hasOwnProperty(K)&&p.hasOwnProperty(K)&&p[K]!=null)if(K==="style"){var k=p[K];for(T in k)k.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(o.hasOwnProperty(K)?v||(v=[]):(v=v||[]).push(K,null));for(K in h){var M=h[K];if(k=p!=null?p[K]:void 0,h.hasOwnProperty(K)&&M!==k&&(M!=null||k!=null))if(K==="style")if(k){for(T in k)!k.hasOwnProperty(T)||M&&M.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in M)M.hasOwnProperty(T)&&k[T]!==M[T]&&(l||(l={}),l[T]=M[T])}else l||(v||(v=[]),v.push(K,l)),l=M;else K==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,k=k?k.__html:void 0,M!=null&&k!==M&&(v=v||[]).push(K,M)):K==="children"?typeof M!="string"&&typeof M!="number"||(v=v||[]).push(K,""+M):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(o.hasOwnProperty(K)?(M!=null&&K==="onScroll"&&Qe("scroll",r),v||k===M||(v=[])):(v=v||[]).push(K,M))}l&&(v=v||[]).push("style",l);var K=v;(i.updateQueue=K)&&(i.flags|=4)}},yy=function(r,i,l,h){l!==h&&(i.flags|=4)};function Wa(r,i){if(!Ze)switch(r.tailMode){case"hidden":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Bt(r){var i=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(i)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=h,r.childLanes=l,i}function YT(r,i,l){var h=i.pendingProps;switch(Yh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(i),null;case 1:return nn(i.type)&&Eu(),Bt(i),null;case 3:return h=i.stateNode,mo(),Ye(tn),Ye(Ot),ud(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Iu(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Un!==null&&(Fd(Un),Un=null))),Pd(r,i),Bt(i),null;case 5:ad(i);var p=ii(Ba.current);if(l=i.type,r!==null&&i.stateNode!=null)gy(r,i,l,h,p),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return Bt(i),null}if(r=ii(rr.current),Iu(i)){h=i.stateNode,l=i.type;var v=i.memoizedProps;switch(h[nr]=i,h[ja]=v,r=(i.mode&1)!==0,l){case"dialog":Qe("cancel",h),Qe("close",h);break;case"iframe":case"object":case"embed":Qe("load",h);break;case"video":case"audio":for(p=0;p<Va.length;p++)Qe(Va[p],h);break;case"source":Qe("error",h);break;case"img":case"image":case"link":Qe("error",h),Qe("load",h);break;case"details":Qe("toggle",h);break;case"input":Ri(h,v),Qe("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},Qe("invalid",h);break;case"textarea":Ni(h,v),Qe("invalid",h)}ha(l,v),p=null;for(var T in v)if(v.hasOwnProperty(T)){var k=v[T];T==="children"?typeof k=="string"?h.textContent!==k&&(v.suppressHydrationWarning!==!0&&_u(h.textContent,k,r),p=["children",k]):typeof k=="number"&&h.textContent!==""+k&&(v.suppressHydrationWarning!==!0&&_u(h.textContent,k,r),p=["children",""+k]):o.hasOwnProperty(T)&&k!=null&&T==="onScroll"&&Qe("scroll",h)}switch(l){case"input":yr(h),Wl(h,v,!0);break;case"textarea":yr(h),oa(h);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(h.onclick=wu)}h=p,i.updateQueue=h,h!==null&&(i.flags|=4)}else{T=p.nodeType===9?p:p.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=yt(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=T.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=T.createElement(l,{is:h.is}):(r=T.createElement(l),l==="select"&&(T=r,h.multiple?T.multiple=!0:h.size&&(T.size=h.size))):r=T.createElementNS(r,l),r[nr]=i,r[ja]=h,my(r,i,!1,!1),i.stateNode=r;e:{switch(T=da(l,h),l){case"dialog":Qe("cancel",r),Qe("close",r),p=h;break;case"iframe":case"object":case"embed":Qe("load",r),p=h;break;case"video":case"audio":for(p=0;p<Va.length;p++)Qe(Va[p],r);p=h;break;case"source":Qe("error",r),p=h;break;case"img":case"image":case"link":Qe("error",r),Qe("load",r),p=h;break;case"details":Qe("toggle",r),p=h;break;case"input":Ri(r,h),p=Os(r,h),Qe("invalid",r);break;case"option":p=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},p=ae({},h,{value:void 0}),Qe("invalid",r);break;case"textarea":Ni(r,h),p=ia(r,h),Qe("invalid",r);break;default:p=h}ha(l,p),k=p;for(v in k)if(k.hasOwnProperty(v)){var M=k[v];v==="style"?ua(r,M):v==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&aa(r,M)):v==="children"?typeof M=="string"?(l!=="textarea"||M!=="")&&Gr(r,M):typeof M=="number"&&Gr(r,""+M):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?M!=null&&v==="onScroll"&&Qe("scroll",r):M!=null&&B(r,v,M,T))}switch(l){case"input":yr(r),Wl(r,h,!1);break;case"textarea":yr(r),oa(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Be(h.value));break;case"select":r.multiple=!!h.multiple,v=h.value,v!=null?_r(r,!!h.multiple,v,!1):h.defaultValue!=null&&_r(r,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(r.onclick=wu)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Bt(i),null;case 6:if(r&&i.stateNode!=null)yy(r,i,r.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(l=ii(Ba.current),ii(rr.current),Iu(i)){if(h=i.stateNode,l=i.memoizedProps,h[nr]=i,(v=h.nodeValue!==l)&&(r=pn,r!==null))switch(r.tag){case 3:_u(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&_u(h.nodeValue,l,(r.mode&1)!==0)}v&&(i.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[nr]=i,i.stateNode=h}return Bt(i),null;case 13:if(Ye(tt),h=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ze&&mn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)wg(),co(),i.flags|=98560,v=!1;else if(v=Iu(i),h!==null&&h.dehydrated!==null){if(r===null){if(!v)throw Error(t(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[nr]=i}else co(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Bt(i),v=!1}else Un!==null&&(Fd(Un),Un=null),v=!0;if(!v)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(tt.current&1)!==0?xt===0&&(xt=3):zd())),i.updateQueue!==null&&(i.flags|=4),Bt(i),null);case 4:return mo(),Pd(r,i),r===null&&Da(i.stateNode.containerInfo),Bt(i),null;case 10:return nd(i.type._context),Bt(i),null;case 17:return nn(i.type)&&Eu(),Bt(i),null;case 19:if(Ye(tt),v=i.memoizedState,v===null)return Bt(i),null;if(h=(i.flags&128)!==0,T=v.rendering,T===null)if(h)Wa(v,!1);else{if(xt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(T=Du(r),T!==null){for(i.flags|=128,Wa(v,!1),h=T.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=l,l=i.child;l!==null;)v=l,r=h,v.flags&=14680066,T=v.alternate,T===null?(v.childLanes=0,v.lanes=r,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=T.childLanes,v.lanes=T.lanes,v.child=T.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=T.memoizedProps,v.memoizedState=T.memoizedState,v.updateQueue=T.updateQueue,v.type=T.type,r=T.dependencies,v.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Ke(tt,tt.current&1|2),i.child}r=r.sibling}v.tail!==null&&qe()>_o&&(i.flags|=128,h=!0,Wa(v,!1),i.lanes=4194304)}else{if(!h)if(r=Du(T),r!==null){if(i.flags|=128,h=!0,l=r.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),Wa(v,!0),v.tail===null&&v.tailMode==="hidden"&&!T.alternate&&!Ze)return Bt(i),null}else 2*qe()-v.renderingStartTime>_o&&l!==1073741824&&(i.flags|=128,h=!0,Wa(v,!1),i.lanes=4194304);v.isBackwards?(T.sibling=i.child,i.child=T):(l=v.last,l!==null?l.sibling=T:i.child=T,v.last=T)}return v.tail!==null?(i=v.tail,v.rendering=i,v.tail=i.sibling,v.renderingStartTime=qe(),i.sibling=null,l=tt.current,Ke(tt,h?l&1|2:l&1),i):(Bt(i),null);case 22:case 23:return Ud(),h=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(gn&1073741824)!==0&&(Bt(i),i.subtreeFlags&6&&(i.flags|=8192)):Bt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function XT(r,i){switch(Yh(i),i.tag){case 1:return nn(i.type)&&Eu(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return mo(),Ye(tn),Ye(Ot),ud(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return ad(i),null;case 13:if(Ye(tt),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));co()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return Ye(tt),null;case 4:return mo(),null;case 10:return nd(i.type._context),null;case 22:case 23:return Ud(),null;case 24:return null;default:return null}}var zu=!1,Ut=!1,JT=typeof WeakSet=="function"?WeakSet:Set,de=null;function yo(r,i){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){ot(r,i,h)}else l.current=null}function Rd(r,i,l){try{l()}catch(h){ot(r,i,h)}}var vy=!1;function ZT(r,i){if(Uh=ns,r=Ym(),Dh(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var T=0,k=-1,M=-1,K=0,ne=0,se=r,te=null;t:for(;;){for(var le;se!==l||p!==0&&se.nodeType!==3||(k=T+p),se!==v||h!==0&&se.nodeType!==3||(M=T+h),se.nodeType===3&&(T+=se.nodeValue.length),(le=se.firstChild)!==null;)te=se,se=le;for(;;){if(se===r)break t;if(te===l&&++K===p&&(k=T),te===v&&++ne===h&&(M=T),(le=se.nextSibling)!==null)break;se=te,te=se.parentNode}se=le}l=k===-1||M===-1?null:{start:k,end:M}}else l=null}l=l||{start:0,end:0}}else l=null;for(zh={focusedElem:r,selectionRange:l},ns=!1,de=i;de!==null;)if(i=de,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,de=r;else for(;de!==null;){i=de;try{var fe=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,ut=fe.memoizedState,H=i.stateNode,F=H.getSnapshotBeforeUpdate(i.elementType===i.type?pe:zn(i.type,pe),ut);H.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var q=i.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){ot(i,i.return,ie)}if(r=i.sibling,r!==null){r.return=i.return,de=r;break}de=i.return}return fe=vy,vy=!1,fe}function qa(r,i,l){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&r)===r){var v=p.destroy;p.destroy=void 0,v!==void 0&&Rd(i,l,v)}p=p.next}while(p!==h)}}function $u(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==i)}}function kd(r){var i=r.ref;if(i!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof i=="function"?i(r):i.current=r}}function _y(r){var i=r.alternate;i!==null&&(r.alternate=null,_y(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[nr],delete i[ja],delete i[qh],delete i[jT],delete i[LT])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function wy(r){return r.tag===5||r.tag===3||r.tag===4}function xy(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||wy(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Nd(r,i,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(r,i):l.insertBefore(r,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(r,l)):(i=l,i.appendChild(r)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=wu));else if(h!==4&&(r=r.child,r!==null))for(Nd(r,i,l),r=r.sibling;r!==null;)Nd(r,i,l),r=r.sibling}function Vd(r,i,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?l.insertBefore(r,i):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Vd(r,i,l),r=r.sibling;r!==null;)Vd(r,i,l),r=r.sibling}var Vt=null,$n=!1;function hs(r,i,l){for(l=l.child;l!==null;)Ey(r,i,l),l=l.sibling}function Ey(r,i,l){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Ks,l)}catch{}switch(l.tag){case 5:Ut||yo(l,i);case 6:var h=Vt,p=$n;Vt=null,hs(r,i,l),Vt=h,$n=p,Vt!==null&&($n?(r=Vt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):Vt.removeChild(l.stateNode));break;case 18:Vt!==null&&($n?(r=Vt,l=l.stateNode,r.nodeType===8?Wh(r.parentNode,l):r.nodeType===1&&Wh(r,l),On(r)):Wh(Vt,l.stateNode));break;case 4:h=Vt,p=$n,Vt=l.stateNode.containerInfo,$n=!0,hs(r,i,l),Vt=h,$n=p;break;case 0:case 11:case 14:case 15:if(!Ut&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var v=p,T=v.destroy;v=v.tag,T!==void 0&&((v&2)!==0||(v&4)!==0)&&Rd(l,i,T),p=p.next}while(p!==h)}hs(r,i,l);break;case 1:if(!Ut&&(yo(l,i),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(k){ot(l,i,k)}hs(r,i,l);break;case 21:hs(r,i,l);break;case 22:l.mode&1?(Ut=(h=Ut)||l.memoizedState!==null,hs(r,i,l),Ut=h):hs(r,i,l);break;default:hs(r,i,l)}}function Ty(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new JT),i.forEach(function(h){var p=lS.bind(null,r,h);l.has(h)||(l.add(h),h.then(p,p))})}}function Hn(r,i){var l=i.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var v=r,T=i,k=T;e:for(;k!==null;){switch(k.tag){case 5:Vt=k.stateNode,$n=!1;break e;case 3:Vt=k.stateNode.containerInfo,$n=!0;break e;case 4:Vt=k.stateNode.containerInfo,$n=!0;break e}k=k.return}if(Vt===null)throw Error(t(160));Ey(v,T,p),Vt=null,$n=!1;var M=p.alternate;M!==null&&(M.return=null),p.return=null}catch(K){ot(p,i,K)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Sy(i,r),i=i.sibling}function Sy(r,i){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Hn(i,r),ir(r),h&4){try{qa(3,r,r.return),$u(3,r)}catch(pe){ot(r,r.return,pe)}try{qa(5,r,r.return)}catch(pe){ot(r,r.return,pe)}}break;case 1:Hn(i,r),ir(r),h&512&&l!==null&&yo(l,l.return);break;case 5:if(Hn(i,r),ir(r),h&512&&l!==null&&yo(l,l.return),r.flags&32){var p=r.stateNode;try{Gr(p,"")}catch(pe){ot(r,r.return,pe)}}if(h&4&&(p=r.stateNode,p!=null)){var v=r.memoizedProps,T=l!==null?l.memoizedProps:v,k=r.type,M=r.updateQueue;if(r.updateQueue=null,M!==null)try{k==="input"&&v.type==="radio"&&v.name!=null&&ra(p,v),da(k,T);var K=da(k,v);for(T=0;T<M.length;T+=2){var ne=M[T],se=M[T+1];ne==="style"?ua(p,se):ne==="dangerouslySetInnerHTML"?aa(p,se):ne==="children"?Gr(p,se):B(p,ne,se,K)}switch(k){case"input":sa(p,v);break;case"textarea":Vi(p,v);break;case"select":var te=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!v.multiple;var le=v.value;le!=null?_r(p,!!v.multiple,le,!1):te!==!!v.multiple&&(v.defaultValue!=null?_r(p,!!v.multiple,v.defaultValue,!0):_r(p,!!v.multiple,v.multiple?[]:"",!1))}p[ja]=v}catch(pe){ot(r,r.return,pe)}}break;case 6:if(Hn(i,r),ir(r),h&4){if(r.stateNode===null)throw Error(t(162));p=r.stateNode,v=r.memoizedProps;try{p.nodeValue=v}catch(pe){ot(r,r.return,pe)}}break;case 3:if(Hn(i,r),ir(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{On(i.containerInfo)}catch(pe){ot(r,r.return,pe)}break;case 4:Hn(i,r),ir(r);break;case 13:Hn(i,r),ir(r),p=r.child,p.flags&8192&&(v=p.memoizedState!==null,p.stateNode.isHidden=v,!v||p.alternate!==null&&p.alternate.memoizedState!==null||(jd=qe())),h&4&&Ty(r);break;case 22:if(ne=l!==null&&l.memoizedState!==null,r.mode&1?(Ut=(K=Ut)||ne,Hn(i,r),Ut=K):Hn(i,r),ir(r),h&8192){if(K=r.memoizedState!==null,(r.stateNode.isHidden=K)&&!ne&&(r.mode&1)!==0)for(de=r,ne=r.child;ne!==null;){for(se=de=ne;de!==null;){switch(te=de,le=te.child,te.tag){case 0:case 11:case 14:case 15:qa(4,te,te.return);break;case 1:yo(te,te.return);var fe=te.stateNode;if(typeof fe.componentWillUnmount=="function"){h=te,l=te.return;try{i=h,fe.props=i.memoizedProps,fe.state=i.memoizedState,fe.componentWillUnmount()}catch(pe){ot(h,l,pe)}}break;case 5:yo(te,te.return);break;case 22:if(te.memoizedState!==null){Iy(se);continue}}le!==null?(le.return=te,de=le):Iy(se)}ne=ne.sibling}e:for(ne=null,se=r;;){if(se.tag===5){if(ne===null){ne=se;try{p=se.stateNode,K?(v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(k=se.stateNode,M=se.memoizedProps.style,T=M!=null&&M.hasOwnProperty("display")?M.display:null,k.style.display=la("display",T))}catch(pe){ot(r,r.return,pe)}}}else if(se.tag===6){if(ne===null)try{se.stateNode.nodeValue=K?"":se.memoizedProps}catch(pe){ot(r,r.return,pe)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===r)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===r)break e;for(;se.sibling===null;){if(se.return===null||se.return===r)break e;ne===se&&(ne=null),se=se.return}ne===se&&(ne=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:Hn(i,r),ir(r),h&4&&Ty(r);break;case 21:break;default:Hn(i,r),ir(r)}}function ir(r){var i=r.flags;if(i&2){try{e:{for(var l=r.return;l!==null;){if(wy(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(Gr(p,""),h.flags&=-33);var v=xy(r);Vd(r,v,p);break;case 3:case 4:var T=h.stateNode.containerInfo,k=xy(r);Nd(r,k,T);break;default:throw Error(t(161))}}catch(M){ot(r,r.return,M)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function eS(r,i,l){de=r,Ay(r)}function Ay(r,i,l){for(var h=(r.mode&1)!==0;de!==null;){var p=de,v=p.child;if(p.tag===22&&h){var T=p.memoizedState!==null||zu;if(!T){var k=p.alternate,M=k!==null&&k.memoizedState!==null||Ut;k=zu;var K=Ut;if(zu=T,(Ut=M)&&!K)for(de=p;de!==null;)T=de,M=T.child,T.tag===22&&T.memoizedState!==null?Py(p):M!==null?(M.return=T,de=M):Py(p);for(;v!==null;)de=v,Ay(v),v=v.sibling;de=p,zu=k,Ut=K}Cy(r)}else(p.subtreeFlags&8772)!==0&&v!==null?(v.return=p,de=v):Cy(r)}}function Cy(r){for(;de!==null;){var i=de;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ut||$u(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!Ut)if(l===null)h.componentDidMount();else{var p=i.elementType===i.type?l.memoizedProps:zn(i.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var v=i.updateQueue;v!==null&&Ig(i,v,h);break;case 3:var T=i.updateQueue;if(T!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}Ig(i,T,l)}break;case 5:var k=i.stateNode;if(l===null&&i.flags&4){l=k;var M=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&l.focus();break;case"img":M.src&&(l.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var K=i.alternate;if(K!==null){var ne=K.memoizedState;if(ne!==null){var se=ne.dehydrated;se!==null&&On(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ut||i.flags&512&&kd(i)}catch(te){ot(i,i.return,te)}}if(i===r){de=null;break}if(l=i.sibling,l!==null){l.return=i.return,de=l;break}de=i.return}}function Iy(r){for(;de!==null;){var i=de;if(i===r){de=null;break}var l=i.sibling;if(l!==null){l.return=i.return,de=l;break}de=i.return}}function Py(r){for(;de!==null;){var i=de;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{$u(4,i)}catch(M){ot(i,l,M)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var p=i.return;try{h.componentDidMount()}catch(M){ot(i,p,M)}}var v=i.return;try{kd(i)}catch(M){ot(i,v,M)}break;case 5:var T=i.return;try{kd(i)}catch(M){ot(i,T,M)}}}catch(M){ot(i,i.return,M)}if(i===r){de=null;break}var k=i.sibling;if(k!==null){k.return=i.return,de=k;break}de=i.return}}var tS=Math.ceil,Hu=Y.ReactCurrentDispatcher,Dd=Y.ReactCurrentOwner,In=Y.ReactCurrentBatchConfig,Me=0,It=null,ft=null,Dt=0,gn=0,vo=os(0),xt=0,Ka=null,ai=0,Wu=0,bd=0,Ga=null,sn=null,jd=0,_o=1/0,br=null,qu=!1,Ld=null,ds=null,Ku=!1,fs=null,Gu=0,Qa=0,Md=null,Qu=-1,Yu=0;function Yt(){return(Me&6)!==0?qe():Qu!==-1?Qu:Qu=qe()}function ps(r){return(r.mode&1)===0?1:(Me&2)!==0&&Dt!==0?Dt&-Dt:OT.transition!==null?(Yu===0&&(Yu=Qs()),Yu):(r=Ne,r!==0||(r=window.event,r=r===void 0?16:Ta(r.type)),r)}function Wn(r,i,l,h){if(50<Qa)throw Qa=0,Md=null,Error(t(185));Jr(r,l,h),((Me&2)===0||r!==It)&&(r===It&&((Me&2)===0&&(Wu|=l),xt===4&&ms(r,Dt)),on(r,h),l===1&&Me===0&&(i.mode&1)===0&&(_o=qe()+500,Su&&ls()))}function on(r,i){var l=r.callbackNode;Er(r,i);var h=Gs(r,r===It?Dt:0);if(h===0)l!==null&&va(l),r.callbackNode=null,r.callbackPriority=0;else if(i=h&-h,r.callbackPriority!==i){if(l!=null&&va(l),i===1)r.tag===0?MT(ky.bind(null,r)):mg(ky.bind(null,r)),DT(function(){(Me&6)===0&&ls()}),l=null;else{switch(es(h)){case 1:l=qs;break;case 4:l=Qr;break;case 16:l=wn;break;case 536870912:l=Yl;break;default:l=wn}l=Oy(l,Ry.bind(null,r))}r.callbackPriority=i,r.callbackNode=l}}function Ry(r,i){if(Qu=-1,Yu=0,(Me&6)!==0)throw Error(t(327));var l=r.callbackNode;if(wo()&&r.callbackNode!==l)return null;var h=Gs(r,r===It?Dt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||i)i=Xu(r,h);else{i=h;var p=Me;Me|=2;var v=Vy();(It!==r||Dt!==i)&&(br=null,_o=qe()+500,ui(r,i));do try{sS();break}catch(k){Ny(r,k)}while(!0);td(),Hu.current=v,Me=p,ft!==null?i=0:(It=null,Dt=0,i=xt)}if(i!==0){if(i===2&&(p=hn(r),p!==0&&(h=p,i=Od(r,p))),i===1)throw l=Ka,ui(r,0),ms(r,h),on(r,qe()),l;if(i===6)ms(r,h);else{if(p=r.current.alternate,(h&30)===0&&!nS(p)&&(i=Xu(r,h),i===2&&(v=hn(r),v!==0&&(h=v,i=Od(r,v))),i===1))throw l=Ka,ui(r,0),ms(r,h),on(r,qe()),l;switch(r.finishedWork=p,r.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:ci(r,sn,br);break;case 3:if(ms(r,h),(h&130023424)===h&&(i=jd+500-qe(),10<i)){if(Gs(r,0)!==0)break;if(p=r.suspendedLanes,(p&h)!==h){Yt(),r.pingedLanes|=r.suspendedLanes&p;break}r.timeoutHandle=Hh(ci.bind(null,r,sn,br),i);break}ci(r,sn,br);break;case 4:if(ms(r,h),(h&4194240)===h)break;for(i=r.eventTimes,p=-1;0<h;){var T=31-Kt(h);v=1<<T,T=i[T],T>p&&(p=T),h&=~v}if(h=p,h=qe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*tS(h/1960))-h,10<h){r.timeoutHandle=Hh(ci.bind(null,r,sn,br),h);break}ci(r,sn,br);break;case 5:ci(r,sn,br);break;default:throw Error(t(329))}}}return on(r,qe()),r.callbackNode===l?Ry.bind(null,r):null}function Od(r,i){var l=Ga;return r.current.memoizedState.isDehydrated&&(ui(r,i).flags|=256),r=Xu(r,i),r!==2&&(i=sn,sn=l,i!==null&&Fd(i)),r}function Fd(r){sn===null?sn=r:sn.push.apply(sn,r)}function nS(r){for(var i=r;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],v=p.getSnapshot;p=p.value;try{if(!Bn(v(),p))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ms(r,i){for(i&=~bd,i&=~Wu,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var l=31-Kt(i),h=1<<l;r[l]=-1,i&=~h}}function ky(r){if((Me&6)!==0)throw Error(t(327));wo();var i=Gs(r,0);if((i&1)===0)return on(r,qe()),null;var l=Xu(r,i);if(r.tag!==0&&l===2){var h=hn(r);h!==0&&(i=h,l=Od(r,h))}if(l===1)throw l=Ka,ui(r,0),ms(r,i),on(r,qe()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,ci(r,sn,br),on(r,qe()),null}function Bd(r,i){var l=Me;Me|=1;try{return r(i)}finally{Me=l,Me===0&&(_o=qe()+500,Su&&ls())}}function li(r){fs!==null&&fs.tag===0&&(Me&6)===0&&wo();var i=Me;Me|=1;var l=In.transition,h=Ne;try{if(In.transition=null,Ne=1,r)return r()}finally{Ne=h,In.transition=l,Me=i,(Me&6)===0&&ls()}}function Ud(){gn=vo.current,Ye(vo)}function ui(r,i){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,VT(l)),ft!==null)for(l=ft.return;l!==null;){var h=l;switch(Yh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Eu();break;case 3:mo(),Ye(tn),Ye(Ot),ud();break;case 5:ad(h);break;case 4:mo();break;case 13:Ye(tt);break;case 19:Ye(tt);break;case 10:nd(h.type._context);break;case 22:case 23:Ud()}l=l.return}if(It=r,ft=r=gs(r.current,null),Dt=gn=i,xt=0,Ka=null,bd=Wu=ai=0,sn=Ga=null,si!==null){for(i=0;i<si.length;i++)if(l=si[i],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,v=l.pending;if(v!==null){var T=v.next;v.next=p,h.next=T}l.pending=h}si=null}return r}function Ny(r,i){do{var l=ft;try{if(td(),bu.current=Ou,ju){for(var h=nt.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}ju=!1}if(oi=0,Ct=wt=nt=null,Ua=!1,za=0,Dd.current=null,l===null||l.return===null){xt=1,Ka=i,ft=null;break}e:{var v=r,T=l.return,k=l,M=i;if(i=Dt,k.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var K=M,ne=k,se=ne.tag;if((ne.mode&1)===0&&(se===0||se===11||se===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var le=ny(T);if(le!==null){le.flags&=-257,ry(le,T,k,v,i),le.mode&1&&ty(v,K,i),i=le,M=K;var fe=i.updateQueue;if(fe===null){var pe=new Set;pe.add(M),i.updateQueue=pe}else fe.add(M);break e}else{if((i&1)===0){ty(v,K,i),zd();break e}M=Error(t(426))}}else if(Ze&&k.mode&1){var ut=ny(T);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),ry(ut,T,k,v,i),Zh(go(M,k));break e}}v=M=go(M,k),xt!==4&&(xt=2),Ga===null?Ga=[v]:Ga.push(v),v=T;do{switch(v.tag){case 3:v.flags|=65536,i&=-i,v.lanes|=i;var H=Zg(v,M,i);Cg(v,H);break e;case 1:k=M;var F=v.type,q=v.stateNode;if((v.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(ds===null||!ds.has(q)))){v.flags|=65536,i&=-i,v.lanes|=i;var ie=ey(v,k,i);Cg(v,ie);break e}}v=v.return}while(v!==null)}by(l)}catch(me){i=me,ft===l&&l!==null&&(ft=l=l.return);continue}break}while(!0)}function Vy(){var r=Hu.current;return Hu.current=Ou,r===null?Ou:r}function zd(){(xt===0||xt===3||xt===2)&&(xt=4),It===null||(ai&268435455)===0&&(Wu&268435455)===0||ms(It,Dt)}function Xu(r,i){var l=Me;Me|=2;var h=Vy();(It!==r||Dt!==i)&&(br=null,ui(r,i));do try{rS();break}catch(p){Ny(r,p)}while(!0);if(td(),Me=l,Hu.current=h,ft!==null)throw Error(t(261));return It=null,Dt=0,xt}function rS(){for(;ft!==null;)Dy(ft)}function sS(){for(;ft!==null&&!Gl();)Dy(ft)}function Dy(r){var i=My(r.alternate,r,gn);r.memoizedProps=r.pendingProps,i===null?by(r):ft=i,Dd.current=null}function by(r){var i=r;do{var l=i.alternate;if(r=i.return,(i.flags&32768)===0){if(l=YT(l,i,gn),l!==null){ft=l;return}}else{if(l=XT(l,i),l!==null){l.flags&=32767,ft=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{xt=6,ft=null;return}}if(i=i.sibling,i!==null){ft=i;return}ft=i=r}while(i!==null);xt===0&&(xt=5)}function ci(r,i,l){var h=Ne,p=In.transition;try{In.transition=null,Ne=1,iS(r,i,l,h)}finally{In.transition=p,Ne=h}return null}function iS(r,i,l,h){do wo();while(fs!==null);if((Me&6)!==0)throw Error(t(327));l=r.finishedWork;var p=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var v=l.lanes|l.childLanes;if($e(r,v),r===It&&(ft=It=null,Dt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Ku||(Ku=!0,Oy(wn,function(){return wo(),null})),v=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||v){v=In.transition,In.transition=null;var T=Ne;Ne=1;var k=Me;Me|=4,Dd.current=null,ZT(r,l),Sy(l,r),AT(zh),ns=!!Uh,zh=Uh=null,r.current=l,eS(l),Ah(),Me=k,Ne=T,In.transition=v}else r.current=l;if(Ku&&(Ku=!1,fs=r,Gu=p),v=r.pendingLanes,v===0&&(ds=null),Xl(l.stateNode),on(r,qe()),i!==null)for(h=r.onRecoverableError,l=0;l<i.length;l++)p=i[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(qu)throw qu=!1,r=Ld,Ld=null,r;return(Gu&1)!==0&&r.tag!==0&&wo(),v=r.pendingLanes,(v&1)!==0?r===Md?Qa++:(Qa=0,Md=r):Qa=0,ls(),null}function wo(){if(fs!==null){var r=es(Gu),i=In.transition,l=Ne;try{if(In.transition=null,Ne=16>r?16:r,fs===null)var h=!1;else{if(r=fs,fs=null,Gu=0,(Me&6)!==0)throw Error(t(331));var p=Me;for(Me|=4,de=r.current;de!==null;){var v=de,T=v.child;if((de.flags&16)!==0){var k=v.deletions;if(k!==null){for(var M=0;M<k.length;M++){var K=k[M];for(de=K;de!==null;){var ne=de;switch(ne.tag){case 0:case 11:case 15:qa(8,ne,v)}var se=ne.child;if(se!==null)se.return=ne,de=se;else for(;de!==null;){ne=de;var te=ne.sibling,le=ne.return;if(_y(ne),ne===K){de=null;break}if(te!==null){te.return=le,de=te;break}de=le}}}var fe=v.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var ut=pe.sibling;pe.sibling=null,pe=ut}while(pe!==null)}}de=v}}if((v.subtreeFlags&2064)!==0&&T!==null)T.return=v,de=T;else e:for(;de!==null;){if(v=de,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:qa(9,v,v.return)}var H=v.sibling;if(H!==null){H.return=v.return,de=H;break e}de=v.return}}var F=r.current;for(de=F;de!==null;){T=de;var q=T.child;if((T.subtreeFlags&2064)!==0&&q!==null)q.return=T,de=q;else e:for(T=F;de!==null;){if(k=de,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:$u(9,k)}}catch(me){ot(k,k.return,me)}if(k===T){de=null;break e}var ie=k.sibling;if(ie!==null){ie.return=k.return,de=ie;break e}de=k.return}}if(Me=p,ls(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Ks,r)}catch{}h=!0}return h}finally{Ne=l,In.transition=i}}return!1}function jy(r,i,l){i=go(l,i),i=Zg(r,i,1),r=cs(r,i,1),i=Yt(),r!==null&&(Jr(r,1,i),on(r,i))}function ot(r,i,l){if(r.tag===3)jy(r,r,l);else for(;i!==null;){if(i.tag===3){jy(i,r,l);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ds===null||!ds.has(h))){r=go(l,r),r=ey(i,r,1),i=cs(i,r,1),r=Yt(),i!==null&&(Jr(i,1,r),on(i,r));break}}i=i.return}}function oS(r,i,l){var h=r.pingCache;h!==null&&h.delete(i),i=Yt(),r.pingedLanes|=r.suspendedLanes&l,It===r&&(Dt&l)===l&&(xt===4||xt===3&&(Dt&130023424)===Dt&&500>qe()-jd?ui(r,0):bd|=l),on(r,i)}function Ly(r,i){i===0&&((r.mode&1)===0?i=1:(i=zi,zi<<=1,(zi&130023424)===0&&(zi=4194304)));var l=Yt();r=Nr(r,i),r!==null&&(Jr(r,i,l),on(r,l))}function aS(r){var i=r.memoizedState,l=0;i!==null&&(l=i.retryLane),Ly(r,l)}function lS(r,i){var l=0;switch(r.tag){case 13:var h=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),Ly(r,l)}var My;My=function(r,i,l){if(r!==null)if(r.memoizedProps!==i.pendingProps||tn.current)rn=!0;else{if((r.lanes&l)===0&&(i.flags&128)===0)return rn=!1,QT(r,i,l);rn=(r.flags&131072)!==0}else rn=!1,Ze&&(i.flags&1048576)!==0&&gg(i,Cu,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;Uu(r,i),r=i.pendingProps;var p=ao(i,Ot.current);po(i,l),p=dd(null,i,h,r,p,l);var v=fd();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,nn(h)?(v=!0,Tu(i)):v=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,id(i),p.updater=Fu,i.stateNode=p,p._reactInternals=i,_d(i,h,r,l),i=Td(null,i,h,!0,v,l)):(i.tag=0,Ze&&v&&Qh(i),Qt(null,i,p,l),i=i.child),i;case 16:h=i.elementType;e:{switch(Uu(r,i),r=i.pendingProps,p=h._init,h=p(h._payload),i.type=h,p=i.tag=cS(h),r=zn(h,r),p){case 0:i=Ed(null,i,h,r,l);break e;case 1:i=uy(null,i,h,r,l);break e;case 11:i=sy(null,i,h,r,l);break e;case 14:i=iy(null,i,h,zn(h.type,r),l);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:zn(h,p),Ed(r,i,h,p,l);case 1:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:zn(h,p),uy(r,i,h,p,l);case 3:e:{if(cy(i),r===null)throw Error(t(387));h=i.pendingProps,v=i.memoizedState,p=v.element,Ag(r,i),Vu(i,h,null,l);var T=i.memoizedState;if(h=T.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){p=go(Error(t(423)),i),i=hy(r,i,h,l,p);break e}else if(h!==p){p=go(Error(t(424)),i),i=hy(r,i,h,l,p);break e}else for(mn=is(i.stateNode.containerInfo.firstChild),pn=i,Ze=!0,Un=null,l=Tg(i,null,h,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(co(),h===p){i=Dr(r,i,l);break e}Qt(r,i,h,l)}i=i.child}return i;case 5:return Pg(i),r===null&&Jh(i),h=i.type,p=i.pendingProps,v=r!==null?r.memoizedProps:null,T=p.children,$h(h,p)?T=null:v!==null&&$h(h,v)&&(i.flags|=32),ly(r,i),Qt(r,i,T,l),i.child;case 6:return r===null&&Jh(i),null;case 13:return dy(r,i,l);case 4:return od(i,i.stateNode.containerInfo),h=i.pendingProps,r===null?i.child=ho(i,null,h,l):Qt(r,i,h,l),i.child;case 11:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:zn(h,p),sy(r,i,h,p,l);case 7:return Qt(r,i,i.pendingProps,l),i.child;case 8:return Qt(r,i,i.pendingProps.children,l),i.child;case 12:return Qt(r,i,i.pendingProps.children,l),i.child;case 10:e:{if(h=i.type._context,p=i.pendingProps,v=i.memoizedProps,T=p.value,Ke(Ru,h._currentValue),h._currentValue=T,v!==null)if(Bn(v.value,T)){if(v.children===p.children&&!tn.current){i=Dr(r,i,l);break e}}else for(v=i.child,v!==null&&(v.return=i);v!==null;){var k=v.dependencies;if(k!==null){T=v.child;for(var M=k.firstContext;M!==null;){if(M.context===h){if(v.tag===1){M=Vr(-1,l&-l),M.tag=2;var K=v.updateQueue;if(K!==null){K=K.shared;var ne=K.pending;ne===null?M.next=M:(M.next=ne.next,ne.next=M),K.pending=M}}v.lanes|=l,M=v.alternate,M!==null&&(M.lanes|=l),rd(v.return,l,i),k.lanes|=l;break}M=M.next}}else if(v.tag===10)T=v.type===i.type?null:v.child;else if(v.tag===18){if(T=v.return,T===null)throw Error(t(341));T.lanes|=l,k=T.alternate,k!==null&&(k.lanes|=l),rd(T,l,i),T=v.sibling}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===i){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}Qt(r,i,p.children,l),i=i.child}return i;case 9:return p=i.type,h=i.pendingProps.children,po(i,l),p=An(p),h=h(p),i.flags|=1,Qt(r,i,h,l),i.child;case 14:return h=i.type,p=zn(h,i.pendingProps),p=zn(h.type,p),iy(r,i,h,p,l);case 15:return oy(r,i,i.type,i.pendingProps,l);case 17:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:zn(h,p),Uu(r,i),i.tag=1,nn(h)?(r=!0,Tu(i)):r=!1,po(i,l),Xg(i,h,p),_d(i,h,p,l),Td(null,i,h,!0,r,l);case 19:return py(r,i,l);case 22:return ay(r,i,l)}throw Error(t(156,i.tag))};function Oy(r,i){return Bi(r,i)}function uS(r,i,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(r,i,l,h){return new uS(r,i,l,h)}function $d(r){return r=r.prototype,!(!r||!r.isReactComponent)}function cS(r){if(typeof r=="function")return $d(r)?1:0;if(r!=null){if(r=r.$$typeof,r===U)return 11;if(r===gt)return 14}return 2}function gs(r,i){var l=r.alternate;return l===null?(l=Pn(r.tag,i,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=i,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,i=r.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function Ju(r,i,l,h,p,v){var T=2;if(h=r,typeof r=="function")$d(r)&&(T=1);else if(typeof r=="string")T=5;else e:switch(r){case R:return hi(l.children,p,v,i);case C:T=8,p|=8;break;case I:return r=Pn(12,l,i,p|2),r.elementType=I,r.lanes=v,r;case D:return r=Pn(13,l,i,p),r.elementType=D,r.lanes=v,r;case He:return r=Pn(19,l,i,p),r.elementType=He,r.lanes=v,r;case ye:return Zu(l,p,v,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case b:T=10;break e;case O:T=9;break e;case U:T=11;break e;case gt:T=14;break e;case Ce:T=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=Pn(T,l,i,p),i.elementType=r,i.type=h,i.lanes=v,i}function hi(r,i,l,h){return r=Pn(7,r,h,i),r.lanes=l,r}function Zu(r,i,l,h){return r=Pn(22,r,h,i),r.elementType=ye,r.lanes=l,r.stateNode={isHidden:!1},r}function Hd(r,i,l){return r=Pn(6,r,null,i),r.lanes=l,r}function Wd(r,i,l){return i=Pn(4,r.children!==null?r.children:[],r.key,i),i.lanes=l,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function hS(r,i,l,h,p){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xr(0),this.expirationTimes=Xr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xr(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function qd(r,i,l,h,p,v,T,k,M){return r=new hS(r,i,l,k,M),i===1?(i=1,v===!0&&(i|=8)):i=0,v=Pn(3,null,null,i),r.current=v,v.stateNode=r,v.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},id(v),r}function dS(r,i,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ee,key:h==null?null:""+h,children:r,containerInfo:i,implementation:l}}function Fy(r){if(!r)return as;r=r._reactInternals;e:{if(Dn(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(nn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(nn(l))return fg(r,l,i)}return i}function By(r,i,l,h,p,v,T,k,M){return r=qd(l,h,!0,r,p,v,T,k,M),r.context=Fy(null),l=r.current,h=Yt(),p=ps(l),v=Vr(h,p),v.callback=i??null,cs(l,v,p),r.current.lanes=p,Jr(r,p,h),on(r,h),r}function ec(r,i,l,h){var p=i.current,v=Yt(),T=ps(p);return l=Fy(l),i.context===null?i.context=l:i.pendingContext=l,i=Vr(v,T),i.payload={element:r},h=h===void 0?null:h,h!==null&&(i.callback=h),r=cs(p,i,T),r!==null&&(Wn(r,p,T,v),Nu(r,p,T)),T}function tc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Uy(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<i?l:i}}function Kd(r,i){Uy(r,i),(r=r.alternate)&&Uy(r,i)}function fS(){return null}var zy=typeof reportError=="function"?reportError:function(r){console.error(r)};function Gd(r){this._internalRoot=r}nc.prototype.render=Gd.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));ec(r,i,null,null)},nc.prototype.unmount=Gd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;li(function(){ec(null,r,null,null)}),i[Ir]=null}};function nc(r){this._internalRoot=r}nc.prototype.unstable_scheduleHydration=function(r){if(r){var i=nu();r={blockedOn:null,target:r,priority:i};for(var l=0;l<Jn.length&&i!==0&&i<Jn[l].priority;l++);Jn.splice(l,0,r),l===0&&iu(r)}};function Qd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function rc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function $y(){}function pS(r,i,l,h,p){if(p){if(typeof h=="function"){var v=h;h=function(){var K=tc(T);v.call(K)}}var T=By(i,h,r,0,null,!1,!1,"",$y);return r._reactRootContainer=T,r[Ir]=T.current,Da(r.nodeType===8?r.parentNode:r),li(),T}for(;p=r.lastChild;)r.removeChild(p);if(typeof h=="function"){var k=h;h=function(){var K=tc(M);k.call(K)}}var M=qd(r,0,!1,null,null,!1,!1,"",$y);return r._reactRootContainer=M,r[Ir]=M.current,Da(r.nodeType===8?r.parentNode:r),li(function(){ec(i,M,l,h)}),M}function sc(r,i,l,h,p){var v=l._reactRootContainer;if(v){var T=v;if(typeof p=="function"){var k=p;p=function(){var M=tc(T);k.call(M)}}ec(i,T,r,p)}else T=pS(l,i,r,p,h);return tc(T)}eu=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var l=Yr(i.pendingLanes);l!==0&&(Zr(i,l|1),on(i,qe()),(Me&6)===0&&(_o=qe()+500,ls()))}break;case 13:li(function(){var h=Nr(r,1);if(h!==null){var p=Yt();Wn(h,r,1,p)}}),Kd(r,1)}},$i=function(r){if(r.tag===13){var i=Nr(r,134217728);if(i!==null){var l=Yt();Wn(i,r,134217728,l)}Kd(r,134217728)}},tu=function(r){if(r.tag===13){var i=ps(r),l=Nr(r,i);if(l!==null){var h=Yt();Wn(l,r,i,h)}Kd(r,i)}},nu=function(){return Ne},ru=function(r,i){var l=Ne;try{return Ne=r,i()}finally{Ne=l}},bi=function(r,i,l){switch(i){case"input":if(sa(r,l),i=l.name,l.type==="radio"&&i!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var h=l[i];if(h!==r&&h.form===r.form){var p=xu(h);if(!p)throw Error(t(90));Pi(h),sa(h,p)}}}break;case"textarea":Vi(r,l);break;case"select":i=l.value,i!=null&&_r(r,!!l.multiple,i,!1)}},zs=Bd,pa=li;var mS={usingClientEntryPoint:!1,Events:[La,io,xu,Yn,fa,Bd]},Ya={findFiberByHostInstance:ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gS={bundleType:Ya.bundleType,version:Ya.version,rendererPackageName:Ya.rendererPackageName,rendererConfig:Ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ya(r),r===null?null:r.stateNode},findFiberByHostInstance:Ya.findFiberByHostInstance||fS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{Ks=ic.inject(gS),cn=ic}catch{}}return an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mS,an.createPortal=function(r,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qd(i))throw Error(t(200));return dS(r,i,null,l)},an.createRoot=function(r,i){if(!Qd(r))throw Error(t(299));var l=!1,h="",p=zy;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=qd(r,1,!1,null,null,l,!1,h,p),r[Ir]=i.current,Da(r.nodeType===8?r.parentNode:r),new Gd(i)},an.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ya(i),r=r===null?null:r.stateNode,r},an.flushSync=function(r){return li(r)},an.hydrate=function(r,i,l){if(!rc(i))throw Error(t(200));return sc(null,r,i,!0,l)},an.hydrateRoot=function(r,i,l){if(!Qd(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,v="",T=zy;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),i=By(i,null,r,1,l??null,p,!1,v,T),r[Ir]=i.current,Da(r),h)for(r=0;r<h.length;r++)l=h[r],p=l._getVersion,p=p(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,p]:i.mutableSourceEagerHydrationData.push(l,p);return new nc(i)},an.render=function(r,i,l){if(!rc(i))throw Error(t(200));return sc(null,r,i,!1,l)},an.unmountComponentAtNode=function(r){if(!rc(r))throw Error(t(40));return r._reactRootContainer?(li(function(){sc(null,null,r,!1,function(){r._reactRootContainer=null,r[Ir]=null})}),!0):!1},an.unstable_batchedUpdates=Bd,an.unstable_renderSubtreeIntoContainer=function(r,i,l,h){if(!rc(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return sc(r,i,l,!1,h)},an.version="18.3.1-next-f1338f8080-20240426",an}var Xy;function AS(){if(Xy)return Jd.exports;Xy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jd.exports=SS(),Jd.exports}var Jy;function CS(){if(Jy)return oc;Jy=1;var n=AS();return oc.createRoot=n.createRoot,oc.hydrateRoot=n.hydrateRoot,oc}var IS=CS();const PS="/EcommerceCw/assets/sofaHero-CS3_frxv.jpg",RS="/EcommerceCw/assets/living-room-B8yrP2e1.jpg",kS="/EcommerceCw/assets/kitchen-BNj0Y2X4.jpg";var Ja={},Zy;function NS(){if(Zy)return Ja;Zy=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.parse=u,Ja.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function u(E,A){const P=new a,N=E.length;if(N<2)return P;const V=(A==null?void 0:A.decode)||y;let L=0;do{const W=E.indexOf("=",L);if(W===-1)break;const B=E.indexOf(";",L),Y=B===-1?N:B;if(W>Y){L=E.lastIndexOf(";",W-1)+1;continue}const Q=d(E,L,W),ee=f(E,W,Q),R=E.slice(Q,ee);if(P[R]===void 0){let C=d(E,W+1,Y),I=f(E,Y,C);const b=V(E.slice(C,I));P[R]=b}L=Y+1}while(L<N);return P}function d(E,A,P){do{const N=E.charCodeAt(A);if(N!==32&&N!==9)return A}while(++A<P);return P}function f(E,A,P){for(;A>P;){const N=E.charCodeAt(--A);if(N!==32&&N!==9)return A+1}return P}function m(E,A,P){const N=(P==null?void 0:P.encode)||encodeURIComponent;if(!n.test(E))throw new TypeError(`argument name is invalid: ${E}`);const V=N(A);if(!e.test(V))throw new TypeError(`argument val is invalid: ${A}`);let L=E+"="+V;if(!P)return L;if(P.maxAge!==void 0){if(!Number.isInteger(P.maxAge))throw new TypeError(`option maxAge is invalid: ${P.maxAge}`);L+="; Max-Age="+P.maxAge}if(P.domain){if(!t.test(P.domain))throw new TypeError(`option domain is invalid: ${P.domain}`);L+="; Domain="+P.domain}if(P.path){if(!s.test(P.path))throw new TypeError(`option path is invalid: ${P.path}`);L+="; Path="+P.path}if(P.expires){if(!w(P.expires)||!Number.isFinite(P.expires.valueOf()))throw new TypeError(`option expires is invalid: ${P.expires}`);L+="; Expires="+P.expires.toUTCString()}if(P.httpOnly&&(L+="; HttpOnly"),P.secure&&(L+="; Secure"),P.partitioned&&(L+="; Partitioned"),P.priority)switch(typeof P.priority=="string"?P.priority.toLowerCase():void 0){case"low":L+="; Priority=Low";break;case"medium":L+="; Priority=Medium";break;case"high":L+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${P.priority}`)}if(P.sameSite)switch(typeof P.sameSite=="string"?P.sameSite.toLowerCase():P.sameSite){case!0:case"strict":L+="; SameSite=Strict";break;case"lax":L+="; SameSite=Lax";break;case"none":L+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${P.sameSite}`)}return L}function y(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function w(E){return o.call(E)==="[object Date]"}return Ja}NS();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ev="popstate";function VS(n={}){function e(s,o){let{pathname:a,search:u,hash:d}=s.location;return Sf("",{pathname:a,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:ml(o)}return bS(e,t,null,n)}function st(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function fr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DS(){return Math.random().toString(36).substring(2,10)}function tv(n,e){return{usr:n.state,key:n.key,idx:e}}function Sf(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Wo(e):e,state:t,key:e&&e.key||s||DS()}}function ml({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Wo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function bS(n,e,t,s={}){let{window:o=document.defaultView,v5Compat:a=!1}=s,u=o.history,d="POP",f=null,m=y();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function y(){return(u.state||{idx:null}).idx}function w(){d="POP";let V=y(),L=V==null?null:V-m;m=V,f&&f({action:d,location:N.location,delta:L})}function E(V,L){d="PUSH";let W=Sf(N.location,V,L);m=y()+1;let B=tv(W,m),Y=N.createHref(W);try{u.pushState(B,"",Y)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;o.location.assign(Y)}a&&f&&f({action:d,location:N.location,delta:1})}function A(V,L){d="REPLACE";let W=Sf(N.location,V,L);m=y();let B=tv(W,m),Y=N.createHref(W);u.replaceState(B,"",Y),a&&f&&f({action:d,location:N.location,delta:0})}function P(V){let L=o.location.origin!=="null"?o.location.origin:o.location.href,W=typeof V=="string"?V:ml(V);return W=W.replace(/ $/,"%20"),st(L,`No window.location.(origin|href) available to create URL for href: ${W}`),new URL(W,L)}let N={get action(){return d},get location(){return n(o,u)},listen(V){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(ev,w),f=V,()=>{o.removeEventListener(ev,w),f=null}},createHref(V){return e(o,V)},createURL:P,encodeLocation(V){let L=P(V);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:E,replace:A,go(V){return u.go(V)}};return N}function N_(n,e,t="/"){return jS(n,e,t,!1)}function jS(n,e,t,s){let o=typeof e=="string"?Wo(e):e,a=Cs(o.pathname||"/",t);if(a==null)return null;let u=V_(n);LS(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let m=KS(a);d=WS(u[f],m,s)}return d}function V_(n,e=[],t=[],s=""){let o=(a,u,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(st(f.relativePath.startsWith(s),`Absolute route path "${f.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(s.length));let m=Lr([s,f.relativePath]),y=t.concat(f);a.children&&a.children.length>0&&(st(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),V_(a.children,e,y,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:$S(m,a.index),routesMeta:y})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,u);else for(let f of D_(a.path))o(a,u,f)}),e}function D_(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return o?[a,""]:[a];let u=D_(s.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),o&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function LS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:HS(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var MS=/^:[\w-]+$/,OS=3,FS=2,BS=1,US=10,zS=-2,nv=n=>n==="*";function $S(n,e){let t=n.split("/"),s=t.length;return t.some(nv)&&(s+=zS),e&&(s+=FS),t.filter(o=>!nv(o)).reduce((o,a)=>o+(MS.test(a)?OS:a===""?BS:US),s)}function HS(n,e){return n.length===e.length&&n.slice(0,-1).every((s,o)=>s===e[o])?n[n.length-1]-e[e.length-1]:0}function WS(n,e,t=!1){let{routesMeta:s}=n,o={},a="/",u=[];for(let d=0;d<s.length;++d){let f=s[d],m=d===s.length-1,y=a==="/"?e:e.slice(a.length)||"/",w=Pc({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},y),E=f.route;if(!w&&m&&t&&!s[s.length-1].route.index&&(w=Pc({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},y)),!w)return null;Object.assign(o,w.params),u.push({params:o,pathname:Lr([a,w.pathname]),pathnameBase:XS(Lr([a,w.pathnameBase])),route:E}),w.pathnameBase!=="/"&&(a=Lr([a,w.pathnameBase]))}return u}function Pc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=qS(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:s.reduce((m,{paramName:y,isOptional:w},E)=>{if(y==="*"){let P=d[E]||"";u=a.slice(0,a.length-P.length).replace(/(.)\/+$/,"$1")}const A=d[E];return w&&!A?m[y]=void 0:m[y]=(A||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function qS(n,e=!1,t=!0){fr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(s.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function KS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Cs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function GS(n,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof n=="string"?Wo(n):n;return{pathname:t?t.startsWith("/")?t:QS(t,e):e,search:JS(s),hash:ZS(o)}}function QS(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function tf(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function b_(n){let e=YS(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function j_(n,e,t,s=!1){let o;typeof n=="string"?o=Wo(n):(o={...n},st(!o.pathname||!o.pathname.includes("?"),tf("?","pathname","search",o)),st(!o.pathname||!o.pathname.includes("#"),tf("#","pathname","hash",o)),st(!o.search||!o.search.includes("#"),tf("#","search","hash",o)));let a=n===""||o.pathname==="",u=a?"/":o.pathname,d;if(u==null)d=t;else{let w=e.length-1;if(!s&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),w-=1;o.pathname=E.join("/")}d=w>=0?e[w]:"/"}let f=GS(o,d),m=u&&u!=="/"&&u.endsWith("/"),y=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||y)&&(f.pathname+="/"),f}var Lr=n=>n.join("/").replace(/\/\/+/g,"/"),XS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),JS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ZS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function e1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var L_=["POST","PUT","PATCH","DELETE"];new Set(L_);var t1=["GET",...L_];new Set(t1);var qo=j.createContext(null);qo.displayName="DataRouter";var Zc=j.createContext(null);Zc.displayName="DataRouterState";var M_=j.createContext({isTransitioning:!1});M_.displayName="ViewTransition";var n1=j.createContext(new Map);n1.displayName="Fetchers";var r1=j.createContext(null);r1.displayName="Await";var gr=j.createContext(null);gr.displayName="Navigation";var Dl=j.createContext(null);Dl.displayName="Location";var Wr=j.createContext({outlet:null,matches:[],isDataRoute:!1});Wr.displayName="Route";var dp=j.createContext(null);dp.displayName="RouteError";function s1(n,{relative:e}={}){st(bl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=j.useContext(gr),{hash:o,pathname:a,search:u}=jl(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:Lr([t,a])),s.createHref({pathname:d,search:u,hash:o})}function bl(){return j.useContext(Dl)!=null}function qr(){return st(bl(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Dl).location}var O_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function F_(n){j.useContext(gr).static||j.useLayoutEffect(n)}function eh(){let{isDataRoute:n}=j.useContext(Wr);return n?y1():i1()}function i1(){st(bl(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(qo),{basename:e,navigator:t}=j.useContext(gr),{matches:s}=j.useContext(Wr),{pathname:o}=qr(),a=JSON.stringify(b_(s)),u=j.useRef(!1);return F_(()=>{u.current=!0}),j.useCallback((f,m={})=>{if(fr(u.current,O_),!u.current)return;if(typeof f=="number"){t.go(f);return}let y=j_(f,JSON.parse(a),o,m.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Lr([e,y.pathname])),(m.replace?t.replace:t.push)(y,m.state,m)},[e,t,a,o,n])}j.createContext(null);function jl(n,{relative:e}={}){let{matches:t}=j.useContext(Wr),{pathname:s}=qr(),o=JSON.stringify(b_(t));return j.useMemo(()=>j_(n,JSON.parse(o),s,e==="path"),[n,o,s,e])}function o1(n,e){return B_(n,e)}function B_(n,e,t,s){var W;st(bl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:a}=j.useContext(gr),{matches:u}=j.useContext(Wr),d=u[u.length-1],f=d?d.params:{},m=d?d.pathname:"/",y=d?d.pathnameBase:"/",w=d&&d.route;{let B=w&&w.path||"";U_(m,!w||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let E=qr(),A;if(e){let B=typeof e=="string"?Wo(e):e;st(y==="/"||((W=B.pathname)==null?void 0:W.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${B.pathname}" was given in the \`location\` prop.`),A=B}else A=E;let P=A.pathname||"/",N=P;if(y!=="/"){let B=y.replace(/^\//,"").split("/");N="/"+P.replace(/^\//,"").split("/").slice(B.length).join("/")}let V=!a&&t&&t.matches&&t.matches.length>0?t.matches:N_(n,{pathname:N});fr(w||V!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),fr(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=h1(V&&V.map(B=>Object.assign({},B,{params:Object.assign({},f,B.params),pathname:Lr([y,o.encodeLocation?o.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?y:Lr([y,o.encodeLocation?o.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),u,t,s);return e&&L?j.createElement(Dl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},L):L}function a1(){let n=g1(),e=e1(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=j.createElement(j.Fragment,null,j.createElement("p",null,"💿 Hey developer 👋"),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:a},"ErrorBoundary")," or"," ",j.createElement("code",{style:a},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:o},t):null,u)}var l1=j.createElement(a1,null),u1=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?j.createElement(Wr.Provider,{value:this.props.routeContext},j.createElement(dp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function c1({routeContext:n,match:e,children:t}){let s=j.useContext(qo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Wr.Provider,{value:n},t)}function h1(n,e=[],t=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=t==null?void 0:t.errors;if(a!=null){let f=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);st(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(t)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:y,errors:w}=t,E=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!w||w[m.route.id]===void 0);if(m.route.lazy||E){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,y)=>{let w,E=!1,A=null,P=null;t&&(w=a&&m.route.id?a[m.route.id]:void 0,A=m.route.errorElement||l1,u&&(d<0&&y===0?(U_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,P=null):d===y&&(E=!0,P=m.route.hydrateFallbackElement||null)));let N=e.concat(o.slice(0,y+1)),V=()=>{let L;return w?L=A:E?L=P:m.route.Component?L=j.createElement(m.route.Component,null):m.route.element?L=m.route.element:L=f,j.createElement(c1,{match:m,routeContext:{outlet:f,matches:N,isDataRoute:t!=null},children:L})};return t&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?j.createElement(u1,{location:t.location,revalidation:t.revalidation,component:A,error:w,children:V(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):V()},null)}function fp(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d1(n){let e=j.useContext(qo);return st(e,fp(n)),e}function f1(n){let e=j.useContext(Zc);return st(e,fp(n)),e}function p1(n){let e=j.useContext(Wr);return st(e,fp(n)),e}function pp(n){let e=p1(n),t=e.matches[e.matches.length-1];return st(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function m1(){return pp("useRouteId")}function g1(){var s;let n=j.useContext(dp),e=f1("useRouteError"),t=pp("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function y1(){let{router:n}=d1("useNavigate"),e=pp("useNavigate"),t=j.useRef(!1);return F_(()=>{t.current=!0}),j.useCallback(async(o,a={})=>{fr(t.current,O_),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...a}))},[n,e])}var rv={};function U_(n,e,t){!e&&!rv[n]&&(rv[n]=!0,fr(!1,t))}j.memo(v1);function v1({routes:n,future:e,state:t}){return B_(n,void 0,t,e)}function jr(n){st(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _1({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:a=!1}){st(!bl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:u,navigator:o,static:a,future:{}}),[u,o,a]);typeof t=="string"&&(t=Wo(t));let{pathname:f="/",search:m="",hash:y="",state:w=null,key:E="default"}=t,A=j.useMemo(()=>{let P=Cs(f,u);return P==null?null:{location:{pathname:P,search:m,hash:y,state:w,key:E},navigationType:s}},[u,f,m,y,w,E,s]);return fr(A!=null,`<Router basename="${u}"> is not able to match the URL "${f}${m}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:j.createElement(gr.Provider,{value:d},j.createElement(Dl.Provider,{children:e,value:A}))}function w1({children:n,location:e}){return o1(Af(n),e)}function Af(n,e=[]){let t=[];return j.Children.forEach(n,(s,o)=>{if(!j.isValidElement(s))return;let a=[...e,o];if(s.type===j.Fragment){t.push.apply(t,Af(s.props.children,a));return}st(s.type===jr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),st(!s.props.index||!s.props.children,"An index route cannot have child routes.");let u={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=Af(s.props.children,a)),t.push(u)}),t}var yc="get",vc="application/x-www-form-urlencoded";function th(n){return n!=null&&typeof n.tagName=="string"}function x1(n){return th(n)&&n.tagName.toLowerCase()==="button"}function E1(n){return th(n)&&n.tagName.toLowerCase()==="form"}function T1(n){return th(n)&&n.tagName.toLowerCase()==="input"}function S1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function A1(n,e){return n.button===0&&(!e||e==="_self")&&!S1(n)}var ac=null;function C1(){if(ac===null)try{new FormData(document.createElement("form"),0),ac=!1}catch{ac=!0}return ac}var I1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nf(n){return n!=null&&!I1.has(n)?(fr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vc}"`),null):n}function P1(n,e){let t,s,o,a,u;if(E1(n)){let d=n.getAttribute("action");s=d?Cs(d,e):null,t=n.getAttribute("method")||yc,o=nf(n.getAttribute("enctype"))||vc,a=new FormData(n)}else if(x1(n)||T1(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(s=f?Cs(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||yc,o=nf(n.getAttribute("formenctype"))||nf(d.getAttribute("enctype"))||vc,a=new FormData(d,n),!C1()){let{name:m,type:y,value:w}=n;if(y==="image"){let E=m?`${m}.`:"";a.append(`${E}x`,"0"),a.append(`${E}y`,"0")}else m&&a.append(m,w)}}else{if(th(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=yc,s=null,o=vc,u=n}return a&&o==="text/plain"&&(u=a,a=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:a,body:u}}function mp(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function R1(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function k1(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function N1(n,e,t){let s=await Promise.all(n.map(async o=>{let a=e.routes[o.route.id];if(a){let u=await R1(a,t);return u.links?u.links():[]}return[]}));return j1(s.flat(1).filter(k1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function sv(n,e,t,s,o,a){let u=(f,m)=>t[m]?f.route.id!==t[m].route.id:!0,d=(f,m)=>{var y;return t[m].pathname!==f.pathname||((y=t[m].route.path)==null?void 0:y.endsWith("*"))&&t[m].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,m)=>u(f,m)||d(f,m)):a==="data"?e.filter((f,m)=>{var w;let y=s.routes[f.route.id];if(!y||!y.hasLoader)return!1;if(u(f,m)||d(f,m))return!0;if(f.route.shouldRevalidate){let E=f.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function V1(n,e,{includeHydrateFallback:t}={}){return D1(n.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function D1(n){return[...new Set(n)]}function b1(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function j1(n,e){let t=new Set;return new Set(e),n.reduce((s,o)=>{let a=JSON.stringify(b1(o));return t.has(a)||(t.add(a),s.push({key:a,link:o})),s},[])}function L1(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function M1(){let n=j.useContext(qo);return mp(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function O1(){let n=j.useContext(Zc);return mp(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var gp=j.createContext(void 0);gp.displayName="FrameworkContext";function z_(){let n=j.useContext(gp);return mp(n,"You must render this element inside a <HydratedRouter> element"),n}function F1(n,e){let t=j.useContext(gp),[s,o]=j.useState(!1),[a,u]=j.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:m,onMouseLeave:y,onTouchStart:w}=e,E=j.useRef(null);j.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let N=L=>{L.forEach(W=>{u(W.isIntersecting)})},V=new IntersectionObserver(N,{threshold:.5});return E.current&&V.observe(E.current),()=>{V.disconnect()}}},[n]),j.useEffect(()=>{if(s){let N=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(N)}}},[s]);let A=()=>{o(!0)},P=()=>{o(!1),u(!1)};return t?n!=="intent"?[a,E,{}]:[a,E,{onFocus:Za(d,A),onBlur:Za(f,P),onMouseEnter:Za(m,A),onMouseLeave:Za(y,P),onTouchStart:Za(w,A)}]:[!1,E,{}]}function Za(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function B1({page:n,...e}){let{router:t}=M1(),s=j.useMemo(()=>N_(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?j.createElement(z1,{page:n,matches:s,...e}):null}function U1(n){let{manifest:e,routeModules:t}=z_(),[s,o]=j.useState([]);return j.useEffect(()=>{let a=!1;return N1(n,e,t).then(u=>{a||o(u)}),()=>{a=!0}},[n,e,t]),s}function z1({page:n,matches:e,...t}){let s=qr(),{manifest:o,routeModules:a}=z_(),{loaderData:u,matches:d}=O1(),f=j.useMemo(()=>sv(n,e,d,o,s,"data"),[n,e,d,o,s]),m=j.useMemo(()=>sv(n,e,d,o,s,"assets"),[n,e,d,o,s]),y=j.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let A=new Set,P=!1;if(e.forEach(V=>{var W;let L=o.routes[V.route.id];!L||!L.hasLoader||(!f.some(B=>B.route.id===V.route.id)&&V.route.id in u&&((W=a[V.route.id])!=null&&W.shouldRevalidate)||L.hasClientLoader?P=!0:A.add(V.route.id))}),A.size===0)return[];let N=L1(n);return P&&A.size>0&&N.searchParams.set("_routes",e.filter(V=>A.has(V.route.id)).map(V=>V.route.id).join(",")),[N.pathname+N.search]},[u,s,o,f,e,n,a]),w=j.useMemo(()=>V1(m,o),[m,o]),E=U1(m);return j.createElement(j.Fragment,null,y.map(A=>j.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),w.map(A=>j.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),E.map(({key:A,link:P})=>j.createElement("link",{key:A,...P})))}function $1(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var $_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$_&&(window.__reactRouterVersion="7.2.0")}catch{}function H1({basename:n,children:e,window:t}){let s=j.useRef();s.current==null&&(s.current=VS({window:t,v5Compat:!0}));let o=s.current,[a,u]=j.useState({action:o.action,location:o.location}),d=j.useCallback(f=>{j.startTransition(()=>u(f))},[u]);return j.useLayoutEffect(()=>o.listen(d),[o,d]),j.createElement(_1,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:o})}var H_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ao=j.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:a,replace:u,state:d,target:f,to:m,preventScrollReset:y,viewTransition:w,...E},A){let{basename:P}=j.useContext(gr),N=typeof m=="string"&&H_.test(m),V,L=!1;if(typeof m=="string"&&N&&(V=m,$_))try{let I=new URL(window.location.href),b=m.startsWith("//")?new URL(I.protocol+m):new URL(m),O=Cs(b.pathname,P);b.origin===I.origin&&O!=null?m=O+b.search+b.hash:L=!0}catch{fr(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=s1(m,{relative:o}),[B,Y,Q]=F1(s,E),ee=G1(m,{replace:u,state:d,target:f,preventScrollReset:y,relative:o,viewTransition:w});function R(I){e&&e(I),I.defaultPrevented||ee(I)}let C=j.createElement("a",{...E,...Q,href:V||W,onClick:L||a?e:R,ref:$1(A,Y),target:f,"data-discover":!N&&t==="render"?"true":void 0});return B&&!N?j.createElement(j.Fragment,null,C,j.createElement(B1,{page:W})):C});Ao.displayName="Link";var W1=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:a,to:u,viewTransition:d,children:f,...m},y){let w=jl(u,{relative:m.relative}),E=qr(),A=j.useContext(Zc),{navigator:P,basename:N}=j.useContext(gr),V=A!=null&&Z1(w)&&d===!0,L=P.encodeLocation?P.encodeLocation(w).pathname:w.pathname,W=E.pathname,B=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(W=W.toLowerCase(),B=B?B.toLowerCase():null,L=L.toLowerCase()),B&&N&&(B=Cs(B,N)||B);const Y=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let Q=W===L||!o&&W.startsWith(L)&&W.charAt(Y)==="/",ee=B!=null&&(B===L||!o&&B.startsWith(L)&&B.charAt(L.length)==="/"),R={isActive:Q,isPending:ee,isTransitioning:V},C=Q?e:void 0,I;typeof s=="function"?I=s(R):I=[s,Q?"active":null,ee?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let b=typeof a=="function"?a(R):a;return j.createElement(Ao,{...m,"aria-current":C,className:I,ref:y,style:b,to:u,viewTransition:d},typeof f=="function"?f(R):f)});W1.displayName="NavLink";var q1=j.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:a,method:u=yc,action:d,onSubmit:f,relative:m,preventScrollReset:y,viewTransition:w,...E},A)=>{let P=X1(),N=J1(d,{relative:m}),V=u.toLowerCase()==="get"?"get":"post",L=typeof d=="string"&&H_.test(d),W=B=>{if(f&&f(B),B.defaultPrevented)return;B.preventDefault();let Y=B.nativeEvent.submitter,Q=(Y==null?void 0:Y.getAttribute("formmethod"))||u;P(Y||B.currentTarget,{fetcherKey:e,method:Q,navigate:t,replace:o,state:a,relative:m,preventScrollReset:y,viewTransition:w})};return j.createElement("form",{ref:A,method:V,action:N,onSubmit:s?f:W,...E,"data-discover":!L&&n==="render"?"true":void 0})});q1.displayName="Form";function K1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function W_(n){let e=j.useContext(qo);return st(e,K1(n)),e}function G1(n,{target:e,replace:t,state:s,preventScrollReset:o,relative:a,viewTransition:u}={}){let d=eh(),f=qr(),m=jl(n,{relative:a});return j.useCallback(y=>{if(A1(y,e)){y.preventDefault();let w=t!==void 0?t:ml(f)===ml(m);d(n,{replace:w,state:s,preventScrollReset:o,relative:a,viewTransition:u})}},[f,d,m,t,s,e,n,o,a,u])}var Q1=0,Y1=()=>`__${String(++Q1)}__`;function X1(){let{router:n}=W_("useSubmit"),{basename:e}=j.useContext(gr),t=m1();return j.useCallback(async(s,o={})=>{let{action:a,method:u,encType:d,formData:f,body:m}=P1(s,e);if(o.navigate===!1){let y=o.fetcherKey||Y1();await n.fetch(y,t,o.action||a,{preventScrollReset:o.preventScrollReset,formData:f,body:m,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await n.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:f,body:m,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function J1(n,{relative:e}={}){let{basename:t}=j.useContext(gr),s=j.useContext(Wr);st(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),a={...jl(n||".",{relative:e})},u=qr();if(n==null){a.search=u.search;let d=new URLSearchParams(a.search),f=d.getAll("index");if(f.some(y=>y==="")){d.delete("index"),f.filter(w=>w).forEach(w=>d.append("index",w));let y=d.toString();a.search=y?`?${y}`:""}}return(!n||n===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Lr([t,a.pathname])),ml(a)}function Z1(n,e={}){let t=j.useContext(M_);st(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=W_("useViewTransitionState"),o=jl(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Cs(t.currentLocation.pathname,s)||t.currentLocation.pathname,u=Cs(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Pc(o.pathname,u)!=null||Pc(o.pathname,a)!=null}new TextEncoder;function Ei(){return _.jsxs("nav",{className:"bg-(--bg3) flex items-center justify-between text-(--secondary) max-w-[1440px] m-auto border uppercase",children:[_.jsxs("ul",{className:"flex text-base items-center",children:[_.jsx("li",{className:"py-[16px]",children:_.jsx(Ao,{to:"/",className:"py-[16px] px-[32px] border-r",children:"Home"})}),_.jsx("li",{className:"py-[16px]",children:_.jsx(Ao,{to:"/explore",className:"border-r py-[16px] px-[32px]",children:"Explore"})}),_.jsx("li",{className:"py-[16px]",children:_.jsx(Ao,{to:"/about",className:"border-r py-[16px] px-[32px]",children:"About"})})]}),_.jsxs("ul",{className:"flex text-base items-center",children:[_.jsx("li",{className:"py-[16px]",children:_.jsx(Ao,{to:"/cart",className:"border-l py-[16px] px-[32px]",children:"Cart"})}),_.jsx("li",{className:"py-[16px]",children:_.jsx("a",{href:"/account",className:"border-l py-[16px] px-[32px]",children:"Account"})})]})]})}const yp=j.createContext({});function vp(n){const e=j.useRef(null);return e.current===null&&(e.current=n()),e.current}const nh=j.createContext(null),_p=j.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class eA extends j.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=t.offsetParent,o=s instanceof HTMLElement&&s.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=o-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function tA({children:n,isPresent:e,anchorX:t}){const s=j.useId(),o=j.useRef(null),a=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=j.useContext(_p);return j.useInsertionEffect(()=>{const{width:d,height:f,top:m,left:y,right:w}=a.current;if(e||!o.current||!d||!f)return;const E=t==="left"?`left: ${y}`:`right: ${w}`;o.current.dataset.motionPopId=s;const A=document.createElement("style");return u&&(A.nonce=u),document.head.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${E}px !important;
            top: ${m}px !important;
          }
        `),()=>{document.head.removeChild(A)}},[e]),_.jsx(eA,{isPresent:e,childRef:o,sizeRef:a,children:j.cloneElement(n,{ref:o})})}const nA=({children:n,initial:e,isPresent:t,onExitComplete:s,custom:o,presenceAffectsLayout:a,mode:u,anchorX:d})=>{const f=vp(rA),m=j.useId(),y=j.useCallback(E=>{f.set(E,!0);for(const A of f.values())if(!A)return;s&&s()},[f,s]),w=j.useMemo(()=>({id:m,initial:e,isPresent:t,custom:o,onExitComplete:y,register:E=>(f.set(E,!1),()=>f.delete(E))}),a?[Math.random(),y]:[t,y]);return j.useMemo(()=>{f.forEach((E,A)=>f.set(A,!1))},[t]),j.useEffect(()=>{!t&&!f.size&&s&&s()},[t]),u==="popLayout"&&(n=_.jsx(tA,{isPresent:t,anchorX:d,children:n})),_.jsx(nh.Provider,{value:w,children:n})};function rA(){return new Map}function q_(n=!0){const e=j.useContext(nh);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:o}=e,a=j.useId();j.useEffect(()=>{if(n)return o(a)},[n]);const u=j.useCallback(()=>n&&s&&s(a),[a,s,n]);return!t&&s?[!1,u]:[!0]}const lc=n=>n.key||"";function iv(n){const e=[];return j.Children.forEach(n,t=>{j.isValidElement(t)&&e.push(t)}),e}const wp=typeof window<"u",K_=wp?j.useLayoutEffect:j.useEffect,G_=({children:n,custom:e,initial:t=!0,onExitComplete:s,presenceAffectsLayout:o=!0,mode:a="sync",propagate:u=!1,anchorX:d="left"})=>{const[f,m]=q_(u),y=j.useMemo(()=>iv(n),[n]),w=u&&!f?[]:y.map(lc),E=j.useRef(!0),A=j.useRef(y),P=vp(()=>new Map),[N,V]=j.useState(y),[L,W]=j.useState(y);K_(()=>{E.current=!1,A.current=y;for(let Q=0;Q<L.length;Q++){const ee=lc(L[Q]);w.includes(ee)?P.delete(ee):P.get(ee)!==!0&&P.set(ee,!1)}},[L,w.length,w.join("-")]);const B=[];if(y!==N){let Q=[...y];for(let ee=0;ee<L.length;ee++){const R=L[ee],C=lc(R);w.includes(C)||(Q.splice(ee,0,R),B.push(R))}return a==="wait"&&B.length&&(Q=B),W(iv(Q)),V(y),null}const{forceRender:Y}=j.useContext(yp);return _.jsx(_.Fragment,{children:L.map(Q=>{const ee=lc(Q),R=u&&!f?!1:y===L||w.includes(ee),C=()=>{if(P.has(ee))P.set(ee,!0);else return;let I=!0;P.forEach(b=>{b||(I=!1)}),I&&(Y==null||Y(),W(A.current),u&&(m==null||m()),s&&s())};return _.jsx(nA,{isPresent:R,initial:!E.current||t?void 0:!1,custom:e,presenceAffectsLayout:o,mode:a,onExitComplete:R?void 0:C,anchorX:d,children:Q},ee)})})},vn=n=>n;let Q_=vn;function xp(n){let e;return()=>(e===void 0&&(e=n()),e)}const bo=(n,e,t)=>{const s=e-n;return s===0?1:(t-n)/s},Mr=n=>n*1e3,Or=n=>n/1e3,sA={useManualTiming:!1},uc=["read","resolveKeyframes","update","preRender","render","postRender"],ov={value:null};function iA(n,e){let t=new Set,s=new Set,o=!1,a=!1;const u=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1},f=0;function m(w){u.has(w)&&(y.schedule(w),n()),f++,w(d)}const y={schedule:(w,E=!1,A=!1)=>{const N=A&&o?t:s;return E&&u.add(w),N.has(w)||N.add(w),w},cancel:w=>{s.delete(w),u.delete(w)},process:w=>{if(d=w,o){a=!0;return}o=!0,[t,s]=[s,t],t.forEach(m),e&&ov.value&&ov.value.frameloop[e].push(f),f=0,t.clear(),o=!1,a&&(a=!1,y.process(w))}};return y}const oA=40;function Y_(n,e){let t=!1,s=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,u=uc.reduce((L,W)=>(L[W]=iA(a,e?W:void 0),L),{}),{read:d,resolveKeyframes:f,update:m,preRender:y,render:w,postRender:E}=u,A=()=>{const L=performance.now();t=!1,o.delta=s?1e3/60:Math.max(Math.min(L-o.timestamp,oA),1),o.timestamp=L,o.isProcessing=!0,d.process(o),f.process(o),m.process(o),y.process(o),w.process(o),E.process(o),o.isProcessing=!1,t&&e&&(s=!1,n(A))},P=()=>{t=!0,s=!0,o.isProcessing||n(A)};return{schedule:uc.reduce((L,W)=>{const B=u[W];return L[W]=(Y,Q=!1,ee=!1)=>(t||P(),B.schedule(Y,Q,ee)),L},{}),cancel:L=>{for(let W=0;W<uc.length;W++)u[uc[W]].cancel(L)},state:o,steps:u}}const{schedule:Ge,cancel:Is,state:bt,steps:rf}=Y_(typeof requestAnimationFrame<"u"?requestAnimationFrame:vn,!0),X_=j.createContext({strict:!1}),av={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jo={};for(const n in av)jo[n]={isEnabled:e=>av[n].some(t=>!!e[t])};function aA(n){for(const e in n)jo[e]={...jo[e],...n[e]}}const lA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Rc(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||lA.has(n)}let J_=n=>!Rc(n);function uA(n){n&&(J_=e=>e.startsWith("on")?!Rc(e):n(e))}try{uA(require("@emotion/is-prop-valid").default)}catch{}function cA(n,e,t){const s={};for(const o in n)o==="values"&&typeof n.values=="object"||(J_(o)||t===!0&&Rc(o)||!e&&!Rc(o)||n.draggable&&o.startsWith("onDrag"))&&(s[o]=n[o]);return s}function hA(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...s)=>n(...s);return new Proxy(t,{get:(s,o)=>o==="create"?n:(e.has(o)||e.set(o,n(o)),e.get(o))})}const rh=j.createContext({});function sh(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function gl(n){return typeof n=="string"||Array.isArray(n)}const Ep=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Tp=["initial",...Ep];function ih(n){return sh(n.animate)||Tp.some(e=>gl(n[e]))}function Z_(n){return!!(ih(n)||n.variants)}function dA(n,e){if(ih(n)){const{initial:t,animate:s}=n;return{initial:t===!1||gl(t)?t:void 0,animate:gl(s)?s:void 0}}return n.inherit!==!1?e:{}}function fA(n){const{initial:e,animate:t}=dA(n,j.useContext(rh));return j.useMemo(()=>({initial:e,animate:t}),[lv(e),lv(t)])}function lv(n){return Array.isArray(n)?n.join(" "):n}const pA=Symbol.for("motionComponentSymbol");function Co(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function mA(n,e,t){return j.useCallback(s=>{s&&n.onMount&&n.onMount(s),e&&(s?e.mount(s):e.unmount()),t&&(typeof t=="function"?t(s):Co(t)&&(t.current=s))},[e])}const Sp=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),gA="framerAppearId",ew="data-"+Sp(gA),{schedule:Ap}=Y_(queueMicrotask,!1),tw=j.createContext({});function yA(n,e,t,s,o){var a,u;const{visualElement:d}=j.useContext(rh),f=j.useContext(X_),m=j.useContext(nh),y=j.useContext(_p).reducedMotion,w=j.useRef(null);s=s||f.renderer,!w.current&&s&&(w.current=s(n,{visualState:e,parent:d,props:t,presenceContext:m,blockInitialAnimation:m?m.initial===!1:!1,reducedMotionConfig:y}));const E=w.current,A=j.useContext(tw);E&&!E.projection&&o&&(E.type==="html"||E.type==="svg")&&vA(w.current,t,o,A);const P=j.useRef(!1);j.useInsertionEffect(()=>{E&&P.current&&E.update(t,m)});const N=t[ew],V=j.useRef(!!N&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,N))&&((u=window.MotionHasOptimisedAnimation)===null||u===void 0?void 0:u.call(window,N)));return K_(()=>{E&&(P.current=!0,window.MotionIsMounted=!0,E.updateFeatures(),Ap.render(E.render),V.current&&E.animationState&&E.animationState.animateChanges())}),j.useEffect(()=>{E&&(!V.current&&E.animationState&&E.animationState.animateChanges(),V.current&&(queueMicrotask(()=>{var L;(L=window.MotionHandoffMarkAsComplete)===null||L===void 0||L.call(window,N)}),V.current=!1))}),E}function vA(n,e,t,s){const{layoutId:o,layout:a,drag:u,dragConstraints:d,layoutScroll:f,layoutRoot:m}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:nw(n.parent)),n.projection.setOptions({layoutId:o,layout:a,alwaysMeasureLayout:!!u||d&&Co(d),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:s,layoutScroll:f,layoutRoot:m})}function nw(n){if(n)return n.options.allowProjection!==!1?n.projection:nw(n.parent)}function _A({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:s,Component:o}){var a,u;n&&aA(n);function d(m,y){let w;const E={...j.useContext(_p),...m,layoutId:wA(m)},{isStatic:A}=E,P=fA(m),N=s(m,A);if(!A&&wp){xA();const V=EA(E);w=V.MeasureLayout,P.visualElement=yA(o,N,E,e,V.ProjectionNode)}return _.jsxs(rh.Provider,{value:P,children:[w&&P.visualElement?_.jsx(w,{visualElement:P.visualElement,...E}):null,t(o,m,mA(N,P.visualElement,y),N,A,P.visualElement)]})}d.displayName=`motion.${typeof o=="string"?o:`create(${(u=(a=o.displayName)!==null&&a!==void 0?a:o.name)!==null&&u!==void 0?u:""})`}`;const f=j.forwardRef(d);return f[pA]=o,f}function wA({layoutId:n}){const e=j.useContext(yp).id;return e&&n!==void 0?e+"-"+n:n}function xA(n,e){j.useContext(X_).strict}function EA(n){const{drag:e,layout:t}=jo;if(!e&&!t)return{};const s={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const rw=n=>e=>typeof e=="string"&&e.startsWith(n),Cp=rw("--"),TA=rw("var(--"),Ip=n=>TA(n)?SA.test(n.split("/*")[0].trim()):!1,SA=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yl={};function AA(n){for(const e in n)yl[e]=n[e],Cp(e)&&(yl[e].isCSSVariable=!0)}const Ko=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ti=new Set(Ko);function sw(n,{layout:e,layoutId:t}){return Ti.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!yl[n]||n==="opacity")}const qt=n=>!!(n&&n.getVelocity),iw=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Br=(n,e,t)=>t>e?e:t<n?n:t,Go={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},vl={...Go,transform:n=>Br(0,1,n)},cc={...Go,default:1},Ll=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),_s=Ll("deg"),ur=Ll("%"),xe=Ll("px"),CA=Ll("vh"),IA=Ll("vw"),uv={...ur,parse:n=>ur.parse(n)/100,transform:n=>ur.transform(n*100)},PA={borderWidth:xe,borderTopWidth:xe,borderRightWidth:xe,borderBottomWidth:xe,borderLeftWidth:xe,borderRadius:xe,radius:xe,borderTopLeftRadius:xe,borderTopRightRadius:xe,borderBottomRightRadius:xe,borderBottomLeftRadius:xe,width:xe,maxWidth:xe,height:xe,maxHeight:xe,top:xe,right:xe,bottom:xe,left:xe,padding:xe,paddingTop:xe,paddingRight:xe,paddingBottom:xe,paddingLeft:xe,margin:xe,marginTop:xe,marginRight:xe,marginBottom:xe,marginLeft:xe,backgroundPositionX:xe,backgroundPositionY:xe},RA={rotate:_s,rotateX:_s,rotateY:_s,rotateZ:_s,scale:cc,scaleX:cc,scaleY:cc,scaleZ:cc,skew:_s,skewX:_s,skewY:_s,distance:xe,translateX:xe,translateY:xe,translateZ:xe,x:xe,y:xe,z:xe,perspective:xe,transformPerspective:xe,opacity:vl,originX:uv,originY:uv,originZ:xe},cv={...Go,transform:Math.round},Pp={...PA,...RA,zIndex:cv,size:xe,fillOpacity:vl,strokeOpacity:vl,numOctaves:cv},kA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},NA=Ko.length;function VA(n,e,t){let s="",o=!0;for(let a=0;a<NA;a++){const u=Ko[a],d=n[u];if(d===void 0)continue;let f=!0;if(typeof d=="number"?f=d===(u.startsWith("scale")?1:0):f=parseFloat(d)===0,!f||t){const m=iw(d,Pp[u]);if(!f){o=!1;const y=kA[u]||u;s+=`${y}(${m}) `}t&&(e[u]=m)}}return s=s.trim(),t?s=t(e,o?"":s):o&&(s="none"),s}function Rp(n,e,t){const{style:s,vars:o,transformOrigin:a}=n;let u=!1,d=!1;for(const f in e){const m=e[f];if(Ti.has(f)){u=!0;continue}else if(Cp(f)){o[f]=m;continue}else{const y=iw(m,Pp[f]);f.startsWith("origin")?(d=!0,a[f]=y):s[f]=y}}if(e.transform||(u||t?s.transform=VA(e,n.transform,t):s.transform&&(s.transform="none")),d){const{originX:f="50%",originY:m="50%",originZ:y=0}=a;s.transformOrigin=`${f} ${m} ${y}`}}const kp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ow(n,e,t){for(const s in e)!qt(e[s])&&!sw(s,t)&&(n[s]=e[s])}function DA({transformTemplate:n},e){return j.useMemo(()=>{const t=kp();return Rp(t,e,n),Object.assign({},t.vars,t.style)},[e])}function bA(n,e){const t=n.style||{},s={};return ow(s,t,n),Object.assign(s,DA(n,e)),s}function jA(n,e){const t={},s=bA(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=s,t}const LA=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Np(n){return typeof n!="string"||n.includes("-")?!1:!!(LA.indexOf(n)>-1||/[A-Z]/u.test(n))}const MA={offset:"stroke-dashoffset",array:"stroke-dasharray"},OA={offset:"strokeDashoffset",array:"strokeDasharray"};function FA(n,e,t=1,s=0,o=!0){n.pathLength=1;const a=o?MA:OA;n[a.offset]=xe.transform(-s);const u=xe.transform(e),d=xe.transform(t);n[a.array]=`${u} ${d}`}function hv(n,e,t){return typeof n=="string"?n:xe.transform(e+t*n)}function BA(n,e,t){const s=hv(e,n.x,n.width),o=hv(t,n.y,n.height);return`${s} ${o}`}function Vp(n,{attrX:e,attrY:t,attrScale:s,originX:o,originY:a,pathLength:u,pathSpacing:d=1,pathOffset:f=0,...m},y,w){if(Rp(n,m,w),y){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:E,style:A,dimensions:P}=n;E.transform&&(P&&(A.transform=E.transform),delete E.transform),P&&(o!==void 0||a!==void 0||A.transform)&&(A.transformOrigin=BA(P,o!==void 0?o:.5,a!==void 0?a:.5)),e!==void 0&&(E.x=e),t!==void 0&&(E.y=t),s!==void 0&&(E.scale=s),u!==void 0&&FA(E,u,d,f,!1)}const aw=()=>({...kp(),attrs:{}}),Dp=n=>typeof n=="string"&&n.toLowerCase()==="svg";function UA(n,e,t,s){const o=j.useMemo(()=>{const a=aw();return Vp(a,e,Dp(s),n.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};ow(a,n.style,n),o.style={...a,...o.style}}return o}function zA(n=!1){return(t,s,o,{latestValues:a},u)=>{const f=(Np(t)?UA:jA)(s,a,u,t),m=cA(s,typeof t=="string",n),y=t!==j.Fragment?{...m,...f,ref:o}:{},{children:w}=s,E=j.useMemo(()=>qt(w)?w.get():w,[w]);return j.createElement(t,{...y,children:E})}}function dv(n){const e=[{},{}];return n==null||n.values.forEach((t,s)=>{e[0][s]=t.get(),e[1][s]=t.getVelocity()}),e}function bp(n,e,t,s){if(typeof e=="function"){const[o,a]=dv(s);e=e(t!==void 0?t:n.custom,o,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[o,a]=dv(s);e=e(t!==void 0?t:n.custom,o,a)}return e}const Cf=n=>Array.isArray(n),$A=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),HA=n=>Cf(n)?n[n.length-1]||0:n;function _c(n){const e=qt(n)?n.get():n;return $A(e)?e.toValue():e}function WA({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},s,o,a){const u={latestValues:qA(s,o,a,n),renderState:e()};return t&&(u.onMount=d=>t({props:s,current:d,...u}),u.onUpdate=d=>t(d)),u}const lw=n=>(e,t)=>{const s=j.useContext(rh),o=j.useContext(nh),a=()=>WA(n,e,s,o);return t?a():vp(a)};function qA(n,e,t,s){const o={},a=s(n,{});for(const E in a)o[E]=_c(a[E]);let{initial:u,animate:d}=n;const f=ih(n),m=Z_(n);e&&m&&!f&&n.inherit!==!1&&(u===void 0&&(u=e.initial),d===void 0&&(d=e.animate));let y=t?t.initial===!1:!1;y=y||u===!1;const w=y?d:u;if(w&&typeof w!="boolean"&&!sh(w)){const E=Array.isArray(w)?w:[w];for(let A=0;A<E.length;A++){const P=bp(n,E[A]);if(P){const{transitionEnd:N,transition:V,...L}=P;for(const W in L){let B=L[W];if(Array.isArray(B)){const Y=y?B.length-1:0;B=B[Y]}B!==null&&(o[W]=B)}for(const W in N)o[W]=N[W]}}}return o}function jp(n,e,t){var s;const{style:o}=n,a={};for(const u in o)(qt(o[u])||e.style&&qt(e.style[u])||sw(u,n)||((s=t==null?void 0:t.getValue(u))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(a[u]=o[u]);return a}const KA={useVisualState:lw({scrapeMotionValuesFromProps:jp,createRenderState:kp})};function uw(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function cw(n,{style:e,vars:t},s,o){Object.assign(n.style,e,o&&o.getProjectionStyles(s));for(const a in t)n.style.setProperty(a,t[a])}const hw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function dw(n,e,t,s){cw(n,e,void 0,s);for(const o in e.attrs)n.setAttribute(hw.has(o)?o:Sp(o),e.attrs[o])}function fw(n,e,t){const s=jp(n,e,t);for(const o in n)if(qt(n[o])||qt(e[o])){const a=Ko.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;s[a]=n[o]}return s}const fv=["x","y","width","height","cx","cy","r"],GA={useVisualState:lw({scrapeMotionValuesFromProps:fw,createRenderState:aw,onUpdate:({props:n,prevProps:e,current:t,renderState:s,latestValues:o})=>{if(!t)return;let a=!!n.drag;if(!a){for(const d in o)if(Ti.has(d)){a=!0;break}}if(!a)return;let u=!e;if(e)for(let d=0;d<fv.length;d++){const f=fv[d];n[f]!==e[f]&&(u=!0)}u&&Ge.read(()=>{uw(t,s),Ge.render(()=>{Vp(s,o,Dp(t.tagName),n.transformTemplate),dw(t,s)})})}})};function QA(n,e){return function(s,{forwardMotionProps:o}={forwardMotionProps:!1}){const u={...Np(s)?GA:KA,preloadedFeatures:n,useRender:zA(o),createVisualElement:e,Component:s};return _A(u)}}function _l(n,e,t){const s=n.getProps();return bp(s,e,t!==void 0?t:s.custom,n)}const YA=xp(()=>window.ScrollTimeline!==void 0);class XA{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=t}attachTimeline(e,t){const s=this.animations.map(o=>{if(YA()&&o.attachTimeline)return o.attachTimeline(e);if(typeof t=="function")return t(o)});return()=>{s.forEach((o,a)=>{o&&o(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class JA extends XA{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function Lp(n,e){return n?n[e]||n.default||n:void 0}const If=2e4;function pw(n){let e=0;const t=50;let s=n.next(e);for(;!s.done&&e<If;)e+=t,s=n.next(e);return e>=If?1/0:e}function Mp(n){return typeof n=="function"}function pv(n,e){n.timeline=e,n.onfinish=null}const Op=n=>Array.isArray(n)&&typeof n[0]=="number",ZA={linearEasing:void 0};function eC(n,e){const t=xp(n);return()=>{var s;return(s=ZA[e])!==null&&s!==void 0?s:t()}}const kc=eC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),mw=(n,e,t=10)=>{let s="";const o=Math.max(Math.round(e/t),2);for(let a=0;a<o;a++)s+=n(bo(0,o-1,a))+", ";return`linear(${s.substring(0,s.length-2)})`};function gw(n){return!!(typeof n=="function"&&kc()||!n||typeof n=="string"&&(n in Pf||kc())||Op(n)||Array.isArray(n)&&n.every(gw))}const nl=([n,e,t,s])=>`cubic-bezier(${n}, ${e}, ${t}, ${s})`,Pf={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nl([0,.65,.55,1]),circOut:nl([.55,0,1,.45]),backIn:nl([.31,.01,.66,-.59]),backOut:nl([.33,1.53,.69,.99])};function yw(n,e){if(n)return typeof n=="function"&&kc()?mw(n,e):Op(n)?nl(n):Array.isArray(n)?n.map(t=>yw(t,e)||Pf.easeOut):Pf[n]}const qn={x:!1,y:!1};function vw(){return qn.x||qn.y}function tC(n,e,t){var s;if(n instanceof EventTarget)return[n];if(typeof n=="string"){let o=document;const a=(s=void 0)!==null&&s!==void 0?s:o.querySelectorAll(n);return a?Array.from(a):[]}return Array.from(n)}function _w(n,e){const t=tC(n),s=new AbortController,o={passive:!0,...e,signal:s.signal};return[t,o,()=>s.abort()]}function mv(n){return!(n.pointerType==="touch"||vw())}function nC(n,e,t={}){const[s,o,a]=_w(n,t),u=d=>{if(!mv(d))return;const{target:f}=d,m=e(f,d);if(typeof m!="function"||!f)return;const y=w=>{mv(w)&&(m(w),f.removeEventListener("pointerleave",y))};f.addEventListener("pointerleave",y,o)};return s.forEach(d=>{d.addEventListener("pointerenter",u,o)}),a}function Nc(n,e){const t=`${e}PointerCapture`;if(n.target instanceof Element&&t in n.target&&n.pointerId!==void 0)try{n.target[t](n.pointerId)}catch{}}const ww=(n,e)=>e?n===e?!0:ww(n,e.parentElement):!1,Fp=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,rC=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function sC(n){return rC.has(n.tagName)||n.tabIndex!==-1}const rl=new WeakSet;function gv(n){return e=>{e.key==="Enter"&&n(e)}}function sf(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const iC=(n,e)=>{const t=n.currentTarget;if(!t)return;const s=gv(()=>{if(rl.has(t))return;sf(t,"down");const o=gv(()=>{sf(t,"up")}),a=()=>sf(t,"cancel");t.addEventListener("keyup",o,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",s,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",s),e)};function yv(n){return Fp(n)&&!vw()}function oC(n,e,t={}){const[s,o,a]=_w(n,t),u=d=>{const f=d.currentTarget;if(!f||!yv(d)||rl.has(f))return;rl.add(f),Nc(d,"set");const m=e(f,d),y=(A,P)=>{f.removeEventListener("pointerup",w),f.removeEventListener("pointercancel",E),Nc(A,"release"),!(!yv(A)||!rl.has(f))&&(rl.delete(f),typeof m=="function"&&m(A,{success:P}))},w=A=>{(A.isTrusted?aC(A,f instanceof Element?f.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}):!1)?y(A,!1):y(A,!(f instanceof Element)||ww(f,A.target))},E=A=>{y(A,!1)};f.addEventListener("pointerup",w,o),f.addEventListener("pointercancel",E,o),f.addEventListener("lostpointercapture",E,o)};return s.forEach(d=>{d=t.useGlobalTarget?window:d;let f=!1;d instanceof HTMLElement&&(f=!0,!sC(d)&&d.getAttribute("tabindex")===null&&(d.tabIndex=0)),d.addEventListener("pointerdown",u,o),f&&d.addEventListener("focus",m=>iC(m,o),o)}),a}function aC(n,e){return n.clientX<e.left||n.clientX>e.right||n.clientY<e.top||n.clientY>e.bottom}function lC(n){return n==="x"||n==="y"?qn[n]?null:(qn[n]=!0,()=>{qn[n]=!1}):qn.x||qn.y?null:(qn.x=qn.y=!0,()=>{qn.x=qn.y=!1})}const xw=new Set(["width","height","top","left","right","bottom",...Ko]);let wc;function uC(){wc=void 0}const cr={now:()=>(wc===void 0&&cr.set(bt.isProcessing||sA.useManualTiming?bt.timestamp:performance.now()),wc),set:n=>{wc=n,queueMicrotask(uC)}};function Bp(n,e){n.indexOf(e)===-1&&n.push(e)}function Up(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class zp{constructor(){this.subscriptions=[]}add(e){return Bp(this.subscriptions,e),()=>Up(this.subscriptions,e)}notify(e,t,s){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,t,s);else for(let a=0;a<o;a++){const u=this.subscriptions[a];u&&u(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Ew(n,e){return e?n*(1e3/e):0}const vv=30,cC=n=>!isNaN(parseFloat(n));class hC{constructor(e,t={}){this.version="12.4.7",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,o=!0)=>{const a=cr.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=cr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=cC(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new zp);const s=this.events[e].add(t);return e==="change"?()=>{s(),Ge.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=cr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>vv)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,vv);return Ew(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function wl(n,e){return new hC(n,e)}function dC(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,wl(t))}function fC(n,e){const t=_l(n,e);let{transitionEnd:s={},transition:o={},...a}=t||{};a={...a,...s};for(const u in a){const d=HA(a[u]);dC(n,u,d)}}function pC(n){return!!(qt(n)&&n.add)}function Rf(n,e){const t=n.getValue("willChange");if(pC(t))return t.add(e)}function Tw(n){return n.props[ew]}const Sw=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,mC=1e-7,gC=12;function yC(n,e,t,s,o){let a,u,d=0;do u=e+(t-e)/2,a=Sw(u,s,o)-n,a>0?t=u:e=u;while(Math.abs(a)>mC&&++d<gC);return u}function Ml(n,e,t,s){if(n===e&&t===s)return vn;const o=a=>yC(a,0,1,n,t);return a=>a===0||a===1?a:Sw(o(a),e,s)}const Aw=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,Cw=n=>e=>1-n(1-e),Iw=Ml(.33,1.53,.69,.99),$p=Cw(Iw),Pw=Aw($p),Rw=n=>(n*=2)<1?.5*$p(n):.5*(2-Math.pow(2,-10*(n-1))),Hp=n=>1-Math.sin(Math.acos(n)),kw=Cw(Hp),Nw=Aw(Hp),Vw=n=>/^0[^.\s]+$/u.test(n);function vC(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Vw(n):!0}const ll=n=>Math.round(n*1e5)/1e5,Wp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function _C(n){return n==null}const wC=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,qp=(n,e)=>t=>!!(typeof t=="string"&&wC.test(t)&&t.startsWith(n)||e&&!_C(t)&&Object.prototype.hasOwnProperty.call(t,e)),Dw=(n,e,t)=>s=>{if(typeof s!="string")return s;const[o,a,u,d]=s.match(Wp);return{[n]:parseFloat(o),[e]:parseFloat(a),[t]:parseFloat(u),alpha:d!==void 0?parseFloat(d):1}},xC=n=>Br(0,255,n),of={...Go,transform:n=>Math.round(xC(n))},gi={test:qp("rgb","red"),parse:Dw("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:s=1})=>"rgba("+of.transform(n)+", "+of.transform(e)+", "+of.transform(t)+", "+ll(vl.transform(s))+")"};function EC(n){let e="",t="",s="",o="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),s=n.substring(5,7),o=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),s=n.substring(3,4),o=n.substring(4,5),e+=e,t+=t,s+=s,o+=o),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:o?parseInt(o,16)/255:1}}const kf={test:qp("#"),parse:EC,transform:gi.transform},Io={test:qp("hsl","hue"),parse:Dw("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(n)+", "+ur.transform(ll(e))+", "+ur.transform(ll(t))+", "+ll(vl.transform(s))+")"},$t={test:n=>gi.test(n)||kf.test(n)||Io.test(n),parse:n=>gi.test(n)?gi.parse(n):Io.test(n)?Io.parse(n):kf.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?gi.transform(n):Io.transform(n)},TC=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function SC(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Wp))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(TC))===null||t===void 0?void 0:t.length)||0)>0}const bw="number",jw="color",AC="var",CC="var(",_v="${}",IC=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xl(n){const e=n.toString(),t=[],s={color:[],number:[],var:[]},o=[];let a=0;const d=e.replace(IC,f=>($t.test(f)?(s.color.push(a),o.push(jw),t.push($t.parse(f))):f.startsWith(CC)?(s.var.push(a),o.push(AC),t.push(f)):(s.number.push(a),o.push(bw),t.push(parseFloat(f))),++a,_v)).split(_v);return{values:t,split:d,indexes:s,types:o}}function Lw(n){return xl(n).values}function Mw(n){const{split:e,types:t}=xl(n),s=e.length;return o=>{let a="";for(let u=0;u<s;u++)if(a+=e[u],o[u]!==void 0){const d=t[u];d===bw?a+=ll(o[u]):d===jw?a+=$t.transform(o[u]):a+=o[u]}return a}}const PC=n=>typeof n=="number"?0:n;function RC(n){const e=Lw(n);return Mw(n)(e.map(PC))}const Ps={test:SC,parse:Lw,createTransformer:Mw,getAnimatableNone:RC},kC=new Set(["brightness","contrast","saturate","opacity"]);function NC(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[s]=t.match(Wp)||[];if(!s)return n;const o=t.replace(s,"");let a=kC.has(e)?1:0;return s!==t&&(a*=100),e+"("+a+o+")"}const VC=/\b([a-z-]*)\(.*?\)/gu,Nf={...Ps,getAnimatableNone:n=>{const e=n.match(VC);return e?e.map(NC).join(" "):n}},DC={...Pp,color:$t,backgroundColor:$t,outlineColor:$t,fill:$t,stroke:$t,borderColor:$t,borderTopColor:$t,borderRightColor:$t,borderBottomColor:$t,borderLeftColor:$t,filter:Nf,WebkitFilter:Nf},Kp=n=>DC[n];function Ow(n,e){let t=Kp(n);return t!==Nf&&(t=Ps),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const bC=new Set(["auto","none","0"]);function jC(n,e,t){let s=0,o;for(;s<n.length&&!o;){const a=n[s];typeof a=="string"&&!bC.has(a)&&xl(a).values.length&&(o=n[s]),s++}if(o&&t)for(const a of e)n[a]=Ow(t,o)}const wv=n=>n===Go||n===xe,xv=(n,e)=>parseFloat(n.split(", ")[e]),Ev=(n,e)=>(t,{transform:s})=>{if(s==="none"||!s)return 0;const o=s.match(/^matrix3d\((.+)\)$/u);if(o)return xv(o[1],e);{const a=s.match(/^matrix\((.+)\)$/u);return a?xv(a[1],n):0}},LC=new Set(["x","y","z"]),MC=Ko.filter(n=>!LC.has(n));function OC(n){const e=[];return MC.forEach(t=>{const s=n.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e}const Lo={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:Ev(4,13),y:Ev(5,14)};Lo.translateX=Lo.x;Lo.translateY=Lo.y;const _i=new Set;let Vf=!1,Df=!1;function Fw(){if(Df){const n=Array.from(_i).filter(s=>s.needsMeasurement),e=new Set(n.map(s=>s.element)),t=new Map;e.forEach(s=>{const o=OC(s);o.length&&(t.set(s,o),s.render())}),n.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const o=t.get(s);o&&o.forEach(([a,u])=>{var d;(d=s.getValue(a))===null||d===void 0||d.set(u)})}),n.forEach(s=>s.measureEndState()),n.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Df=!1,Vf=!1,_i.forEach(n=>n.complete()),_i.clear()}function Bw(){_i.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Df=!0)})}function FC(){Bw(),Fw()}class Gp{constructor(e,t,s,o,a,u=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=o,this.element=a,this.isAsync=u}scheduleResolve(){this.isScheduled=!0,this.isAsync?(_i.add(this),Vf||(Vf=!0,Ge.read(Bw),Ge.resolveKeyframes(Fw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:o}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const u=o==null?void 0:o.get(),d=e[e.length-1];if(u!==void 0)e[0]=u;else if(s&&t){const f=s.readValue(t,d);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=d),o&&u===void 0&&o.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),_i.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,_i.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Uw=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),BC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function UC(n){const e=BC.exec(n);if(!e)return[,];const[,t,s,o]=e;return[`--${t??s}`,o]}function zw(n,e,t=1){const[s,o]=UC(n);if(!s)return;const a=window.getComputedStyle(e).getPropertyValue(s);if(a){const u=a.trim();return Uw(u)?parseFloat(u):u}return Ip(o)?zw(o,e,t+1):o}const $w=n=>e=>e.test(n),zC={test:n=>n==="auto",parse:n=>n},Hw=[Go,xe,ur,_s,IA,CA,zC],Tv=n=>Hw.find($w(n));class Ww extends Gp{constructor(e,t,s,o,a){super(e,t,s,o,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let m=e[f];if(typeof m=="string"&&(m=m.trim(),Ip(m))){const y=zw(m,t.current);y!==void 0&&(e[f]=y),f===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!xw.has(s)||e.length!==2)return;const[o,a]=e,u=Tv(o),d=Tv(a);if(u!==d)if(wv(u)&&wv(d))for(let f=0;f<e.length;f++){const m=e[f];typeof m=="string"&&(e[f]=parseFloat(m))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let o=0;o<e.length;o++)vC(e[o])&&s.push(o);s.length&&jC(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Lo[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const o=t[t.length-1];o!==void 0&&e.getValue(s,o).jump(o,!1)}measureEndState(){var e;const{element:t,name:s,unresolvedKeyframes:o}=this;if(!t||!t.current)return;const a=t.getValue(s);a&&a.jump(this.measuredOrigin,!1);const u=o.length-1,d=o[u];o[u]=Lo[s](t.measureViewportBox(),window.getComputedStyle(t.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([f,m])=>{t.getValue(f).set(m)}),this.resolveNoneKeyframes()}}const Sv=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ps.test(n)||n==="0")&&!n.startsWith("url("));function $C(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function HC(n,e,t,s){const o=n[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],u=Sv(o,e),d=Sv(a,e);return!u||!d?!1:$C(n)||(t==="spring"||Mp(t))&&s}const WC=n=>n!==null;function oh(n,{repeat:e,repeatType:t="loop"},s){const o=n.filter(WC),a=e&&t!=="loop"&&e%2===1?0:o.length-1;return!a||s===void 0?o[a]:s}const qC=40;class qw{constructor({autoplay:e=!0,delay:t=0,type:s="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",...d}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=cr.now(),this.options={autoplay:e,delay:t,type:s,repeat:o,repeatDelay:a,repeatType:u,...d},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>qC?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&FC(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=cr.now(),this.hasAttemptedResolve=!0;const{name:s,type:o,velocity:a,delay:u,onComplete:d,onUpdate:f,isGenerator:m}=this.options;if(!m&&!HC(e,s,o,a))if(u)this.options.duration=0;else{f&&f(oh(e,this.options,t)),d&&d(),this.resolveFinishedPromise();return}const y=this.initPlayback(e,t);y!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...y},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const rt=(n,e,t)=>n+(e-n)*t;function af(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function KC({hue:n,saturation:e,lightness:t,alpha:s}){n/=360,e/=100,t/=100;let o=0,a=0,u=0;if(!e)o=a=u=t;else{const d=t<.5?t*(1+e):t+e-t*e,f=2*t-d;o=af(f,d,n+1/3),a=af(f,d,n),u=af(f,d,n-1/3)}return{red:Math.round(o*255),green:Math.round(a*255),blue:Math.round(u*255),alpha:s}}function Vc(n,e){return t=>t>0?e:n}const lf=(n,e,t)=>{const s=n*n,o=t*(e*e-s)+s;return o<0?0:Math.sqrt(o)},GC=[kf,gi,Io],QC=n=>GC.find(e=>e.test(n));function Av(n){const e=QC(n);if(!e)return!1;let t=e.parse(n);return e===Io&&(t=KC(t)),t}const Cv=(n,e)=>{const t=Av(n),s=Av(e);if(!t||!s)return Vc(n,e);const o={...t};return a=>(o.red=lf(t.red,s.red,a),o.green=lf(t.green,s.green,a),o.blue=lf(t.blue,s.blue,a),o.alpha=rt(t.alpha,s.alpha,a),gi.transform(o))},YC=(n,e)=>t=>e(n(t)),Ol=(...n)=>n.reduce(YC),bf=new Set(["none","hidden"]);function XC(n,e){return bf.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function JC(n,e){return t=>rt(n,e,t)}function Qp(n){return typeof n=="number"?JC:typeof n=="string"?Ip(n)?Vc:$t.test(n)?Cv:tI:Array.isArray(n)?Kw:typeof n=="object"?$t.test(n)?Cv:ZC:Vc}function Kw(n,e){const t=[...n],s=t.length,o=n.map((a,u)=>Qp(a)(a,e[u]));return a=>{for(let u=0;u<s;u++)t[u]=o[u](a);return t}}function ZC(n,e){const t={...n,...e},s={};for(const o in t)n[o]!==void 0&&e[o]!==void 0&&(s[o]=Qp(n[o])(n[o],e[o]));return o=>{for(const a in s)t[a]=s[a](o);return t}}function eI(n,e){var t;const s=[],o={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const u=e.types[a],d=n.indexes[u][o[u]],f=(t=n.values[d])!==null&&t!==void 0?t:0;s[a]=f,o[u]++}return s}const tI=(n,e)=>{const t=Ps.createTransformer(e),s=xl(n),o=xl(e);return s.indexes.var.length===o.indexes.var.length&&s.indexes.color.length===o.indexes.color.length&&s.indexes.number.length>=o.indexes.number.length?bf.has(n)&&!o.values.length||bf.has(e)&&!s.values.length?XC(n,e):Ol(Kw(eI(s,o),o.values),t):Vc(n,e)};function Gw(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?rt(n,e,t):Qp(n)(n,e)}const nI=5;function Qw(n,e,t){const s=Math.max(e-nI,0);return Ew(t-n(s),e-s)}const at={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Iv=.001;function rI({duration:n=at.duration,bounce:e=at.bounce,velocity:t=at.velocity,mass:s=at.mass}){let o,a,u=1-e;u=Br(at.minDamping,at.maxDamping,u),n=Br(at.minDuration,at.maxDuration,Or(n)),u<1?(o=m=>{const y=m*u,w=y*n,E=y-t,A=jf(m,u),P=Math.exp(-w);return Iv-E/A*P},a=m=>{const w=m*u*n,E=w*t+t,A=Math.pow(u,2)*Math.pow(m,2)*n,P=Math.exp(-w),N=jf(Math.pow(m,2),u);return(-o(m)+Iv>0?-1:1)*((E-A)*P)/N}):(o=m=>{const y=Math.exp(-m*n),w=(m-t)*n+1;return-.001+y*w},a=m=>{const y=Math.exp(-m*n),w=(t-m)*(n*n);return y*w});const d=5/n,f=iI(o,a,d);if(n=Mr(n),isNaN(f))return{stiffness:at.stiffness,damping:at.damping,duration:n};{const m=Math.pow(f,2)*s;return{stiffness:m,damping:u*2*Math.sqrt(s*m),duration:n}}}const sI=12;function iI(n,e,t){let s=t;for(let o=1;o<sI;o++)s=s-n(s)/e(s);return s}function jf(n,e){return n*Math.sqrt(1-e*e)}const oI=["duration","bounce"],aI=["stiffness","damping","mass"];function Pv(n,e){return e.some(t=>n[t]!==void 0)}function lI(n){let e={velocity:at.velocity,stiffness:at.stiffness,damping:at.damping,mass:at.mass,isResolvedFromDuration:!1,...n};if(!Pv(n,aI)&&Pv(n,oI))if(n.visualDuration){const t=n.visualDuration,s=2*Math.PI/(t*1.2),o=s*s,a=2*Br(.05,1,1-(n.bounce||0))*Math.sqrt(o);e={...e,mass:at.mass,stiffness:o,damping:a}}else{const t=rI(n);e={...e,...t,mass:at.mass},e.isResolvedFromDuration=!0}return e}function Yw(n=at.visualDuration,e=at.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:s,restDelta:o}=t;const a=t.keyframes[0],u=t.keyframes[t.keyframes.length-1],d={done:!1,value:a},{stiffness:f,damping:m,mass:y,duration:w,velocity:E,isResolvedFromDuration:A}=lI({...t,velocity:-Or(t.velocity||0)}),P=E||0,N=m/(2*Math.sqrt(f*y)),V=u-a,L=Or(Math.sqrt(f/y)),W=Math.abs(V)<5;s||(s=W?at.restSpeed.granular:at.restSpeed.default),o||(o=W?at.restDelta.granular:at.restDelta.default);let B;if(N<1){const Q=jf(L,N);B=ee=>{const R=Math.exp(-N*L*ee);return u-R*((P+N*L*V)/Q*Math.sin(Q*ee)+V*Math.cos(Q*ee))}}else if(N===1)B=Q=>u-Math.exp(-L*Q)*(V+(P+L*V)*Q);else{const Q=L*Math.sqrt(N*N-1);B=ee=>{const R=Math.exp(-N*L*ee),C=Math.min(Q*ee,300);return u-R*((P+N*L*V)*Math.sinh(C)+Q*V*Math.cosh(C))/Q}}const Y={calculatedDuration:A&&w||null,next:Q=>{const ee=B(Q);if(A)d.done=Q>=w;else{let R=0;N<1&&(R=Q===0?Mr(P):Qw(B,Q,ee));const C=Math.abs(R)<=s,I=Math.abs(u-ee)<=o;d.done=C&&I}return d.value=d.done?u:ee,d},toString:()=>{const Q=Math.min(pw(Y),If),ee=mw(R=>Y.next(Q*R).value,Q,30);return Q+"ms "+ee}};return Y}function Rv({keyframes:n,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:u,min:d,max:f,restDelta:m=.5,restSpeed:y}){const w=n[0],E={done:!1,value:w},A=C=>d!==void 0&&C<d||f!==void 0&&C>f,P=C=>d===void 0?f:f===void 0||Math.abs(d-C)<Math.abs(f-C)?d:f;let N=t*e;const V=w+N,L=u===void 0?V:u(V);L!==V&&(N=L-w);const W=C=>-N*Math.exp(-C/s),B=C=>L+W(C),Y=C=>{const I=W(C),b=B(C);E.done=Math.abs(I)<=m,E.value=E.done?L:b};let Q,ee;const R=C=>{A(E.value)&&(Q=C,ee=Yw({keyframes:[E.value,P(E.value)],velocity:Qw(B,C,E.value),damping:o,stiffness:a,restDelta:m,restSpeed:y}))};return R(0),{calculatedDuration:null,next:C=>{let I=!1;return!ee&&Q===void 0&&(I=!0,Y(C),R(C)),Q!==void 0&&C>=Q?ee.next(C-Q):(!I&&Y(C),E)}}}const uI=Ml(.42,0,1,1),cI=Ml(0,0,.58,1),Mo=Ml(.42,0,.58,1),hI=n=>Array.isArray(n)&&typeof n[0]!="number",dI={linear:vn,easeIn:uI,easeInOut:Mo,easeOut:cI,circIn:Hp,circInOut:Nw,circOut:kw,backIn:$p,backInOut:Pw,backOut:Iw,anticipate:Rw},kv=n=>{if(Op(n)){Q_(n.length===4);const[e,t,s,o]=n;return Ml(e,t,s,o)}else if(typeof n=="string")return dI[n];return n};function fI(n,e,t){const s=[],o=t||Gw,a=n.length-1;for(let u=0;u<a;u++){let d=o(n[u],n[u+1]);if(e){const f=Array.isArray(e)?e[u]||vn:e;d=Ol(f,d)}s.push(d)}return s}function pI(n,e,{clamp:t=!0,ease:s,mixer:o}={}){const a=n.length;if(Q_(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const u=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const d=fI(e,s,o),f=d.length,m=y=>{if(u&&y<n[0])return e[0];let w=0;if(f>1)for(;w<n.length-2&&!(y<n[w+1]);w++);const E=bo(n[w],n[w+1],y);return d[w](E)};return t?y=>m(Br(n[0],n[a-1],y)):m}function mI(n,e){const t=n[n.length-1];for(let s=1;s<=e;s++){const o=bo(0,e,s);n.push(rt(t,1,o))}}function gI(n){const e=[0];return mI(e,n.length-1),e}function yI(n,e){return n.map(t=>t*e)}function vI(n,e){return n.map(()=>e||Mo).splice(0,n.length-1)}function Dc({duration:n=300,keyframes:e,times:t,ease:s="easeInOut"}){const o=hI(s)?s.map(kv):kv(s),a={done:!1,value:e[0]},u=yI(t&&t.length===e.length?t:gI(e),n),d=pI(u,e,{ease:Array.isArray(o)?o:vI(e,o)});return{calculatedDuration:n,next:f=>(a.value=d(f),a.done=f>=n,a)}}const _I=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Ge.update(e,!0),stop:()=>Is(e),now:()=>bt.isProcessing?bt.timestamp:cr.now()}},wI={decay:Rv,inertia:Rv,tween:Dc,keyframes:Dc,spring:Yw},xI=n=>n/100;class Yp extends qw{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:t,motionValue:s,element:o,keyframes:a}=this.options,u=(o==null?void 0:o.KeyframeResolver)||Gp,d=(f,m)=>this.onKeyframesResolved(f,m);this.resolver=new u(a,d,t,s,o),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a,velocity:u=0}=this.options,d=Mp(t)?t:wI[t]||Dc;let f,m;d!==Dc&&typeof e[0]!="number"&&(f=Ol(xI,Gw(e[0],e[1])),e=[0,100]);const y=d({...this.options,keyframes:e});a==="mirror"&&(m=d({...this.options,keyframes:[...e].reverse(),velocity:-u})),y.calculatedDuration===null&&(y.calculatedDuration=pw(y));const{calculatedDuration:w}=y,E=w+o,A=E*(s+1)-o;return{generator:y,mirroredGenerator:m,mapPercentToKeyframes:f,calculatedDuration:w,resolvedDuration:E,totalDuration:A}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:s}=this;if(!s){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:o,generator:a,mirroredGenerator:u,mapPercentToKeyframes:d,keyframes:f,calculatedDuration:m,totalDuration:y,resolvedDuration:w}=s;if(this.startTime===null)return a.next(0);const{delay:E,repeat:A,repeatType:P,repeatDelay:N,onUpdate:V}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-y/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const L=this.currentTime-E*(this.speed>=0?1:-1),W=this.speed>=0?L<0:L>y;this.currentTime=Math.max(L,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=y);let B=this.currentTime,Y=a;if(A){const C=Math.min(this.currentTime,y)/w;let I=Math.floor(C),b=C%1;!b&&C>=1&&(b=1),b===1&&I--,I=Math.min(I,A+1),!!(I%2)&&(P==="reverse"?(b=1-b,N&&(b-=N/w)):P==="mirror"&&(Y=u)),B=Br(0,1,b)*w}const Q=W?{done:!1,value:f[0]}:Y.next(B);d&&(Q.value=d(Q.value));let{done:ee}=Q;!W&&m!==null&&(ee=this.speed>=0?this.currentTime>=y:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ee);return R&&o!==void 0&&(Q.value=oh(f,this.options,o)),V&&V(Q.value),R&&this.finish(),Q}get duration(){const{resolved:e}=this;return e?Or(e.calculatedDuration):0}get time(){return Or(this.currentTime)}set time(e){e=Mr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Or(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=_I,onPlay:t,startTime:s}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),t&&t();const o=this.driver.now();this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=o):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const EI=new Set(["opacity","clipPath","filter","transform"]);function TI(n,e,t,{delay:s=0,duration:o=300,repeat:a=0,repeatType:u="loop",ease:d="easeInOut",times:f}={}){const m={[e]:t};f&&(m.offset=f);const y=yw(d,o);return Array.isArray(y)&&(m.easing=y),n.animate(m,{delay:s,duration:o,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:a+1,direction:u==="reverse"?"alternate":"normal"})}const SI=xp(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),bc=10,AI=2e4;function CI(n){return Mp(n.type)||n.type==="spring"||!gw(n.ease)}function II(n,e){const t=new Yp({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:n[0]};const o=[];let a=0;for(;!s.done&&a<AI;)s=t.sample(a),o.push(s.value),a+=bc;return{times:void 0,keyframes:o,duration:a-bc,ease:"linear"}}const Xw={anticipate:Rw,backInOut:Pw,circInOut:Nw};function PI(n){return n in Xw}class Nv extends qw{constructor(e){super(e);const{name:t,motionValue:s,element:o,keyframes:a}=this.options;this.resolver=new Ww(a,(u,d)=>this.onKeyframesResolved(u,d),t,s,o),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:s=300,times:o,ease:a,type:u,motionValue:d,name:f,startTime:m}=this.options;if(!d.owner||!d.owner.current)return!1;if(typeof a=="string"&&kc()&&PI(a)&&(a=Xw[a]),CI(this.options)){const{onComplete:w,onUpdate:E,motionValue:A,element:P,...N}=this.options,V=II(e,N);e=V.keyframes,e.length===1&&(e[1]=e[0]),s=V.duration,o=V.times,a=V.ease,u="keyframes"}const y=TI(d.owner.current,f,e,{...this.options,duration:s,times:o,ease:a});return y.startTime=m??this.calcStartTime(),this.pendingTimeline?(pv(y,this.pendingTimeline),this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:w}=this.options;d.set(oh(e,this.options,t)),w&&w(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:s,times:o,type:u,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Or(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Or(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:s}=t;s.currentTime=Mr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:s}=t;s.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return vn;const{animation:s}=t;pv(s,e)}return vn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:s,duration:o,type:a,ease:u,times:d}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:m,onUpdate:y,onComplete:w,element:E,...A}=this.options,P=new Yp({...A,keyframes:s,duration:o,type:a,ease:u,times:d,isGenerator:!0}),N=Mr(this.time);m.setWithVelocity(P.sample(N-bc).value,P.sample(N).value,bc)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:s,repeatDelay:o,repeatType:a,damping:u,type:d}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:m}=t.owner.getProps();return SI()&&s&&EI.has(s)&&!f&&!m&&!o&&a!=="mirror"&&u!==0&&d!=="inertia"}}const RI={type:"spring",stiffness:500,damping:25,restSpeed:10},kI=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),NI={type:"keyframes",duration:.8},VI={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},DI=(n,{keyframes:e})=>e.length>2?NI:Ti.has(n)?n.startsWith("scale")?kI(e[1]):RI:VI;function bI({when:n,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:o,repeat:a,repeatType:u,repeatDelay:d,from:f,elapsed:m,...y}){return!!Object.keys(y).length}const Xp=(n,e,t,s={},o,a)=>u=>{const d=Lp(s,n)||{},f=d.delay||s.delay||0;let{elapsed:m=0}=s;m=m-Mr(f);let y={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-m,onUpdate:E=>{e.set(E),d.onUpdate&&d.onUpdate(E)},onComplete:()=>{u(),d.onComplete&&d.onComplete()},name:n,motionValue:e,element:a?void 0:o};bI(d)||(y={...y,...DI(n,y)}),y.duration&&(y.duration=Mr(y.duration)),y.repeatDelay&&(y.repeatDelay=Mr(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let w=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(w=!0)),w&&!a&&e.get()!==void 0){const E=oh(y.keyframes,d);if(E!==void 0)return Ge.update(()=>{y.onUpdate(E),y.onComplete()}),new JA([])}return!a&&Nv.supports(y)?new Nv(y):new Yp(y)};function jI({protectedKeys:n,needsAnimating:e},t){const s=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function Jw(n,e,{delay:t=0,transitionOverride:s,type:o}={}){var a;let{transition:u=n.getDefaultTransition(),transitionEnd:d,...f}=e;s&&(u=s);const m=[],y=o&&n.animationState&&n.animationState.getState()[o];for(const w in f){const E=n.getValue(w,(a=n.latestValues[w])!==null&&a!==void 0?a:null),A=f[w];if(A===void 0||y&&jI(y,w))continue;const P={delay:t,...Lp(u||{},w)};let N=!1;if(window.MotionHandoffAnimation){const L=Tw(n);if(L){const W=window.MotionHandoffAnimation(L,w,Ge);W!==null&&(P.startTime=W,N=!0)}}Rf(n,w),E.start(Xp(w,E,A,n.shouldReduceMotion&&xw.has(w)?{type:!1}:P,n,N));const V=E.animation;V&&m.push(V)}return d&&Promise.all(m).then(()=>{Ge.update(()=>{d&&fC(n,d)})}),m}function Lf(n,e,t={}){var s;const o=_l(n,e,t.type==="exit"?(s=n.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:a=n.getDefaultTransition()||{}}=o||{};t.transitionOverride&&(a=t.transitionOverride);const u=o?()=>Promise.all(Jw(n,o,t)):()=>Promise.resolve(),d=n.variantChildren&&n.variantChildren.size?(m=0)=>{const{delayChildren:y=0,staggerChildren:w,staggerDirection:E}=a;return LI(n,e,y+m,w,E,t)}:()=>Promise.resolve(),{when:f}=a;if(f){const[m,y]=f==="beforeChildren"?[u,d]:[d,u];return m().then(()=>y())}else return Promise.all([u(),d(t.delay)])}function LI(n,e,t=0,s=0,o=1,a){const u=[],d=(n.variantChildren.size-1)*s,f=o===1?(m=0)=>m*s:(m=0)=>d-m*s;return Array.from(n.variantChildren).sort(MI).forEach((m,y)=>{m.notify("AnimationStart",e),u.push(Lf(m,e,{...a,delay:t+f(y)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(u)}function MI(n,e){return n.sortNodePosition(e)}function OI(n,e,t={}){n.notify("AnimationStart",e);let s;if(Array.isArray(e)){const o=e.map(a=>Lf(n,a,t));s=Promise.all(o)}else if(typeof e=="string")s=Lf(n,e,t);else{const o=typeof e=="function"?_l(n,e,t.custom):e;s=Promise.all(Jw(n,o,t))}return s.then(()=>{n.notify("AnimationComplete",e)})}function Zw(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let s=0;s<t;s++)if(e[s]!==n[s])return!1;return!0}const FI=Tp.length;function ex(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?ex(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<FI;t++){const s=Tp[t],o=n.props[s];(gl(o)||o===!1)&&(e[s]=o)}return e}const BI=[...Ep].reverse(),UI=Ep.length;function zI(n){return e=>Promise.all(e.map(({animation:t,options:s})=>OI(n,t,s)))}function $I(n){let e=zI(n),t=Vv(),s=!0;const o=f=>(m,y)=>{var w;const E=_l(n,y,f==="exit"?(w=n.presenceContext)===null||w===void 0?void 0:w.custom:void 0);if(E){const{transition:A,transitionEnd:P,...N}=E;m={...m,...N,...P}}return m};function a(f){e=f(n)}function u(f){const{props:m}=n,y=ex(n.parent)||{},w=[],E=new Set;let A={},P=1/0;for(let V=0;V<UI;V++){const L=BI[V],W=t[L],B=m[L]!==void 0?m[L]:y[L],Y=gl(B),Q=L===f?W.isActive:null;Q===!1&&(P=V);let ee=B===y[L]&&B!==m[L]&&Y;if(ee&&s&&n.manuallyAnimateOnMount&&(ee=!1),W.protectedKeys={...A},!W.isActive&&Q===null||!B&&!W.prevProp||sh(B)||typeof B=="boolean")continue;const R=HI(W.prevProp,B);let C=R||L===f&&W.isActive&&!ee&&Y||V>P&&Y,I=!1;const b=Array.isArray(B)?B:[B];let O=b.reduce(o(L),{});Q===!1&&(O={});const{prevResolvedValues:U={}}=W,D={...U,...O},He=ye=>{C=!0,E.has(ye)&&(I=!0,E.delete(ye)),W.needsAnimating[ye]=!0;const re=n.getValue(ye);re&&(re.liveStyle=!1)};for(const ye in D){const re=O[ye],he=U[ye];if(A.hasOwnProperty(ye))continue;let ae=!1;Cf(re)&&Cf(he)?ae=!Zw(re,he):ae=re!==he,ae?re!=null?He(ye):E.add(ye):re!==void 0&&E.has(ye)?He(ye):W.protectedKeys[ye]=!0}W.prevProp=B,W.prevResolvedValues=O,W.isActive&&(A={...A,...O}),s&&n.blockInitialAnimation&&(C=!1),C&&(!(ee&&R)||I)&&w.push(...b.map(ye=>({animation:ye,options:{type:L}})))}if(E.size){const V={};if(typeof m.initial!="boolean"){const L=_l(n,Array.isArray(m.initial)?m.initial[0]:m.initial);L&&L.transition&&(V.transition=L.transition)}E.forEach(L=>{const W=n.getBaseTarget(L),B=n.getValue(L);B&&(B.liveStyle=!0),V[L]=W??null}),w.push({animation:V})}let N=!!w.length;return s&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(N=!1),s=!1,N?e(w):Promise.resolve()}function d(f,m){var y;if(t[f].isActive===m)return Promise.resolve();(y=n.variantChildren)===null||y===void 0||y.forEach(E=>{var A;return(A=E.animationState)===null||A===void 0?void 0:A.setActive(f,m)}),t[f].isActive=m;const w=u(f);for(const E in t)t[E].protectedKeys={};return w}return{animateChanges:u,setActive:d,setAnimateFunction:a,getState:()=>t,reset:()=>{t=Vv(),s=!0}}}function HI(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!Zw(e,n):!1}function di(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Vv(){return{animate:di(!0),whileInView:di(),whileHover:di(),whileTap:di(),whileDrag:di(),whileFocus:di(),exit:di()}}class js{constructor(e){this.isMounted=!1,this.node=e}update(){}}class WI extends js{constructor(e){super(e),e.animationState||(e.animationState=$I(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();sh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let qI=0;class KI extends js{constructor(){super(...arguments),this.id=qI++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const o=this.node.animationState.setActive("exit",!e);t&&!e&&o.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const GI={animation:{Feature:WI},exit:{Feature:KI}};function El(n,e,t,s={passive:!0}){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t)}function Fl(n){return{point:{x:n.pageX,y:n.pageY}}}const QI=n=>e=>Fp(e)&&n(e,Fl(e));function Po(n,e,t,s){return El(n,e,QI(t),s)}function tx({top:n,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:n,max:s}}}function YI({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function XI(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),s=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}const nx=1e-4,JI=1-nx,ZI=1+nx,rx=.01,eP=0-rx,tP=0+rx;function Xt(n){return n.max-n.min}function nP(n,e,t){return Math.abs(n-e)<=t}function Dv(n,e,t,s=.5){n.origin=s,n.originPoint=rt(e.min,e.max,n.origin),n.scale=Xt(t)/Xt(e),n.translate=rt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=JI&&n.scale<=ZI||isNaN(n.scale))&&(n.scale=1),(n.translate>=eP&&n.translate<=tP||isNaN(n.translate))&&(n.translate=0)}function ul(n,e,t,s){Dv(n.x,e.x,t.x,s?s.originX:void 0),Dv(n.y,e.y,t.y,s?s.originY:void 0)}function bv(n,e,t){n.min=t.min+e.min,n.max=n.min+Xt(e)}function rP(n,e,t){bv(n.x,e.x,t.x),bv(n.y,e.y,t.y)}function jv(n,e,t){n.min=e.min-t.min,n.max=n.min+Xt(e)}function cl(n,e,t){jv(n.x,e.x,t.x),jv(n.y,e.y,t.y)}const Lv=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ro=()=>({x:Lv(),y:Lv()}),Mv=()=>({min:0,max:0}),ct=()=>({x:Mv(),y:Mv()});function kn(n){return[n("x"),n("y")]}function uf(n){return n===void 0||n===1}function Mf({scale:n,scaleX:e,scaleY:t}){return!uf(n)||!uf(e)||!uf(t)}function pi(n){return Mf(n)||sx(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function sx(n){return Ov(n.x)||Ov(n.y)}function Ov(n){return n&&n!=="0%"}function jc(n,e,t){const s=n-t,o=e*s;return t+o}function Fv(n,e,t,s,o){return o!==void 0&&(n=jc(n,o,s)),jc(n,t,s)+e}function Of(n,e=0,t=1,s,o){n.min=Fv(n.min,e,t,s,o),n.max=Fv(n.max,e,t,s,o)}function ix(n,{x:e,y:t}){Of(n.x,e.translate,e.scale,e.originPoint),Of(n.y,t.translate,t.scale,t.originPoint)}const Bv=.999999999999,Uv=1.0000000000001;function sP(n,e,t,s=!1){const o=t.length;if(!o)return;e.x=e.y=1;let a,u;for(let d=0;d<o;d++){a=t[d],u=a.projectionDelta;const{visualElement:f}=a.options;f&&f.props.style&&f.props.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&No(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,ix(n,u)),s&&pi(a.latestValues)&&No(n,a.latestValues))}e.x<Uv&&e.x>Bv&&(e.x=1),e.y<Uv&&e.y>Bv&&(e.y=1)}function ko(n,e){n.min=n.min+e,n.max=n.max+e}function zv(n,e,t,s,o=.5){const a=rt(n.min,n.max,o);Of(n,e,t,a,s)}function No(n,e){zv(n.x,e.x,e.scaleX,e.scale,e.originX),zv(n.y,e.y,e.scaleY,e.scale,e.originY)}function ox(n,e){return tx(XI(n.getBoundingClientRect(),e))}function iP(n,e,t){const s=ox(n,t),{scroll:o}=e;return o&&(ko(s.x,o.offset.x),ko(s.y,o.offset.y)),s}const $v=(n,e)=>Math.abs(n-e);function oP(n,e){const t=$v(n.x,e.x),s=$v(n.y,e.y);return Math.sqrt(t**2+s**2)}class ax{constructor(e,t,{transformPagePoint:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=hf(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,E=oP(y.offset,{x:0,y:0})>=3;if(!w&&!E)return;const{point:A}=y,{timestamp:P}=bt;this.history.push({...A,timestamp:P});const{onStart:N,onMove:V}=this.handlers;w||(N&&N(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,y)},this.handlePointerMove=(y,w)=>{if(y.target instanceof Element&&y.target.hasPointerCapture&&y.pointerId!==void 0)try{if(!y.target.hasPointerCapture(y.pointerId))return}catch{}this.lastMoveEvent=y,this.lastMoveEventInfo=cf(w,this.transformPagePoint),Ge.update(this.updatePoint,!0)},this.handlePointerUp=(y,w)=>{Nc(y,"release"),this.end();const{onEnd:E,onSessionEnd:A,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=hf(y.type==="pointercancel"||y.type==="lostpointercapture"?this.lastMoveEventInfo:cf(w,this.transformPagePoint),this.history);this.startEvent&&E&&E(y,N),A&&A(y,N)},!Fp(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=s;const a=Fl(e),u=cf(a,this.transformPagePoint),{point:d}=u,{timestamp:f}=bt;this.history=[{...d,timestamp:f}];const{onSessionStart:m}=t;m&&m(e,hf(u,this.history)),Nc(e,"set"),this.removeListeners=Ol(Po(e.currentTarget,"pointermove",this.handlePointerMove),Po(e.currentTarget,"pointerup",this.handlePointerUp),Po(e.currentTarget,"pointercancel",this.handlePointerUp),Po(e.currentTarget,"lostpointercapture",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Is(this.updatePoint)}}function cf(n,e){return e?{point:e(n.point)}:n}function Hv(n,e){return{x:n.x-e.x,y:n.y-e.y}}function hf({point:n},e){return{point:n,delta:Hv(n,lx(e)),offset:Hv(n,aP(e)),velocity:lP(e,.1)}}function aP(n){return n[0]}function lx(n){return n[n.length-1]}function lP(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,s=null;const o=lx(n);for(;t>=0&&(s=n[t],!(o.timestamp-s.timestamp>Mr(e)));)t--;if(!s)return{x:0,y:0};const a=Or(o.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const u={x:(o.x-s.x)/a,y:(o.y-s.y)/a};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function uP(n,{min:e,max:t},s){return e!==void 0&&n<e?n=s?rt(e,n,s.min):Math.max(n,e):t!==void 0&&n>t&&(n=s?rt(t,n,s.max):Math.min(n,t)),n}function Wv(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function cP(n,{top:e,left:t,bottom:s,right:o}){return{x:Wv(n.x,t,o),y:Wv(n.y,e,s)}}function qv(n,e){let t=e.min-n.min,s=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,s]=[s,t]),{min:t,max:s}}function hP(n,e){return{x:qv(n.x,e.x),y:qv(n.y,e.y)}}function dP(n,e){let t=.5;const s=Xt(n),o=Xt(e);return o>s?t=bo(e.min,e.max-s,n.min):s>o&&(t=bo(n.min,n.max-o,e.min)),Br(0,1,t)}function fP(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Ff=.35;function pP(n=Ff){return n===!1?n=0:n===!0&&(n=Ff),{x:Kv(n,"left","right"),y:Kv(n,"top","bottom")}}function Kv(n,e,t){return{min:Gv(n,e),max:Gv(n,t)}}function Gv(n,e){return typeof n=="number"?n:n[e]||0}const mP=new WeakMap;class gP{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ct(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=y=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Fl(y).point)},a=(y,w)=>{const{drag:E,dragPropagation:A,onDragStart:P}=this.getProps();if(E&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=lC(E),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),kn(V=>{let L=this.getAxisMotionValue(V).get()||0;if(ur.test(L)){const{projection:W}=this.visualElement;if(W&&W.layout){const B=W.layout.layoutBox[V];B&&(L=Xt(B)*(parseFloat(L)/100))}}this.originPoint[V]=L}),P&&Ge.postRender(()=>P(y,w)),Rf(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},u=(y,w)=>{const{dragPropagation:E,dragDirectionLock:A,onDirectionLock:P,onDrag:N}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:V}=w;if(A&&this.currentDirection===null){this.currentDirection=yP(V),this.currentDirection!==null&&P&&P(this.currentDirection);return}this.updateAxis("x",w.point,V),this.updateAxis("y",w.point,V),this.visualElement.render(),N&&N(y,w)},d=(y,w)=>this.stop(y,w),f=()=>kn(y=>{var w;return this.getAnimationState(y)==="paused"&&((w=this.getAxisMotionValue(y).animation)===null||w===void 0?void 0:w.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new ax(e,{onSessionStart:o,onStart:a,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m})}stop(e,t){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:o}=t;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ge.postRender(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:o}=this.getProps();if(!s||!hc(e,o,this.currentDirection))return;const a=this.getAxisMotionValue(e);let u=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(u=uP(u,this.constraints[e],this.elastic[e])),a.set(u)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:s}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;t&&Co(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&o?this.constraints=cP(o.layoutBox,t):this.constraints=!1,this.elastic=pP(s),a!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&kn(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=fP(o.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Co(e))return!1;const s=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const a=iP(s,o.root,this.visualElement.getTransformPagePoint());let u=hP(o.layout.layoutBox,a);if(t){const d=t(YI(u));this.hasMutatedConstraints=!!d,d&&(u=tx(d))}return u}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:o,dragTransition:a,dragSnapToOrigin:u,onDragTransitionEnd:d}=this.getProps(),f=this.constraints||{},m=kn(y=>{if(!hc(y,t,this.currentDirection))return;let w=f&&f[y]||{};u&&(w={min:0,max:0});const E=o?200:1e6,A=o?40:1e7,P={type:"inertia",velocity:s?e[y]:0,bounceStiffness:E,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...a,...w};return this.startAxisValueAnimation(y,P)});return Promise.all(m).then(d)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return Rf(this.visualElement,e),s.start(Xp(e,s,0,t,this.visualElement,!1))}stopAnimation(){kn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){kn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),o=s[t];return o||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){kn(t=>{const{drag:s}=this.getProps();if(!hc(t,s,this.currentDirection))return;const{projection:o}=this.visualElement,a=this.getAxisMotionValue(t);if(o&&o.layout){const{min:u,max:d}=o.layout.layoutBox[t];a.set(e[t]-rt(u,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!Co(t)||!s||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};kn(u=>{const d=this.getAxisMotionValue(u);if(d&&this.constraints!==!1){const f=d.get();o[u]=dP({min:f,max:f},this.constraints[u])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),kn(u=>{if(!hc(u,e,null))return;const d=this.getAxisMotionValue(u),{min:f,max:m}=this.constraints[u];d.set(rt(f,m,o[u]))})}addListeners(){if(!this.visualElement.current)return;mP.set(this.visualElement,this);const e=this.visualElement.current,t=Po(e,"pointerdown",f=>{const{drag:m,dragListener:y=!0}=this.getProps();m&&y&&this.start(f)}),s=()=>{const{dragConstraints:f}=this.getProps();Co(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,a=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Ge.read(s);const u=El(window,"resize",()=>this.scalePositionWithinConstraints()),d=o.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m})=>{this.isDragging&&m&&(kn(y=>{const w=this.getAxisMotionValue(y);w&&(this.originPoint[y]+=f[y].translate,w.set(w.get()+f[y].translate))}),this.visualElement.render())});return()=>{u(),t(),a(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:o=!1,dragConstraints:a=!1,dragElastic:u=Ff,dragMomentum:d=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:o,dragConstraints:a,dragElastic:u,dragMomentum:d}}}function hc(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function yP(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class vP extends js{constructor(e){super(e),this.removeGroupControls=vn,this.removeListeners=vn,this.controls=new gP(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||vn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Qv=n=>(e,t)=>{n&&Ge.postRender(()=>n(e,t))};class _P extends js{constructor(){super(...arguments),this.removePointerDownListener=vn}onPointerDown(e){this.session=new ax(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:o}=this.node.getProps();return{onSessionStart:Qv(e),onStart:Qv(t),onMove:s,onEnd:(a,u)=>{delete this.session,o&&Ge.postRender(()=>o(a,u))}}}mount(){this.removePointerDownListener=Po(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const xc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Yv(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const el={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(xe.test(n))n=parseFloat(n);else return n;const t=Yv(n,e.target.x),s=Yv(n,e.target.y);return`${t}% ${s}%`}},wP={correct:(n,{treeScale:e,projectionDelta:t})=>{const s=n,o=Ps.parse(n);if(o.length>5)return s;const a=Ps.createTransformer(n),u=typeof o[0]!="number"?1:0,d=t.x.scale*e.x,f=t.y.scale*e.y;o[0+u]/=d,o[1+u]/=f;const m=rt(d,f,.5);return typeof o[2+u]=="number"&&(o[2+u]/=m),typeof o[3+u]=="number"&&(o[3+u]/=m),a(o)}};class xP extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:o}=this.props,{projection:a}=e;AA(EP),a&&(t.group&&t.group.add(a),s&&s.register&&o&&s.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),xc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:o,isPresent:a}=this.props,u=s.projection;return u&&(u.isPresent=a,o||e.layoutDependency!==t||t===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?u.promote():u.relegate()||Ge.postRender(()=>{const d=u.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ap.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(o),s&&s.deregister&&s.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ux(n){const[e,t]=q_(),s=j.useContext(yp);return _.jsx(xP,{...n,layoutGroup:s,switchLayoutGroup:j.useContext(tw),isPresent:e,safeToRemove:t})}const EP={borderRadius:{...el,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:el,borderTopRightRadius:el,borderBottomLeftRadius:el,borderBottomRightRadius:el,boxShadow:wP};function TP(n,e,t){const s=qt(n)?n:wl(n);return s.start(Xp("",s,e,t)),s.animation}function SP(n){return n instanceof SVGElement&&n.tagName!=="svg"}const AP=(n,e)=>n.depth-e.depth;class CP{constructor(){this.children=[],this.isDirty=!1}add(e){Bp(this.children,e),this.isDirty=!0}remove(e){Up(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(AP),this.isDirty=!1,this.children.forEach(e)}}function IP(n,e){const t=cr.now(),s=({timestamp:o})=>{const a=o-t;a>=e&&(Is(s),n(a-e))};return Ge.read(s,!0),()=>Is(s)}const cx=["TopLeft","TopRight","BottomLeft","BottomRight"],PP=cx.length,Xv=n=>typeof n=="string"?parseFloat(n):n,Jv=n=>typeof n=="number"||xe.test(n);function RP(n,e,t,s,o,a){o?(n.opacity=rt(0,t.opacity!==void 0?t.opacity:1,kP(s)),n.opacityExit=rt(e.opacity!==void 0?e.opacity:1,0,NP(s))):a&&(n.opacity=rt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,s));for(let u=0;u<PP;u++){const d=`border${cx[u]}Radius`;let f=Zv(e,d),m=Zv(t,d);if(f===void 0&&m===void 0)continue;f||(f=0),m||(m=0),f===0||m===0||Jv(f)===Jv(m)?(n[d]=Math.max(rt(Xv(f),Xv(m),s),0),(ur.test(m)||ur.test(f))&&(n[d]+="%")):n[d]=m}(e.rotate||t.rotate)&&(n.rotate=rt(e.rotate||0,t.rotate||0,s))}function Zv(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const kP=hx(0,.5,kw),NP=hx(.5,.95,vn);function hx(n,e,t){return s=>s<n?0:s>e?1:t(bo(n,e,s))}function e0(n,e){n.min=e.min,n.max=e.max}function Rn(n,e){e0(n.x,e.x),e0(n.y,e.y)}function t0(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function n0(n,e,t,s,o){return n-=e,n=jc(n,1/t,s),o!==void 0&&(n=jc(n,1/o,s)),n}function VP(n,e=0,t=1,s=.5,o,a=n,u=n){if(ur.test(e)&&(e=parseFloat(e),e=rt(u.min,u.max,e/100)-u.min),typeof e!="number")return;let d=rt(a.min,a.max,s);n===a&&(d-=e),n.min=n0(n.min,e,t,d,o),n.max=n0(n.max,e,t,d,o)}function r0(n,e,[t,s,o],a,u){VP(n,e[t],e[s],e[o],e.scale,a,u)}const DP=["x","scaleX","originX"],bP=["y","scaleY","originY"];function s0(n,e,t,s){r0(n.x,e,DP,t?t.x:void 0,s?s.x:void 0),r0(n.y,e,bP,t?t.y:void 0,s?s.y:void 0)}function i0(n){return n.translate===0&&n.scale===1}function dx(n){return i0(n.x)&&i0(n.y)}function o0(n,e){return n.min===e.min&&n.max===e.max}function jP(n,e){return o0(n.x,e.x)&&o0(n.y,e.y)}function a0(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function fx(n,e){return a0(n.x,e.x)&&a0(n.y,e.y)}function l0(n){return Xt(n.x)/Xt(n.y)}function u0(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class LP{constructor(){this.members=[]}add(e){Bp(this.members,e),e.scheduleRender()}remove(e){if(Up(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(o=>e===o);if(t===0)return!1;let s;for(let o=t;o>=0;o--){const a=this.members[o];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function MP(n,e,t){let s="";const o=n.x.translate/e.x,a=n.y.translate/e.y,u=(t==null?void 0:t.z)||0;if((o||a||u)&&(s=`translate3d(${o}px, ${a}px, ${u}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:m,rotate:y,rotateX:w,rotateY:E,skewX:A,skewY:P}=t;m&&(s=`perspective(${m}px) ${s}`),y&&(s+=`rotate(${y}deg) `),w&&(s+=`rotateX(${w}deg) `),E&&(s+=`rotateY(${E}deg) `),A&&(s+=`skewX(${A}deg) `),P&&(s+=`skewY(${P}deg) `)}const d=n.x.scale*e.x,f=n.y.scale*e.y;return(d!==1||f!==1)&&(s+=`scale(${d}, ${f})`),s||"none"}const df=["","X","Y","Z"],OP={visibility:"hidden"},c0=1e3;let FP=0;function ff(n,e,t,s){const{latestValues:o}=e;o[n]&&(t[n]=o[n],e.setStaticValue(n,0),s&&(s[n]=0))}function px(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=Tw(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:o,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Ge,!(o||a))}const{parent:s}=n;s&&!s.hasCheckedOptimisedAppear&&px(s)}function mx({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:o}){return class{constructor(u={},d=e==null?void 0:e()){this.id=FP++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(zP),this.nodes.forEach(KP),this.nodes.forEach(GP),this.nodes.forEach($P)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new CP)}addEventListener(u,d){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new zp),this.eventHandlers.get(u).add(d)}notifyListeners(u,...d){const f=this.eventHandlers.get(u);f&&f.notify(...d)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=SP(u),this.instance=u;const{layoutId:f,layout:m,visualElement:y}=this.options;if(y&&!y.current&&y.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(m||f)&&(this.isLayoutDirty=!0),n){let w;const E=()=>this.root.updateBlockedByResize=!1;n(u,()=>{this.root.updateBlockedByResize=!0,w&&w(),w=IP(E,250),xc.hasAnimatedSinceResize&&(xc.hasAnimatedSinceResize=!1,this.nodes.forEach(d0))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&y&&(f||m)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:E,hasRelativeLayoutChanged:A,layout:P})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||y.getDefaultTransition()||ZP,{onLayoutAnimationStart:V,onLayoutAnimationComplete:L}=y.getProps(),W=!this.targetLayout||!fx(this.targetLayout,P),B=!E&&A;if(this.options.layoutRoot||this.resumeFrom||B||E&&(W||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(w,B);const Y={...Lp(N,"layout"),onPlay:V,onComplete:L};(y.shouldReduceMotion||this.options.layoutRoot)&&(Y.delay=0,Y.type=!1),this.startAnimation(Y)}else E||d0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=P})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Is(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(QP),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&px(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const w=this.path[y];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:d,layout:f}=this.options;if(d===void 0&&!f)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(h0);return}this.isUpdating||this.nodes.forEach(WP),this.isUpdating=!1,this.nodes.forEach(qP),this.nodes.forEach(BP),this.nodes.forEach(UP),this.clearAllSnapshots();const d=cr.now();bt.delta=Br(0,1e3/60,d-bt.timestamp),bt.timestamp=d,bt.isProcessing=!0,rf.update.process(bt),rf.preRender.process(bt),rf.render.process(bt),bt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ap.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(HP),this.sharedNodes.forEach(YP)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Xt(this.snapshot.measuredBox.x)&&!Xt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ct(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(d=!1),d){const f=s(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!o)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!dx(this.projectionDelta),f=this.getTransformTemplate(),m=f?f(this.latestValues,""):void 0,y=m!==this.prevTransformTemplateValue;u&&(d||pi(this.latestValues)||y)&&(o(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const d=this.measurePageBox();let f=this.removeElementScroll(d);return u&&(f=this.removeTransform(f)),eR(f),{animationId:this.root.animationId,measuredBox:d,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:d}=this.options;if(!d)return ct();const f=d.measureViewportBox();if(!(((u=this.scroll)===null||u===void 0?void 0:u.wasRoot)||this.path.some(tR))){const{scroll:y}=this.root;y&&(ko(f.x,y.offset.x),ko(f.y,y.offset.y))}return f}removeElementScroll(u){var d;const f=ct();if(Rn(f,u),!((d=this.scroll)===null||d===void 0)&&d.wasRoot)return f;for(let m=0;m<this.path.length;m++){const y=this.path[m],{scroll:w,options:E}=y;y!==this.root&&w&&E.layoutScroll&&(w.wasRoot&&Rn(f,u),ko(f.x,w.offset.x),ko(f.y,w.offset.y))}return f}applyTransform(u,d=!1){const f=ct();Rn(f,u);for(let m=0;m<this.path.length;m++){const y=this.path[m];!d&&y.options.layoutScroll&&y.scroll&&y!==y.root&&No(f,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),pi(y.latestValues)&&No(f,y.latestValues)}return pi(this.latestValues)&&No(f,this.latestValues),f}removeTransform(u){const d=ct();Rn(d,u);for(let f=0;f<this.path.length;f++){const m=this.path[f];if(!m.instance||!pi(m.latestValues))continue;Mf(m.latestValues)&&m.updateSnapshot();const y=ct(),w=m.measurePageBox();Rn(y,w),s0(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,y)}return pi(this.latestValues)&&s0(d,this.latestValues),d}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var d;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==f;if(!(u||m&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:w,layoutId:E}=this.options;if(!(!this.layout||!(w||E))){if(this.resolvedRelativeTargetAt=bt.timestamp,!this.targetDelta&&!this.relativeTarget){const A=this.getClosestProjectingParent();A&&A.layout&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ct(),this.relativeTargetOrigin=ct(),cl(this.relativeTargetOrigin,this.layout.layoutBox,A.layout.layoutBox),Rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ct(),this.targetWithTransforms=ct()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rP(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Rn(this.target,this.layout.layoutBox),ix(this.target,this.targetDelta)):Rn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const A=this.getClosestProjectingParent();A&&!!A.resumingFrom==!!this.resumingFrom&&!A.options.layoutScroll&&A.target&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ct(),this.relativeTargetOrigin=ct(),cl(this.relativeTargetOrigin,this.target,A.target),Rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Mf(this.parent.latestValues)||sx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const d=this.getLead(),f=!!this.resumingFrom||this!==d;let m=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(m=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===bt.timestamp&&(m=!1),m)return;const{layout:y,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||w))return;Rn(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,A=this.treeScale.y;sP(this.layoutCorrected,this.treeScale,this.path,f),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=ct());const{target:P}=d;if(!P){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(t0(this.prevProjectionDelta.x,this.projectionDelta.x),t0(this.prevProjectionDelta.y,this.projectionDelta.y)),ul(this.projectionDelta,this.layoutCorrected,P,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==A||!u0(this.projectionDelta.x,this.prevProjectionDelta.x)||!u0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",P))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var d;if((d=this.options.visualElement)===null||d===void 0||d.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ro(),this.projectionDelta=Ro(),this.projectionDeltaWithTransform=Ro()}setAnimationOrigin(u,d=!1){const f=this.snapshot,m=f?f.latestValues:{},y={...this.latestValues},w=Ro();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const E=ct(),A=f?f.source:void 0,P=this.layout?this.layout.source:void 0,N=A!==P,V=this.getStack(),L=!V||V.members.length<=1,W=!!(N&&!L&&this.options.crossfade===!0&&!this.path.some(JP));this.animationProgress=0;let B;this.mixTargetDelta=Y=>{const Q=Y/1e3;f0(w.x,u.x,Q),f0(w.y,u.y,Q),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(cl(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),XP(this.relativeTarget,this.relativeTargetOrigin,E,Q),B&&jP(this.relativeTarget,B)&&(this.isProjectionDirty=!1),B||(B=ct()),Rn(B,this.relativeTarget)),N&&(this.animationValues=y,RP(y,m,this.latestValues,Q,W,L)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Is(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ge.update(()=>{xc.hasAnimatedSinceResize=!0,this.currentAnimation=TP(0,c0,{...u,onUpdate:d=>{this.mixTargetDelta(d),u.onUpdate&&u.onUpdate(d)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(c0),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:d,target:f,layout:m,latestValues:y}=u;if(!(!d||!f||!m)){if(this!==u&&this.layout&&m&&gx(this.options.animationType,this.layout.layoutBox,m.layoutBox)){f=this.target||ct();const w=Xt(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+w;const E=Xt(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+E}Rn(d,f),No(d,y),ul(this.projectionDeltaWithTransform,this.layoutCorrected,d,y)}}registerSharedNode(u,d){this.sharedNodes.has(u)||this.sharedNodes.set(u,new LP),this.sharedNodes.get(u).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:d}=this.options;return d?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:d}=this.options;return d?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:d,preserveFollowOpacity:f}={}){const m=this.getStack();m&&m.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let d=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(d=!0),!d)return;const m={};f.z&&ff("z",u,m,this.animationValues);for(let y=0;y<df.length;y++)ff(`rotate${df[y]}`,u,m,this.animationValues),ff(`skew${df[y]}`,u,m,this.animationValues);u.render();for(const y in m)u.setStaticValue(y,m[y]),this.animationValues&&(this.animationValues[y]=m[y]);u.scheduleRender()}getProjectionStyles(u){var d,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return OP;const m={visibility:""},y=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,m.opacity="",m.pointerEvents=_c(u==null?void 0:u.pointerEvents)||"",m.transform=y?y(this.latestValues,""):"none",m;const w=this.getLead();if(!this.projectionDelta||!this.layout||!w.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=_c(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!pi(this.latestValues)&&(N.transform=y?y({},""):"none",this.hasProjected=!1),N}const E=w.animationValues||w.latestValues;this.applyTransformsToTarget(),m.transform=MP(this.projectionDeltaWithTransform,this.treeScale,E),y&&(m.transform=y(E,m.transform));const{x:A,y:P}=this.projectionDelta;m.transformOrigin=`${A.origin*100}% ${P.origin*100}% 0`,w.animationValues?m.opacity=w===this?(f=(d=E.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:m.opacity=w===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const N in yl){if(E[N]===void 0)continue;const{correct:V,applyTo:L,isCSSVariable:W}=yl[N],B=m.transform==="none"?E[N]:V(E[N],w);if(L){const Y=L.length;for(let Q=0;Q<Y;Q++)m[L[Q]]=B}else W?this.options.visualElement.renderState.vars[N]=B:m[N]=B}return this.options.layoutId&&(m.pointerEvents=w===this?_c(u==null?void 0:u.pointerEvents)||"":"none"),m}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var d;return(d=u.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(h0),this.root.sharedNodes.clear()}}}function BP(n){n.updateLayout()}function UP(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:o}=n.layout,{animationType:a}=n.options,u=t.source!==n.layout.source;a==="size"?kn(w=>{const E=u?t.measuredBox[w]:t.layoutBox[w],A=Xt(E);E.min=s[w].min,E.max=E.min+A}):gx(a,t.layoutBox,s)&&kn(w=>{const E=u?t.measuredBox[w]:t.layoutBox[w],A=Xt(s[w]);E.max=E.min+A,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[w].max=n.relativeTarget[w].min+A)});const d=Ro();ul(d,s,t.layoutBox);const f=Ro();u?ul(f,n.applyTransform(o,!0),t.measuredBox):ul(f,s,t.layoutBox);const m=!dx(d);let y=!1;if(!n.resumeFrom){const w=n.getClosestProjectingParent();if(w&&!w.resumeFrom){const{snapshot:E,layout:A}=w;if(E&&A){const P=ct();cl(P,t.layoutBox,E.layoutBox);const N=ct();cl(N,s,A.layoutBox),fx(P,N)||(y=!0),w.options.layoutRoot&&(n.relativeTarget=N,n.relativeTargetOrigin=P,n.relativeParent=w)}}}n.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:f,layoutDelta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:y})}else if(n.isLead()){const{onExitComplete:s}=n.options;s&&s()}n.options.transition=void 0}function zP(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function $P(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function HP(n){n.clearSnapshot()}function h0(n){n.clearMeasurements()}function WP(n){n.isLayoutDirty=!1}function qP(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function d0(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function KP(n){n.resolveTargetDelta()}function GP(n){n.calcProjection()}function QP(n){n.resetSkewAndRotation()}function YP(n){n.removeLeadSnapshot()}function f0(n,e,t){n.translate=rt(e.translate,0,t),n.scale=rt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function p0(n,e,t,s){n.min=rt(e.min,t.min,s),n.max=rt(e.max,t.max,s)}function XP(n,e,t,s){p0(n.x,e.x,t.x,s),p0(n.y,e.y,t.y,s)}function JP(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const ZP={duration:.45,ease:[.4,0,.1,1]},m0=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),g0=m0("applewebkit/")&&!m0("chrome/")?Math.round:vn;function y0(n){n.min=g0(n.min),n.max=g0(n.max)}function eR(n){y0(n.x),y0(n.y)}function gx(n,e,t){return n==="position"||n==="preserve-aspect"&&!nP(l0(e),l0(t),.2)}function tR(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const nR=mx({attachResizeListener:(n,e)=>El(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),pf={current:void 0},yx=mx({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!pf.current){const n=new nR({});n.mount(window),n.setOptions({layoutScroll:!0}),pf.current=n}return pf.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),rR={pan:{Feature:_P},drag:{Feature:vP,ProjectionNode:yx,MeasureLayout:ux}};function v0(n,e,t){const{props:s}=n;n.animationState&&s.whileHover&&n.animationState.setActive("whileHover",t==="Start");const o="onHover"+t,a=s[o];a&&Ge.postRender(()=>a(e,Fl(e)))}class sR extends js{mount(){const{current:e}=this.node;e&&(this.unmount=nC(e,(t,s)=>(v0(this.node,s,"Start"),o=>v0(this.node,o,"End"))))}unmount(){}}class iR extends js{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ol(El(this.node.current,"focus",()=>this.onFocus()),El(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function _0(n,e,t){const{props:s}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&s.whileTap&&n.animationState.setActive("whileTap",t==="Start");const o="onTap"+(t==="End"?"":t),a=s[o];a&&Ge.postRender(()=>a(e,Fl(e)))}class oR extends js{mount(){const{current:e}=this.node;e&&(this.unmount=oC(e,(t,s)=>(_0(this.node,s,"Start"),(o,{success:a})=>_0(this.node,o,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Bf=new WeakMap,mf=new WeakMap,aR=n=>{const e=Bf.get(n.target);e&&e(n)},lR=n=>{n.forEach(aR)};function uR({root:n,...e}){const t=n||document;mf.has(t)||mf.set(t,{});const s=mf.get(t),o=JSON.stringify(e);return s[o]||(s[o]=new IntersectionObserver(lR,{root:n,...e})),s[o]}function cR(n,e,t){const s=uR(e);return Bf.set(n,t),s.observe(n),()=>{Bf.delete(n),s.unobserve(n)}}const hR={some:0,all:1};class dR extends js{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:o="some",once:a}=e,u={root:t?t.current:void 0,rootMargin:s,threshold:typeof o=="number"?o:hR[o]},d=f=>{const{isIntersecting:m}=f;if(this.isInView===m||(this.isInView=m,a&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:y,onViewportLeave:w}=this.node.getProps(),E=m?y:w;E&&E(f)};return cR(this.node.current,u,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(fR(e,t))&&this.startObserver()}unmount(){}}function fR({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const pR={inView:{Feature:dR},tap:{Feature:oR},focus:{Feature:iR},hover:{Feature:sR}},mR={layout:{ProjectionNode:yx,MeasureLayout:ux}},Uf={current:null},vx={current:!1};function gR(){if(vx.current=!0,!!wp)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Uf.current=n.matches;n.addListener(e),e()}else Uf.current=!1}const yR=[...Hw,$t,Ps],vR=n=>yR.find($w(n)),_R=new WeakMap;function wR(n,e,t){for(const s in e){const o=e[s],a=t[s];if(qt(o))n.addValue(s,o);else if(qt(a))n.addValue(s,wl(o,{owner:n}));else if(a!==o)if(n.hasValue(s)){const u=n.getValue(s);u.liveStyle===!0?u.jump(o):u.hasAnimated||u.set(o)}else{const u=n.getStaticValue(s);n.addValue(s,wl(u!==void 0?u:o,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const w0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class xR{scrapeMotionValuesFromProps(e,t,s){return{}}constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:o,blockInitialAnimation:a,visualState:u},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Gp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=cr.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,Ge.render(this.render,!1,!0))};const{latestValues:f,renderState:m,onUpdate:y}=u;this.onUpdate=y,this.latestValues=f,this.baseTarget={...f},this.initialValues=t.initial?{...f}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=d,this.blockInitialAnimation=!!a,this.isControllingVariants=ih(t),this.isVariantNode=Z_(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:w,...E}=this.scrapeMotionValuesFromProps(t,{},this);for(const A in E){const P=E[A];f[A]!==void 0&&qt(P)&&P.set(f[A],!1)}}mount(e){this.current=e,_R.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),vx.current||gR(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Uf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Is(this.notifyUpdate),Is(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Ti.has(e);s&&this.onBindTransform&&this.onBindTransform();const o=t.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&Ge.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{o(),a(),u&&u(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in jo){const t=jo[e];if(!t)continue;const{isEnabled:s,Feature:o}=t;if(!this.features[e]&&o&&s(this.props)&&(this.features[e]=new o(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ct()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<w0.length;s++){const o=w0[s];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const a="on"+o,u=e[a];u&&(this.propEventSubscriptions[o]=this.on(o,u))}this.prevMotionValues=wR(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=wl(t===null?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){var s;let o=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options);return o!=null&&(typeof o=="string"&&(Uw(o)||Vw(o))?o=parseFloat(o):!vR(o)&&Ps.test(t)&&(o=Ow(e,t)),this.setBaseTarget(e,qt(o)?o.get():o)),qt(o)?o.get():o}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:s}=this.props;let o;if(typeof s=="string"||typeof s=="object"){const u=bp(this.props,s,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);u&&(o=u[e])}if(s&&o!==void 0)return o;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!qt(a)?a:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new zp),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class _x extends xR{constructor(){super(...arguments),this.KeyframeResolver=Ww}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;qt(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function ER(n){return window.getComputedStyle(n)}class TR extends _x{constructor(){super(...arguments),this.type="html",this.renderInstance=cw}readValueFromInstance(e,t){if(Ti.has(t)){const s=Kp(t);return s&&s.default||0}else{const s=ER(e),o=(Cp(t)?s.getPropertyValue(t):s[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return ox(e,t)}build(e,t,s){Rp(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return jp(e,t,s)}}class SR extends _x{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ct,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&uw(this.current,this.renderState)}}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ti.has(t)){const s=Kp(t);return s&&s.default||0}return t=hw.has(t)?t:Sp(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return fw(e,t,s)}onBindTransform(){this.current&&!this.renderState.dimensions&&Ge.postRender(this.updateDimensions)}build(e,t,s){Vp(e,t,this.isSVGTag,s.transformTemplate)}renderInstance(e,t,s,o){dw(e,t,s,o)}mount(e){this.isSVGTag=Dp(e.tagName),super.mount(e)}}const AR=(n,e)=>Np(n)?new SR(e):new TR(e,{allowProjection:n!==j.Fragment}),CR=QA({...GI,...pR,...rR,...mR},AR),et=hA(CR),vs=({children:n,href:e})=>_.jsx(et.div,{className:"w-fit cursor-pointer",whileHover:"hovered",initial:"initial",whileTap:{scale:.95},children:_.jsxs(et.a,{href:e,className:"relative block overflow-hidden py-[1px]",style:{lineHeight:.75},children:[_.jsx("div",{children:n.split("").map((o,a)=>_.jsx(et.span,{variants:{initial:{y:0},hovered:{y:"-110%"}},transition:{duration:.25,ease:"easeInOut",delay:.025*a},className:"inline-block",children:o===" "?" ":o},`top-${a}`))}),_.jsx("div",{className:"absolute inset-0 flex",children:n.split("").map((o,a)=>_.jsx(et.span,{variants:{initial:{y:"120%"},hovered:{y:1}},transition:{duration:.25,ease:"easeInOut",delay:.025*a},className:"inline-block",children:o===" "?" ":o},`bottom-${a}`))})]})});function Qo(){return _.jsxs("section",{className:"mt-[256px] max-w-[1440px] text-2xl uppercase m-auto",children:[_.jsxs("ul",{className:"flex justify-between pb-[32px]",children:[_.jsx("li",{children:_.jsx(vs,{href:"#",children:"Facebook"})}),_.jsx("li",{children:_.jsx(vs,{href:"#",children:"Instagram"})}),_.jsx("li",{children:_.jsx(vs,{href:"#",children:"linkedin"})}),_.jsx("li",{children:_.jsx(vs,{href:"#",children:"Pinterest"})})]}),_.jsxs("div",{className:"flex flex-col border-t border-b pt-[32px] pb-[16px] gap-[32px]",children:[_.jsxs("div",{className:"flex justify-between",children:[_.jsx("h2",{children:_.jsx(vs,{href:"#",children:"About us"})}),_.jsx("h2",{children:_.jsx(vs,{href:"#",children:"Products"})})]}),_.jsxs("div",{className:"flex justify-between",children:[_.jsx("h2",{children:_.jsx(vs,{href:"#",children:"Delivery & Returns"})}),_.jsx("h2",{children:_.jsx(vs,{href:"#",children:"Contact"})})]})]}),_.jsx("h1",{className:"text-[256px] leading-[256px] mt-[calc(256px-1em)]",children:"Essence"})]})}const Si=({name:n,onClick:e})=>_.jsxs(et.a,{className:"px-[48px] py-[16px] border text-2xl uppercase cursor-pointer flex flex-col relative overflow-hidden",whileHover:"hovered",initial:"initial",style:{maxWidth:"fit-content"},onClick:e,children:[_.jsx(et.div,{className:"absolute px-[48px] py-[16px] left-0 top-0",variants:{initial:{y:0},hovered:{y:"-200%",scale:.2,transition:{ease:Mo,duration:.2}}},children:n}),_.jsx("span",{className:"opacity-[0%]",children:n}),_.jsx(et.div,{className:"absolute bg-(--primary) px-[48px] py-[16px] left-0 top-0 text-(--bg)",variants:{initial:{y:"150%",scale:1},hovered:{y:0,scale:1,transition:{ease:Mo,duration:.2}}},children:n})]}),IR="/EcommerceCw/assets/discover1-2CP4AghA.webp",PR="/EcommerceCw/assets/discover2-Cu3EVhCj.webp",RR="/EcommerceCw/assets/discover3-8uaqyIYK.webp",kR="/EcommerceCw/assets/discover4-D4fH4sKv.jpg",NR="/EcommerceCw/assets/discover5-NLrys5oR.avif",VR="/EcommerceCw/assets/discover6-BSvZNFQ9.jpg",or=[{image:PS,category:"Sofa",productName:"Sofa"},{image:RS,category:"Living Room",productName:"Living Room"},{image:kS,category:"Kitchen",productName:"Kitchen"}],DR=()=>_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"relative h-[100dvh]",children:_.jsxs("div",{className:"absolute z-[99] inset-0 m-auto top-[32px]",children:[_.jsx(Ei,{}),_.jsx("div",{className:"max-w-[1440px] m-auto border-l border-r border-b",children:_.jsx(bR,{})})]})}),_.jsx("section",{className:"max-w-[1440px] m-auto",children:_.jsxs("div",{children:[_.jsx(jR,{}),_.jsx(LR,{}),_.jsx(Qo,{})]})})]}),bR=()=>{var t;const[n,e]=j.useState(0);return j.useEffect(()=>{or.forEach(s=>{const o=new Image;o.src=s.image})},[]),j.useEffect(()=>{const s=setInterval(()=>{e(o=>(o+1)%or.length)},5e3);return()=>clearInterval(s)},[]),_.jsxs("div",{className:"relative h-[90dvh] w-full overflow-hidden",children:[_.jsx("div",{className:"absolute inset-0 bg-cover bg-center will-change-transform",style:{backgroundImage:`url(${((t=or[(n+1)%or.length])==null?void 0:t.image)||or[0].image})`}}),_.jsx(G_,{children:_.jsxs(et.div,{className:"absolute inset-0 overflow-hidden will-change-transform",initial:{transform:"translateX(0%)"},animate:{transform:"translateX(-100%)"},exit:{transform:"translateX(-100%)"},transition:{ease:"easeInOut",duration:.5,delay:4},children:[_.jsx("div",{className:"absolute inset-0 bg-cover bg-center will-change-transform",style:{backgroundImage:`url(${or[n].image})`}}),_.jsxs(et.div,{className:"absolute left-[32px] bottom-[32px] text-white p-4 rounded-lg text-left gap-[16px] flex flex-col text-nowrap",children:[_.jsxs("div",{className:"relative w-fit text-2xl overflow-hidden",children:[_.jsx(et.h3,{className:"absolute",initial:{opacity:0,y:"-100%"},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:or[n].category}),_.jsx("span",{className:"opacity-0",children:or[n].category})]}),_.jsxs("div",{className:"relative w-fit h-fit text-9xl overflow-hidden pb-[16px]",children:[_.jsx(et.h1,{className:"absolute",initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},transition:{duration:.5,delay:0},children:or[n].productName}),_.jsx("span",{className:"opacity-0",children:or[n].productName})]})]},n)]},n)})]})},jR=()=>_.jsxs("section",{className:"flex flex-col gap-[32px] mt-[256px]",children:[_.jsx("h2",{className:"text-5xl text-start font-[400]",children:"Essence - Inspired by Nature, Designed for Modern Living, Crafted to Elevate Your Space"}),_.jsx(Si,{name:"about us"})]}),LR=()=>_.jsxs("section",{className:"grid grid-cols-4 gap-[12px] justify-between mt-[256px]",children:[_.jsx(MR,{image:IR}),_.jsxs("div",{className:"col-span-2 row-span 2 text-right uppercase text-2xl",children:[_.jsx("h3",{children:"Discover our"}),_.jsx("h3",{children:"unique furniture,"}),_.jsx("h3",{children:"designed for you by you"})]}),_.jsx(tl,{image:PR}),_.jsx(tl,{image:RR}),_.jsx("div",{className:"col-span-1 row-span-1 flex flex-col justify-end",children:_.jsx(Si,{name:"Explore more"})}),_.jsx(tl,{image:kR}),_.jsx(tl,{image:NR}),_.jsx(tl,{image:VR})]}),MR=({image:n})=>_.jsxs(et.a,{className:"col-span-2 row-span-2 cursor-pointer relative overflow-hidden",whileHover:"hoveredCard",initial:"initial",children:[_.jsx(et.div,{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${n})`,backgroundSize:"cover",backgroundPosition:"bottom",aspectRatio:"1/.8"},variants:{initial:{scale:1.05},hoveredCard:{scale:1,transition:{ease:"easeInOut",duration:.2}}}}),_.jsxs(et.div,{className:"flex items-center justify-between px-[16px] py-[16px] text-xl bg-white border border-(--black20) absolute w-full bottom-0 uppercase",variants:{initial:{y:"100%"},hoveredCard:{y:0,transition:{ease:Mo,duration:.2}}},children:[_.jsx("h1",{className:"font-[400]",children:"Product Name"}),_.jsx("h2",{className:"text-base",children:"Category"})]})]}),tl=({image:n})=>_.jsxs(et.a,{className:"col-span-1 row-span-1 DiscoverImg self-end cursor-pointer relative overflow-hidden aspect-square",whileHover:"hoveredCard",initial:"initial",children:[_.jsx(et.div,{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${n})`},variants:{initial:{scale:1.05},hoveredCard:{scale:1,transition:{ease:"easeInOut",duration:.2}}}}),_.jsxs(et.div,{className:"flex items-center justify-between px-[16px] py-[16px] text-xl bg-white border border-(--black20) absolute w-full bottom-0 uppercase",variants:{initial:{y:"100%"},hoveredCard:{y:0,transition:{ease:Mo,duration:.2}}},children:[_.jsx("h1",{className:"font-[400]",children:"Product Name"}),_.jsx("h2",{className:"text-base",children:"Category"})]})]}),OR=()=>{};var x0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},FR=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[s++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],f=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(f>>10)),e[s++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},xx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,f=o+2<n.length,m=f?n[o+2]:0,y=a>>2,w=(a&3)<<4|d>>4;let E=(d&15)<<2|m>>6,A=m&63;f||(A=64,u||(E=64)),s.push(t[y],t[w],t[E],t[A])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(wx(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):FR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||m==null||w==null)throw new BR;const E=a<<2|d>>4;if(s.push(E),m!==64){const A=d<<4&240|m>>2;if(s.push(A),w!==64){const P=m<<6&192|w;s.push(P)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class BR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UR=function(n){const e=wx(n);return xx.encodeByteArray(e,!0)},Lc=function(n){return UR(n).replace(/\./g,"")},zR=function(n){try{return xx.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=()=>$R().__FIREBASE_DEFAULTS__,WR=()=>{if(typeof process>"u"||typeof x0>"u")return;const n=x0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},qR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&zR(n[1]);return e&&JSON.parse(e)},Jp=()=>{try{return OR()||HR()||WR()||qR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},KR=n=>{var e,t;return(t=(e=Jp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},GR=n=>{const e=KR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Ex=()=>{var n;return(n=Jp())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Lc(JSON.stringify(t)),Lc(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JR(){var n;const e=(n=Jp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZR(){return!JR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ek(){try{return typeof indexedDB=="object"}catch{return!1}}function tk(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk="FirebaseError";class Yo extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=nk,Object.setPrototypeOf(this,Yo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tx.prototype.create)}}class Tx{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?rk(a,s):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Yo(o,d,s)}}function rk(n,e){return n.replace(sk,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const sk=/\{\$([^}]+)}/g;function Mc(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const a=n[o],u=e[o];if(E0(a)&&E0(u)){if(!Mc(a,u))return!1}else if(a!==u)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function E0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(n){return n&&n._delegate?n._delegate:n}class Tl{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new QR;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ak(e))try{this.getOrInitializeService({instanceIdentifier:mi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});s.resolve(a)}catch{}}}}clearInstance(e=mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mi){return this.instances.has(e)}getOptions(e=mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);s===d&&u.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),a=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:ok(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=mi){return this.component?this.component.multipleInstances?e:mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ok(n){return n===mi?void 0:n}function ak(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ik(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const uk={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},ck=Le.INFO,hk={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},dk=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=hk[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sx{constructor(e){this.name=e,this._logLevel=ck,this._logHandler=dk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const fk=(n,e)=>e.some(t=>n instanceof t);let T0,S0;function pk(){return T0||(T0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mk(){return S0||(S0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ax=new WeakMap,zf=new WeakMap,Cx=new WeakMap,gf=new WeakMap,Zp=new WeakMap;function gk(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(xs(n.result)),o()},u=()=>{s(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Ax.set(t,n)}).catch(()=>{}),Zp.set(e,n),e}function yk(n){if(zf.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});zf.set(n,e)}let $f={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return zf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Cx.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function vk(n){$f=n($f)}function _k(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(yf(this),e,...t);return Cx.set(s,e.sort?e.sort():[e]),xs(s)}:mk().includes(n)?function(...e){return n.apply(yf(this),e),xs(Ax.get(this))}:function(...e){return xs(n.apply(yf(this),e))}}function wk(n){return typeof n=="function"?_k(n):(n instanceof IDBTransaction&&yk(n),fk(n,pk())?new Proxy(n,$f):n)}function xs(n){if(n instanceof IDBRequest)return gk(n);if(gf.has(n))return gf.get(n);const e=wk(n);return e!==n&&(gf.set(n,e),Zp.set(e,n)),e}const yf=n=>Zp.get(n);function xk(n,e,{blocked:t,upgrade:s,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=xs(u);return s&&u.addEventListener("upgradeneeded",f=>{s(xs(u.result),f.oldVersion,f.newVersion,xs(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const Ek=["get","getKey","getAll","getAllKeys","count"],Tk=["put","add","delete","clear"],vf=new Map;function A0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(vf.get(e))return vf.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=Tk.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Ek.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,o?"readwrite":"readonly");let m=f.store;return s&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&f.done]))[0]};return vf.set(e,a),a}vk(n=>({...n,get:(e,t,s)=>A0(e,t)||n.get(e,t,s),has:(e,t)=>!!A0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ak(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Ak(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hf="@firebase/app",C0="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new Sx("@firebase/app"),Ck="@firebase/app-compat",Ik="@firebase/analytics-compat",Pk="@firebase/analytics",Rk="@firebase/app-check-compat",kk="@firebase/app-check",Nk="@firebase/auth",Vk="@firebase/auth-compat",Dk="@firebase/database",bk="@firebase/data-connect",jk="@firebase/database-compat",Lk="@firebase/functions",Mk="@firebase/functions-compat",Ok="@firebase/installations",Fk="@firebase/installations-compat",Bk="@firebase/messaging",Uk="@firebase/messaging-compat",zk="@firebase/performance",$k="@firebase/performance-compat",Hk="@firebase/remote-config",Wk="@firebase/remote-config-compat",qk="@firebase/storage",Kk="@firebase/storage-compat",Gk="@firebase/firestore",Qk="@firebase/vertexai",Yk="@firebase/firestore-compat",Xk="firebase",Jk="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="[DEFAULT]",Zk={[Hf]:"fire-core",[Ck]:"fire-core-compat",[Pk]:"fire-analytics",[Ik]:"fire-analytics-compat",[kk]:"fire-app-check",[Rk]:"fire-app-check-compat",[Nk]:"fire-auth",[Vk]:"fire-auth-compat",[Dk]:"fire-rtdb",[bk]:"fire-data-connect",[jk]:"fire-rtdb-compat",[Lk]:"fire-fn",[Mk]:"fire-fn-compat",[Ok]:"fire-iid",[Fk]:"fire-iid-compat",[Bk]:"fire-fcm",[Uk]:"fire-fcm-compat",[zk]:"fire-perf",[$k]:"fire-perf-compat",[Hk]:"fire-rc",[Wk]:"fire-rc-compat",[qk]:"fire-gcs",[Kk]:"fire-gcs-compat",[Gk]:"fire-fst",[Yk]:"fire-fst-compat",[Qk]:"fire-vertex","fire-js":"fire-js",[Xk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new Map,e2=new Map,qf=new Map;function I0(n,e){try{n.container.addComponent(e)}catch(t){zr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fc(n){const e=n.name;if(qf.has(e))return zr.debug(`There were multiple attempts to register component ${e}.`),!1;qf.set(e,n);for(const t of Oc.values())I0(t,n);for(const t of e2.values())I0(t,n);return!0}function t2(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function n2(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Es=new Tx("app","Firebase",r2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Tl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=Jk;function Ix(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Wf,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw Es.create("bad-app-name",{appName:String(o)});if(t||(t=Ex()),!t)throw Es.create("no-options");const a=Oc.get(o);if(a){if(Mc(t,a.options)&&Mc(s,a.config))return a;throw Es.create("duplicate-app",{appName:o})}const u=new lk(o);for(const f of qf.values())u.addComponent(f);const d=new s2(t,s,u);return Oc.set(o,d),d}function o2(n=Wf){const e=Oc.get(n);if(!e&&n===Wf&&Ex())return Ix();if(!e)throw Es.create("no-app",{appName:n});return e}function Vo(n,e,t){var s;let o=(s=Zk[n])!==null&&s!==void 0?s:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zr.warn(d.join(" "));return}Fc(new Tl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="firebase-heartbeat-database",l2=1,Sl="firebase-heartbeat-store";let _f=null;function Px(){return _f||(_f=xk(a2,l2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Sl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Es.create("idb-open",{originalErrorMessage:n.message})})),_f}async function u2(n){try{const t=(await Px()).transaction(Sl),s=await t.objectStore(Sl).get(Rx(n));return await t.done,s}catch(e){if(e instanceof Yo)zr.warn(e.message);else{const t=Es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zr.warn(t.message)}}}async function P0(n,e){try{const s=(await Px()).transaction(Sl,"readwrite");await s.objectStore(Sl).put(e,Rx(n)),await s.done}catch(t){if(t instanceof Yo)zr.warn(t.message);else{const s=Es.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});zr.warn(s.message)}}}function Rx(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=1024,h2=30;class d2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new p2(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=R0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>h2){const u=m2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){zr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=R0(),{heartbeatsToSend:s,unsentEntries:o}=f2(this._heartbeatsCache.heartbeats),a=Lc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return zr.warn(t),""}}}function R0(){return new Date().toISOString().substring(0,10)}function f2(n,e=c2){const t=[];let s=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),k0(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),k0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class p2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ek()?tk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await u2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return P0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return P0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function k0(n){return Lc(JSON.stringify({version:2,heartbeats:n})).length}function m2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(n){Fc(new Tl("platform-logger",e=>new Sk(e),"PRIVATE")),Fc(new Tl("heartbeat",e=>new d2(e),"PRIVATE")),Vo(Hf,C0,n),Vo(Hf,C0,"esm2017"),Vo("fire-js","")}g2("");var y2="firebase",v2="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vo(y2,v2,"app");var N0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ts,kx;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,C){function I(){}I.prototype=C.prototype,R.D=C.prototype,R.prototype=new I,R.prototype.constructor=R,R.C=function(b,O,U){for(var D=Array(arguments.length-2),He=2;He<arguments.length;He++)D[He-2]=arguments[He];return C.prototype[O].apply(b,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,C,I){I||(I=0);var b=Array(16);if(typeof C=="string")for(var O=0;16>O;++O)b[O]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(O=0;16>O;++O)b[O]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=R.g[0],I=R.g[1],O=R.g[2];var U=R.g[3],D=C+(U^I&(O^U))+b[0]+3614090360&4294967295;C=I+(D<<7&4294967295|D>>>25),D=U+(O^C&(I^O))+b[1]+3905402710&4294967295,U=C+(D<<12&4294967295|D>>>20),D=O+(I^U&(C^I))+b[2]+606105819&4294967295,O=U+(D<<17&4294967295|D>>>15),D=I+(C^O&(U^C))+b[3]+3250441966&4294967295,I=O+(D<<22&4294967295|D>>>10),D=C+(U^I&(O^U))+b[4]+4118548399&4294967295,C=I+(D<<7&4294967295|D>>>25),D=U+(O^C&(I^O))+b[5]+1200080426&4294967295,U=C+(D<<12&4294967295|D>>>20),D=O+(I^U&(C^I))+b[6]+2821735955&4294967295,O=U+(D<<17&4294967295|D>>>15),D=I+(C^O&(U^C))+b[7]+4249261313&4294967295,I=O+(D<<22&4294967295|D>>>10),D=C+(U^I&(O^U))+b[8]+1770035416&4294967295,C=I+(D<<7&4294967295|D>>>25),D=U+(O^C&(I^O))+b[9]+2336552879&4294967295,U=C+(D<<12&4294967295|D>>>20),D=O+(I^U&(C^I))+b[10]+4294925233&4294967295,O=U+(D<<17&4294967295|D>>>15),D=I+(C^O&(U^C))+b[11]+2304563134&4294967295,I=O+(D<<22&4294967295|D>>>10),D=C+(U^I&(O^U))+b[12]+1804603682&4294967295,C=I+(D<<7&4294967295|D>>>25),D=U+(O^C&(I^O))+b[13]+4254626195&4294967295,U=C+(D<<12&4294967295|D>>>20),D=O+(I^U&(C^I))+b[14]+2792965006&4294967295,O=U+(D<<17&4294967295|D>>>15),D=I+(C^O&(U^C))+b[15]+1236535329&4294967295,I=O+(D<<22&4294967295|D>>>10),D=C+(O^U&(I^O))+b[1]+4129170786&4294967295,C=I+(D<<5&4294967295|D>>>27),D=U+(I^O&(C^I))+b[6]+3225465664&4294967295,U=C+(D<<9&4294967295|D>>>23),D=O+(C^I&(U^C))+b[11]+643717713&4294967295,O=U+(D<<14&4294967295|D>>>18),D=I+(U^C&(O^U))+b[0]+3921069994&4294967295,I=O+(D<<20&4294967295|D>>>12),D=C+(O^U&(I^O))+b[5]+3593408605&4294967295,C=I+(D<<5&4294967295|D>>>27),D=U+(I^O&(C^I))+b[10]+38016083&4294967295,U=C+(D<<9&4294967295|D>>>23),D=O+(C^I&(U^C))+b[15]+3634488961&4294967295,O=U+(D<<14&4294967295|D>>>18),D=I+(U^C&(O^U))+b[4]+3889429448&4294967295,I=O+(D<<20&4294967295|D>>>12),D=C+(O^U&(I^O))+b[9]+568446438&4294967295,C=I+(D<<5&4294967295|D>>>27),D=U+(I^O&(C^I))+b[14]+3275163606&4294967295,U=C+(D<<9&4294967295|D>>>23),D=O+(C^I&(U^C))+b[3]+4107603335&4294967295,O=U+(D<<14&4294967295|D>>>18),D=I+(U^C&(O^U))+b[8]+1163531501&4294967295,I=O+(D<<20&4294967295|D>>>12),D=C+(O^U&(I^O))+b[13]+2850285829&4294967295,C=I+(D<<5&4294967295|D>>>27),D=U+(I^O&(C^I))+b[2]+4243563512&4294967295,U=C+(D<<9&4294967295|D>>>23),D=O+(C^I&(U^C))+b[7]+1735328473&4294967295,O=U+(D<<14&4294967295|D>>>18),D=I+(U^C&(O^U))+b[12]+2368359562&4294967295,I=O+(D<<20&4294967295|D>>>12),D=C+(I^O^U)+b[5]+4294588738&4294967295,C=I+(D<<4&4294967295|D>>>28),D=U+(C^I^O)+b[8]+2272392833&4294967295,U=C+(D<<11&4294967295|D>>>21),D=O+(U^C^I)+b[11]+1839030562&4294967295,O=U+(D<<16&4294967295|D>>>16),D=I+(O^U^C)+b[14]+4259657740&4294967295,I=O+(D<<23&4294967295|D>>>9),D=C+(I^O^U)+b[1]+2763975236&4294967295,C=I+(D<<4&4294967295|D>>>28),D=U+(C^I^O)+b[4]+1272893353&4294967295,U=C+(D<<11&4294967295|D>>>21),D=O+(U^C^I)+b[7]+4139469664&4294967295,O=U+(D<<16&4294967295|D>>>16),D=I+(O^U^C)+b[10]+3200236656&4294967295,I=O+(D<<23&4294967295|D>>>9),D=C+(I^O^U)+b[13]+681279174&4294967295,C=I+(D<<4&4294967295|D>>>28),D=U+(C^I^O)+b[0]+3936430074&4294967295,U=C+(D<<11&4294967295|D>>>21),D=O+(U^C^I)+b[3]+3572445317&4294967295,O=U+(D<<16&4294967295|D>>>16),D=I+(O^U^C)+b[6]+76029189&4294967295,I=O+(D<<23&4294967295|D>>>9),D=C+(I^O^U)+b[9]+3654602809&4294967295,C=I+(D<<4&4294967295|D>>>28),D=U+(C^I^O)+b[12]+3873151461&4294967295,U=C+(D<<11&4294967295|D>>>21),D=O+(U^C^I)+b[15]+530742520&4294967295,O=U+(D<<16&4294967295|D>>>16),D=I+(O^U^C)+b[2]+3299628645&4294967295,I=O+(D<<23&4294967295|D>>>9),D=C+(O^(I|~U))+b[0]+4096336452&4294967295,C=I+(D<<6&4294967295|D>>>26),D=U+(I^(C|~O))+b[7]+1126891415&4294967295,U=C+(D<<10&4294967295|D>>>22),D=O+(C^(U|~I))+b[14]+2878612391&4294967295,O=U+(D<<15&4294967295|D>>>17),D=I+(U^(O|~C))+b[5]+4237533241&4294967295,I=O+(D<<21&4294967295|D>>>11),D=C+(O^(I|~U))+b[12]+1700485571&4294967295,C=I+(D<<6&4294967295|D>>>26),D=U+(I^(C|~O))+b[3]+2399980690&4294967295,U=C+(D<<10&4294967295|D>>>22),D=O+(C^(U|~I))+b[10]+4293915773&4294967295,O=U+(D<<15&4294967295|D>>>17),D=I+(U^(O|~C))+b[1]+2240044497&4294967295,I=O+(D<<21&4294967295|D>>>11),D=C+(O^(I|~U))+b[8]+1873313359&4294967295,C=I+(D<<6&4294967295|D>>>26),D=U+(I^(C|~O))+b[15]+4264355552&4294967295,U=C+(D<<10&4294967295|D>>>22),D=O+(C^(U|~I))+b[6]+2734768916&4294967295,O=U+(D<<15&4294967295|D>>>17),D=I+(U^(O|~C))+b[13]+1309151649&4294967295,I=O+(D<<21&4294967295|D>>>11),D=C+(O^(I|~U))+b[4]+4149444226&4294967295,C=I+(D<<6&4294967295|D>>>26),D=U+(I^(C|~O))+b[11]+3174756917&4294967295,U=C+(D<<10&4294967295|D>>>22),D=O+(C^(U|~I))+b[2]+718787259&4294967295,O=U+(D<<15&4294967295|D>>>17),D=I+(U^(O|~C))+b[9]+3951481745&4294967295,R.g[0]=R.g[0]+C&4294967295,R.g[1]=R.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+O&4294967295,R.g[3]=R.g[3]+U&4294967295}s.prototype.u=function(R,C){C===void 0&&(C=R.length);for(var I=C-this.blockSize,b=this.B,O=this.h,U=0;U<C;){if(O==0)for(;U<=I;)o(this,R,U),U+=this.blockSize;if(typeof R=="string"){for(;U<C;)if(b[O++]=R.charCodeAt(U++),O==this.blockSize){o(this,b),O=0;break}}else for(;U<C;)if(b[O++]=R[U++],O==this.blockSize){o(this,b),O=0;break}}this.h=O,this.o+=C},s.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var C=1;C<R.length-8;++C)R[C]=0;var I=8*this.o;for(C=R.length-8;C<R.length;++C)R[C]=I&255,I/=256;for(this.u(R),R=Array(16),C=I=0;4>C;++C)for(var b=0;32>b;b+=8)R[I++]=this.g[C]>>>b&255;return R};function a(R,C){var I=d;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=C(R)}function u(R,C){this.h=C;for(var I=[],b=!0,O=R.length-1;0<=O;O--){var U=R[O]|0;b&&U==C||(I[O]=U,b=!1)}this.g=I}var d={};function f(R){return-128<=R&&128>R?a(R,function(C){return new u([C|0],0>C?-1:0)}):new u([R|0],0>R?-1:0)}function m(R){if(isNaN(R)||!isFinite(R))return w;if(0>R)return V(m(-R));for(var C=[],I=1,b=0;R>=I;b++)C[b]=R/I|0,I*=4294967296;return new u(C,0)}function y(R,C){if(R.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(R.charAt(0)=="-")return V(y(R.substring(1),C));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=m(Math.pow(C,8)),b=w,O=0;O<R.length;O+=8){var U=Math.min(8,R.length-O),D=parseInt(R.substring(O,O+U),C);8>U?(U=m(Math.pow(C,U)),b=b.j(U).add(m(D))):(b=b.j(I),b=b.add(m(D)))}return b}var w=f(0),E=f(1),A=f(16777216);n=u.prototype,n.m=function(){if(N(this))return-V(this).m();for(var R=0,C=1,I=0;I<this.g.length;I++){var b=this.i(I);R+=(0<=b?b:4294967296+b)*C,C*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(P(this))return"0";if(N(this))return"-"+V(this).toString(R);for(var C=m(Math.pow(R,6)),I=this,b="";;){var O=Y(I,C).g;I=L(I,O.j(C));var U=((0<I.g.length?I.g[0]:I.h)>>>0).toString(R);if(I=O,P(I))return U+b;for(;6>U.length;)U="0"+U;b=U+b}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function P(R){if(R.h!=0)return!1;for(var C=0;C<R.g.length;C++)if(R.g[C]!=0)return!1;return!0}function N(R){return R.h==-1}n.l=function(R){return R=L(this,R),N(R)?-1:P(R)?0:1};function V(R){for(var C=R.g.length,I=[],b=0;b<C;b++)I[b]=~R.g[b];return new u(I,~R.h).add(E)}n.abs=function(){return N(this)?V(this):this},n.add=function(R){for(var C=Math.max(this.g.length,R.g.length),I=[],b=0,O=0;O<=C;O++){var U=b+(this.i(O)&65535)+(R.i(O)&65535),D=(U>>>16)+(this.i(O)>>>16)+(R.i(O)>>>16);b=D>>>16,U&=65535,D&=65535,I[O]=D<<16|U}return new u(I,I[I.length-1]&-2147483648?-1:0)};function L(R,C){return R.add(V(C))}n.j=function(R){if(P(this)||P(R))return w;if(N(this))return N(R)?V(this).j(V(R)):V(V(this).j(R));if(N(R))return V(this.j(V(R)));if(0>this.l(A)&&0>R.l(A))return m(this.m()*R.m());for(var C=this.g.length+R.g.length,I=[],b=0;b<2*C;b++)I[b]=0;for(b=0;b<this.g.length;b++)for(var O=0;O<R.g.length;O++){var U=this.i(b)>>>16,D=this.i(b)&65535,He=R.i(O)>>>16,gt=R.i(O)&65535;I[2*b+2*O]+=D*gt,W(I,2*b+2*O),I[2*b+2*O+1]+=U*gt,W(I,2*b+2*O+1),I[2*b+2*O+1]+=D*He,W(I,2*b+2*O+1),I[2*b+2*O+2]+=U*He,W(I,2*b+2*O+2)}for(b=0;b<C;b++)I[b]=I[2*b+1]<<16|I[2*b];for(b=C;b<2*C;b++)I[b]=0;return new u(I,0)};function W(R,C){for(;(R[C]&65535)!=R[C];)R[C+1]+=R[C]>>>16,R[C]&=65535,C++}function B(R,C){this.g=R,this.h=C}function Y(R,C){if(P(C))throw Error("division by zero");if(P(R))return new B(w,w);if(N(R))return C=Y(V(R),C),new B(V(C.g),V(C.h));if(N(C))return C=Y(R,V(C)),new B(V(C.g),C.h);if(30<R.g.length){if(N(R)||N(C))throw Error("slowDivide_ only works with positive integers.");for(var I=E,b=C;0>=b.l(R);)I=Q(I),b=Q(b);var O=ee(I,1),U=ee(b,1);for(b=ee(b,2),I=ee(I,2);!P(b);){var D=U.add(b);0>=D.l(R)&&(O=O.add(I),U=D),b=ee(b,1),I=ee(I,1)}return C=L(R,O.j(C)),new B(O,C)}for(O=w;0<=R.l(C);){for(I=Math.max(1,Math.floor(R.m()/C.m())),b=Math.ceil(Math.log(I)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),U=m(I),D=U.j(C);N(D)||0<D.l(R);)I-=b,U=m(I),D=U.j(C);P(U)&&(U=E),O=O.add(U),R=L(R,D)}return new B(O,R)}n.A=function(R){return Y(this,R).h},n.and=function(R){for(var C=Math.max(this.g.length,R.g.length),I=[],b=0;b<C;b++)I[b]=this.i(b)&R.i(b);return new u(I,this.h&R.h)},n.or=function(R){for(var C=Math.max(this.g.length,R.g.length),I=[],b=0;b<C;b++)I[b]=this.i(b)|R.i(b);return new u(I,this.h|R.h)},n.xor=function(R){for(var C=Math.max(this.g.length,R.g.length),I=[],b=0;b<C;b++)I[b]=this.i(b)^R.i(b);return new u(I,this.h^R.h)};function Q(R){for(var C=R.g.length+1,I=[],b=0;b<C;b++)I[b]=R.i(b)<<1|R.i(b-1)>>>31;return new u(I,R.h)}function ee(R,C){var I=C>>5;C%=32;for(var b=R.g.length-I,O=[],U=0;U<b;U++)O[U]=0<C?R.i(U+I)>>>C|R.i(U+I+1)<<32-C:R.i(U+I);return new u(O,R.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,kx=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=y,Ts=u}).apply(typeof N0<"u"?N0:typeof self<"u"?self:typeof window<"u"?window:{});var dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nx,sl,Vx,Ec,Kf,Dx,bx,jx;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,x){return c==Array.prototype||c==Object.prototype||(c[g]=x.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof dc=="object"&&dc];for(var g=0;g<c.length;++g){var x=c[g];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var s=t(this);function o(c,g){if(g)e:{var x=s;c=c.split(".");for(var S=0;S<c.length-1;S++){var $=c[S];if(!($ in x))break e;x=x[$]}c=c[c.length-1],S=x[c],g=g(S),g!=S&&g!=null&&e(x,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var x=0,S=!1,$={next:function(){if(!S&&x<c.length){var G=x++;return{value:g(G,c[G]),done:!1}}return S=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}o("Array.prototype.values",function(c){return c||function(){return a(this,function(g,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function y(c,g,x){return c.call.apply(c.bind,arguments)}function w(c,g,x){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,S),c.apply(g,$)}}return function(){return c.apply(g,arguments)}}function E(c,g,x){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:w,E.apply(null,arguments)}function A(c,g){var x=Array.prototype.slice.call(arguments,1);return function(){var S=x.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function P(c,g){function x(){}x.prototype=g.prototype,c.aa=g.prototype,c.prototype=new x,c.prototype.constructor=c,c.Qb=function(S,$,G){for(var oe=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)oe[ze-2]=arguments[ze];return g.prototype[$].apply(S,oe)}}function N(c){const g=c.length;if(0<g){const x=Array(g);for(let S=0;S<g;S++)x[S]=c[S];return x}return[]}function V(c,g){for(let x=1;x<arguments.length;x++){const S=arguments[x];if(f(S)){const $=c.length||0,G=S.length||0;c.length=$+G;for(let oe=0;oe<G;oe++)c[$+oe]=S[oe]}else c.push(S)}}class L{constructor(g,x){this.i=g,this.j=x,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function W(c){return/^[\s\xa0]*$/.test(c)}function B(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function Y(c){return Y[" "](c),c}Y[" "]=function(){};var Q=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function ee(c,g,x){for(const S in c)g.call(x,c[S],S,c)}function R(c,g){for(const x in c)g.call(void 0,c[x],x,c)}function C(c){const g={};for(const x in c)g[x]=c[x];return g}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,g){let x,S;for(let $=1;$<arguments.length;$++){S=arguments[$];for(x in S)c[x]=S[x];for(let G=0;G<I.length;G++)x=I[G],Object.prototype.hasOwnProperty.call(S,x)&&(c[x]=S[x])}}function O(c){var g=1;c=c.split(":");const x=[];for(;0<g&&c.length;)x.push(c.shift()),g--;return c.length&&x.push(c.join(":")),x}function U(c){d.setTimeout(()=>{throw c},0)}function D(){var c=he;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class He{constructor(){this.h=this.g=null}add(g,x){const S=gt.get();S.set(g,x),this.h?this.h.next=S:this.g=S,this.h=S}}var gt=new L(()=>new Ce,c=>c.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(g,x){this.h=g,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,re=!1,he=new He,ae=()=>{const c=d.Promise.resolve(void 0);ye=()=>{c.then(z)}};var z=()=>{for(var c;c=D();){try{c.h.call(c.g)}catch(x){U(x)}var g=gt;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}re=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var Pe=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};d.addEventListener("test",x,g),d.removeEventListener("test",x,g)}catch{}return c}();function Ie(c,g){if(ge.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var x=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(Q){e:{try{Y(g.nodeName);var $=!0;break e}catch{}$=!1}$||(g=null)}}else x=="mouseover"?g=c.fromElement:x=="mouseout"&&(g=c.toElement);this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:De[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ie.aa.h.call(this)}}P(Ie,ge);var De={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),Be=0;function We(c,g,x,S,$){this.listener=c,this.proxy=null,this.src=g,this.type=x,this.capture=!!S,this.ha=$,this.key=++Be,this.da=this.fa=!1}function St(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function yr(c){this.src=c,this.g={},this.h=0}yr.prototype.add=function(c,g,x,S,$){var G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);var oe=Kr(c,g,S,$);return-1<oe?(g=c[oe],x||(g.fa=!1)):(g=new We(g,this.src,G,!!S,$),g.fa=x,c.push(g)),g};function Pi(c,g){var x=g.type;if(x in c.g){var S=c.g[x],$=Array.prototype.indexOf.call(S,g,void 0),G;(G=0<=$)&&Array.prototype.splice.call(S,$,1),G&&(St(g),c.g[x].length==0&&(delete c.g[x],c.h--))}}function Kr(c,g,x,S){for(var $=0;$<c.length;++$){var G=c[$];if(!G.da&&G.listener==g&&G.capture==!!x&&G.ha==S)return $}return-1}var Os="closure_lm_"+(1e6*Math.random()|0),Ri={};function ra(c,g,x,S,$){if(Array.isArray(g)){for(var G=0;G<g.length;G++)ra(c,g[G],x,S,$);return null}return x=oa(x),c&&c[Fe]?c.K(g,x,m(S)?!!S.capture:!1,$):sa(c,g,x,!1,S,$)}function sa(c,g,x,S,$,G){if(!g)throw Error("Invalid event type");var oe=m($)?!!$.capture:!!$,ze=Ni(c);if(ze||(c[Os]=ze=new yr(c)),x=ze.add(g,x,S,oe,G),x.proxy)return x;if(S=Wl(),x.proxy=S,S.src=c,S.listener=x,c.addEventListener)Pe||($=oe),$===void 0&&($=!1),c.addEventListener(g.toString(),S,$);else if(c.attachEvent)c.attachEvent(_r(g.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Wl(){function c(x){return g.call(c.src,c.listener,x)}const g=ia;return c}function ki(c,g,x,S,$){if(Array.isArray(g))for(var G=0;G<g.length;G++)ki(c,g[G],x,S,$);else S=m(S)?!!S.capture:!!S,x=oa(x),c&&c[Fe]?(c=c.i,g=String(g).toString(),g in c.g&&(G=c.g[g],x=Kr(G,x,S,$),-1<x&&(St(G[x]),Array.prototype.splice.call(G,x,1),G.length==0&&(delete c.g[g],c.h--)))):c&&(c=Ni(c))&&(g=c.g[g.toString()],c=-1,g&&(c=Kr(g,x,S,$)),(x=-1<c?g[c]:null)&&vr(x))}function vr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Fe])Pi(g.i,c);else{var x=c.type,S=c.proxy;g.removeEventListener?g.removeEventListener(x,S,c.capture):g.detachEvent?g.detachEvent(_r(x),S):g.addListener&&g.removeListener&&g.removeListener(S),(x=Ni(g))?(Pi(x,c),x.h==0&&(x.src=null,g[Os]=null)):St(c)}}}function _r(c){return c in Ri?Ri[c]:Ri[c]="on"+c}function ia(c,g){if(c.da)c=!0;else{g=new Ie(g,this);var x=c.listener,S=c.ha||c.src;c.fa&&vr(c),c=x.call(S,g)}return c}function Ni(c){return c=c[Os],c instanceof yr?c:null}var Vi="__closure_events_fn_"+(1e9*Math.random()>>>0);function oa(c){return typeof c=="function"?c:(c[Vi]||(c[Vi]=function(g){return c.handleEvent(g)}),c[Vi])}function yt(){X.call(this),this.i=new yr(this),this.M=this,this.F=null}P(yt,X),yt.prototype[Fe]=!0,yt.prototype.removeEventListener=function(c,g,x,S){ki(this,c,g,x,S)};function vt(c,g){var x,S=c.F;if(S)for(x=[];S;S=S.F)x.push(S);if(c=c.M,S=g.type||g,typeof g=="string")g=new ge(g,c);else if(g instanceof ge)g.target=g.target||c;else{var $=g;g=new ge(S,c),b(g,$)}if($=!0,x)for(var G=x.length-1;0<=G;G--){var oe=g.g=x[G];$=wr(oe,S,!0,g)&&$}if(oe=g.g=c,$=wr(oe,S,!0,g)&&$,$=wr(oe,S,!1,g)&&$,x)for(G=0;G<x.length;G++)oe=g.g=x[G],$=wr(oe,S,!1,g)&&$}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var x=c.g[g],S=0;S<x.length;S++)St(x[S]);delete c.g[g],c.h--}}this.F=null},yt.prototype.K=function(c,g,x,S){return this.i.add(String(c),g,!1,x,S)},yt.prototype.L=function(c,g,x,S){return this.i.add(String(c),g,!0,x,S)};function wr(c,g,x,S){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var $=!0,G=0;G<g.length;++G){var oe=g[G];if(oe&&!oe.da&&oe.capture==x){var ze=oe.listener,_t=oe.ha||oe.src;oe.fa&&Pi(c.i,oe),$=ze.call(_t,S)!==!1&&$}}return $&&!S.defaultPrevented}function aa(c,g,x){if(typeof c=="function")x&&(c=E(c,x));else if(c&&typeof c.handleEvent=="function")c=E(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function Gr(c){c.g=aa(()=>{c.g=null,c.i&&(c.i=!1,Gr(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Fs extends X{constructor(g,x){super(),this.m=g,this.l=x,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Gr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bs(c){X.call(this),this.h=c,this.g={}}P(Bs,X);var la=[];function ua(c){ee(c.g,function(g,x){this.g.hasOwnProperty(x)&&vr(g)},c),c.g={}}Bs.prototype.N=function(){Bs.aa.N.call(this),ua(this)},Bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ca=d.JSON.stringify,ha=d.JSON.parse,da=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Us(){}Us.prototype.h=null;function Di(c){return c.h||(c.h=c.i())}function bi(){}var _n={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qn(){ge.call(this,"d")}P(Qn,ge);function ji(){ge.call(this,"c")}P(ji,ge);var Yn={},fa=null;function zs(){return fa=fa||new yt}Yn.La="serverreachability";function pa(c){ge.call(this,Yn.La,c)}P(pa,ge);function xr(c){const g=zs();vt(g,new pa(g))}Yn.STAT_EVENT="statevent";function ma(c,g){ge.call(this,Yn.STAT_EVENT,c),this.stat=g}P(ma,ge);function lt(c){const g=zs();vt(g,new ma(g,c))}Yn.Ma="timingevent";function Li(c,g){ge.call(this,Yn.Ma,c),this.size=g}P(Li,ge);function Nn(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function $s(){this.g=!0}$s.prototype.xa=function(){this.g=!1};function Hs(c,g,x,S,$,G){c.info(function(){if(c.g)if(G)for(var oe="",ze=G.split("&"),_t=0;_t<ze.length;_t++){var be=ze[_t].split("=");if(1<be.length){var At=be[0];be=be[1];var dt=At.split("_");oe=2<=dt.length&&dt[1]=="type"?oe+(At+"="+be+"&"):oe+(At+"=redacted&")}}else oe=null;else oe=G;return"XMLHTTP REQ ("+S+") [attempt "+$+"]: "+g+`
`+x+`
`+oe})}function Mi(c,g,x,S,$,G,oe){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+$+"]: "+g+`
`+x+`
`+G+" "+oe})}function Vn(c,g,x,S){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Sh(c,x)+(S?" "+S:"")})}function ga(c,g){c.info(function(){return"TIMEOUT: "+g})}$s.prototype.info=function(){};function Sh(c,g){if(!c.g)return g;if(!g)return null;try{var x=JSON.parse(g);if(x){for(c=0;c<x.length;c++)if(Array.isArray(x[c])){var S=x[c];if(!(2>S.length)){var $=S[1];if(Array.isArray($)&&!(1>$.length)){var G=$[0];if(G!="noop"&&G!="stop"&&G!="close")for(var oe=1;oe<$.length;oe++)$[oe]=""}}}}return ca(x)}catch{return g}}var Oi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ql={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dn;function Ws(){}P(Ws,Us),Ws.prototype.g=function(){return new XMLHttpRequest},Ws.prototype.i=function(){return{}},Dn=new Ws;function bn(c,g,x,S){this.j=c,this.i=g,this.l=x,this.R=S||1,this.U=new Bs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kl}function Kl(){this.i=null,this.g="",this.h=!1}var ya={},Fi={};function Bi(c,g,x){c.L=1,c.v=Zr(hn(g)),c.m=x,c.P=!0,va(c,null)}function va(c,g){c.F=Date.now(),qe(c),c.A=hn(c.v);var x=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),ts(x.i,"t",S),c.C=0,x=c.j.J,c.h=new Kl,c.g=hu(c.j,x?g:null,!c.m),0<c.O&&(c.M=new Fs(E(c.Y,c,c.g),c.O)),g=c.U,x=c.g,S=c.ca;var $="readystatechange";Array.isArray($)||($&&(la[0]=$.toString()),$=la);for(var G=0;G<$.length;G++){var oe=ra(x,$[G],S||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=c.H?C(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),xr(),Hs(c.i,c.u,c.A,c.l,c.R,c.m)}bn.prototype.ca=function(c){c=c.target;const g=this.M;g&&en(c)==3?g.j():this.Y(c)},bn.prototype.Y=function(c){try{if(c==this.g)e:{const dt=en(this.g);var g=this.g.Ba();const En=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||Sa(this.g)))){this.J||dt!=4||g==7||(g==8||0>=En?xr(3):xr(2)),qs(this);var x=this.g.Z();this.X=x;t:if(Gl(this)){var S=Sa(this.g);c="";var $=S.length,G=en(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wn(this),Qr(this);var oe="";break t}this.h.i=new d.TextDecoder}for(g=0;g<$;g++)this.h.h=!0,c+=this.h.i.decode(S[g],{stream:!(G&&g==$-1)});S.length=0,this.h.g+=c,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=x==200,Mi(this.i,this.u,this.A,this.l,this.R,dt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,_t=this.g;if((ze=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(ze)){var be=ze;break t}}be=null}if(x=be)Vn(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_a(this,x);else{this.o=!1,this.s=3,lt(12),wn(this),Qr(this);break e}}if(this.P){x=!0;let fn;for(;!this.J&&this.C<oe.length;)if(fn=Ah(this,oe),fn==Fi){dt==4&&(this.s=4,lt(14),x=!1),Vn(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==ya){this.s=4,lt(15),Vn(this.i,this.l,oe,"[Invalid Chunk]"),x=!1;break}else Vn(this.i,this.l,fn,null),_a(this,fn);if(Gl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||oe.length!=0||this.h.h||(this.s=1,lt(16),x=!1),this.o=this.o&&x,!x)Vn(this.i,this.l,oe,"[Invalid Chunked Response]"),wn(this),Qr(this);else if(0<oe.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Ca(At),At.M=!0,lt(11))}}else Vn(this.i,this.l,oe,null),_a(this,oe);dt==4&&wn(this),this.o&&!this.J&&(dt==4?Xi(this.j,this):(this.o=!1,qe(this)))}else qi(this.g),x==400&&0<oe.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),wn(this),Qr(this)}}}catch{}finally{}};function Gl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Ah(c,g){var x=c.C,S=g.indexOf(`
`,x);return S==-1?Fi:(x=Number(g.substring(x,S)),isNaN(x)?ya:(S+=1,S+x>g.length?Fi:(g=g.slice(S,S+x),c.C=S+x,g)))}bn.prototype.cancel=function(){this.J=!0,wn(this)};function qe(c){c.S=Date.now()+c.I,Ql(c,c.I)}function Ql(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Nn(E(c.ba,c),g)}function qs(c){c.B&&(d.clearTimeout(c.B),c.B=null)}bn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ga(this.i,this.A),this.L!=2&&(xr(),lt(17)),wn(this),this.s=2,Qr(this)):Ql(this,this.S-c)};function Qr(c){c.j.G==0||c.J||Xi(c.j,c)}function wn(c){qs(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,ua(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function _a(c,g){try{var x=c.j;if(x.G!=0&&(x.g==c||Kt(x.h,c))){if(!c.K&&Kt(x.h,c)&&x.G==3){try{var S=x.Da.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var $=S;if($[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<c.F)Yi(x),Fn(x);else break e;Qi(x),lt(18)}}else x.za=$[1],0<x.za-x.T&&37500>$[2]&&x.F&&x.v==0&&!x.C&&(x.C=Nn(E(x.Za,x),6e3));if(1>=Xl(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Cr(x,11)}else if((c.K||x.g==c)&&Yi(x),!W(g))for($=x.Da.g.parse(g),g=0;g<$.length;g++){let be=$[g];if(x.T=be[0],be=be[1],x.G==2)if(be[0]=="c"){x.K=be[1],x.ia=be[2];const At=be[3];At!=null&&(x.la=At,x.j.info("VER="+x.la));const dt=be[4];dt!=null&&(x.Aa=dt,x.j.info("SVER="+x.Aa));const En=be[5];En!=null&&typeof En=="number"&&0<En&&(S=1.5*En,x.L=S,x.j.info("backChannelRequestTimeoutMs_="+S)),S=x;const fn=c.g;if(fn){const Zs=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zs){var G=S.h;G.g||Zs.indexOf("spdy")==-1&&Zs.indexOf("quic")==-1&&Zs.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(wa(G,G.h),G.h=null))}if(S.D){const Zi=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Zi&&(S.ya=Zi,$e(S.I,S.D,Zi))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-c.F,x.j.info("Handshake RTT: "+x.R+"ms")),S=x;var oe=c;if(S.qa=cu(S,S.J?S.ia:null,S.W),oe.K){Jl(S.h,oe);var ze=oe,_t=S.L;_t&&(ze.I=_t),ze.B&&(qs(ze),qe(ze)),S.g=oe}else Js(S);0<x.i.length&&er(x)}else be[0]!="stop"&&be[0]!="close"||Cr(x,7);else x.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?Cr(x,7):Nt(x):be[0]!="noop"&&x.l&&x.l.ta(be),x.v=0)}}xr(4)}catch{}}var Yl=class{constructor(c,g){this.g=c,this.map=g}};function Ks(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Xl(c){return c.h?1:c.g?c.g.size:0}function Kt(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function wa(c,g){c.g?c.g.add(g):c.h=g}function Jl(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Ks.prototype.cancel=function(){if(this.i=Zl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Zl(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const x of c.g.values())g=g.concat(x.D);return g}return N(c.i)}function Ui(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],x=c.length,S=0;S<x;S++)g.push(c[S]);return g}g=[],x=0;for(S in c)g[x++]=c[S];return g}function zi(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var x=0;x<c;x++)g.push(x);return g}g=[],x=0;for(const S in c)g[x++]=S;return g}}}function Yr(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var x=zi(c),S=Ui(c),$=S.length,G=0;G<$;G++)g.call(void 0,S[G],x&&x[G],c)}var Gs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ch(c,g){if(c){c=c.split("&");for(var x=0;x<c.length;x++){var S=c[x].indexOf("="),$=null;if(0<=S){var G=c[x].substring(0,S);$=c[x].substring(S+1)}else G=c[x];g(G,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Er(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Er){this.h=c.h,Qs(this,c.j),this.o=c.o,this.g=c.g,Xr(this,c.s),this.l=c.l;var g=c.i,x=new Xn;x.i=g.i,g.g&&(x.g=new Map(g.g),x.h=g.h),Jr(this,x),this.m=c.m}else c&&(g=String(c).match(Gs))?(this.h=!1,Qs(this,g[1]||"",!0),this.o=Ne(g[2]||""),this.g=Ne(g[3]||"",!0),Xr(this,g[4]),this.l=Ne(g[5]||"",!0),Jr(this,g[6]||"",!0),this.m=Ne(g[7]||"")):(this.h=!1,this.i=new Xn(null,this.h))}Er.prototype.toString=function(){var c=[],g=this.j;g&&c.push(es(g,$i,!0),":");var x=this.g;return(x||g=="file")&&(c.push("//"),(g=this.o)&&c.push(es(g,$i,!0),"@"),c.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&c.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(es(x,x.charAt(0)=="/"?nu:tu,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",es(x,xa)),c.join("")};function hn(c){return new Er(c)}function Qs(c,g,x){c.j=x?Ne(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Xr(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Jr(c,g,x){g instanceof Xn?(c.i=g,Jn(c.i,c.h)):(x||(g=es(g,ru)),c.i=new Xn(g,c.h))}function $e(c,g,x){c.i.set(g,x)}function Zr(c){return $e(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ne(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function es(c,g,x){return typeof c=="string"?(c=encodeURI(c).replace(g,eu),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function eu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $i=/[#\/\?@]/g,tu=/[#\?:]/g,nu=/[#\?]/g,ru=/[#\?@]/g,xa=/#/g;function Xn(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function kt(c){c.g||(c.g=new Map,c.h=0,c.i&&Ch(c.i,function(g,x){c.add(decodeURIComponent(g.replace(/\+/g," ")),x)}))}n=Xn.prototype,n.add=function(c,g){kt(this),this.i=null,c=xn(this,c);var x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(g),this.h+=1,this};function jn(c,g){kt(c),g=xn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Ln(c,g){return kt(c),g=xn(c,g),c.g.has(g)}n.forEach=function(c,g){kt(this),this.g.forEach(function(x,S){x.forEach(function($){c.call(g,$,S,this)},this)},this)},n.na=function(){kt(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),x=[];for(let S=0;S<g.length;S++){const $=c[S];for(let G=0;G<$.length;G++)x.push(g[S])}return x},n.V=function(c){kt(this);let g=[];if(typeof c=="string")Ln(this,c)&&(g=g.concat(this.g.get(xn(this,c))));else{c=Array.from(this.g.values());for(let x=0;x<c.length;x++)g=g.concat(c[x])}return g},n.set=function(c,g){return kt(this),this.i=null,c=xn(this,c),Ln(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function ts(c,g,x){jn(c,g),0<x.length&&(c.i=null,c.g.set(xn(c,g),N(x)),c.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var x=0;x<g.length;x++){var S=g[x];const G=encodeURIComponent(String(S)),oe=this.V(S);for(S=0;S<oe.length;S++){var $=G;oe[S]!==""&&($+="="+encodeURIComponent(String(oe[S]))),c.push($)}}return this.i=c.join("&")};function xn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Jn(c,g){g&&!c.j&&(kt(c),c.i=null,c.g.forEach(function(x,S){var $=S.toLowerCase();S!=$&&(jn(this,S),ts(this,$,x))},c)),c.j=g}function Ih(c,g){const x=new $s;if(d.Image){const S=new Image;S.onload=A(Zt,x,"TestLoadImage: loaded",!0,g,S),S.onerror=A(Zt,x,"TestLoadImage: error",!1,g,S),S.onabort=A(Zt,x,"TestLoadImage: abort",!1,g,S),S.ontimeout=A(Zt,x,"TestLoadImage: timeout",!1,g,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else g(!1)}function su(c,g){const x=new $s,S=new AbortController,$=setTimeout(()=>{S.abort(),Zt(x,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:S.signal}).then(G=>{clearTimeout($),G.ok?Zt(x,"TestPingServer: ok",!0,g):Zt(x,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout($),Zt(x,"TestPingServer: error",!1,g)})}function Zt(c,g,x,S,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),S(x)}catch{}}function Ph(){this.g=new da}function iu(c,g,x){const S=x||"";try{Yr(c,function($,G){let oe=$;m($)&&(oe=ca($)),g.push(S+G+"="+encodeURIComponent(oe))})}catch($){throw g.push(S+"type="+encodeURIComponent("_badmap")),$}}function Tr(c){this.l=c.Ub||null,this.j=c.eb||!1}P(Tr,Us),Tr.prototype.g=function(){return new Ys(this.l,this.j)},Tr.prototype.i=function(c){return function(){return c}}({});function Ys(c,g){yt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Ys,yt),n=Ys.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,On(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mn(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,On(this)),this.g&&(this.readyState=3,On(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ou(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ou(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Mn(this):On(this),this.readyState==3&&ou(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Mn(this))},n.Qa=function(c){this.g&&(this.response=c,Mn(this))},n.ga=function(){this.g&&Mn(this)};function Mn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,On(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var x=g.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=g.next();return c.join(`\r
`)};function On(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ys.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Sr(c){let g="";return ee(c,function(x,S){g+=S,g+=":",g+=x,g+=`\r
`}),g}function ns(c,g,x){e:{for(S in x){var S=!1;break e}S=!0}S||(x=Sr(x),typeof c=="string"?x!=null&&encodeURIComponent(String(x)):$e(c,g,x))}function Je(c){yt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Je,yt);var Rh=/^https?$/i,Ea=["POST","PUT"];n=Je.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,x,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dn.g(),this.v=this.o?Di(this.o):Di(Dn),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(G){Xs(this,G);return}if(c=x||"",x=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var $ in S)x.set($,S[$]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const G of S.keys())x.set(G,S.get(G));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(x.keys()).find(G=>G.toLowerCase()=="content-type"),$=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ea,g,void 0))||S||$||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,oe]of x)this.g.setRequestHeader(G,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wi(this),this.u=!0,this.g.send(c),this.u=!1}catch(G){Xs(this,G)}};function Xs(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Hi(c),dn(c)}function Hi(c){c.A||(c.A=!0,vt(c,"complete"),vt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,vt(this,"complete"),vt(this,"abort"),dn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dn(this,!0)),Je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ta(this):this.bb())},n.bb=function(){Ta(this)};function Ta(c){if(c.h&&typeof u<"u"&&(!c.v[1]||en(c)!=4||c.Z()!=2)){if(c.u&&en(c)==4)aa(c.Ea,0,c);else if(vt(c,"readystatechange"),en(c)==4){c.h=!1;try{const oe=c.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var x;if(!(x=g)){var S;if(S=oe===0){var $=String(c.D).match(Gs)[1]||null;!$&&d.self&&d.self.location&&($=d.self.location.protocol.slice(0,-1)),S=!Rh.test($?$.toLowerCase():"")}x=S}if(x)vt(c,"complete"),vt(c,"success");else{c.m=6;try{var G=2<en(c)?c.g.statusText:""}catch{G=""}c.l=G+" ["+c.Z()+"]",Hi(c)}}finally{dn(c)}}}}function dn(c,g){if(c.g){Wi(c);const x=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||vt(c,"ready");try{x.onreadystatechange=S}catch{}}}function Wi(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function en(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<en(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),ha(g)}};function Sa(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function qi(c){const g={};c=(c.g&&2<=en(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(W(c[S]))continue;var x=O(c[S]);const $=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const G=g[$]||[];g[$]=G,G.push(x)}R(g,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zn(c,g,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||g}function Aa(c){this.Aa=0,this.i=[],this.j=new $s,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zn("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zn("baseRetryDelayMs",5e3,c),this.cb=Zn("retryDelaySeedMs",1e4,c),this.Wa=Zn("forwardChannelMaxRetries",2,c),this.wa=Zn("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ks(c&&c.concurrentRequestLimit),this.Da=new Ph,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Aa.prototype,n.la=8,n.G=1,n.connect=function(c,g,x,S){lt(0),this.W=c,this.H=g||{},x&&S!==void 0&&(this.H.OSID=x,this.H.OAID=S),this.F=this.X,this.I=cu(this,null,this.W),er(this)};function Nt(c){if(Ki(c),c.G==3){var g=c.U++,x=hn(c.I);if($e(x,"SID",c.K),$e(x,"RID",g),$e(x,"TYPE","terminate"),Ar(c,x),g=new bn(c,c.j,g),g.L=2,g.v=Zr(hn(x)),x=!1,d.navigator&&d.navigator.sendBeacon)try{x=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!x&&d.Image&&(new Image().src=g.v,x=!0),x||(g.g=hu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),qe(g)}uu(c)}function Fn(c){c.g&&(Ca(c),c.g.cancel(),c.g=null)}function Ki(c){Fn(c),c.u&&(d.clearTimeout(c.u),c.u=null),Yi(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function er(c){if(!cn(c.h)&&!c.s){c.s=!0;var g=c.Ga;ye||ae(),re||(ye(),re=!0),he.add(g,c),c.B=0}}function kh(c,g){return Xl(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Nn(E(c.Ga,c,g),lu(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const $=new bn(this,this.j,c);let G=this.o;if(this.S&&(G?(G=C(G),b(G,this.S)):G=this.S),this.m!==null||this.O||($.H=G,G=null),this.P)e:{for(var g=0,x=0;x<this.i.length;x++){t:{var S=this.i[x];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,4096<g){g=x;break e}if(g===4096||x===this.i.length-1){g=x+1;break e}}g=1e3}else g=1e3;g=rs(this,$,g),x=hn(this.I),$e(x,"RID",c),$e(x,"CVER",22),this.D&&$e(x,"X-HTTP-Session-Id",this.D),Ar(this,x),G&&(this.O?g="headers="+encodeURIComponent(String(Sr(G)))+"&"+g:this.m&&ns(x,this.m,G)),wa(this.h,$),this.Ua&&$e(x,"TYPE","init"),this.P?($e(x,"$req",g),$e(x,"SID","null"),$.T=!0,Bi($,x,null)):Bi($,x,g),this.G=2}}else this.G==3&&(c?Gi(this,c):this.i.length==0||cn(this.h)||Gi(this))};function Gi(c,g){var x;g?x=g.l:x=c.U++;const S=hn(c.I);$e(S,"SID",c.K),$e(S,"RID",x),$e(S,"AID",c.T),Ar(c,S),c.m&&c.o&&ns(S,c.m,c.o),x=new bn(c,c.j,x,c.B+1),c.m===null&&(x.H=c.o),g&&(c.i=g.D.concat(c.i)),g=rs(c,x,1e3),x.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),wa(c.h,x),Bi(x,S,g)}function Ar(c,g){c.H&&ee(c.H,function(x,S){$e(g,S,x)}),c.l&&Yr({},function(x,S){$e(g,S,x)})}function rs(c,g,x){x=Math.min(c.i.length,x);var S=c.l?E(c.l.Na,c.l,c):null;e:{var $=c.i;let G=-1;for(;;){const oe=["count="+x];G==-1?0<x?(G=$[0].g,oe.push("ofs="+G)):G=0:oe.push("ofs="+G);let ze=!0;for(let _t=0;_t<x;_t++){let be=$[_t].g;const At=$[_t].map;if(be-=G,0>be)G=Math.max(0,$[_t].g-100),ze=!1;else try{iu(At,oe,"req"+be+"_")}catch{S&&S(At)}}if(ze){S=oe.join("&");break e}}}return c=c.i.splice(0,x),g.D=c,S}function Js(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;ye||ae(),re||(ye(),re=!0),he.add(g,c),c.v=0}}function Qi(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Nn(E(c.Fa,c),lu(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,au(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Nn(E(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),Fn(this),au(this))};function Ca(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function au(c){c.g=new bn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=hn(c.qa);$e(g,"RID","rpc"),$e(g,"SID",c.K),$e(g,"AID",c.T),$e(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&$e(g,"TO",c.ja),$e(g,"TYPE","xmlhttp"),Ar(c,g),c.m&&c.o&&ns(g,c.m,c.o),c.L&&(c.g.I=c.L);var x=c.g;c=c.ia,x.L=1,x.v=Zr(hn(g)),x.m=null,x.P=!0,va(x,c)}n.Za=function(){this.C!=null&&(this.C=null,Fn(this),Qi(this),lt(19))};function Yi(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Xi(c,g){var x=null;if(c.g==g){Yi(c),Ca(c),c.g=null;var S=2}else if(Kt(c.h,g))x=g.D,Jl(c.h,g),S=1;else return;if(c.G!=0){if(g.o)if(S==1){x=g.m?g.m.length:0,g=Date.now()-g.F;var $=c.B;S=zs(),vt(S,new Li(S,x)),er(c)}else Js(c);else if($=g.s,$==3||$==0&&0<g.X||!(S==1&&kh(c,g)||S==2&&Qi(c)))switch(x&&0<x.length&&(g=c.h,g.i=g.i.concat(x)),$){case 1:Cr(c,5);break;case 4:Cr(c,10);break;case 3:Cr(c,6);break;default:Cr(c,2)}}}function lu(c,g){let x=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(x*=2),x*g}function Cr(c,g){if(c.j.info("Error code "+g),g==2){var x=E(c.fb,c),S=c.Xa;const $=!S;S=new Er(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Qs(S,"https"),Zr(S),$?Ih(S.toString(),x):su(S.toString(),x)}else lt(2);c.G=0,c.l&&c.l.sa(g),uu(c),Ki(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function uu(c){if(c.G=0,c.ka=[],c.l){const g=Zl(c.h);(g.length!=0||c.i.length!=0)&&(V(c.ka,g),V(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function cu(c,g,x){var S=x instanceof Er?hn(x):new Er(x);if(S.g!="")g&&(S.g=g+"."+S.g),Xr(S,S.s);else{var $=d.location;S=$.protocol,g=g?g+"."+$.hostname:$.hostname,$=+$.port;var G=new Er(null);S&&Qs(G,S),g&&(G.g=g),$&&Xr(G,$),x&&(G.l=x),S=G}return x=c.D,g=c.ya,x&&g&&$e(S,x,g),$e(S,"VER",c.la),Ar(c,S),S}function hu(c,g,x){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Je(new Tr({eb:x})):new Je(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ia(){}n=Ia.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ji(){}Ji.prototype.g=function(c,g){return new Gt(c,g)};function Gt(c,g){yt.call(this),this.g=new Aa(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!W(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!W(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new tr(this)}P(Gt,yt),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){Nt(this.g)},Gt.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.u&&(x={},x.__data__=ca(c),c=x);g.i.push(new Yl(g.Ya++,c)),g.G==3&&er(g)},Gt.prototype.N=function(){this.g.l=null,delete this.j,Nt(this.g),delete this.g,Gt.aa.N.call(this)};function du(c){Qn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const x in g){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}P(du,Qn);function fu(){ji.call(this),this.status=1}P(fu,ji);function tr(c){this.g=c}P(tr,Ia),tr.prototype.ua=function(){vt(this.g,"a")},tr.prototype.ta=function(c){vt(this.g,new du(c))},tr.prototype.sa=function(c){vt(this.g,new fu)},tr.prototype.ra=function(){vt(this.g,"b")},Ji.prototype.createWebChannel=Ji.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,jx=function(){return new Ji},bx=function(){return zs()},Dx=Yn,Kf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oi.NO_ERROR=0,Oi.TIMEOUT=8,Oi.HTTP_ERROR=6,Ec=Oi,ql.COMPLETE="complete",Vx=ql,bi.EventType=_n,_n.OPEN="a",_n.CLOSE="b",_n.ERROR="c",_n.MESSAGE="d",yt.prototype.listen=yt.prototype.K,sl=bi,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,Nx=Je}).apply(typeof dc<"u"?dc:typeof self<"u"?self:typeof window<"u"?window:{});const V0="@firebase/firestore",D0="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new Sx("@firebase/firestore");function xo(){return wi.logLevel}function ue(n,...e){if(wi.logLevel<=Le.DEBUG){const t=e.map(em);wi.debug(`Firestore (${Xo}): ${n}`,...t)}}function $r(n,...e){if(wi.logLevel<=Le.ERROR){const t=e.map(em);wi.error(`Firestore (${Xo}): ${n}`,...t)}}function Oo(n,...e){if(wi.logLevel<=Le.WARN){const t=e.map(em);wi.warn(`Firestore (${Xo}): ${n}`,...t)}}function em(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n="Unexpected state"){const e=`FIRESTORE (${Xo}) INTERNAL ASSERTION FAILED: `+n;throw $r(e),new Error(e)}function Ue(n,e){n||Ee()}function Ae(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Yo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ht.UNAUTHENTICATED))}shutdown(){}}class w2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class x2{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ue(this.o===void 0);let s=this.i;const o=f=>this.i!==s?(s=this.i,t(f)):Promise.resolve();let a=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Fr,e.enqueueRetryable(()=>o(this.currentUser))};const u=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await o(this.currentUser)})},d=f=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Fr)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ue(typeof s.accessToken=="string"),new Lx(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string"),new Ht(e)}}class E2{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class T2{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new E2(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class b0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class S2{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,n2(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Ue(this.o===void 0);const s=a=>{a.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,ue("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>s(a))};const o=a=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new b0(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ue(typeof t.token=="string"),this.R=t.token,new b0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=A2(40);for(let a=0;a<o.length;++a)s.length<20&&o[a]<t&&(s+=e.charAt(o[a]%62))}return s}}function Ve(n,e){return n<e?-1:n>e?1:0}function Fo(n,e,t){return n.length===e.length&&n.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=-62135596800,L0=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*L0);return new Et(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<j0)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/L0}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-j0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Et(0,0))}static max(){return new Se(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="__name__";class ar{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ee(),s===void 0?s=e.length-t:s>e.length-t&&Ee(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return ar.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ar?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const a=ar.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Math.sign(e.length-t.length)}static compareSegments(e,t){const s=ar.isNumericId(e),o=ar.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?ar.extractNumericId(e).compare(ar.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ts.fromString(e.substring(4,e.length-2))}}class Xe extends ar{construct(e,t,s){return new Xe(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new Xe(t)}static emptyPath(){return new Xe([])}}const C2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends ar{construct(e,t,s){return new Lt(e,t,s)}static isValidIdentifier(e){return C2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===M0}static keyField(){return new Lt([M0])}static fromServerFormat(e){const t=[];let s="",o=0;const a=()=>{if(s.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ce(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ce(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=f,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(s+=d,o++):(a(),o++)}if(a(),u)throw new ce(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(Xe.fromString(e))}static fromName(e){return new ve(Xe.fromString(e).popFirst(5))}static empty(){return new ve(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new Xe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=-1;function I2(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new Et(t+1,0):new Et(t,s));return new Rs(o,ve.empty(),e)}function P2(n){return new Rs(n.readTime,n.key,Al)}class Rs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Rs(Se.min(),ve.empty(),Al)}static max(){return new Rs(Se.max(),ve.empty(),Al)}}function R2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class N2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==k2)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z((s,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(s,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Z.reject(t)}static resolve(e){return new Z((t,s)=>{t(e)})}static reject(e){return new Z((t,s)=>{s(e)})}static waitFor(e){return new Z((t,s)=>{let o=0,a=0,u=!1;e.forEach(d=>{++o,d.next(()=>{++a,u&&a===o&&t()},f=>s(f))}),u=!0,a===o&&t()})}static or(e){let t=Z.resolve(!1);for(const s of e)t=t.next(o=>o?Z.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,a)=>{s.push(t.call(this,o,a))}),this.waitFor(s)}static mapArray(e,t){return new Z((s,o)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next(y=>{u[m]=y,++d,d===a&&s(u)},y=>o(y))}})}static doWhile(e,t){return new Z((s,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):s()};a()})}}function V2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Zo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.oe(s),this._e=s=>t.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}ah.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm=-1;function lh(n){return n==null}function Bc(n){return n===0&&1/n==-1/0}function D2(n){return typeof n=="number"&&Number.isInteger(n)&&!Bc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="";function b2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=O0(e)),e=j2(n.get(t),e);return O0(e)}function j2(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case Ox:t+="";break;default:t+=a}}return t}function O0(n){return n+Ox+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ls(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Fx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,t){this.comparator=e,this.root=t||jt.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fc(this.root,e,this.comparator,!0)}}class fc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?s(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,t,s,o,a){this.key=e,this.value=t,this.color=s??jt.RED,this.left=o??jt.EMPTY,this.right=a??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,a){return new jt(e??this.key,t??this.value,s??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const a=s(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,s),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return jt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,t,s,o,a){return this}insert(e,t,s){return new jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new B0(this.data.getIterator())}getIteratorFrom(e){return new B0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=s.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tt(this.comparator);return t.data=e,t}}class B0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new yn([])}unionWith(e){let t=new Tt(Lt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Bx("Invalid base64 string: "+a):a}}(e);return new Mt(t)}static fromUint8Array(e){const t=function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a}(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const L2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ks(n){if(Ue(!!n),typeof n=="string"){let e=0;const t=L2.exec(n);if(Ue(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ht(n.seconds),nanos:ht(n.nanos)}}function ht(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ns(n){return typeof n=="string"?Mt.fromBase64String(n):Mt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="server_timestamp",zx="__type__",$x="__previous_value__",Hx="__local_write_time__";function nm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[zx])===null||t===void 0?void 0:t.stringValue)===Ux}function uh(n){const e=n.mapValue.fields[$x];return nm(e)?uh(e):e}function Cl(n){const e=ks(n.mapValue.fields[Hx].timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,t,s,o,a,u,d,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m}}const Uc="(default)";class Il{constructor(e,t){this.projectId=e,this.database=t||Uc}static empty(){return new Il("","")}get isDefaultDatabase(){return this.database===Uc}isEqual(e){return e instanceof Il&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="__type__",O2="__max__",pc={mapValue:{}},qx="__vector__",zc="value";function Vs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?nm(n)?4:B2(n)?9007199254740991:F2(n)?10:11:Ee()}function pr(n,e){if(n===e)return!0;const t=Vs(n);if(t!==Vs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Cl(n).isEqual(Cl(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=ks(o.timestampValue),d=ks(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,a){return Ns(o.bytesValue).isEqual(Ns(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,a){return ht(o.geoPointValue.latitude)===ht(a.geoPointValue.latitude)&&ht(o.geoPointValue.longitude)===ht(a.geoPointValue.longitude)}(n,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return ht(o.integerValue)===ht(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=ht(o.doubleValue),d=ht(a.doubleValue);return u===d?Bc(u)===Bc(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Fo(n.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:case 11:return function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(F0(u)!==F0(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!pr(u[f],d[f])))return!1;return!0}(n,e);default:return Ee()}}function Pl(n,e){return(n.values||[]).find(t=>pr(t,e))!==void 0}function Bo(n,e){if(n===e)return 0;const t=Vs(n),s=Vs(e);if(t!==s)return Ve(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return function(a,u){const d=ht(a.integerValue||a.doubleValue),f=ht(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return U0(n.timestampValue,e.timestampValue);case 4:return U0(Cl(n),Cl(e));case 5:return Ve(n.stringValue,e.stringValue);case 6:return function(a,u){const d=Ns(a),f=Ns(u);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,u){const d=a.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const y=Ve(d[m],f[m]);if(y!==0)return y}return Ve(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,u){const d=Ve(ht(a.latitude),ht(u.latitude));return d!==0?d:Ve(ht(a.longitude),ht(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return z0(n.arrayValue,e.arrayValue);case 10:return function(a,u){var d,f,m,y;const w=a.fields||{},E=u.fields||{},A=(d=w[zc])===null||d===void 0?void 0:d.arrayValue,P=(f=E[zc])===null||f===void 0?void 0:f.arrayValue,N=Ve(((m=A==null?void 0:A.values)===null||m===void 0?void 0:m.length)||0,((y=P==null?void 0:P.values)===null||y===void 0?void 0:y.length)||0);return N!==0?N:z0(A,P)}(n.mapValue,e.mapValue);case 11:return function(a,u){if(a===pc.mapValue&&u===pc.mapValue)return 0;if(a===pc.mapValue)return 1;if(u===pc.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=u.fields||{},y=Object.keys(m);f.sort(),y.sort();for(let w=0;w<f.length&&w<y.length;++w){const E=Ve(f[w],y[w]);if(E!==0)return E;const A=Bo(d[f[w]],m[y[w]]);if(A!==0)return A}return Ve(f.length,y.length)}(n.mapValue,e.mapValue);default:throw Ee()}}function U0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=ks(n),s=ks(e),o=Ve(t.seconds,s.seconds);return o!==0?o:Ve(t.nanos,s.nanos)}function z0(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const a=Bo(t[o],s[o]);if(a)return a}return Ve(t.length,s.length)}function Uo(n){return Gf(n)}function Gf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const s=ks(t);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ns(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ve.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let s="[",o=!0;for(const a of t.values||[])o?o=!1:s+=",",s+=Gf(a);return s+"]"}(n.arrayValue):"mapValue"in n?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of s)a?a=!1:o+=",",o+=`${u}:${Gf(t.fields[u])}`;return o+"}"}(n.mapValue):Ee()}function Tc(n){switch(Vs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=uh(n);return e?16+Tc(e):16;case 5:return 2*n.stringValue.length;case 6:return Ns(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,a)=>o+Tc(a),0)}(n.arrayValue);case 10:case 11:return function(s){let o=0;return Ls(s.fields,(a,u)=>{o+=a.length+Tc(u)}),o}(n.mapValue);default:throw Ee()}}function $0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qf(n){return!!n&&"integerValue"in n}function rm(n){return!!n&&"arrayValue"in n}function H0(n){return!!n&&"nullValue"in n}function W0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sc(n){return!!n&&"mapValue"in n}function F2(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Wx])===null||t===void 0?void 0:t.stringValue)===qx}function hl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ls(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=hl(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function B2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===O2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Sc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hl(t)}setAll(e){let t=Lt.emptyPath(),s={},o=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,s,o),s={},o=[],t=d.popLast()}u?s[d.lastSegment()]=hl(u):o.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,s,o)}delete(e){const t=this.field(e.popLast());Sc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Sc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ls(t,(o,a)=>e[o]=a);for(const o of s)delete e[o]}clone(){return new un(hl(this.value))}}function Kx(n){const e=[];return Ls(n.fields,(t,s)=>{const o=new Lt([t]);if(Sc(s)){const a=Kx(s.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)}),new yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,t,s,o,a,u,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Wt(e,0,Se.min(),Se.min(),Se.min(),un.empty(),0)}static newFoundDocument(e,t,s,o){return new Wt(e,1,t,Se.min(),s,o,0)}static newNoDocument(e,t){return new Wt(e,2,t,Se.min(),Se.min(),un.empty(),0)}static newUnknownDocument(e,t){return new Wt(e,3,t,Se.min(),Se.min(),un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t){this.position=e,this.inclusive=t}}function q0(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?s=ve.comparator(ve.fromName(u.referenceValue),t.key):s=Bo(u,t.data.field(a.field)),a.dir==="desc"&&(s*=-1),s!==0)break}return s}function K0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,t="asc"){this.field=e,this.dir=t}}function U2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{}class mt extends Gx{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new $2(e,t,s):t==="array-contains"?new q2(e,s):t==="in"?new K2(e,s):t==="not-in"?new G2(e,s):t==="array-contains-any"?new Q2(e,s):new mt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new H2(e,s):new W2(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Bo(t,this.value)):t!==null&&Vs(this.value)===Vs(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gn extends Gx{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Gn(e,t)}matches(e){return Qx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Qx(n){return n.op==="and"}function Yx(n){return z2(n)&&Qx(n)}function z2(n){for(const e of n.filters)if(e instanceof Gn)return!1;return!0}function Yf(n){if(n instanceof mt)return n.field.canonicalString()+n.op.toString()+Uo(n.value);if(Yx(n))return n.filters.map(e=>Yf(e)).join(",");{const e=n.filters.map(t=>Yf(t)).join(",");return`${n.op}(${e})`}}function Xx(n,e){return n instanceof mt?function(s,o){return o instanceof mt&&s.op===o.op&&s.field.isEqual(o.field)&&pr(s.value,o.value)}(n,e):n instanceof Gn?function(s,o){return o instanceof Gn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((a,u,d)=>a&&Xx(u,o.filters[d]),!0):!1}(n,e):void Ee()}function Jx(n){return n instanceof mt?function(t){return`${t.field.canonicalString()} ${t.op} ${Uo(t.value)}`}(n):n instanceof Gn?function(t){return t.op.toString()+" {"+t.getFilters().map(Jx).join(" ,")+"}"}(n):"Filter"}class $2 extends mt{constructor(e,t,s){super(e,t,s),this.key=ve.fromName(s.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class H2 extends mt{constructor(e,t){super(e,"in",t),this.keys=Zx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class W2 extends mt{constructor(e,t){super(e,"not-in",t),this.keys=Zx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Zx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>ve.fromName(s.referenceValue))}class q2 extends mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rm(t)&&Pl(t.arrayValue,this.value)}}class K2 extends mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Pl(this.value.arrayValue,t)}}class G2 extends mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Pl(this.value.arrayValue,t)}}class Q2 extends mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Pl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,t=null,s=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.le=null}}function G0(n,e=null,t=[],s=[],o=null,a=null,u=null){return new Y2(n,e,t,s,o,a,u)}function sm(n){const e=Ae(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Yf(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(a){return a.field.canonicalString()+a.dir}(s)).join(","),lh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Uo(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Uo(s)).join(",")),e.le=t}return e.le}function im(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!U2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Xx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!K0(n.startAt,e.startAt)&&K0(n.endAt,e.endAt)}function Xf(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,t=null,s=[],o=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function X2(n,e,t,s,o,a,u,d){return new ea(n,e,t,s,o,a,u,d)}function om(n){return new ea(n)}function Q0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function eE(n){return n.collectionGroup!==null}function dl(n){const e=Ae(n);if(e.he===null){e.he=[];const t=new Set;for(const a of e.explicitOrderBy)e.he.push(a),t.add(a.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Tt(Lt.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.he.push(new Rl(a,s))}),t.has(Lt.keyField().canonicalString())||e.he.push(new Rl(Lt.keyField(),s))}return e.he}function hr(n){const e=Ae(n);return e.Pe||(e.Pe=J2(e,dl(n))),e.Pe}function J2(n,e){if(n.limitType==="F")return G0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new Rl(o.field,a)});const t=n.endAt?new $c(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new $c(n.startAt.position,n.startAt.inclusive):null;return G0(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Jf(n,e){const t=n.filters.concat([e]);return new ea(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zf(n,e,t){return new ea(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ch(n,e){return im(hr(n),hr(e))&&n.limitType===e.limitType}function tE(n){return`${sm(hr(n))}|lt:${n.limitType}`}function Eo(n){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>Jx(o)).join(", ")}]`),lh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>Uo(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>Uo(o)).join(",")),`Target(${s})`}(hr(n))}; limitType=${n.limitType})`}function hh(n,e){return e.isFoundDocument()&&function(s,o){const a=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(a):ve.isDocumentKey(s.path)?s.path.isEqual(a):s.path.isImmediateParentOf(a)}(n,e)&&function(s,o){for(const a of dl(s))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(n,e)&&function(s,o){for(const a of s.filters)if(!a.matches(o))return!1;return!0}(n,e)&&function(s,o){return!(s.startAt&&!function(u,d,f){const m=q0(u,d,f);return u.inclusive?m<=0:m<0}(s.startAt,dl(s),o)||s.endAt&&!function(u,d,f){const m=q0(u,d,f);return u.inclusive?m>=0:m>0}(s.endAt,dl(s),o))}(n,e)}function Z2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function nE(n){return(e,t)=>{let s=!1;for(const o of dl(n)){const a=eN(o,e,t);if(a!==0)return a;s=s||o.field.isKeyField()}return 0}}function eN(n,e,t){const s=n.field.isKeyField()?ve.comparator(e.key,t.key):function(a,u,d){const f=u.data.field(a),m=d.data.field(a);return f!==null&&m!==null?Bo(f,m):Ee()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,a]of s)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,(t,s)=>{for(const[o,a]of s)e(o,a)})}isEmpty(){return Fx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new it(ve.comparator);function Hr(){return tN}const rE=new it(ve.comparator);function il(...n){let e=rE;for(const t of n)e=e.insert(t.key,t);return e}function sE(n){let e=rE;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function yi(){return fl()}function iE(){return fl()}function fl(){return new Ai(n=>n.toString(),(n,e)=>n.isEqual(e))}const nN=new it(ve.comparator),rN=new Tt(ve.comparator);function ke(...n){let e=rN;for(const t of n)e=e.add(t);return e}const sN=new Tt(Ve);function iN(){return sN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bc(e)?"-0":e}}function oE(n){return{integerValue:""+n}}function oN(n,e){return D2(e)?oE(e):am(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(){this._=void 0}}function aN(n,e,t){return n instanceof kl?function(o,a){const u={fields:{[zx]:{stringValue:Ux},[Hx]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&nm(a)&&(a=uh(a)),a&&(u.fields[$x]=a),{mapValue:u}}(t,e):n instanceof Nl?lE(n,e):n instanceof Vl?uE(n,e):function(o,a){const u=aE(o,a),d=Y0(u)+Y0(o.Ie);return Qf(u)&&Qf(o.Ie)?oE(d):am(o.serializer,d)}(n,e)}function lN(n,e,t){return n instanceof Nl?lE(n,e):n instanceof Vl?uE(n,e):t}function aE(n,e){return n instanceof Hc?function(s){return Qf(s)||function(a){return!!a&&"doubleValue"in a}(s)}(e)?e:{integerValue:0}:null}class kl extends dh{}class Nl extends dh{constructor(e){super(),this.elements=e}}function lE(n,e){const t=cE(e);for(const s of n.elements)t.some(o=>pr(o,s))||t.push(s);return{arrayValue:{values:t}}}class Vl extends dh{constructor(e){super(),this.elements=e}}function uE(n,e){let t=cE(e);for(const s of n.elements)t=t.filter(o=>!pr(o,s));return{arrayValue:{values:t}}}class Hc extends dh{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Y0(n){return ht(n.integerValue||n.doubleValue)}function cE(n){return rm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,t){this.field=e,this.transform=t}}function cN(n,e){return n.field.isEqual(e.field)&&function(s,o){return s instanceof Nl&&o instanceof Nl||s instanceof Vl&&o instanceof Vl?Fo(s.elements,o.elements,pr):s instanceof Hc&&o instanceof Hc?pr(s.Ie,o.Ie):s instanceof kl&&o instanceof kl}(n.transform,e.transform)}class hN{constructor(e,t){this.version=e,this.transformResults=t}}class Kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ac(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class fh{}function hE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new fE(n.key,Kn.none()):new Bl(n.key,n.data,Kn.none());{const t=n.data,s=un.empty();let o=new Tt(Lt.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?s.delete(a):s.set(a,u),o=o.add(a)}return new Ms(n.key,s,new yn(o.toArray()),Kn.none())}}function dN(n,e,t){n instanceof Bl?function(o,a,u){const d=o.value.clone(),f=J0(o.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Ms?function(o,a,u){if(!Ac(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=J0(o.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(dE(o)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function pl(n,e,t,s){return n instanceof Bl?function(a,u,d,f){if(!Ac(a.precondition,u))return d;const m=a.value.clone(),y=Z0(a.fieldTransforms,f,u);return m.setAll(y),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,e,t,s):n instanceof Ms?function(a,u,d,f){if(!Ac(a.precondition,u))return d;const m=Z0(a.fieldTransforms,f,u),y=u.data;return y.setAll(dE(a)),y.setAll(m),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(n,e,t,s):function(a,u,d){return Ac(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d}(n,e,t)}function fN(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),a=aE(s.transform,o||null);a!=null&&(t===null&&(t=un.empty()),t.set(s.field,a))}return t||null}function X0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Fo(s,o,(a,u)=>cN(a,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Bl extends fh{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ms extends fh{constructor(e,t,s,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function dE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function J0(n,e,t){const s=new Map;Ue(n.length===t.length);for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);s.set(a.field,lN(u,d,t[o]))}return s}function Z0(n,e,t){const s=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);s.set(o.field,aN(a,u,e))}return s}class fE extends fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pN extends fh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&dN(a,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=pl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=pl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=iE();return this.mutations.forEach(o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const f=hE(u,d);f!==null&&s.set(o.key,f),u.isValidDocument()||u.convertToNoDocument(Se.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ke())}isEqual(e){return this.batchId===e.batchId&&Fo(this.mutations,e.mutations,(t,s)=>X0(t,s))&&Fo(this.baseMutations,e.baseMutations,(t,s)=>X0(t,s))}}class lm{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Ue(e.mutations.length===s.length);let o=function(){return nN}();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,s[u].version);return new lm(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,je;function vN(n){switch(n){case J.OK:return Ee();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Ee()}}function pE(n){if(n===void 0)return $r("GRPC error has no .code"),J.UNKNOWN;switch(n){case pt.OK:return J.OK;case pt.CANCELLED:return J.CANCELLED;case pt.UNKNOWN:return J.UNKNOWN;case pt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case pt.INTERNAL:return J.INTERNAL;case pt.UNAVAILABLE:return J.UNAVAILABLE;case pt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case pt.NOT_FOUND:return J.NOT_FOUND;case pt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case pt.ABORTED:return J.ABORTED;case pt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case pt.DATA_LOSS:return J.DATA_LOSS;default:return Ee()}}(je=pt||(pt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=new Ts([4294967295,4294967295],0);function e_(n){const e=_N().encode(n),t=new kx;return t.update(e),new Uint8Array(t.digest())}function t_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ts([t,s],0),new Ts([o,a],0)]}class um{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new ol(`Invalid padding: ${t}`);if(s<0)throw new ol(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ol(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new ol(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Ts.fromNumber(this.Ee)}Ae(e,t,s){let o=e.add(t.multiply(Ts.fromNumber(s)));return o.compare(wN)===1&&(o=new Ts([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=e_(e),[s,o]=t_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ae(s,o,a);if(!this.Re(u))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new um(a,o,t);return s.forEach(d=>u.insert(d)),u}insert(e){if(this.Ee===0)return;const t=e_(e),[s,o]=t_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ae(s,o,a);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t,s,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Ul.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new ph(Se.min(),o,new it(Ve),Hr(),ke())}}class Ul{constructor(e,t,s,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ul(s,t,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,t,s,o){this.me=e,this.removedTargetIds=t,this.key=s,this.fe=o}}class mE{constructor(e,t){this.targetId=e,this.ge=t}}class gE{constructor(e,t,s=Mt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class n_{constructor(){this.pe=0,this.ye=r_(),this.we=Mt.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=ke(),t=ke(),s=ke();return this.ye.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ee()}}),new Ul(this.we,this.be,e,t,s)}Me(){this.Se=!1,this.ye=r_()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ue(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class xN{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Hr(),this.$e=mc(),this.Ke=mc(),this.Ue=new it(Ve)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const s=this.He(t);switch(e.state){case 0:this.Je(t)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(t);break;case 3:this.Je(t)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),s.Ce(e.resumeToken));break;default:Ee()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((s,o)=>{this.Je(o)&&t(o)})}Ze(e){const t=e.targetId,s=e.ge.count,o=this.Xe(t);if(o){const a=o.target;if(Xf(a))if(s===0){const u=new ve(a.path);this.ze(t,u,Wt.newNoDocument(u,Se.min()))}else Ue(s===1);else{const u=this.et(t);if(u!==s){const d=this.tt(e),f=d?this.nt(d,e,u):1;if(f!==0){this.Ye(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,m)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Ns(s).toUint8Array()}catch(f){if(f instanceof Bx)return Oo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new um(u,o,a)}catch(f){return Oo(f instanceof ol?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.Ee===0?null:d}nt(e,t,s){return t.ge.count===s-this.st(e,t.targetId)?0:2}st(e,t){const s=this.ke.getRemoteKeysForTarget(t);let o=0;return s.forEach(a=>{const u=this.ke.it(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,a,null),o++)}),o}ot(e){const t=new Map;this.qe.forEach((a,u)=>{const d=this.Xe(u);if(d){if(a.current&&Xf(d.target)){const f=new ve(d.target.path);this._t(f).has(u)||this.ut(u,f)||this.ze(u,f,Wt.newNoDocument(f,e))}a.ve&&(t.set(u,a.Fe()),a.Me())}});let s=ke();this.Ke.forEach((a,u)=>{let d=!0;u.forEachWhile(f=>{const m=this.Xe(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(s=s.add(a))}),this.Qe.forEach((a,u)=>u.setReadTime(e));const o=new ph(e,t,this.Ue,this.Qe,s);return this.Qe=Hr(),this.$e=mc(),this.Ke=mc(),this.Ue=new it(Ve),o}Ge(e,t){if(!this.Je(e))return;const s=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,s),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,s){if(!this.Je(e))return;const o=this.He(e);this.ut(e,t)?o.xe(t,1):o.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),s&&(this.Qe=this.Qe.insert(t,s))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new n_,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Tt(Ve),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Tt(Ve),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new n_),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function mc(){return new it(ve.comparator)}function r_(){return new it(ve.comparator)}const EN={asc:"ASCENDING",desc:"DESCENDING"},TN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SN={and:"AND",or:"OR"};class AN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ep(n,e){return n.useProto3Json||lh(e)?e:{value:e}}function Wc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function CN(n,e){return Wc(n,e.toTimestamp())}function dr(n){return Ue(!!n),Se.fromTimestamp(function(t){const s=ks(t);return new Et(s.seconds,s.nanos)}(n))}function cm(n,e){return tp(n,e).canonicalString()}function tp(n,e){const t=function(o){return new Xe(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function vE(n){const e=Xe.fromString(n);return Ue(TE(e)),e}function np(n,e){return cm(n.databaseId,e.path)}function wf(n,e){const t=vE(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(wE(t))}function _E(n,e){return cm(n.databaseId,e)}function IN(n){const e=vE(n);return e.length===4?Xe.emptyPath():wE(e)}function rp(n){return new Xe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function wE(n){return Ue(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function s_(n,e,t){return{name:np(n,e),fields:t.value.mapValue.fields}}function PN(n,e){let t;if("targetChange"in e){e.targetChange;const s=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(m,y){return m.useProto3Json?(Ue(y===void 0||typeof y=="string"),Mt.fromBase64String(y||"")):(Ue(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Mt.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(m){const y=m.code===void 0?J.UNKNOWN:pE(m.code);return new ce(y,m.message||"")}(u);t=new gE(s,o,a,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=wf(n,s.document.name),a=dr(s.document.updateTime),u=s.document.createTime?dr(s.document.createTime):Se.min(),d=new un({mapValue:{fields:s.document.fields}}),f=Wt.newFoundDocument(o,a,u,d),m=s.targetIds||[],y=s.removedTargetIds||[];t=new Cc(m,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=wf(n,s.document),a=s.readTime?dr(s.readTime):Se.min(),u=Wt.newNoDocument(o,a),d=s.removedTargetIds||[];t=new Cc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=wf(n,s.document),a=s.removedTargetIds||[];t=new Cc([],a,o,null)}else{if(!("filter"in e))return Ee();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:a}=s,u=new yN(o,a),d=s.targetId;t=new mE(d,u)}}return t}function RN(n,e){let t;if(e instanceof Bl)t={update:s_(n,e.key,e.value)};else if(e instanceof fE)t={delete:np(n,e.key)};else if(e instanceof Ms)t={update:s_(n,e.key,e.data),updateMask:ON(e.fieldMask)};else{if(!(e instanceof pN))return Ee();t={verify:np(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,u){const d=u.transform;if(d instanceof kl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Nl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Vl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Hc)return{fieldPath:u.field.canonicalString(),increment:d.Ie};throw Ee()}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:CN(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ee()}(n,e.precondition)),t}function kN(n,e){return n&&n.length>0?(Ue(e!==void 0),n.map(t=>function(o,a){let u=o.updateTime?dr(o.updateTime):dr(a);return u.isEqual(Se.min())&&(u=dr(a)),new hN(u,o.transformResults||[])}(t,e))):[]}function NN(n,e){return{documents:[_E(n,e.path)]}}function VN(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=_E(n,o);const a=function(m){if(m.length!==0)return EE(Gn.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const u=function(m){if(m.length!==0)return m.map(y=>function(E){return{field:To(E.field),direction:jN(E.dir)}}(y))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=ep(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ht:t,parent:o}}function DN(n){let e=IN(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Ue(s===1);const y=t.from[0];y.allDescendants?o=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=function(w){const E=xE(w);return E instanceof Gn&&Yx(E)?E.getFilters():[E]}(t.where));let u=[];t.orderBy&&(u=function(w){return w.map(E=>function(P){return new Rl(So(P.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(E))}(t.orderBy));let d=null;t.limit&&(d=function(w){let E;return E=typeof w=="object"?w.value:w,lh(E)?null:E}(t.limit));let f=null;t.startAt&&(f=function(w){const E=!!w.before,A=w.values||[];return new $c(A,E)}(t.startAt));let m=null;return t.endAt&&(m=function(w){const E=!w.before,A=w.values||[];return new $c(A,E)}(t.endAt)),X2(e,o,u,a,d,"F",f,m)}function bN(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=So(t.unaryFilter.field);return mt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=So(t.unaryFilter.field);return mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=So(t.unaryFilter.field);return mt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=So(t.unaryFilter.field);return mt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(n):n.fieldFilter!==void 0?function(t){return mt.create(So(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Gn.create(t.compositeFilter.filters.map(s=>xE(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee()}}(t.compositeFilter.op))}(n):Ee()}function jN(n){return EN[n]}function LN(n){return TN[n]}function MN(n){return SN[n]}function To(n){return{fieldPath:n.canonicalString()}}function So(n){return Lt.fromServerFormat(n.fieldPath)}function EE(n){return n instanceof mt?function(t){if(t.op==="=="){if(W0(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NAN"}};if(H0(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(W0(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NAN"}};if(H0(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:To(t.field),op:LN(t.op),value:t.value}}}(n):n instanceof Gn?function(t){const s=t.getFilters().map(o=>EE(o));return s.length===1?s[0]:{compositeFilter:{op:MN(t.op),filters:s}}}(n):Ee()}function ON(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function TE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,t,s,o,a=Se.min(),u=Se.min(),d=Mt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e){this.Tt=e}}function BN(n){const e=DN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(){this.Tn=new zN}addToCollectionParentIndex(e,t){return this.Tn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(Rs.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(Rs.min())}updateCollectionGroup(e,t,s){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class zN{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Tt(Xe.comparator),a=!o.has(s);return this.index[t]=o.add(s),a}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Tt(Xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},SE=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(SE,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new zo(0)}static Un(){return new zo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="LruGarbageCollector",$N=1048576;function a_([n,e],[t,s]){const o=Ve(n,t);return o===0?Ve(e,s):o}class HN{constructor(e){this.Hn=e,this.buffer=new Tt(a_),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();a_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class WN{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ue(o_,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zo(t)?ue(o_,"Ignoring IndexedDB error during garbage collection: ",t):await Jo(t)}await this.er(3e5)})}}class qN{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(ah.ae);const s=new HN(t);return this.tr.forEachTarget(e,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.tr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(i_)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),i_):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let s,o,a,u,d,f,m;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,u=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(s=w,d=Date.now(),this.removeTargets(e,s,t))).next(w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,s))).next(w=>(m=Date.now(),xo()<=Le.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-y}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:w})))}}function KN(n,e){return new qN(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(){this.changes=new Ai(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Z.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&pl(s.mutation,o,yn.empty(),Et.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,ke()).next(()=>s))}getLocalViewOfDocuments(e,t,s=ke()){const o=yi();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(a=>{let u=il();return a.forEach((d,f)=>{u=u.insert(d,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const s=yi();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,ke()))}populateOverlays(e,t,s){const o=[];return s.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,s,o){let a=Hr();const u=fl(),d=function(){return fl()}();return t.forEach((f,m)=>{const y=s.get(m.key);o.has(m.key)&&(y===void 0||y.mutation instanceof Ms)?a=a.insert(m.key,m):y!==void 0?(u.set(m.key,y.mutation.getFieldMask()),pl(y.mutation,m,y.mutation.getFieldMask(),Et.now())):u.set(m.key,yn.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((m,y)=>u.set(m,y)),t.forEach((m,y)=>{var w;return d.set(m,new QN(y,(w=u.get(m))!==null&&w!==void 0?w:null))}),d))}recalculateAndSaveOverlays(e,t){const s=fl();let o=new it((u,d)=>u-d),a=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(f=>{const m=t.get(f);if(m===null)return;let y=s.get(f)||yn.empty();y=d.applyToLocalView(m,y),s.set(f,y);const w=(o.get(d.batchId)||ke()).add(f);o=o.insert(d.batchId,w)})}).next(()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,y=f.value,w=iE();y.forEach(E=>{if(!a.has(E)){const A=hE(t.get(E),s.get(E));A!==null&&w.set(E,A),a=a.add(E)}}),u.push(this.documentOverlayCache.saveOverlays(e,m,w))}return Z.waitFor(u)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(u){return ve.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):eE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-a.size):Z.resolve(yi());let d=Al,f=a;return u.next(m=>Z.forEach(m,(y,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(y)?Z.resolve():this.remoteDocumentCache.getEntry(e,y).next(E=>{f=f.insert(y,E)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,f,m,ke())).next(y=>({batchId:d,changes:sE(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(s=>{let o=il();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const a=t.collectionGroup;let u=il();return this.indexManager.getCollectionParents(e,a).next(d=>Z.forEach(d,f=>{const m=function(w,E){return new ea(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next(y=>{y.forEach((w,E)=>{u=u.insert(w,E)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,s,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a,o))).next(u=>{a.forEach((f,m)=>{const y=m.getKey();u.get(y)===null&&(u=u.insert(y,Wt.newInvalidDocument(y)))});let d=il();return u.forEach((f,m)=>{const y=a.get(f);y!==void 0&&pl(y.mutation,m,yn.empty(),Et.now()),hh(t,m)&&(d=d.insert(f,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Z.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:dr(o.createTime)}}(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(o){return{name:o.name,query:BN(o.bundledQuery),readTime:dr(o.readTime)}}(t)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(){this.overlays=new it(ve.comparator),this.Rr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const s=yi();return Z.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&s.set(o,a)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,a)=>{this.Et(e,t,a)}),Z.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(s)),Z.resolve()}getOverlaysForCollection(e,t,s){const o=yi(),a=t.length+1,u=new ve(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>s&&o.set(f.getKey(),f)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let a=new it((m,y)=>m-y);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let y=a.get(m.largestBatchId);y===null&&(y=yi(),a=a.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=yi(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,y)=>d.set(m,y)),!(d.size()>=o)););return Z.resolve(d)}Et(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const u=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new gN(t,s));let a=this.Rr.get(t);a===void 0&&(a=ke(),this.Rr.set(t,a)),this.Rr.set(t,a.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(){this.Vr=new Tt(Rt.mr),this.gr=new Tt(Rt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const s=new Rt(e,t);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.wr(new Rt(e,t))}br(e,t){e.forEach(s=>this.removeReference(s,t))}Sr(e){const t=new ve(new Xe([])),s=new Rt(t,e),o=new Rt(t,e+1),a=[];return this.gr.forEachInRange([s,o],u=>{this.wr(u),a.push(u.key)}),a}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ve(new Xe([])),s=new Rt(t,e),o=new Rt(t,e+1);let a=ke();return this.gr.forEachInRange([s,o],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new Rt(e,0),s=this.Vr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Rt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ve.comparator(e.key,t.key)||Ve(e.Cr,t.Cr)}static pr(e,t){return Ve(e.Cr,t.Cr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Tt(Rt.mr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new mN(a,t,s,o);this.mutationQueue.push(u);for(const d of o)this.Mr=this.Mr.add(new Rt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Z.resolve(u)}lookupMutationBatch(e,t){return Z.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Nr(s),a=o<0?0:o;return Z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?tm:this.Fr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Rt(t,0),o=new Rt(t,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([s,o],u=>{const d=this.Or(u.Cr);a.push(d)}),Z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Tt(Ve);return t.forEach(o=>{const a=new Rt(o,0),u=new Rt(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,u],d=>{s=s.add(d.Cr)})}),Z.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let a=s;ve.isDocumentKey(a)||(a=a.child(""));const u=new Rt(new ve(a),0);let d=new Tt(Ve);return this.Mr.forEachWhile(f=>{const m=f.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(d=d.add(f.Cr)),!0)},u),Z.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(s=>{const o=this.Or(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ue(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return Z.forEach(t.mutations,o=>{const a=new Rt(o.key,t.batchId);return s=s.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,t){const s=new Rt(t,0),o=this.Mr.firstAfterOrEqual(s);return Z.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e){this.kr=e,this.docs=function(){return new it(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),a=o?o.size:0,u=this.kr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Z.resolve(s?s.document.mutableCopy():Wt.newInvalidDocument(t))}getEntries(e,t){let s=Hr();return t.forEach(o=>{const a=this.docs.get(o);s=s.insert(o,a?a.document.mutableCopy():Wt.newInvalidDocument(o))}),Z.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let a=Hr();const u=t.path,d=new ve(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:y}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||R2(P2(y),s)<=0||(o.has(y.key)||hh(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return Z.resolve(a)}getAllFromCollectionGroup(e,t,s,o){Ee()}qr(e,t){return Z.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new nV(this)}getSize(e){return Z.resolve(this.size)}}class nV extends GN{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(s)}),Z.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.persistence=e,this.Qr=new Ai(t=>sm(t),im),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.$r=0,this.Kr=new hm,this.targetCount=0,this.Ur=zo.Kn()}forEachTarget(e,t){return this.Qr.forEach((s,o)=>t(o)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.$r&&(this.$r=t),Z.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new zo(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.zn(t),Z.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,s){let o=0;const a=[];return this.Qr.forEach((u,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.Qr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),Z.waitFor(a).next(()=>o)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const s=this.Qr.get(t)||null;return Z.resolve(s)}addMatchingKeys(e,t,s){return this.Kr.yr(t,s),Z.resolve()}removeMatchingKeys(e,t,s){this.Kr.br(t,s);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(u=>{a.push(o.markPotentiallyOrphaned(e,u))}),Z.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Kr.vr(t);return Z.resolve(s)}containsKey(e,t){return Z.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new ah(0),this.zr=!1,this.zr=!0,this.jr=new ZN,this.referenceDelegate=e(this),this.Hr=new rV(this),this.indexManager=new UN,this.remoteDocumentCache=function(o){return new tV(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new FN(t),this.Yr=new XN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Wr[e.toKey()];return s||(s=new eV(t,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,s){ue("MemoryPersistence","Starting transaction:",e);const o=new sV(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(a=>this.referenceDelegate.Xr(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}ei(e,t){return Z.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,t)))}}class sV extends N2{constructor(e){super(),this.currentSequenceNumber=e}}class dm{constructor(e){this.persistence=e,this.ti=new hm,this.ni=null}static ri(e){return new dm(e)}get ii(){if(this.ni)return this.ni;throw Ee()}addReference(e,t,s){return this.ti.addReference(s,t),this.ii.delete(s.toString()),Z.resolve()}removeReference(e,t,s){return this.ti.removeReference(s,t),this.ii.add(s.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Z.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.ii.add(a.toString()))}).next(()=>s.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.ii,s=>{const o=ve.fromPath(s);return this.si(e,o).next(a=>{a||t.removeEntry(o,Se.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(s=>{s?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return Z.or([()=>Z.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class qc{constructor(e,t){this.persistence=e,this.oi=new Ai(s=>b2(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=KN(this,t)}static ri(e,t){return new qc(e,t)}Zr(){}Xr(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}sr(e){let t=0;return this.rr(e,s=>{t++}).next(()=>t)}rr(e,t){return Z.forEach(this.oi,(s,o)=>this.ar(e,s,o).next(a=>a?Z.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.qr(e,u=>this.ar(e,u,t).next(d=>{d||(s++,a.removeEntry(u,Se.min()))})).next(()=>a.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.oi.set(s,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,s){return this.oi.set(s,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),Z.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Tc(e.data.value)),t}ar(e,t,s){return Z.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.oi.get(t);return Z.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Hi=s,this.Ji=o}static Yi(e,t){let s=ke(),o=ke();for(const a of t.docChanges)switch(a.type){case 0:s=s.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new fm(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return ZR()?8:V2(XR())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,s,o){const a={result:null};return this.rs(e,t).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.ss(e,t,o,s).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new iV;return this._s(e,t,u).next(d=>{if(a.result=d,this.Xi)return this.us(e,t,u,d.size)})}).next(()=>a.result)}us(e,t,s,o){return s.documentReadCount<this.es?(xo()<=Le.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Eo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Z.resolve()):(xo()<=Le.DEBUG&&ue("QueryEngine","Query:",Eo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(xo()<=Le.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Eo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hr(t))):Z.resolve())}rs(e,t){if(Q0(t))return Z.resolve(null);let s=hr(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Zf(t,null,"F"),s=hr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(a=>{const u=ke(...a);return this.ns.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,s).next(f=>{const m=this.cs(t,d);return this.ls(t,m,u,f.readTime)?this.rs(e,Zf(t,null,"F")):this.hs(e,m,t,f)}))})))}ss(e,t,s,o){return Q0(t)||o.isEqual(Se.min())?Z.resolve(null):this.ns.getDocuments(e,s).next(a=>{const u=this.cs(t,a);return this.ls(t,u,s,o)?Z.resolve(null):(xo()<=Le.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Eo(t)),this.hs(e,u,t,I2(o,Al)).next(d=>d))})}cs(e,t){let s=new Tt(nE(e));return t.forEach((o,a)=>{hh(e,a)&&(s=s.add(a))}),s}ls(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}_s(e,t,s){return xo()<=Le.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Eo(t)),this.ns.getDocumentsMatchingQuery(e,t,Rs.min(),s)}hs(e,t,s,o){return this.ns.getDocumentsMatchingQuery(e,s,o).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="LocalStore",aV=3e8;class lV{constructor(e,t,s,o){this.persistence=e,this.Ps=t,this.serializer=o,this.Ts=new it(Ve),this.Is=new Ai(a=>sm(a),im),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YN(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function uV(n,e,t,s){return new lV(n,e,t,s)}async function CE(n,e){const t=Ae(n);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(a=>(o=a,t.As(e),t.mutationQueue.getAllMutationBatches(s))).next(a=>{const u=[],d=[];let f=ke();for(const m of o){u.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}for(const m of a){d.push(m.batchId);for(const y of m.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(s,f).next(m=>({Rs:m,removedBatchIds:u,addedBatchIds:d}))})})}function cV(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),a=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,f,m,y){const w=m.batch,E=w.keys();let A=Z.resolve();return E.forEach(P=>{A=A.next(()=>y.getEntry(f,P)).next(N=>{const V=m.docVersions.get(P);Ue(V!==null),N.version.compareTo(V)<0&&(w.applyToRemoteDocument(N,m),N.isValidDocument()&&(N.setReadTime(m.commitVersion),y.addEntry(N)))})}),A.next(()=>d.mutationQueue.removeMutationBatch(f,w))}(t,s,e,a).next(()=>a.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(d){let f=ke();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function IE(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function hV(n,e){const t=Ae(n),s=e.snapshotVersion;let o=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});o=t.Ts;const d=[];e.targetChanges.forEach((y,w)=>{const E=o.get(w);if(!E)return;d.push(t.Hr.removeMatchingKeys(a,y.removedDocuments,w).next(()=>t.Hr.addMatchingKeys(a,y.addedDocuments,w)));let A=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?A=A.withResumeToken(Mt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,s)),o=o.insert(w,A),function(N,V,L){return N.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=aV?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(E,A,y)&&d.push(t.Hr.updateTargetData(a,A))});let f=Hr(),m=ke();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))}),d.push(dV(a,u,e.documentUpdates).next(y=>{f=y.Vs,m=y.fs})),!s.isEqual(Se.min())){const y=t.Hr.getLastRemoteSnapshotVersion(a).next(w=>t.Hr.setTargetsMetadata(a,a.currentSequenceNumber,s));d.push(y)}return Z.waitFor(d).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,m)).next(()=>f)}).then(a=>(t.Ts=o,a))}function dV(n,e,t){let s=ke(),o=ke();return t.forEach(a=>s=s.add(a)),e.getEntries(n,s).next(a=>{let u=Hr();return t.forEach((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),f.isNoDocument()&&f.version.isEqual(Se.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):ue(pm,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{Vs:u,fs:o}})}function fV(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=tm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function pV(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Hr.getTargetData(s,e).next(a=>a?(o=a,Z.resolve(o)):t.Hr.allocateTargetId(s).next(u=>(o=new ws(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(s.targetId,s),t.Is.set(e,s.targetId)),s})}async function sp(n,e,t){const s=Ae(n),o=s.Ts.get(e),a=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",a,u=>s.persistence.referenceDelegate.removeTarget(u,o))}catch(u){if(!Zo(u))throw u;ue(pm,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ts=s.Ts.remove(e),s.Is.delete(o.target)}function l_(n,e,t){const s=Ae(n);let o=Se.min(),a=ke();return s.persistence.runTransaction("Execute query","readwrite",u=>function(f,m,y){const w=Ae(f),E=w.Is.get(y);return E!==void 0?Z.resolve(w.Ts.get(E)):w.Hr.getTargetData(m,y)}(s,u,hr(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(u,d.targetId).next(f=>{a=f})}).next(()=>s.Ps.getDocumentsMatchingQuery(u,e,t?o:Se.min(),t?a:ke())).next(d=>(mV(s,Z2(e),d),{documents:d,gs:a})))}function mV(n,e,t){let s=n.Es.get(e)||Se.min();t.forEach((o,a)=>{a.readTime.compareTo(s)>0&&(s=a.readTime)}),n.Es.set(e,s)}class u_{constructor(){this.activeTargetIds=iN()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gV{constructor(){this.ho=new u_,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,s){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new u_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="ConnectivityMonitor";class h_{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ue(c_,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ue(c_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc=null;function ip(){return gc===null?gc=function(){return 268435456+Math.round(2147483648*Math.random())}():gc++,"0x"+gc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf="RestConnection",vV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _V{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===Uc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}bo(e,t,s,o,a){const u=ip(),d=this.So(e,t.toUriEncodedString());ue(xf,`Sending RPC '${e}' ${u}:`,d,s);const f={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(f,o,a),this.vo(e,d,f,s).then(m=>(ue(xf,`Received RPC '${e}' ${u}: `,m),m),m=>{throw Oo(xf,`RPC '${e}' ${u} failed with error: `,m,"url: ",d,"request:",s),m})}Co(e,t,s,o,a,u){return this.bo(e,t,s,o,a)}Do(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,a)=>e[a]=o),s&&s.headers.forEach((o,a)=>e[a]=o)}So(e,t){const s=vV[e];return`${this.po}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class xV extends _V{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,s,o){const a=ip();return new Promise((u,d)=>{const f=new Nx;f.setWithCredentials(!0),f.listenOnce(Vx.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Ec.NO_ERROR:const y=f.getResponseJson();ue(zt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),u(y);break;case Ec.TIMEOUT:ue(zt,`RPC '${e}' ${a} timed out`),d(new ce(J.DEADLINE_EXCEEDED,"Request time out"));break;case Ec.HTTP_ERROR:const w=f.getStatus();if(ue(zt,`RPC '${e}' ${a} failed with status:`,w,"response text:",f.getResponseText()),w>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const A=E==null?void 0:E.error;if(A&&A.status&&A.message){const P=function(V){const L=V.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(L)>=0?L:J.UNKNOWN}(A.status);d(new ce(P,A.message))}else d(new ce(J.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ce(J.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{ue(zt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(o);ue(zt,`RPC '${e}' ${a} sending request:`,o),f.send(t,"POST",m,s,15)})}Wo(e,t,s){const o=ip(),a=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=jx(),d=bx(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Do(f.initMessageHeaders,t,s),f.encodeInitMessageHeaders=!0;const y=a.join("");ue(zt,`Creating RPC '${e}' stream ${o}: ${y}`,f);const w=u.createWebChannel(y,f);let E=!1,A=!1;const P=new wV({Fo:V=>{A?ue(zt,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(E||(ue(zt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),E=!0),ue(zt,`RPC '${e}' stream ${o} sending:`,V),w.send(V))},Mo:()=>w.close()}),N=(V,L,W)=>{V.listen(L,B=>{try{W(B)}catch(Y){setTimeout(()=>{throw Y},0)}})};return N(w,sl.EventType.OPEN,()=>{A||(ue(zt,`RPC '${e}' stream ${o} transport opened.`),P.Qo())}),N(w,sl.EventType.CLOSE,()=>{A||(A=!0,ue(zt,`RPC '${e}' stream ${o} transport closed`),P.Ko())}),N(w,sl.EventType.ERROR,V=>{A||(A=!0,Oo(zt,`RPC '${e}' stream ${o} transport errored:`,V),P.Ko(new ce(J.UNAVAILABLE,"The operation could not be completed")))}),N(w,sl.EventType.MESSAGE,V=>{var L;if(!A){const W=V.data[0];Ue(!!W);const B=W,Y=(B==null?void 0:B.error)||((L=B[0])===null||L===void 0?void 0:L.error);if(Y){ue(zt,`RPC '${e}' stream ${o} received error:`,Y);const Q=Y.status;let ee=function(I){const b=pt[I];if(b!==void 0)return pE(b)}(Q),R=Y.message;ee===void 0&&(ee=J.INTERNAL,R="Unknown error status: "+Q+" with message "+Y.message),A=!0,P.Ko(new ce(ee,R)),w.close()}else ue(zt,`RPC '${e}' stream ${o} received:`,W),P.Uo(W)}}),N(d,Dx.STAT_EVENT,V=>{V.stat===Kf.PROXY?ue(zt,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===Kf.NOPROXY&&ue(zt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{P.$o()},0),P}}function Ef(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(n){return new AN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,t,s=1e3,o=1.5,a=6e4){this.Ti=e,this.timerId=t,this.Go=s,this.zo=o,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,t-s);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="PersistentStream";class RE{constructor(e,t,s,o,a,u,d,f){this.Ti=e,this.n_=s,this.r_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new PE(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?($r(t.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===t&&this.V_(s,o)},s=>{e(()=>{const o=new ce(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(e,t){const s=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ue(d_,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ue(d_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EV extends RE{constructor(e,t,s,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,u),this.serializer=a}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=PN(this.serializer,e),s=function(a){if(!("targetChange"in a))return Se.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Se.min():u.readTime?dr(u.readTime):Se.min()}(e);return this.listener.p_(t,s)}y_(e){const t={};t.database=rp(this.serializer),t.addTarget=function(a,u){let d;const f=u.target;if(d=Xf(f)?{documents:NN(a,f)}:{query:VN(a,f).ht},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=yE(a,u.resumeToken);const m=ep(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Se.min())>0){d.readTime=Wc(a,u.snapshotVersion.toTimestamp());const m=ep(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const s=bN(this.serializer,e);s&&(t.labels=s),this.I_(t)}w_(e){const t={};t.database=rp(this.serializer),t.removeTarget=e,this.I_(t)}}class TV extends RE{constructor(e,t,s,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,u),this.serializer=a}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=kN(e.writeResults,e.commitTime),s=dr(e.commitTime);return this.listener.v_(s,t)}C_(){const e={};e.database=rp(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>RN(this.serializer,s))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{}class AV extends SV{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.bo(e,tp(t,s),o,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ce(J.UNKNOWN,a.toString())})}Co(e,t,s,o,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.Co(e,tp(t,s),o,u,d,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(J.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class CV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?($r(t),this.N_=!1):ue("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="RemoteStore";class IV{constructor(e,t,s,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(u=>{s.enqueueAndForget(async()=>{Ci(this)&&(ue(xi,"Restarting streams for network reachability change."),await async function(f){const m=Ae(f);m.W_.add(4),await zl(m),m.j_.set("Unknown"),m.W_.delete(4),await gh(m)}(this))})}),this.j_=new CV(s,o)}}async function gh(n){if(Ci(n))for(const e of n.G_)await e(!0)}async function zl(n){for(const e of n.G_)await e(!1)}function kE(n,e){const t=Ae(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),vm(t)?ym(t):ta(t).c_()&&gm(t,e))}function mm(n,e){const t=Ae(n),s=ta(t);t.U_.delete(e),s.c_()&&NE(t,e),t.U_.size===0&&(s.c_()?s.P_():Ci(t)&&t.j_.set("Unknown"))}function gm(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ta(n).y_(e)}function NE(n,e){n.H_.Ne(e),ta(n).w_(e)}function ym(n){n.H_=new xN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),ta(n).start(),n.j_.B_()}function vm(n){return Ci(n)&&!ta(n).u_()&&n.U_.size>0}function Ci(n){return Ae(n).W_.size===0}function VE(n){n.H_=void 0}async function PV(n){n.j_.set("Online")}async function RV(n){n.U_.forEach((e,t)=>{gm(n,e)})}async function kV(n,e){VE(n),vm(n)?(n.j_.q_(e),ym(n)):n.j_.set("Unknown")}async function NV(n,e,t){if(n.j_.set("Online"),e instanceof gE&&e.state===2&&e.cause)try{await async function(o,a){const u=a.cause;for(const d of a.targetIds)o.U_.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.U_.delete(d),o.H_.removeTarget(d))}(n,e)}catch(s){ue(xi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Kc(n,s)}else if(e instanceof Cc?n.H_.We(e):e instanceof mE?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Se.min()))try{const s=await IE(n.localStore);t.compareTo(s)>=0&&await function(a,u){const d=a.H_.ot(u);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const y=a.U_.get(m);y&&a.U_.set(m,y.withResumeToken(f.resumeToken,u))}}),d.targetMismatches.forEach((f,m)=>{const y=a.U_.get(f);if(!y)return;a.U_.set(f,y.withResumeToken(Mt.EMPTY_BYTE_STRING,y.snapshotVersion)),NE(a,f);const w=new ws(y.target,f,m,y.sequenceNumber);gm(a,w)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(s){ue(xi,"Failed to raise snapshot:",s),await Kc(n,s)}}async function Kc(n,e,t){if(!Zo(e))throw e;n.W_.add(1),await zl(n),n.j_.set("Offline"),t||(t=()=>IE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ue(xi,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await gh(n)})}function DE(n,e){return e().catch(t=>Kc(n,t,e))}async function yh(n){const e=Ae(n),t=Ds(e);let s=e.K_.length>0?e.K_[e.K_.length-1].batchId:tm;for(;VV(e);)try{const o=await fV(e.localStore,s);if(o===null){e.K_.length===0&&t.P_();break}s=o.batchId,DV(e,o)}catch(o){await Kc(e,o)}bE(e)&&jE(e)}function VV(n){return Ci(n)&&n.K_.length<10}function DV(n,e){n.K_.push(e);const t=Ds(n);t.c_()&&t.b_&&t.S_(e.mutations)}function bE(n){return Ci(n)&&!Ds(n).u_()&&n.K_.length>0}function jE(n){Ds(n).start()}async function bV(n){Ds(n).C_()}async function jV(n){const e=Ds(n);for(const t of n.K_)e.S_(t.mutations)}async function LV(n,e,t){const s=n.K_.shift(),o=lm.from(s,e,t);await DE(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await yh(n)}async function MV(n,e){e&&Ds(n).b_&&await async function(s,o){if(function(u){return vN(u)&&u!==J.ABORTED}(o.code)){const a=s.K_.shift();Ds(s).h_(),await DE(s,()=>s.remoteSyncer.rejectFailedWrite(a.batchId,o)),await yh(s)}}(n,e),bE(n)&&jE(n)}async function f_(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),ue(xi,"RemoteStore received new credentials");const s=Ci(t);t.W_.add(3),await zl(t),s&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await gh(t)}async function OV(n,e){const t=Ae(n);e?(t.W_.delete(2),await gh(t)):e||(t.W_.add(2),await zl(t),t.j_.set("Unknown"))}function ta(n){return n.J_||(n.J_=function(t,s,o){const a=Ae(t);return a.M_(),new EV(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{xo:PV.bind(null,n),No:RV.bind(null,n),Lo:kV.bind(null,n),p_:NV.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),vm(n)?ym(n):n.j_.set("Unknown")):(await n.J_.stop(),VE(n))})),n.J_}function Ds(n){return n.Y_||(n.Y_=function(t,s,o){const a=Ae(t);return a.M_(),new TV(s,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:bV.bind(null,n),Lo:MV.bind(null,n),D_:jV.bind(null,n),v_:LV.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await yh(n)):(await n.Y_.stop(),n.K_.length>0&&(ue(xi,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,t,s,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=a,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,a){const u=Date.now()+s,d=new _m(e,t,u,o,a);return d.start(s),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wm(n,e){if($r("AsyncQueue",`${e}: ${n}`),Zo(n))return new ce(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{static emptySet(e){return new Do(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ve.comparator(t.key,s.key):(t,s)=>ve.comparator(t.key,s.key),this.keyedMap=il(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=s.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Do;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(){this.Z_=new it(ve.comparator)}track(e){const t=e.doc.key,s=this.Z_.get(t);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(t):e.type===1&&s.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ee():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class $o{constructor(e,t,s,o,a,u,d,f,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,o,a){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new $o(e,t,Do.emptySet(t),u,s,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class BV{constructor(){this.queries=m_(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,s){const o=Ae(t),a=o.queries;o.queries=m_(),a.forEach((u,d)=>{for(const f of d.ta)f.onError(s)})})(this,new ce(J.ABORTED,"Firestore shutting down"))}}function m_(){return new Ai(n=>tE(n),ch)}async function LE(n,e){const t=Ae(n);let s=3;const o=e.query;let a=t.queries.get(o);a?!a.na()&&e.ra()&&(s=2):(a=new FV,s=e.ra()?0:1);try{switch(s){case 0:a.ea=await t.onListen(o,!0);break;case 1:a.ea=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=wm(u,`Initialization of query '${Eo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.ta.push(e),e.sa(t.onlineState),a.ea&&e.oa(a.ea)&&xm(t)}async function ME(n,e){const t=Ae(n),s=e.query;let o=3;const a=t.queries.get(s);if(a){const u=a.ta.indexOf(e);u>=0&&(a.ta.splice(u,1),a.ta.length===0?o=e.ra()?0:1:!a.na()&&e.ra()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function UV(n,e){const t=Ae(n);let s=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.ta)d.oa(o)&&(s=!0);u.ea=o}}s&&xm(t)}function zV(n,e,t){const s=Ae(n),o=s.queries.get(e);if(o)for(const a of o.ta)a.onError(t);s.queries.delete(e)}function xm(n){n.ia.forEach(e=>{e.next()})}var op,g_;(g_=op||(op={}))._a="default",g_.Cache="cache";class OE{constructor(e,t,s){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new $o(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const s=t!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=$o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this.key=e}}class BE{constructor(e){this.key=e}}class $V{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ke(),this.mutatedKeys=ke(),this.ya=nE(e),this.wa=new Do(this.ya)}get ba(){return this.fa}Sa(e,t){const s=t?t.Da:new p_,o=t?t.wa:this.wa;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((y,w)=>{const E=o.get(y),A=hh(this.query,w)?w:null,P=!!E&&this.mutatedKeys.has(E.key),N=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let V=!1;E&&A?E.data.isEqual(A.data)?P!==N&&(s.track({type:3,doc:A}),V=!0):this.va(E,A)||(s.track({type:2,doc:A}),V=!0,(f&&this.ya(A,f)>0||m&&this.ya(A,m)<0)&&(d=!0)):!E&&A?(s.track({type:0,doc:A}),V=!0):E&&!A&&(s.track({type:1,doc:E}),V=!0,(f||m)&&(d=!0)),V&&(A?(u=u.add(A),a=N?a.add(y):a.delete(y)):(u=u.delete(y),a=a.delete(y)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),a=a.delete(y.key),s.track({type:1,doc:y})}return{wa:u,Da:s,ls:d,mutatedKeys:a}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const a=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((y,w)=>function(A,P){const N=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return N(A)-N(P)}(y.type,w.type)||this.ya(y.doc,w.doc)),this.Ca(s),o=o!=null&&o;const d=t&&!o?this.Fa():[],f=this.pa.size===0&&this.current&&!o?1:0,m=f!==this.ga;return this.ga=f,u.length!==0||m?{snapshot:new $o(this.query,e.wa,a,u,e.mutatedKeys,f===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new p_,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=ke(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const t=[];return e.forEach(s=>{this.pa.has(s)||t.push(new BE(s))}),this.pa.forEach(s=>{e.has(s)||t.push(new FE(s))}),t}Oa(e){this.fa=e.gs,this.pa=ke();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return $o.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Em="SyncEngine";class HV{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class WV{constructor(e){this.key=e,this.Ba=!1}}class qV{constructor(e,t,s,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new Ai(d=>tE(d),ch),this.qa=new Map,this.Qa=new Set,this.$a=new it(ve.comparator),this.Ka=new Map,this.Ua=new hm,this.Wa={},this.Ga=new Map,this.za=zo.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function KV(n,e,t=!0){const s=qE(n);let o;const a=s.ka.get(e);return a?(s.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Na()):o=await UE(s,e,t,!0),o}async function GV(n,e){const t=qE(n);await UE(t,e,!0,!1)}async function UE(n,e,t,s){const o=await pV(n.localStore,hr(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return s&&(d=await QV(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&kE(n.remoteStore,o),d}async function QV(n,e,t,s,o){n.Ha=(w,E,A)=>async function(N,V,L,W){let B=V.view.Sa(L);B.ls&&(B=await l_(N.localStore,V.query,!1).then(({documents:R})=>V.view.Sa(R,B)));const Y=W&&W.targetChanges.get(V.targetId),Q=W&&W.targetMismatches.get(V.targetId)!=null,ee=V.view.applyChanges(B,N.isPrimaryClient,Y,Q);return v_(N,V.targetId,ee.Ma),ee.snapshot}(n,w,E,A);const a=await l_(n.localStore,e,!0),u=new $V(e,a.gs),d=u.Sa(a.documents),f=Ul.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),m=u.applyChanges(d,n.isPrimaryClient,f);v_(n,t,m.Ma);const y=new HV(e,t,u);return n.ka.set(e,y),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),m.snapshot}async function YV(n,e,t){const s=Ae(n),o=s.ka.get(e),a=s.qa.get(o.targetId);if(a.length>1)return s.qa.set(o.targetId,a.filter(u=>!ch(u,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await sp(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&mm(s.remoteStore,o.targetId),ap(s,o.targetId)}).catch(Jo)):(ap(s,o.targetId),await sp(s.localStore,o.targetId,!0))}async function XV(n,e){const t=Ae(n),s=t.ka.get(e),o=t.qa.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),mm(t.remoteStore,s.targetId))}async function JV(n,e,t){const s=iD(n);try{const o=await function(u,d){const f=Ae(u),m=Et.now(),y=d.reduce((A,P)=>A.add(P.key),ke());let w,E;return f.persistence.runTransaction("Locally write mutations","readwrite",A=>{let P=Hr(),N=ke();return f.ds.getEntries(A,y).next(V=>{P=V,P.forEach((L,W)=>{W.isValidDocument()||(N=N.add(L))})}).next(()=>f.localDocuments.getOverlayedDocuments(A,P)).next(V=>{w=V;const L=[];for(const W of d){const B=fN(W,w.get(W.key).overlayedDocument);B!=null&&L.push(new Ms(W.key,B,Kx(B.value.mapValue),Kn.exists(!0)))}return f.mutationQueue.addMutationBatch(A,m,L,d)}).next(V=>{E=V;const L=V.applyToLocalDocumentSet(w,N);return f.documentOverlayCache.saveOverlays(A,V.batchId,L)})}).then(()=>({batchId:E.batchId,changes:sE(w)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(u,d,f){let m=u.Wa[u.currentUser.toKey()];m||(m=new it(Ve)),m=m.insert(d,f),u.Wa[u.currentUser.toKey()]=m}(s,o.batchId,t),await $l(s,o.changes),await yh(s.remoteStore)}catch(o){const a=wm(o,"Failed to persist write");t.reject(a)}}async function zE(n,e){const t=Ae(n);try{const s=await hV(t.localStore,e);e.targetChanges.forEach((o,a)=>{const u=t.Ka.get(a);u&&(Ue(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.Ba=!0:o.modifiedDocuments.size>0?Ue(u.Ba):o.removedDocuments.size>0&&(Ue(u.Ba),u.Ba=!1))}),await $l(t,s,e)}catch(s){await Jo(s)}}function y_(n,e,t){const s=Ae(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.ka.forEach((a,u)=>{const d=u.view.sa(e);d.snapshot&&o.push(d.snapshot)}),function(u,d){const f=Ae(u);f.onlineState=d;let m=!1;f.queries.forEach((y,w)=>{for(const E of w.ta)E.sa(d)&&(m=!0)}),m&&xm(f)}(s.eventManager,e),o.length&&s.La.p_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function ZV(n,e,t){const s=Ae(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Ka.get(e),a=o&&o.key;if(a){let u=new it(ve.comparator);u=u.insert(a,Wt.newNoDocument(a,Se.min()));const d=ke().add(a),f=new ph(Se.min(),new Map,new it(Ve),u,d);await zE(s,f),s.$a=s.$a.remove(a),s.Ka.delete(e),Tm(s)}else await sp(s.localStore,e,!1).then(()=>ap(s,e,t)).catch(Jo)}async function eD(n,e){const t=Ae(n),s=e.batch.batchId;try{const o=await cV(t.localStore,e);HE(t,s,null),$E(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await $l(t,o)}catch(o){await Jo(o)}}async function tD(n,e,t){const s=Ae(n);try{const o=await function(u,d){const f=Ae(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return f.mutationQueue.lookupMutationBatch(m,d).next(w=>(Ue(w!==null),y=w.keys(),f.mutationQueue.removeMutationBatch(m,w))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,y,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>f.localDocuments.getDocuments(m,y))})}(s.localStore,e);HE(s,e,t),$E(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await $l(s,o)}catch(o){await Jo(o)}}function $E(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function HE(n,e,t){const s=Ae(n);let o=s.Wa[s.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),s.Wa[s.currentUser.toKey()]=o}}function ap(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.qa.get(e))n.ka.delete(s),t&&n.La.Ja(s,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(s=>{n.Ua.containsKey(s)||WE(n,s)})}function WE(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(mm(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),Tm(n))}function v_(n,e,t){for(const s of t)s instanceof FE?(n.Ua.addReference(s.key,e),nD(n,s)):s instanceof BE?(ue(Em,"Document no longer in limbo: "+s.key),n.Ua.removeReference(s.key,e),n.Ua.containsKey(s.key)||WE(n,s.key)):Ee()}function nD(n,e){const t=e.key,s=t.path.canonicalString();n.$a.get(t)||n.Qa.has(s)||(ue(Em,"New document in limbo: "+t),n.Qa.add(s),Tm(n))}function Tm(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new ve(Xe.fromString(e)),s=n.za.next();n.Ka.set(s,new WV(t)),n.$a=n.$a.insert(t,s),kE(n.remoteStore,new ws(hr(om(t.path)),s,"TargetPurposeLimboResolution",ah.ae))}}async function $l(n,e,t){const s=Ae(n),o=[],a=[],u=[];s.ka.isEmpty()||(s.ka.forEach((d,f)=>{u.push(s.Ha(f,e,t).then(m=>{var y;if((m||t)&&s.isPrimaryClient){const w=m?!m.fromCache:(y=t==null?void 0:t.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;s.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(m){o.push(m);const w=fm.Yi(f.targetId,m);a.push(w)}}))}),await Promise.all(u),s.La.p_(o),await async function(f,m){const y=Ae(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>Z.forEach(m,E=>Z.forEach(E.Hi,A=>y.persistence.referenceDelegate.addReference(w,E.targetId,A)).next(()=>Z.forEach(E.Ji,A=>y.persistence.referenceDelegate.removeReference(w,E.targetId,A)))))}catch(w){if(!Zo(w))throw w;ue(pm,"Failed to update sequence numbers: "+w)}for(const w of m){const E=w.targetId;if(!w.fromCache){const A=y.Ts.get(E),P=A.snapshotVersion,N=A.withLastLimboFreeSnapshotVersion(P);y.Ts=y.Ts.insert(E,N)}}}(s.localStore,a))}async function rD(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){ue(Em,"User change. New user:",e.toKey());const s=await CE(t.localStore,e);t.currentUser=e,function(a,u){a.Ga.forEach(d=>{d.forEach(f=>{f.reject(new ce(J.CANCELLED,u))})}),a.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await $l(t,s.Rs)}}function sD(n,e){const t=Ae(n),s=t.Ka.get(e);if(s&&s.Ba)return ke().add(s.key);{let o=ke();const a=t.qa.get(e);if(!a)return o;for(const u of a){const d=t.ka.get(u);o=o.unionWith(d.view.ba)}return o}}function qE(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZV.bind(null,e),e.La.p_=UV.bind(null,e.eventManager),e.La.Ja=zV.bind(null,e.eventManager),e}function iD(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tD.bind(null,e),e}class Gc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mh(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return uV(this.persistence,new oV,e.initialUser,this.serializer)}Xa(e){return new AE(dm.ri,this.serializer)}Za(e){return new gV}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gc.provider={build:()=>new Gc};class oD extends Gc{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Ue(this.persistence.referenceDelegate instanceof qc);const s=this.persistence.referenceDelegate.garbageCollector;return new WN(s,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new AE(s=>qc.ri(s,t),this.serializer)}}class lp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>y_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=rD.bind(null,this.syncEngine),await OV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new BV}()}createDatastore(e){const t=mh(e.databaseInfo.databaseId),s=function(a){return new xV(a)}(e.databaseInfo);return function(a,u,d,f){return new AV(a,u,d,f)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,a,u,d){return new IV(s,o,a,u,d)}(this.localStore,this.datastore,e.asyncQueue,t=>y_(this.syncEngine,t,0),function(){return h_.D()?new h_:new yV}())}createSyncEngine(e,t){return function(o,a,u,d,f,m,y){const w=new qV(o,a,u,d,f,m);return y&&(w.ja=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=Ae(o);ue(xi,"RemoteStore shutting down."),a.W_.add(5),await zl(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}lp.provider={build:()=>new lp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):$r("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="FirestoreClient";class aD{constructor(e,t,s,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Ht.UNAUTHENTICATED,this.clientId=Mx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(s,async u=>{ue(bs,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(s,u=>(ue(bs,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=wm(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Tf(n,e){n.asyncQueue.verifyOperationInProgress(),ue(bs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(async o=>{s.isEqual(o)||(await CE(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function __(n,e){n.asyncQueue.verifyOperationInProgress();const t=await lD(n);ue(bs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(s=>f_(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,o)=>f_(e.remoteStore,o)),n._onlineComponents=e}async function lD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(bs,"Using user provided OfflineComponentProvider");try{await Tf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Oo("Error using user provided cache. Falling back to memory cache: "+t),await Tf(n,new Gc)}}else ue(bs,"Using default OfflineComponentProvider"),await Tf(n,new oD(void 0));return n._offlineComponents}async function GE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(bs,"Using user provided OnlineComponentProvider"),await __(n,n._uninitializedComponentsProvider._online)):(ue(bs,"Using default OnlineComponentProvider"),await __(n,new lp))),n._onlineComponents}function uD(n){return GE(n).then(e=>e.syncEngine)}async function QE(n){const e=await GE(n),t=e.eventManager;return t.onListen=KV.bind(null,e.syncEngine),t.onUnlisten=YV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=GV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XV.bind(null,e.syncEngine),t}function cD(n,e,t={}){const s=new Fr;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,d,f,m){const y=new KE({next:E=>{y.su(),u.enqueueAndForget(()=>ME(a,w));const A=E.docs.has(d);!A&&E.fromCache?m.reject(new ce(J.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&f&&f.source==="server"?m.reject(new ce(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),w=new OE(om(d.path),y,{includeMetadataChanges:!0,Ta:!0});return LE(a,w)}(await QE(n),n.asyncQueue,e,t,s)),s.promise}function hD(n,e,t={}){const s=new Fr;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,d,f,m){const y=new KE({next:E=>{y.su(),u.enqueueAndForget(()=>ME(a,w)),E.fromCache&&f.source==="server"?m.reject(new ce(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(E)},error:E=>m.reject(E)}),w=new OE(d,y,{includeMetadataChanges:!0,Ta:!0});return LE(a,w)}(await QE(n),n.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n,e,t){if(!t)throw new ce(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function dD(n,e,t,s){if(e===!0&&s===!0)throw new ce(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function x_(n){if(!ve.isDocumentKey(n))throw new ce(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function E_(n){if(ve.isDocumentKey(n))throw new ce(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee()}function mr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vh(n);throw new ce(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="firestore.googleapis.com",T_=!0;class S_{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=JE,this.ssl=T_}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:T_;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=SE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$N)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YE((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _h{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new _2;switch(s.type){case"firstParty":return new T2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=w_.get(t);s&&(ue("ComponentProvider","Removing Datastore"),w_.delete(t),s.terminate())}(this),Promise.resolve()}}function fD(n,e,t,s={}){var o;const a=(n=mr(n,_h))._getSettings(),u=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),d=`${e}:${t}`;a.host!==JE&&a.host!==d&&Oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},a),{host:d,ssl:!1,emulatorOptions:s});if(!Mc(f,u)&&(n._setSettings(f),s.mockUserToken)){let m,y;if(typeof s.mockUserToken=="string")m=s.mockUserToken,y=Ht.MOCK_USER;else{m=YR(s.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new ce(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Ht(w)}n._authCredentials=new w2(new Lx(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ii(this.firestore,e,this._query)}}class Jt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}}class Ss extends Ii{constructor(e,t,s){super(e,t,om(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new ve(e))}withConverter(e){return new Ss(this.firestore,e,this._path)}}function Sm(n,e,...t){if(n=Ur(n),XE("collection","path",e),n instanceof _h){const s=Xe.fromString(e,...t);return E_(s),new Ss(n,null,s)}{if(!(n instanceof Jt||n instanceof Ss))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Xe.fromString(e,...t));return E_(s),new Ss(n.firestore,null,s)}}function As(n,e,...t){if(n=Ur(n),arguments.length===1&&(e=Mx.newId()),XE("doc","path",e),n instanceof _h){const s=Xe.fromString(e,...t);return x_(s),new Jt(n,null,new ve(s))}{if(!(n instanceof Jt||n instanceof Ss))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Xe.fromString(e,...t));return x_(s),new Jt(n.firestore,n instanceof Ss?n.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="AsyncQueue";class C_{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new PE(this,"async_queue_retry"),this.bu=()=>{const s=Ef();s&&ue(A_,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.Su=e;const t=Ef();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Ef();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Fr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Zo(e))throw e;ue(A_,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const o=function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d}(s);throw $r("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.Su=t,t}enqueueAfterDelay(e,t,s){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const o=_m.createAndSchedule(this,e,t,s,a=>this.Fu(a));return this.fu.push(o),o}Du(){this.gu&&Ee()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class na extends _h{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new C_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new C_(e),this._firestoreClient=void 0,await e}}}function pD(n,e){const t=typeof n=="object"?n:o2(),s=typeof n=="string"?n:Uc,o=t2(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const a=GR("firestore");a&&fD(o,...a)}return o}function Am(n){if(n._terminated)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||mD(n),n._firestoreClient}function mD(n){var e,t,s;const o=n._freezeSettings(),a=function(d,f,m,y){return new M2(d,f,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,YE(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new aD(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ho(Mt.fromBase64String(e))}catch(t){throw new ce(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ho(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let a=0;a<s.length;++a)if(s[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=/^__.*__$/;class yD{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ms(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bl(e,this.data,t,this.fieldTransforms)}}class ZE{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ms(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class Pm{constructor(e,t,s,o,a,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,a===void 0&&this.Bu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Pm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:s,Qu:!1});return o.$u(e),o}Ku(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Qc(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(eT(this.Lu)&&gD.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class vD{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||mh(e)}ju(e,t,s,o=!1){return new Pm({Lu:e,methodName:t,zu:s,path:Lt.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Eh(n){const e=n._freezeSettings(),t=mh(n._databaseId);return new vD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tT(n,e,t,s,o,a={}){const u=n.ju(a.merge||a.mergeFields?2:0,e,t,o);km("Data must be an object, but it was:",u,s);const d=nT(s,u);let f,m;if(a.merge)f=new yn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const y=[];for(const w of a.mergeFields){const E=up(e,w,t);if(!u.contains(E))throw new ce(J.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);sT(y,E)||y.push(E)}f=new yn(y),m=u.fieldTransforms.filter(w=>f.covers(w.field))}else f=null,m=u.fieldTransforms;return new yD(new un(d),f,m)}class Th extends xh{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Th}}class Rm extends xh{_toFieldTransform(e){return new uN(e.path,new kl)}isEqual(e){return e instanceof Rm}}function _D(n,e,t,s){const o=n.ju(1,e,t);km("Data must be an object, but it was:",o,s);const a=[],u=un.empty();Ls(s,(f,m)=>{const y=Nm(e,f,t);m=Ur(m);const w=o.Ku(y);if(m instanceof Th)a.push(y);else{const E=Hl(m,w);E!=null&&(a.push(y),u.set(y,E))}});const d=new yn(a);return new ZE(u,d,o.fieldTransforms)}function wD(n,e,t,s,o,a){const u=n.ju(1,e,t),d=[up(e,s,t)],f=[o];if(a.length%2!=0)throw new ce(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)d.push(up(e,a[E])),f.push(a[E+1]);const m=[],y=un.empty();for(let E=d.length-1;E>=0;--E)if(!sT(m,d[E])){const A=d[E];let P=f[E];P=Ur(P);const N=u.Ku(A);if(P instanceof Th)m.push(A);else{const V=Hl(P,N);V!=null&&(m.push(A),y.set(A,V))}}const w=new yn(m);return new ZE(y,w,u.fieldTransforms)}function xD(n,e,t,s=!1){return Hl(t,n.ju(s?4:3,e))}function Hl(n,e){if(rT(n=Ur(n)))return km("Unsupported field value:",e,n),nT(n,e);if(n instanceof xh)return function(s,o){if(!eT(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,o){const a=[];let u=0;for(const d of s){let f=Hl(d,o.Uu(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}}(n,e)}return function(s,o){if((s=Ur(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return oN(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const a=Et.fromDate(s);return{timestampValue:Wc(o.serializer,a)}}if(s instanceof Et){const a=new Et(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Wc(o.serializer,a)}}if(s instanceof Cm)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ho)return{bytesValue:yE(o.serializer,s._byteString)};if(s instanceof Jt){const a=o.databaseId,u=s.firestore._databaseId;if(!u.isEqual(a))throw o.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:cm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Im)return function(u,d){return{mapValue:{fields:{[Wx]:{stringValue:qx},[zc]:{arrayValue:{values:u.toArray().map(m=>{if(typeof m!="number")throw d.Wu("VectorValues must only contain numeric values.");return am(d.serializer,m)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${vh(s)}`)}(n,e)}function nT(n,e){const t={};return Fx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(n,(s,o)=>{const a=Hl(o,e.qu(s));a!=null&&(t[s]=a)}),{mapValue:{fields:t}}}function rT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Et||n instanceof Cm||n instanceof Ho||n instanceof Jt||n instanceof xh||n instanceof Im)}function km(n,e,t){if(!rT(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=vh(t);throw s==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+s)}}function up(n,e,t){if((e=Ur(e))instanceof wh)return e._internalPath;if(typeof e=="string")return Nm(n,e);throw Qc("Field path arguments must be of type string or ",n,!1,void 0,t)}const ED=new RegExp("[~\\*/\\[\\]]");function Nm(n,e,t){if(e.search(ED)>=0)throw Qc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wh(...e.split("."))._internalPath}catch{throw Qc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qc(n,e,t,s,o){const a=s&&!s.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${s}`),u&&(f+=` in document ${o}`),f+=")"),new ce(J.INVALID_ARGUMENT,d+n+f)}function sT(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,t,s,o,a){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class TD extends iT{data(){return super.data()}}function Vm(n,e){return typeof e=="string"?Nm(n,e):e instanceof wh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ce(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dm{}class oT extends Dm{}function AD(n,e,...t){let s=[];e instanceof Dm&&s.push(e),s=s.concat(t),function(a){const u=a.filter(f=>f instanceof jm).length,d=a.filter(f=>f instanceof bm).length;if(u>1||u>0&&d>0)throw new ce(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)n=o._apply(n);return n}class bm extends oT{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new bm(e,t,s)}_apply(e){const t=this._parse(e);return aT(e._query,t),new Ii(e.firestore,e.converter,Jf(e._query,t))}_parse(e){const t=Eh(e.firestore);return function(a,u,d,f,m,y,w){let E;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ce(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){P_(w,y);const P=[];for(const N of w)P.push(I_(f,a,N));E={arrayValue:{values:P}}}else E=I_(f,a,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||P_(w,y),E=xD(d,u,w,y==="in"||y==="not-in");return mt.create(m,y,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class jm extends Dm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jm(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Gn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,a){let u=o;const d=a.getFlattenedFilters();for(const f of d)aT(u,f),u=Jf(u,f)}(e._query,t),new Ii(e.firestore,e.converter,Jf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lm extends oT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Lm(e,t)}_apply(e){const t=function(o,a,u){if(o.startAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rl(a,u)}(e._query,this._field,this._direction);return new Ii(e.firestore,e.converter,function(o,a){const u=o.explicitOrderBy.concat([a]);return new ea(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function CD(n,e="asc"){const t=e,s=Vm("orderBy",n);return Lm._create(s,t)}function I_(n,e,t){if(typeof(t=Ur(t))=="string"){if(t==="")throw new ce(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eE(e)&&t.indexOf("/")!==-1)throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Xe.fromString(t));if(!ve.isDocumentKey(s))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return $0(n,new ve(s))}if(t instanceof Jt)return $0(n,t._key);throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vh(t)}.`)}function P_(n,e){if(!Array.isArray(n)||n.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aT(n,e){const t=function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ID{convertValue(e,t="none"){switch(Vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ls(e,(o,a)=>{s[o]=this.convertValue(a,t)}),s}convertVectorValue(e){var t,s,o;const a=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[zc].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(u=>ht(u.doubleValue));return new Im(a)}convertGeoPoint(e){return new Cm(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=uh(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Cl(e));default:return null}}convertTimestamp(e){const t=ks(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Xe.fromString(e);Ue(TE(s));const o=new Il(s.get(1),s.get(3)),a=new ve(s.popFirst(5));return o.isEqual(t)||$r(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(n,e,t){let s;return s=n?n.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uT extends iT{constructor(e,t,s,o,a,u){super(e,t,s,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Vm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Ic extends uT{data(e={}){return super.data(e)}}class PD{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new al(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Ic(this._firestore,this._userDataWriter,s.key,s,new al(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map(d=>{const f=new Ic(o._firestore,o._userDataWriter,d.doc.key,d.doc,new al(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const f=new Ic(o._firestore,o._userDataWriter,d.doc.key,d.doc,new al(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,y=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),y=u.indexOf(d.doc.key)),{type:RD(d.type),doc:f,oldIndex:m,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function RD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(n){n=mr(n,Jt);const e=mr(n.firestore,na);return cD(Am(e),n._key).then(t=>VD(e,n,t))}class cT extends ID{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ho(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,t)}}function hT(n){n=mr(n,Ii);const e=mr(n.firestore,na),t=Am(e),s=new cT(e);return SD(n._query),hD(t,n._query).then(o=>new PD(e,s,n,o))}function kD(n,e,t){n=mr(n,Jt);const s=mr(n.firestore,na),o=lT(n.converter,e);return Mm(s,[tT(Eh(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Kn.none())])}function dT(n,e,t,...s){n=mr(n,Jt);const o=mr(n.firestore,na),a=Eh(o);let u;return u=typeof(e=Ur(e))=="string"||e instanceof wh?wD(a,"updateDoc",n._key,e,t,s):_D(a,"updateDoc",n._key,e),Mm(o,[u.toMutation(n._key,Kn.exists(!0))])}function ND(n,e){const t=mr(n.firestore,na),s=As(n),o=lT(n.converter,e);return Mm(t,[tT(Eh(n.firestore),"addDoc",s._key,o,n.converter!==null,{}).toMutation(s._key,Kn.exists(!1))]).then(()=>s)}function Mm(n,e){return function(s,o){const a=new Fr;return s.asyncQueue.enqueueAndForget(async()=>JV(await uD(s),o,a)),a.promise}(Am(n),e)}function VD(n,e,t){const s=t.docs.get(e._key),o=new cT(n);return new uT(n,o,e._key,s,new al(t.hasPendingWrites,t.fromCache),e.converter)}function DD(){return new Rm("serverTimestamp")}(function(e,t=!0){(function(o){Xo=o})(i2),Fc(new Tl("firestore",(s,{instanceIdentifier:o,options:a})=>{const u=s.getProvider("app").getImmediate(),d=new na(new x2(s.getProvider("auth-internal")),new S2(u,s.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ce(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Il(m.options.projectId,y)}(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),Vo(V0,D0,e),Vo(V0,D0,"esm2017")})();const bD={apiKey:"AIzaSyB50dBZcPhp1WqNxzshrJlIdB6UHw3DZao",authDomain:"ecommercecw-b7a24.firebaseapp.com",projectId:"ecommercecw-b7a24",storageBucket:"ecommercecw-b7a24.firebasestorage.app",messagingSenderId:"324553281505",appId:"1:324553281505:web:62b7d04bd16aa7ab32cca0",measurementId:"G-XTPPR74DKP"},jD=Ix(bD),lr=pD(jD),cp=async()=>(await hT(Sm(lr,"products"))).docs.map(e=>({...e.data(),productId:e.id}));var fT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},R_=vi.createContext&&vi.createContext(fT),LD=["attr","size","title"];function MD(n,e){if(n==null)return{};var t=OD(n,e),s,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a.length;o++)s=a[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function OD(n,e){if(n==null)return{};var t={};for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function Xc(){return Xc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Xc.apply(this,arguments)}function k_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,s)}return t}function Jc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?k_(Object(t),!0).forEach(function(s){FD(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):k_(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function FD(n,e,t){return e=BD(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BD(n){var e=UD(n,"string");return typeof e=="symbol"?e:e+""}function UD(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pT(n){return n&&n.map((e,t)=>vi.createElement(e.tag,Jc({key:t},e.attr),pT(e.child)))}function zD(n){return e=>vi.createElement($D,Xc({attr:Jc({},n.attr)},e),pT(n.child))}function $D(n){var e=t=>{var{attr:s,size:o,title:a}=n,u=MD(n,LD),d=o||t.size||"1em",f;return t.className&&(f=t.className),n.className&&(f=(f?f+" ":"")+n.className),vi.createElement("svg",Xc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,u,{className:f,style:Jc(Jc({color:n.color||t.color},t.style),n.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),a&&vi.createElement("title",null,a),n.children)};return R_!==void 0?vi.createElement(R_.Consumer,null,t=>e(t)):e(fT)}function HD(n){return zD({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 0 0-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 1 0 0 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 0 0-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 0 0-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 0 0-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 0 0-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 0 1-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 0 1-31.6 31.6z"},child:[]}]})(n)}const WD="/EcommerceCw/assets/bench-CkJfrU0v.avif",qD="/EcommerceCw/assets/whitedesk-oZF03kvb.avif",fi=[{image:qD,title:"Explore Styles",subtitle:"Curated For Your Home"},{image:WD,title:"Browse Collection",subtitle:"Find Your Perfect Piece"}];function KD(){const[n,e]=j.useState(null),t=j.useRef(null),s=()=>{var o;(o=t.current)==null||o.scrollIntoView({behavior:"smooth"})};return _.jsxs("div",{className:"min-h-screen flex flex-col",children:[_.jsxs("div",{className:"z-[99] pt-[32px]",children:[_.jsx(Ei,{}),_.jsx("div",{className:"max-w-[1440px] m-auto",children:_.jsxs("section",{children:[_.jsx(GD,{onShopNowClick:s}),_.jsx("div",{ref:t,children:_.jsx(QD,{onCategorySelect:e,selectedCategory:n})}),_.jsx("div",{children:_.jsx(XD,{selectedCategory:n,scrollToProducts:s})})]})})]}),_.jsx("div",{className:"mt-auto",children:_.jsx("div",{className:"max-w-[1440px] m-auto mt-[64px]",children:_.jsx(Qo,{})})})]})}const GD=({onShopNowClick:n})=>{var s;const[e,t]=j.useState(0);return j.useEffect(()=>{const o=setInterval(()=>{t(a=>(a+1)%fi.length)},5e3);return()=>clearInterval(o)},[]),_.jsxs("div",{className:"relative h-[30vh] w-full overflow-hidden border-r border-l border-b",children:[_.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${((s=fi[(e+1)%fi.length])==null?void 0:s.image)||fi[0].image})`}}),_.jsx(G_,{children:_.jsxs(et.div,{className:"absolute inset-0 overflow-hidden",initial:{y:"0%"},animate:{y:"100%"},exit:{y:"100%"},transition:{ease:"easeInOut",duration:.5,delay:4},children:[_.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${fi[e].image})`}}),_.jsxs("div",{className:"absolute left-[32px] bottom-[32px] text-white p-4 rounded-lg text-left gap-[16px] flex flex-col",children:[_.jsx(et.h3,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"text-2xl",children:fi[e].subtitle}),_.jsx(et.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"text-7xl pb-[16px] drop-shadow-lg",children:fi[e].title}),_.jsx(et.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},onClick:n,className:"px-6 py-3 text-white border border-white text-lg w-fit hover:bg-black/20 hover:backdrop-blur-sm transition-all duration-300",children:"Shop Now"})]})]},e)})]})},QD=({onCategorySelect:n,selectedCategory:e})=>{const t=["Sofa","Bench","Chair","Table"];return _.jsxs("div",{className:"flex justify-between items-center mt-[128px] px-[32px]",children:[_.jsx("h2",{className:"text-2xl font-medium",children:"Crafted with excellent material"}),_.jsx("div",{className:"flex gap-4",children:t.map(s=>_.jsx("button",{onClick:()=>n(e===s?null:s),className:`px-4 py-2 border border-black ${e===s?"bg-black text-[#f6f1eb]":"bg"}`,children:s},s))})]})},YD=({onPriceChange:n,onColourChange:e,selectedPrice:t,selectedColour:s})=>{const o=["All Prices","Under £100","£100 - £300","£300 - £600","Above £600"],a=["All Colours","Black","White","Brown","Beige","Blue"];return _.jsxs("div",{className:"w-[250px] pr-8",children:[_.jsxs("div",{className:"mb-8",children:[_.jsx("h3",{className:"text-lg font-medium mb-4",children:"Price Range"}),o.map(u=>_.jsx("button",{onClick:()=>n(u),className:`block mb-2 ${t===u?"font-bold":""}`,children:u},u))]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-medium mb-4",children:"Colour"}),a.map(u=>_.jsx("button",{onClick:()=>e(u),className:`block mb-2 ${s===u?"font-bold":""}`,children:u},u))]})]})},XD=({selectedCategory:n,scrollToProducts:e})=>{const[t,s]=j.useState([]),[o,a]=j.useState("All Prices"),[u,d]=j.useState("All Colours"),[f,m]=j.useState(1),y=9,w=eh();j.useEffect(()=>{(async()=>{try{const Y=await cp();console.log("Fetched products:",Y),s(Y)}catch(Y){console.error("Error fetching products:",Y)}})()},[]);const A=(B=>B.filter(Y=>{var C;console.log("Product filters:",Y.filters);const Q=!n||((C=Y.categories)==null?void 0:C.includes(n)),ee=u==="All Colours"||Array.isArray(Y.colour)&&Y.colour.some(I=>I.toLowerCase()===u.toLowerCase());let R=!0;if(o!=="All Prices"){const I=Y.cost;switch(o){case"Under £100":R=I<100;break;case"£100 - £300":R=I>=100&&I<=300;break;case"£300 - £600":R=I>300&&I<=600;break;case"Above £600":R=I>600;break}}return Q&&ee&&R}))(t),P=f*y,N=P-y,V=A.slice(N,P),L=Math.ceil(A.length/y),W=B=>{m(B),e()};return _.jsxs("div",{className:"flex gap-8 mt-[64px] px-[32px] relative",children:[_.jsxs("div",{className:"relative",children:[_.jsx(YD,{onPriceChange:a,onColourChange:d,selectedPrice:o,selectedColour:u}),_.jsx("div",{className:"absolute top-0 right-0 w-[1px] h-full bg-[#000000]"})]}),_.jsxs("div",{className:"flex-1",children:[_.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 pb-8",children:V.length>0?V.map(B=>_.jsx(JD,{product:B,onClick:()=>w("/item-preview",{state:{product:B}})},B.productId)):_.jsx("p",{className:"col-span-full text-center text-lg",children:"No products found with selected filters"})}),L>1&&_.jsx("div",{className:"flex justify-center gap-2 mt-[32px]",children:Array.from({length:L},(B,Y)=>Y+1).map(B=>_.jsx("button",{onClick:()=>W(B),className:`px-4 py-2 border ${f===B?"bg-black text-[#f6f1eb]":"border-black"}`,children:B},B))})]})]})},JD=({product:n,onClick:e})=>{const[t,s]=j.useState(!1);j.useEffect(()=>{const u=JSON.parse(localStorage.getItem("cart")||"[]").some(d=>d.productId===n.productId);s(u)},[n.productId]);const o=a=>{a.stopPropagation();const u=JSON.parse(localStorage.getItem("cart")||"[]"),d=u.findIndex(f=>f.productId===n.productId);d>=0?(u.splice(d,1),s(!1)):(u.push({...n,quantity:1}),s(!0)),localStorage.setItem("cart",JSON.stringify(u))};return _.jsxs("div",{className:"relative group max-w-[220px] w-full mx-auto",onClick:e,children:[_.jsx("div",{className:"aspect-square overflow-hidden",children:_.jsx("img",{src:n.images[0],alt:n.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration:300"})}),_.jsxs("div",{className:"mt-4 space-y-2",children:[_.jsx("h3",{className:"text-lg font-medium",children:n.name}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsxs("span",{className:"font-semibold",children:["£",n.cost]}),_.jsx("button",{className:`p-2 rounded-full transition-colors ${t?"bg-black text-white":"hover:bg-gray-100"}`,onClick:o,children:_.jsx(HD,{size:20})})]})]})]})},ZD="/EcommerceCw/assets/hero-rDqbke-7.jpg",eb="/EcommerceCw/assets/jw-C5oPafap.jpg",tb=()=>_.jsxs("div",{className:"min-h-screen flex flex-col",children:[_.jsxs("div",{className:"z-[99] pt-[32px]",children:[_.jsx(Ei,{}),_.jsxs("div",{className:"max-w-[1440px] m-auto",children:[_.jsx(nb,{}),_.jsx(rb,{}),_.jsx(sb,{})]})]}),_.jsx("div",{className:"mt-auto",children:_.jsx("div",{className:"max-w-[1440px] m-auto",children:_.jsx(Qo,{})})})]}),nb=()=>_.jsx("div",{className:"relative h-[40vh] w-full overflow-hidden border-r border-l border-b",style:{backgroundImage:`url(${ZD})`,backgroundSize:"cover",backgroundPosition:"center"},children:_.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col gap-6",children:[_.jsx(et.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-7xl font-medium text-white",children:"About Essence"}),_.jsx(et.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-xl max-w-[60%] text-center text-white",children:"Inspired by Nature, Designed for Modern Living, Crafted to Elevate Your Space"})]})}),rb=()=>_.jsxs("section",{className:"flex flex-col md:flex-row gap-12 mt-[128px] px-[32px]",children:[_.jsxs("div",{className:"md:w-1/2 justify-center flex flex-col gap-6",children:[_.jsx("h2",{className:"text-3xl font-medium mb-6",children:"Our Story"}),_.jsx("p",{className:"text-lg mb-6",children:"Founded in 2025, Essence was born from a passion for thoughtful design and sustainable craftsmanship. We believe that furniture should not only be beautiful but should also tell a story and stand the test of time."}),_.jsx("p",{className:"text-lg",children:"Our journey began when a group of six designers and craftsmen came together with a shared vision: to create furniture that brings the calming influence of nature into modern urban homes. Each piece in our collection is carefully designed to balance aesthetic appeal with functional excellence."})]}),_.jsx("div",{className:"md:w-1/2 bg-[#f8f5f0] h-[400px] flex items-center justify-center",style:{backgroundImage:`url(${eb})`,backgroundSize:"cover",backgroundPosition:"center"},children:_.jsx("p",{className:"text-3xl italic px-8 text-center text-white",children:'"We believe in creating spaces that inspire peace, creativity, and connection."'})})]}),sb=()=>{const n=[{title:"Sustainability",description:"We use responsibly sourced materials and ensure our production processes minimize environmental impact."},{title:"Quality Craftsmanship",description:"Every piece is made with meticulous attention to detail by skilled artisans who take pride in their work."},{title:"Timeless Design",description:"We create furniture that transcends trends, pieces you'll love for years to come."},{title:"Customer Satisfaction",description:"Your happiness is our priority. We strive to provide exceptional service from browsing to delivery."}];return _.jsxs("section",{className:"mt-[128px] mb-[128px] px-[32px]",children:[_.jsx("h2",{className:"text-3xl font-medium mb-12 text-center",children:"Our Values"}),_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:n.map((e,t)=>_.jsxs("div",{className:"border p-6",children:[_.jsx("h3",{className:"text-2xl mb-4",children:e.title}),_.jsx("p",{className:"text-lg",children:e.description})]},t))})]})},ib=(n,e=10,t=50,s=.005,o=.02,a)=>{{const u=Array.from({length:n.length},(d,f)=>f.toString());return{getSimilarProducts:(d,f=5)=>{const m=u.indexOf(d);return m===-1?[]:n[m].map((w,E)=>({productId:u[E],similarity:w})).filter(w=>w.productId!==d).sort((w,E)=>E.similarity-w.similarity).slice(0,f).map(w=>w.productId)}}}};function ob(){return _.jsxs(_.Fragment,{children:[_.jsx("div",{className:"mt-[32px]",children:_.jsx(Ei,{})}),_.jsx(ab,{}),_.jsx(Qo,{})]})}const ab=()=>{var t;const e=(t=qr().state)==null?void 0:t.product;return _.jsxs(_.Fragment,{children:[_.jsxs("section",{className:"flex justify-between items-center max-w-[1440px] m-auto mt-[64px]",children:[_.jsx(lb,{images:(e==null?void 0:e.images)||[]}),_.jsx(ub,{product:e})]}),_.jsx(cb,{})]})},lb=({images:n})=>_.jsxs("div",{className:"max-w-[654px] flex-1",children:[_.jsx("div",{className:"aspect-square flex-1 bg-(--secondary)",children:n[0]&&_.jsx("img",{src:n[0],alt:"Product",className:"w-full h-full object-cover"})}),_.jsx("div",{className:"flex mt-[8px] justify-between",children:n.slice(1).map((e,t)=>_.jsx("div",{className:"aspect-square flex-1 max-w-[120px] bg-blue-500",children:_.jsx("img",{src:e,alt:`Product ${t+1}`,className:"w-full h-full object-cover"})},t))})]}),ub=({product:n})=>{if(!n)return null;const e=()=>{const t=JSON.parse(localStorage.getItem("cart")||"[]"),s=t.findIndex(o=>o.productId===n.productId);s>=0?t[s].quantity+=1:t.push({...n,quantity:1}),localStorage.setItem("cart",JSON.stringify(t))};return _.jsxs("aside",{className:"text-left max-w-[548px] flex-1",children:[_.jsxs("div",{className:"gap-[16px] flex flex-col",children:[_.jsx("div",{className:"flex items-center justify-between",children:_.jsx("h1",{className:"text-4xl",children:n.name})}),_.jsxs("div",{className:"flex",children:[[1,2,3,4,5].map(t=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:t<=(n.rating||0)?"#FFD700":"none",stroke:"#FFD700",strokeWidth:"2",children:_.jsx("path",{d:"M12 2l2.4 7.4h7.6l-6 4.4 2.3 7.2-6.3-4.6-6.3 4.6 2.3-7.2-6-4.4h7.6z"})},t)),_.jsxs("span",{className:"ml-2 text-gray-600",children:["(",n.rating||0,"/5)"]})]})]}),_.jsxs("h1",{className:"mt-[32px] text-4xl",children:["£ ",n.cost]}),_.jsx("p",{className:"mt-[32px] text-lg",children:n.description}),_.jsxs("p",{className:"mt-[16px] text-lg",children:["Room: ",(n.room??[]).join(", ")]}),_.jsx("div",{className:"mt-[64px]",children:_.jsx(Si,{name:"ADD TO CART",onClick:e})})]})},cb=()=>{var a;const[n,e]=j.useState([]),s=(a=qr().state)==null?void 0:a.product,o=eh();return j.useEffect(()=>{s&&(async()=>{var d,f;try{if(!s||!s.productId){console.error("Product information is missing");return}const m=await cp();console.log(`Fetched ${m.length} products total`);const y=m.filter(N=>N.productId!==s.productId);if(y.length<4){console.log("Not enough products for meaningful recommendations, showing available products"),e(y.map(N=>({...N,rating:N.rating??0})).slice(0,4));return}const w=[s,...y],E=w.map(N=>N.productId),A=Object.fromEntries(w.map(N=>[N.productId,N]));console.log(`Creating similarity matrix for ${E.length} products`);const P=[];for(let N=0;N<E.length;N++){P[N]=[];const V=A[E[N]];for(let L=0;L<E.length;L++){if(N===L){P[N][L]=1;continue}const W=A[E[L]];let B=0;if((d=V.room)!=null&&d.length&&((f=W.room)!=null&&f.length)){const Y=V.room.filter(ee=>W.room.some(R=>R.toLowerCase()===ee.toLowerCase())).length,Q=new Set([...V.room,...W.room]).size;B+=.5*(Y/Math.max(1,Q))}if(V.rating!==void 0&&W.rating!==void 0){const Y=1-Math.abs(V.rating-W.rating)/5;B+=.3*Y}V.colour&&W.colour&&V.colour.some(Y=>W.colour.some(Q=>Y.toLowerCase()===Q.toLowerCase()))&&(B+=.2),P[N][L]=B}}try{console.log("Applying matrix factorization");const N=ib(P,2,100,.01,.01);if(E.findIndex(Y=>Y===s.productId)===-1)throw new Error("Current product not found in product IDs array");const L=N.getSimilarProducts(s.productId,4).map(Y=>parseInt(Y,10));console.log("Similar indices:",L);const W=L.map(Y=>E[Y]);console.log("Top product IDs:",W);const B=W.map(Y=>A[Y]).filter(Boolean);if(console.log(`Found ${B.length} recommended products`),B.length>0)e(B);else throw new Error("No valid recommended products found")}catch(N){throw console.error("Error in matrix factorization:",N),N}}catch(m){console.error("Error fetching related products:",m);const y=(await cp()).filter(w=>w.productId!==s.productId).sort((w,E)=>{var N,V;const A=(N=w.room)!=null&&N.some(L=>{var W;return(W=s.room)==null?void 0:W.includes(L)})?1:0;return((V=E.room)!=null&&V.some(L=>{var W;return(W=s.room)==null?void 0:W.includes(L)})?1:0)-A}).slice(0,4);console.log(`Using fallback: showing ${y.length} products`),e(y)}})()},[s]),_.jsxs("div",{className:"flex flex-col uppercase text-left max-w-[1440px] m-auto mt-[80px]",children:[_.jsx("h2",{className:"text-3xl",children:"You might also like"}),_.jsx("div",{className:"flex mt-[16px] justify-between",children:n.length>0?n.map(u=>_.jsx("div",{className:"flex-1 max-w-[225px] aspect-square cursor-pointer overflow-hidden",onClick:()=>o("/item-preview",{state:{product:u}}),children:_.jsx("img",{src:u.images[0],alt:u.name,className:"w-full h-full object-cover transform scale-110 hover:scale-100 transition-transform duration-300"})},u.productId)):_.jsx("p",{children:"No related products found"})})]})},hb=()=>{const[n,e]=j.useState([]);j.useEffect(()=>{const s=JSON.parse(localStorage.getItem("cart")||"[]");e(s)},[]);const t=(s,o)=>{const a=n.map(u=>u.productId===s?{...u,quantity:Math.max(0,u.quantity+o)}:u).filter(u=>u.quantity>0);e(a),localStorage.setItem("cart",JSON.stringify(a))};return _.jsxs(_.Fragment,{children:[_.jsx("div",{className:"m-auto mt-[32px] mb-[128px]",children:_.jsx(Ei,{})}),n.length===0?_.jsx(db,{}):_.jsxs("div",{className:"max-w-[1440px] m-auto flex gap-[64px] justify-between",children:[_.jsx("div",{className:"flex-1 flex flex-col gap-[64px]",children:n.map(s=>_.jsx(fb,{item:s,updateQuantity:t},s.productId))}),_.jsx(pb,{cartItems:n})]}),_.jsx(Qo,{})]})},db=()=>_.jsxs("div",{className:"max-w-[1440px] m-auto flex flex-col items-center justify-center py-[64px] min-h-[400px]",children:[_.jsx("h1",{className:"text-4xl mb-[32px]",children:"YOUR CART IS EMPTY"}),_.jsx("p",{className:"text-2xl mb-[48px]",children:"Add some products to begin shopping"}),_.jsx("a",{href:"/explore",children:_.jsx(Si,{name:"EXPLORE PRODUCTS"})})]}),fb=({item:n,updateQuantity:e})=>_.jsx(_.Fragment,{children:_.jsxs("ul",{className:"flex gap-[32px] w-full uppercase text-left",children:[_.jsx("li",{children:_.jsx("div",{className:"min-w-[450px] aspect-square",children:n.images&&n.images[0]&&_.jsx("img",{src:n.images[0],alt:n.name,className:"w-full h-full object-cover"})})}),_.jsxs("li",{className:"w-full",children:[_.jsx("h1",{className:"text-4xl text-(--secondary) mb-[16px]",children:n.name}),_.jsxs("h2",{className:"text-4xl font-[500] mb-[64px]",children:["£",n.cost]}),_.jsxs("div",{className:"text-2xl flex justify-between mb-[8px]",children:[_.jsx("h4",{children:"ROOM:"}),_.jsx("h4",{children:n.room})]}),_.jsxs("div",{className:"text-2xl flex justify-between",children:[_.jsx("h4",{children:"COLOUR:"}),_.jsx("h4",{children:n.color})]}),_.jsxs("div",{className:"flex justify-between mt-[64px] text-3xl items-center max-w-[200px]",children:[_.jsx("button",{className:"border p-[8px]",onClick:()=>e(n.productId,-1),children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-6 h-6",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),_.jsx("h3",{children:n.quantity}),_.jsx("button",{className:"border p-[8px]",onClick:()=>e(n.productId,1),children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 24 24",stroke:"currentColor",className:"w-6 h-6",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]})]})}),pb=({cartItems:n})=>{const e=n.reduce((o,a)=>o+a.cost*a.quantity,0),t=20,s=e+t;return _.jsx(_.Fragment,{children:_.jsxs("div",{className:"border p-[32px] flex flex-col justify-around w-[450px] h-[450px]",children:[_.jsx("h1",{className:"text-4xl",children:"ORDER SUMMARY"}),_.jsxs("div",{className:"flex justify-between text-2xl",children:[_.jsx("h2",{children:"Subtotal"}),_.jsxs("h2",{children:["£",e]})]}),_.jsxs("div",{className:"flex justify-between text-2xl",children:[_.jsx("h2",{children:"Shipping"}),_.jsxs("h2",{children:["£",t]})]}),_.jsxs("div",{className:"flex justify-between text-2xl",children:[_.jsx("h2",{children:"Total"}),_.jsxs("h2",{children:["£",s]})]}),_.jsx("div",{className:"ml-auto mr-auto",children:_.jsx("a",{href:"/checkout",children:_.jsx(Si,{name:"CHECKOUT"})})})]})})},mb=({onSignUp:n,onBack:e})=>{const[t,s]=j.useState(""),[o,a]=j.useState(""),[u,d]=j.useState(""),f=async()=>{try{const m={fullName:t,email:o,password:u};await kD(As(lr,"users",o),m),n(m),alert("Sign up successful!")}catch(m){console.error("Sign up error:",m),alert("An error occurred while signing up.")}};return _.jsxs("div",{children:[_.jsxs("div",{style:{marginBottom:"1rem"},children:[_.jsx("label",{htmlFor:"fullName",style:{display:"block",marginBottom:"0.5rem",color:"#4E4B46"},children:"Full Name"}),_.jsx("input",{id:"fullName",type:"text",value:t,onChange:m=>s(m.target.value),style:{backgroundColor:"#FFFFFF",borderColor:"#D6CFC7",color:"#4E4B46",padding:"0.5rem",borderRadius:"0.5rem",width:"100%"}})]}),_.jsxs("div",{style:{marginBottom:"1rem"},children:[_.jsx("label",{htmlFor:"email",style:{display:"block",marginBottom:"0.5rem",color:"#4E4B46"},children:"Email"}),_.jsx("input",{id:"email",type:"email",value:o,onChange:m=>a(m.target.value),style:{backgroundColor:"#FFFFFF",borderColor:"#D6CFC7",color:"#4E4B46",padding:"0.5rem",borderRadius:"0.5rem",width:"100%"}})]}),_.jsxs("div",{style:{marginBottom:"1rem"},children:[_.jsx("label",{htmlFor:"password",style:{display:"block",marginBottom:"0.5rem",color:"#4E4B46"},children:"Password"}),_.jsx("input",{id:"password",type:"password",value:u,onChange:m=>d(m.target.value),style:{backgroundColor:"#FFFFFF",borderColor:"#D6CFC7",color:"#4E4B46",padding:"0.5rem",borderRadius:"0.5rem",width:"100%"}})]}),_.jsx("button",{onClick:f,style:{backgroundColor:"#7A746E",color:"#FFFFFF",padding:"0.5rem 1rem",borderRadius:"0.5rem",marginRight:"0.5rem"},children:"Sign Up"}),_.jsx("button",{onClick:e,style:{backgroundColor:"#C1B6A4",color:"#FFFFFF",padding:"0.5rem 1rem",borderRadius:"0.5rem"},children:"Back"})]})},gb=({onLogin:n,onBack:e})=>{const[t,s]=j.useState(""),[o,a]=j.useState(""),u=async()=>{try{const d=await Yc(As(lr,"users",t));d.exists()&&d.data().password===o?(n(d.data()),alert("Login successful!")):alert("Invalid email or password!")}catch(d){console.error("Login error:",d),alert("An error occurred while logging in.")}};return _.jsxs("div",{children:[_.jsxs("div",{style:{marginBottom:"1rem"},children:[_.jsx("label",{htmlFor:"email",style:{display:"block",marginBottom:"0.5rem",color:"#4E4B46"},children:"Email"}),_.jsx("input",{id:"email",type:"email",value:t,onChange:d=>s(d.target.value),style:{backgroundColor:"#FFFFFF",borderColor:"#D6CFC7",color:"#4E4B46",padding:"0.5rem",borderRadius:"0.5rem",width:"100%"}})]}),_.jsxs("div",{style:{marginBottom:"1rem"},children:[_.jsx("label",{htmlFor:"password",style:{display:"block",marginBottom:"0.5rem",color:"#4E4B46"},children:"Password"}),_.jsx("input",{id:"password",type:"password",value:o,onChange:d=>a(d.target.value),style:{backgroundColor:"#FFFFFF",borderColor:"#D6CFC7",color:"#4E4B46",padding:"0.5rem",borderRadius:"0.5rem",width:"100%"}})]}),_.jsx("button",{onClick:u,style:{backgroundColor:"#7A746E",color:"#FFFFFF",padding:"0.5rem 1rem",borderRadius:"0.5rem",marginRight:"0.5rem"},children:"Login"}),_.jsx("button",{onClick:e,style:{backgroundColor:"#C1B6A4",color:"#FFFFFF",padding:"0.5rem 1rem",borderRadius:"0.5rem"},children:"Back"})]})},yb=()=>{const[n,e]=j.useState({fullName:"",email:"",password:""}),[t,s]=j.useState(!0),[o,a]=j.useState(!1),[u,d]=j.useState(!1),[f,m]=j.useState(!1),[y,w]=j.useState("details"),[E,A]=j.useState([]),[P,N]=j.useState(0);j.useEffect(()=>{(async()=>{const ee=localStorage.getItem("USER_ID");if(!ee){s(!1);return}const R=await Yc(As(lr,"users",ee));if(R.exists()){const C=R.data();C&&C.fullName&&C.email&&C.password?e({fullName:C.fullName,email:C.email,password:C.password}):console.error("Invalid user data:",C),N(C.loyaltyPoints||0),a(!0),await V(ee)}s(!1)})()},[]);const V=async Q=>{try{const ee=AD(Sm(lr,"users",Q,"orders"),CD("date","desc")),R=await hT(ee),C=[];R.forEach(I=>{var b,O;C.push({id:I.id,...I.data(),date:((O=(b=I.data().date)==null?void 0:b.toDate())==null?void 0:O.toLocaleDateString())||"N/A"})}),A(C)}catch(ee){console.error("Error fetching orders:",ee)}},L=async()=>{const Q=localStorage.getItem("USER_ID");if(!Q){alert("No user logged in.");return}try{await dT(As(lr,"users",Q),n),alert("Details updated successfully!")}catch(ee){console.error("Update error:",ee),alert("Failed to update details.")}},W=async Q=>{const ee={...Q,loyaltyPoints:0};e(ee),N(0),localStorage.setItem("USER_ID",Q.email),a(!0),m(!1)},B=async Q=>{e(Q),localStorage.setItem("USER_ID",Q.email),a(!0),d(!1),await V(Q.email)},Y=()=>{e({fullName:"",email:"",password:""}),a(!1),N(0),A([]),localStorage.removeItem("USER_ID")};return t?_.jsx("div",{className:"text-center mt-10",children:"Loading..."}):_.jsxs("div",{className:"bg-[#F5F1E8] min-h-screen mt-10",children:[_.jsx(Ei,{}),_.jsx("main",{className:"max-w-4xl mx-auto mt-10 py-10 px-6 bg-[#FAF7F2] shadow-lg border border-[#D6CFC7]",children:o?_.jsxs(_.Fragment,{children:[_.jsxs("section",{className:"flex items-center gap-6 border-b border-[#D6CFC7] pb-6",children:[_.jsx("div",{className:"w-24 h-24 bg-[#C1B6A4] rounded-full flex items-center justify-center text-white text-xl font-semibold",children:n.fullName.split(" ").map(Q=>Q[0]).join("")}),_.jsxs("div",{className:"flex-1",children:[_.jsx("h2",{className:"text-2xl font-semibold text-[#4E4B46]",children:n.fullName}),_.jsx("p",{className:"text-[#7A746E]",children:n.email})]}),_.jsx("div",{className:"flex items-center justify-center bg-[#EFE9DE] rounded-lg p-4 shadow-sm",children:_.jsxs("div",{className:"text-center",children:[_.jsx("p",{className:"text-[#4E4B46] text-sm",children:"Loyalty Points"}),_.jsx("p",{className:"text-2xl font-bold text-[#7A746E]",children:P}),_.jsxs("p",{className:"text-xs text-[#7A746E]",children:["Worth £",Math.floor(P/50).toFixed(2)]})]})})]}),_.jsxs("div",{className:"flex border-b border-[#D6CFC7] mt-6",children:[_.jsx("button",{onClick:()=>w("details"),className:`px-4 py-2 ${y==="details"?"border-b-2 border-[#7A746E] font-medium":""}`,children:"Account Details"}),_.jsx("button",{onClick:()=>w("orders"),className:`px-4 py-2 ${y==="orders"?"border-b-2 border-[#7A746E] font-medium":""}`,children:"Orders"})]}),y==="details"&&_.jsxs("section",{className:"mt-6",children:[_.jsx("h3",{className:"text-lg font-semibold text-[#4E4B46] mb-4",children:"Account Details"}),_.jsxs("div",{className:"grid gap-4",children:[_.jsx("input",{type:"text",value:n.fullName,onChange:Q=>e({...n,fullName:Q.target.value}),style:{backgroundColor:"#FAF7F2",borderColor:"#D6CFC7",color:"#4E4B46"},className:"p-2 rounded-lg"}),_.jsx("input",{type:"email",value:n.email,disabled:!0,style:{backgroundColor:"#FAF7F2",borderColor:"#D6CFC7",color:"#4E4B46"},className:"p-2 rounded-lg"}),_.jsx("button",{onClick:L,className:"bg-[#7A746E] text-white py-2 px-4 hover:bg-[#4E4B46] transition",children:"Update Details"})]})]}),y==="orders"&&_.jsxs("section",{className:"mt-6",children:[_.jsx("h3",{className:"text-lg font-semibold text-[#4E4B46] mb-4",children:"Your Orders"}),E.length>0?_.jsx("div",{className:"space-y-4",children:E.map(Q=>{var ee;return _.jsxs("div",{className:"border border-[#D6CFC7] rounded-lg p-4 bg-white",children:[_.jsxs("div",{className:"flex justify-between items-center mb-3",children:[_.jsxs("div",{children:[_.jsxs("p",{className:"font-medium",children:["Order Date: ",Q.date]}),_.jsxs("p",{className:"text-sm text-[#7A746E]",children:["Status: ",Q.status]})]}),_.jsxs("div",{className:"text-right",children:[_.jsxs("p",{className:"font-bold",children:["Total: £",Q.total]}),_.jsxs("p",{className:"text-sm text-[#7A746E]",children:["Points earned: ",Q.loyaltyPoints]})]})]}),_.jsx("h4",{className:"font-medium border-b pb-1 mb-2",children:"Items"}),(ee=Q.items)==null?void 0:ee.map((R,C)=>_.jsxs("div",{className:"flex justify-between py-2 border-b border-dotted",children:[_.jsxs("div",{className:"flex gap-3",children:[R.images&&R.images[0]&&_.jsx("img",{src:R.images[0],alt:R.name,className:"w-12 h-12 object-cover"}),_.jsxs("div",{children:[_.jsx("p",{className:"font-medium",children:R.name}),_.jsxs("p",{className:"text-xs text-[#7A746E]",children:["Room: ",R.room,", Color: ",R.color]})]})]}),_.jsxs("div",{className:"text-right",children:[_.jsxs("p",{children:["£",R.cost," × ",R.quantity]}),_.jsxs("p",{className:"font-medium",children:["£",R.cost*R.quantity]})]})]},C)),_.jsx("div",{className:"mt-3 text-sm text-[#7A746E]",children:_.jsxs("p",{children:["Delivery:"," ",Q.deliveryOption==="home"?"Home Delivery (£20)":"Click and Collect (Free)"]})}),_.jsx("div",{className:"mt-4 text-right",children:_.jsx("button",{className:"bg-[#C1B6A4] text-white py-1 px-3 text-sm rounded hover:bg-[#A19182] transition",onClick:()=>alert("We will contact you via email to arrange a refund."),children:"Request Refund"})})]},Q.id)})}):_.jsx("div",{className:"text-center py-10 text-[#7A746E]",children:_.jsx("p",{children:"You haven't placed any orders yet."})})]}),_.jsx("div",{className:"text-center mt-8",children:_.jsx("button",{onClick:Y,className:"bg-[#C1B6A4] text-white py-2 px-4 hover:bg-[#A19182] transition",children:"Logout"})})]}):_.jsx(_.Fragment,{children:_.jsxs("div",{className:"text-center space-y-4",children:[!u&&!f&&_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:()=>{d(!0),m(!1)},className:"bg-[#7A746E] text-white py-2 px-4 rounded-lg hover:bg-[#4E4B46] transition",children:"Login"}),_.jsx("button",{onClick:()=>{m(!0),d(!1)},className:"bg-[#C1B6A4] text-white py-2 px-4 rounded-lg hover:bg-[#A19182] transition ml-4",children:"Sign Up"})]}),u&&_.jsx(gb,{onLogin:B,onBack:()=>d(!1)}),f&&_.jsx(mb,{onSignUp:W,onBack:()=>m(!1)})]})})})]})},vb=()=>{const[n,e]=j.useState([]),[t,s]=j.useState("home"),[o,a]=j.useState(!1),[u,d]=j.useState(0),[f,m]=j.useState(!1),[y,w]=j.useState({fullName:"",addressLine1:"",addressLine2:"",city:"",postcode:"",specialInstructions:""}),[E,A]=j.useState([]),[P,N]=j.useState(-1),[V,L]=j.useState(!1),W=eh();j.useEffect(()=>{const Ce=JSON.parse(localStorage.getItem("cart")||"[]");e(Ce),(async()=>{const re=localStorage.getItem("USER_ID");if(re)try{const he=await Yc(As(lr,"users",re));if(he.exists()){const ae=he.data();d(ae.loyaltyPoints||0),ae.deliveryAddresses&&ae.deliveryAddresses.length>0&&(A(ae.deliveryAddresses),N(0),w(ae.deliveryAddresses[0]))}}catch(he){console.error("Error fetching user data:",he)}})()},[]);const B=n.reduce((Ce,ye)=>Ce+ye.cost*ye.quantity,0),Y=t==="home"?20:0,Q=Math.min(Math.floor(u/50),Math.floor(B+Y)),ee=f?Q:0,R=ee*50,C=B+Y-ee,I=Math.floor(C),b=Math.floor(I/50),O=()=>{m(!f)},U=Ce=>{const{name:ye,value:re}=Ce.target;w(he=>({...he,[ye]:re})),P!==-1&&N(-1)},D=Ce=>{w(Ce===-1?{fullName:"",addressLine1:"",addressLine2:"",city:"",postcode:"",specialInstructions:""}:E[Ce]),N(Ce)},He=async()=>{const Ce=localStorage.getItem("USER_ID");if(t==="home"&&(!y.fullName||!y.addressLine1||!y.city||!y.postcode)){alert("Please complete all required address fields");return}const ye={items:n,subtotal:B,shipping:Y,pointsUsed:f?R:0,pointsDiscount:ee,total:C,deliveryOption:t,deliveryAddress:t==="home"?y:null,loyaltyPoints:I,date:DD(),status:"Processing"};try{if(Ce){await ND(Sm(lr,"users",Ce,"orders"),ye);const re=await Yc(As(lr,"users",Ce));if(re.exists()){const he=re.data(),X={loyaltyPoints:(he.loyaltyPoints||0)-(f?R:0)+I};if(t==="home"&&V&&P===-1){const ge=he.deliveryAddresses||[];ge.some(Ie=>Ie.addressLine1===y.addressLine1&&Ie.postcode===y.postcode)||(X.deliveryAddresses=[...ge,y])}await dT(As(lr,"users",Ce),X)}}a(!0),localStorage.setItem("cart","[]")}catch(re){console.error("Error processing checkout:",re),alert("There was an error processing your order. Please try again.")}},gt=()=>{W("/")};return _.jsxs(_.Fragment,{children:[_.jsx("div",{className:"m-auto mt-[32px] mb-[128px]",children:_.jsx(Ei,{})}),o?_.jsx("div",{className:"max-w-[1440px] m-auto flex flex-col gap-[64px] items-center text-center py-[128px]",children:_.jsxs(et.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col gap-[32px]",children:[_.jsx("h1",{className:"text-5xl font-[400]",children:"Thank You For Your Purchase!"}),_.jsxs("p",{className:"text-3xl",children:["You've earned"," ",_.jsxs("span",{className:"font-bold",children:[I," loyalty points"]})," ","with this order."]}),_.jsxs("p",{className:"text-xl",children:["These points are worth approximately £",b.toFixed(2)," for your future purchases."]}),_.jsx("div",{className:"mt-[32px]",onClick:gt,children:_.jsx(Si,{name:"RETURN TO HOME"})})]})}):_.jsxs("div",{className:"max-w-[1440px] m-auto flex flex-col gap-[64px]",children:[_.jsx("h1",{className:"text-5xl font-[400] mb-[32px]",children:"Checkout"}),_.jsxs("div",{className:"flex gap-[64px] justify-between",children:[_.jsxs("div",{className:"flex-1 flex flex-col gap-[32px]",children:[_.jsx("h2",{className:"text-3xl font-[400]",children:"Your Items"}),n.map(Ce=>_.jsx(_b,{item:Ce},Ce.productId)),_.jsxs("div",{className:"mt-[64px]",children:[_.jsx("h2",{className:"text-3xl font-[400] mb-[32px]",children:"Delivery Options"}),_.jsxs("div",{className:"flex flex-col gap-[16px]",children:[_.jsxs("label",{className:"flex items-center gap-[16px] text-2xl cursor-pointer",children:[_.jsx("input",{type:"radio",name:"delivery",checked:t==="home",onChange:()=>s("home"),className:"w-[24px] h-[24px]"}),"Home Delivery (£20)"]}),_.jsxs("label",{className:"flex items-center gap-[16px] text-2xl cursor-pointer",children:[_.jsx("input",{type:"radio",name:"delivery",checked:t==="collect",onChange:()=>s("collect"),className:"w-[24px] h-[24px]"}),"Click and Collect (Free)"]})]})]}),t==="home"&&_.jsxs("div",{className:"mt-[32px] border-t pt-[32px]",children:[_.jsx("h2",{className:"text-3xl font-[400] mb-[32px]",children:"Delivery Address"}),E.length>0&&_.jsxs("div",{className:"mb-[24px]",children:[_.jsx("h3",{className:"text-xl mb-[16px]",children:"Select an address:"}),_.jsxs("div",{className:"flex flex-col gap-[12px]",children:[E.map((Ce,ye)=>_.jsxs("label",{className:"flex items-center gap-[12px] cursor-pointer",children:[_.jsx("input",{type:"radio",name:"savedAddress",checked:P===ye,onChange:()=>D(ye),className:"w-[18px] h-[18px]"}),_.jsxs("span",{children:[Ce.fullName,", ",Ce.addressLine1,",",Ce.addressLine2&&` ${Ce.addressLine2},`," ",Ce.city,", ",Ce.postcode]})]},ye)),_.jsxs("label",{className:"flex items-center gap-[12px] cursor-pointer",children:[_.jsx("input",{type:"radio",name:"savedAddress",checked:P===-1,onChange:()=>D(-1),className:"w-[18px] h-[18px]"}),_.jsx("span",{className:"font-medium",children:"Add a new address"})]})]})]}),(P===-1||E.length===0)&&_.jsxs("div",{className:"grid grid-cols-2 gap-[16px]",children:[_.jsxs("div",{className:"col-span-2",children:[_.jsx("label",{className:"block mb-[8px]",children:"Full Name *"}),_.jsx("input",{type:"text",name:"fullName",value:y.fullName,onChange:U,className:"border p-[12px] w-full",required:!0})]}),_.jsxs("div",{className:"col-span-2",children:[_.jsx("label",{className:"block mb-[8px]",children:"Address Line 1 *"}),_.jsx("input",{type:"text",name:"addressLine1",value:y.addressLine1,onChange:U,className:"border p-[12px] w-full",required:!0})]}),_.jsxs("div",{className:"col-span-2",children:[_.jsx("label",{className:"block mb-[8px]",children:"Address Line 2"}),_.jsx("input",{type:"text",name:"addressLine2",value:y.addressLine2,onChange:U,className:"border p-[12px] w-full"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block mb-[8px]",children:"City *"}),_.jsx("input",{type:"text",name:"city",value:y.city,onChange:U,className:"border p-[12px] w-full",required:!0})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block mb-[8px]",children:"Postcode *"}),_.jsx("input",{type:"text",name:"postcode",value:y.postcode,onChange:U,className:"border p-[12px] w-full",required:!0})]}),_.jsxs("div",{className:"col-span-2",children:[_.jsx("label",{className:"block mb-[8px]",children:"Special Instructions"}),_.jsx("textarea",{name:"specialInstructions",value:y.specialInstructions,onChange:U,className:"border p-[12px] w-full",rows:3,placeholder:"Any special delivery instructions..."})]}),_.jsx("div",{className:"col-span-2 mt-[8px]",children:_.jsxs("label",{className:"flex items-center gap-[12px] cursor-pointer",children:[_.jsx("input",{type:"checkbox",checked:V,onChange:()=>L(!V),className:"w-[18px] h-[18px]"}),_.jsx("span",{children:"Save this address for future orders"})]})})]})]})]}),_.jsx(wb,{subtotal:B,shipping:Y,total:C,loyaltyPoints:I,pointsValue:b,onCheckout:He,userLoyaltyPoints:u,usePoints:f,toggleUsePoints:O,pointsDiscount:ee,pointsUsed:R})]})]}),_.jsx(Qo,{})]})},_b=({item:n})=>_.jsxs("div",{className:"flex gap-[32px] w-full border-b pb-[32px]",children:[_.jsx("div",{className:"w-[150px] aspect-square",children:n.images&&n.images[0]&&_.jsx("img",{src:n.images[0],alt:n.name,className:"w-full h-full object-cover"})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("h3",{className:"text-2xl font-[500] mb-[16px]",children:n.name}),_.jsxs("div",{className:"flex justify-between text-xl mb-[8px]",children:[_.jsxs("span",{children:["Room: ",n.room]}),_.jsxs("span",{children:["Colour: ",n.color]})]}),_.jsxs("div",{className:"flex justify-between text-xl",children:[_.jsxs("span",{children:["Quantity: ",n.quantity]}),_.jsxs("span",{className:"font-[500]",children:["£",n.cost*n.quantity]})]})]})]}),wb=({subtotal:n,shipping:e,total:t,loyaltyPoints:s,pointsValue:o,onCheckout:a,userLoyaltyPoints:u,usePoints:d,toggleUsePoints:f,pointsDiscount:m,pointsUsed:y})=>_.jsxs("div",{className:"border p-[32px] flex flex-col gap-[32px] w-[450px] h-fit sticky top-[32px]",children:[_.jsx("h2",{className:"text-3xl font-[400]",children:"ORDER SUMMARY"}),_.jsxs("div",{className:"flex justify-between text-xl",children:[_.jsx("span",{children:"Subtotal"}),_.jsxs("span",{children:["£",n]})]}),_.jsxs("div",{className:"flex justify-between text-xl",children:[_.jsx("span",{children:"Shipping"}),_.jsxs("span",{children:["£",e]})]}),u>0&&_.jsxs("div",{className:"flex flex-col gap-[8px] border-t border-b py-[16px]",children:[_.jsxs("div",{className:"flex items-center gap-[12px]",children:[_.jsx("input",{type:"checkbox",id:"usePoints",checked:d,onChange:f,className:"w-[20px] h-[20px]"}),_.jsxs("label",{htmlFor:"usePoints",className:"text-lg cursor-pointer",children:["Use ",y," loyalty points"]})]}),d&&_.jsxs("div",{className:"flex justify-between text-xl text-green-600",children:[_.jsx("span",{children:"Points discount"}),_.jsxs("span",{children:["-£",m]})]}),_.jsxs("p",{className:"text-sm text-gray-500",children:["You have ",u," points available (worth £",Math.floor(u/50),")"]})]}),_.jsxs("div",{className:"flex justify-between text-xl font-[500]",children:[_.jsx("span",{children:"Total"}),_.jsxs("span",{children:["£",t]})]}),_.jsxs("div",{className:"border-t pt-[16px]",children:[_.jsx("h3",{className:"text-xl mb-[16px]",children:"Loyalty Points"}),_.jsxs("div",{className:"text-lg flex flex-col gap-[8px] mb-[32px]",children:[_.jsxs("div",{className:"flex justify-between",children:[_.jsx("span",{children:"Points earned with this order:"}),_.jsxs("span",{className:"font-[500]",children:[s," points"]})]}),_.jsxs("div",{className:"flex justify-between",children:[_.jsx("span",{children:"Value of points:"}),_.jsxs("span",{className:"font-[500]",children:["£",o.toFixed(2)]})]}),_.jsx("p",{className:"text-sm text-gray-500 mt-[8px]",children:"(You earn 1 point for every £1 spent. 50 points = £1)"})]})]}),_.jsx("div",{className:"ml-auto mr-auto",onClick:a,children:_.jsx(Si,{name:"CONTINUE"})})]});function xb(){return _.jsx(H1,{children:_.jsxs(w1,{children:[_.jsx(jr,{path:"/",element:_.jsx(DR,{})}),_.jsx(jr,{path:"/explore",element:_.jsx(KD,{})}),_.jsx(jr,{path:"/about",element:_.jsx(tb,{})}),_.jsx(jr,{path:"/item-preview",element:_.jsx(ob,{})}),_.jsx(jr,{path:"/cart",element:_.jsx(hb,{})}),_.jsx(jr,{path:"/account",element:_.jsx(yb,{})}),_.jsx(jr,{path:"/checkout",element:_.jsx(vb,{})}),_.jsx(jr,{path:"*",element:_.jsx("div",{children:"Not Found"})})]})})}IS.createRoot(document.getElementById("root")).render(_.jsx(j.StrictMode,{children:_.jsx(xb,{})}));
