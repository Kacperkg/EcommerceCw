(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function o1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ff={exports:{}},pl={},pf={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv;function a1(){if(pv)return ze;pv=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.iterator;function E(H){return H===null||typeof H!="object"?null:(H=_&&H[_]||H["@@iterator"],typeof H=="function"?H:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,k={};function D(H,te,me){this.props=H,this.context=te,this.refs=k,this.updater=me||S}D.prototype.isReactComponent={},D.prototype.setState=function(H,te){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,te,"setState")},D.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function j(){}j.prototype=D.prototype;function z(H,te,me){this.props=H,this.context=te,this.refs=k,this.updater=me||S}var W=z.prototype=new j;W.constructor=z,I(W,D.prototype),W.isPureReactComponent=!0;var ee=Array.isArray,X=Object.prototype.hasOwnProperty,b={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function C(H,te,me){var be,je={},Be=null,tt=null;if(te!=null)for(be in te.ref!==void 0&&(tt=te.ref),te.key!==void 0&&(Be=""+te.key),te)X.call(te,be)&&!R.hasOwnProperty(be)&&(je[be]=te[be]);var nt=arguments.length-2;if(nt===1)je.children=me;else if(1<nt){for(var dt=Array(nt),Ye=0;Ye<nt;Ye++)dt[Ye]=arguments[Ye+2];je.children=dt}if(H&&H.defaultProps)for(be in nt=H.defaultProps,nt)je[be]===void 0&&(je[be]=nt[be]);return{$$typeof:t,type:H,key:Be,ref:tt,props:je,_owner:b.current}}function P(H,te){return{$$typeof:t,type:H.type,key:te,ref:H.ref,props:H.props,_owner:H._owner}}function L(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function O(H){var te={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(me){return te[me]})}var $=/\/+/g;function V(H,te){return typeof H=="object"&&H!==null&&H.key!=null?O(""+H.key):te.toString(36)}function Qe(H,te,me,be,je){var Be=typeof H;(Be==="undefined"||Be==="boolean")&&(H=null);var tt=!1;if(H===null)tt=!0;else switch(Be){case"string":case"number":tt=!0;break;case"object":switch(H.$$typeof){case t:case e:tt=!0}}if(tt)return tt=H,je=je(tt),H=be===""?"."+V(tt,0):be,ee(je)?(me="",H!=null&&(me=H.replace($,"$&/")+"/"),Qe(je,te,me,"",function(Ye){return Ye})):je!=null&&(L(je)&&(je=P(je,me+(!je.key||tt&&tt.key===je.key?"":(""+je.key).replace($,"$&/")+"/")+H)),te.push(je)),1;if(tt=0,be=be===""?".":be+":",ee(H))for(var nt=0;nt<H.length;nt++){Be=H[nt];var dt=be+V(Be,nt);tt+=Qe(Be,te,me,dt,je)}else if(dt=E(H),typeof dt=="function")for(H=dt.call(H),nt=0;!(Be=H.next()).done;)Be=Be.value,dt=be+V(Be,nt++),tt+=Qe(Be,te,me,dt,je);else if(Be==="object")throw te=String(H),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return tt}function xt(H,te,me){if(H==null)return H;var be=[],je=0;return Qe(H,be,"","",function(Be){return te.call(me,Be,je++)}),be}function Ce(H){if(H._status===-1){var te=H._result;te=te(),te.then(function(me){(H._status===0||H._status===-1)&&(H._status=1,H._result=me)},function(me){(H._status===0||H._status===-1)&&(H._status=2,H._result=me)}),H._status===-1&&(H._status=0,H._result=te)}if(H._status===1)return H._result.default;throw H._result}var Ae={current:null},ie={transition:null},pe={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:ie,ReactCurrentOwner:b};function ue(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:xt,forEach:function(H,te,me){xt(H,function(){te.apply(this,arguments)},me)},count:function(H){var te=0;return xt(H,function(){te++}),te},toArray:function(H){return xt(H,function(te){return te})||[]},only:function(H){if(!L(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},ze.Component=D,ze.Fragment=n,ze.Profiler=o,ze.PureComponent=z,ze.StrictMode=i,ze.Suspense=f,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,ze.act=ue,ze.cloneElement=function(H,te,me){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var be=I({},H.props),je=H.key,Be=H.ref,tt=H._owner;if(te!=null){if(te.ref!==void 0&&(Be=te.ref,tt=b.current),te.key!==void 0&&(je=""+te.key),H.type&&H.type.defaultProps)var nt=H.type.defaultProps;for(dt in te)X.call(te,dt)&&!R.hasOwnProperty(dt)&&(be[dt]=te[dt]===void 0&&nt!==void 0?nt[dt]:te[dt])}var dt=arguments.length-2;if(dt===1)be.children=me;else if(1<dt){nt=Array(dt);for(var Ye=0;Ye<dt;Ye++)nt[Ye]=arguments[Ye+2];be.children=nt}return{$$typeof:t,type:H.type,key:je,ref:Be,props:be,_owner:tt}},ze.createContext=function(H){return H={$$typeof:u,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:a,_context:H},H.Consumer=H},ze.createElement=C,ze.createFactory=function(H){var te=C.bind(null,H);return te.type=H,te},ze.createRef=function(){return{current:null}},ze.forwardRef=function(H){return{$$typeof:h,render:H}},ze.isValidElement=L,ze.lazy=function(H){return{$$typeof:g,_payload:{_status:-1,_result:H},_init:Ce}},ze.memo=function(H,te){return{$$typeof:p,type:H,compare:te===void 0?null:te}},ze.startTransition=function(H){var te=ie.transition;ie.transition={};try{H()}finally{ie.transition=te}},ze.unstable_act=ue,ze.useCallback=function(H,te){return Ae.current.useCallback(H,te)},ze.useContext=function(H){return Ae.current.useContext(H)},ze.useDebugValue=function(){},ze.useDeferredValue=function(H){return Ae.current.useDeferredValue(H)},ze.useEffect=function(H,te){return Ae.current.useEffect(H,te)},ze.useId=function(){return Ae.current.useId()},ze.useImperativeHandle=function(H,te,me){return Ae.current.useImperativeHandle(H,te,me)},ze.useInsertionEffect=function(H,te){return Ae.current.useInsertionEffect(H,te)},ze.useLayoutEffect=function(H,te){return Ae.current.useLayoutEffect(H,te)},ze.useMemo=function(H,te){return Ae.current.useMemo(H,te)},ze.useReducer=function(H,te,me){return Ae.current.useReducer(H,te,me)},ze.useRef=function(H){return Ae.current.useRef(H)},ze.useState=function(H){return Ae.current.useState(H)},ze.useSyncExternalStore=function(H,te,me){return Ae.current.useSyncExternalStore(H,te,me)},ze.useTransition=function(){return Ae.current.useTransition()},ze.version="18.3.1",ze}var mv;function kp(){return mv||(mv=1,pf.exports=a1()),pf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gv;function l1(){if(gv)return pl;gv=1;var t=kp(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,f,p){var g,_={},E=null,S=null;p!==void 0&&(E=""+p),f.key!==void 0&&(E=""+f.key),f.ref!==void 0&&(S=f.ref);for(g in f)i.call(f,g)&&!a.hasOwnProperty(g)&&(_[g]=f[g]);if(h&&h.defaultProps)for(g in f=h.defaultProps,f)_[g]===void 0&&(_[g]=f[g]);return{$$typeof:e,type:h,key:E,ref:S,props:_,_owner:o.current}}return pl.Fragment=n,pl.jsx=u,pl.jsxs=u,pl}var yv;function u1(){return yv||(yv=1,ff.exports=l1()),ff.exports}var w=u1(),M=kp();const ho=o1(M);var wc={},mf={exports:{}},Ln={},gf={exports:{}},yf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv;function c1(){return vv||(vv=1,function(t){function e(ie,pe){var ue=ie.length;ie.push(pe);e:for(;0<ue;){var H=ue-1>>>1,te=ie[H];if(0<o(te,pe))ie[H]=pe,ie[ue]=te,ue=H;else break e}}function n(ie){return ie.length===0?null:ie[0]}function i(ie){if(ie.length===0)return null;var pe=ie[0],ue=ie.pop();if(ue!==pe){ie[0]=ue;e:for(var H=0,te=ie.length,me=te>>>1;H<me;){var be=2*(H+1)-1,je=ie[be],Be=be+1,tt=ie[Be];if(0>o(je,ue))Be<te&&0>o(tt,je)?(ie[H]=tt,ie[Be]=ue,H=Be):(ie[H]=je,ie[be]=ue,H=be);else if(Be<te&&0>o(tt,ue))ie[H]=tt,ie[Be]=ue,H=Be;else break e}}return pe}function o(ie,pe){var ue=ie.sortIndex-pe.sortIndex;return ue!==0?ue:ie.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var f=[],p=[],g=1,_=null,E=3,S=!1,I=!1,k=!1,D=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(ie){for(var pe=n(p);pe!==null;){if(pe.callback===null)i(p);else if(pe.startTime<=ie)i(p),pe.sortIndex=pe.expirationTime,e(f,pe);else break;pe=n(p)}}function ee(ie){if(k=!1,W(ie),!I)if(n(f)!==null)I=!0,Ce(X);else{var pe=n(p);pe!==null&&Ae(ee,pe.startTime-ie)}}function X(ie,pe){I=!1,k&&(k=!1,j(C),C=-1),S=!0;var ue=E;try{for(W(pe),_=n(f);_!==null&&(!(_.expirationTime>pe)||ie&&!O());){var H=_.callback;if(typeof H=="function"){_.callback=null,E=_.priorityLevel;var te=H(_.expirationTime<=pe);pe=t.unstable_now(),typeof te=="function"?_.callback=te:_===n(f)&&i(f),W(pe)}else i(f);_=n(f)}if(_!==null)var me=!0;else{var be=n(p);be!==null&&Ae(ee,be.startTime-pe),me=!1}return me}finally{_=null,E=ue,S=!1}}var b=!1,R=null,C=-1,P=5,L=-1;function O(){return!(t.unstable_now()-L<P)}function $(){if(R!==null){var ie=t.unstable_now();L=ie;var pe=!0;try{pe=R(!0,ie)}finally{pe?V():(b=!1,R=null)}}else b=!1}var V;if(typeof z=="function")V=function(){z($)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,xt=Qe.port2;Qe.port1.onmessage=$,V=function(){xt.postMessage(null)}}else V=function(){D($,0)};function Ce(ie){R=ie,b||(b=!0,V())}function Ae(ie,pe){C=D(function(){ie(t.unstable_now())},pe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){I||S||(I=!0,Ce(X))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(ie){switch(E){case 1:case 2:case 3:var pe=3;break;default:pe=E}var ue=E;E=pe;try{return ie()}finally{E=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,pe){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ue=E;E=ie;try{return pe()}finally{E=ue}},t.unstable_scheduleCallback=function(ie,pe,ue){var H=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?H+ue:H):ue=H,ie){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=ue+te,ie={id:g++,callback:pe,priorityLevel:ie,startTime:ue,expirationTime:te,sortIndex:-1},ue>H?(ie.sortIndex=ue,e(p,ie),n(f)===null&&ie===n(p)&&(k?(j(C),C=-1):k=!0,Ae(ee,ue-H))):(ie.sortIndex=te,e(f,ie),I||S||(I=!0,Ce(X))),ie},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(ie){var pe=E;return function(){var ue=E;E=pe;try{return ie.apply(this,arguments)}finally{E=ue}}}}(yf)),yf}var _v;function h1(){return _v||(_v=1,gf.exports=c1()),gf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function d1(){if(wv)return Ln;wv=1;var t=kp(),e=h1();function n(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(r,s){u(r,s),u(r+"Capture",s)}function u(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},_={};function E(r){return f.call(_,r)?!0:f.call(g,r)?!1:p.test(r)?_[r]=!0:(g[r]=!0,!1)}function S(r,s,l,d){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function I(r,s,l,d){if(s===null||typeof s>"u"||S(r,s,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function k(r,s,l,d,m,v,T){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=v,this.removeEmptyString=T}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){D[r]=new k(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];D[s]=new k(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){D[r]=new k(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){D[r]=new k(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){D[r]=new k(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){D[r]=new k(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){D[r]=new k(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){D[r]=new k(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){D[r]=new k(r,5,!1,r.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function z(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(j,z);D[s]=new k(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(j,z);D[s]=new k(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(j,z);D[s]=new k(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){D[r]=new k(r,1,!1,r.toLowerCase(),null,!1,!1)}),D.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){D[r]=new k(r,1,!1,r.toLowerCase(),null,!0,!0)});function W(r,s,l,d){var m=D.hasOwnProperty(s)?D[s]:null;(m!==null?m.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(I(s,l,m,d)&&(l=null),d||m===null?E(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):m.mustUseProperty?r[m.propertyName]=l===null?m.type===3?!1:"":l:(s=m.attributeName,d=m.attributeNamespace,l===null?r.removeAttribute(s):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,d?r.setAttributeNS(d,s,l):r.setAttribute(s,l))))}var ee=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),b=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),O=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),Qe=Symbol.for("react.suspense_list"),xt=Symbol.for("react.memo"),Ce=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),ie=Symbol.iterator;function pe(r){return r===null||typeof r!="object"?null:(r=ie&&r[ie]||r["@@iterator"],typeof r=="function"?r:null)}var ue=Object.assign,H;function te(r){if(H===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);H=s&&s[1]||""}return`
`+H+r}var me=!1;function be(r,s){if(!r||me)return"";me=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(J){var d=J}Reflect.construct(r,[],s)}else{try{s.call()}catch(J){d=J}r.call(s.prototype)}else{try{throw Error()}catch(J){d=J}r()}}catch(J){if(J&&d&&typeof J.stack=="string"){for(var m=J.stack.split(`
`),v=d.stack.split(`
`),T=m.length-1,N=v.length-1;1<=T&&0<=N&&m[T]!==v[N];)N--;for(;1<=T&&0<=N;T--,N--)if(m[T]!==v[N]){if(T!==1||N!==1)do if(T--,N--,0>N||m[T]!==v[N]){var U=`
`+m[T].replace(" at new "," at ");return r.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",r.displayName)),U}while(1<=T&&0<=N);break}}}finally{me=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?te(r):""}function je(r){switch(r.tag){case 5:return te(r.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return r=be(r.type,!1),r;case 11:return r=be(r.type.render,!1),r;case 1:return r=be(r.type,!0),r;default:return""}}function Be(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case R:return"Fragment";case b:return"Portal";case P:return"Profiler";case C:return"StrictMode";case V:return"Suspense";case Qe:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case O:return(r.displayName||"Context")+".Consumer";case L:return(r._context.displayName||"Context")+".Provider";case $:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case xt:return s=r.displayName||null,s!==null?s:Be(r.type)||"Memo";case Ce:s=r._payload,r=r._init;try{return Be(r(s))}catch{}}return null}function tt(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Be(s);case 8:return s===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function nt(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function dt(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ye(r){var s=dt(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),d=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,v=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return m.call(this)},set:function(T){d=""+T,v.call(this,T)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function an(r){r._valueTracker||(r._valueTracker=Ye(r))}function ii(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return r&&(d=dt(r)?r.checked?"true":"false":r.value),r=d,r!==l?(s.setValue(r),!0):!1}function Rr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function wn(r,s){var l=s.checked;return ue({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Li(r,s){var l=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;l=nt(s.value!=null?s.value:l),r._wrapperState={initialChecked:d,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Vs(r,s){s=s.checked,s!=null&&W(r,"checked",s,!1)}function Mi(r,s){Vs(r,s);var l=nt(s.value),d=s.type;if(l!=null)d==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(d==="submit"||d==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?ji(r,s.type,l):s.hasOwnProperty("defaultValue")&&ji(r,s.type,nt(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function To(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function ji(r,s,l){(s!=="number"||Rr(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var hr=Array.isArray;function dr(r,s,l,d){if(r=r.options,s){s={};for(var m=0;m<l.length;m++)s["$"+l[m]]=!0;for(l=0;l<r.length;l++)m=s.hasOwnProperty("$"+r[l].value),r[l].selected!==m&&(r[l].selected=m),m&&d&&(r[l].defaultSelected=!0)}else{for(l=""+nt(l),s=null,m=0;m<r.length;m++){if(r[m].value===l){r[m].selected=!0,d&&(r[m].defaultSelected=!0);return}s!==null||r[m].disabled||(s=r[m])}s!==null&&(s.selected=!0)}}function Fn(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(n(91));return ue({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Gn(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(n(92));if(hr(l)){if(1<l.length)throw Error(n(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:nt(l)}}function si(r,s){var l=nt(s.value),d=nt(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),d!=null&&(r.defaultValue=""+d)}function oi(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function ft(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function at(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?ft(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Qn,ai=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,d,m){MSApp.execUnsafeLocalFunction(function(){return r(s,l,d,m)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Qn=Qn||document.createElement("div"),Qn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Qn.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function kr(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var ln={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dr=["Webkit","ms","Moz","O"];Object.keys(ln).forEach(function(r){Dr.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),ln[s]=ln[r]})});function Fi(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||ln.hasOwnProperty(r)&&ln[r]?(""+s).trim():s+"px"}function Oi(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var d=l.indexOf("--")===0,m=Fi(l,s[l],d);l==="float"&&(l="cssFloat"),d?r.setProperty(l,m):r[l]=m}}var Ls=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ui(r,s){if(s){if(Ls[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(n(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(n(61))}if(s.style!=null&&typeof s.style!="object")throw Error(n(62))}}function Nr(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var br=null;function Vr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Bi=null,xn=null,Yn=null;function li(r){if(r=Za(r)){if(typeof Bi!="function")throw Error(n(280));var s=r.stateNode;s&&(s=Lu(s),Bi(r.stateNode,r.type,s))}}function En(r){xn?Yn?Yn.push(r):Yn=[r]:xn=r}function Lr(){if(xn){var r=xn,s=Yn;if(Yn=xn=null,li(r),s)for(r=0;r<s.length;r++)li(s[r])}}function ui(r,s){return r(s)}function Ms(){}var F=!1;function q(r,s,l){if(F)return r(s,l);F=!0;try{return ui(r,s,l)}finally{F=!1,(xn!==null||Yn!==null)&&(Ms(),Lr())}}function Q(r,s){var l=r.stateNode;if(l===null)return null;var d=Lu(l);if(d===null)return null;l=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(n(231,s,typeof l));return l}var se=!1;if(h)try{var de={};Object.defineProperty(de,"passive",{get:function(){se=!0}}),window.addEventListener("test",de,de),window.removeEventListener("test",de,de)}catch{se=!1}function Te(r,s,l,d,m,v,T,N,U){var J=Array.prototype.slice.call(arguments,3);try{s.apply(l,J)}catch(ae){this.onError(ae)}}var Re=!1,ve=null,ge=!1,fe=null,Le={onError:function(r){Re=!0,ve=r}};function Fe(r,s,l,d,m,v,T,N,U){Re=!1,ve=null,Te.apply(Le,arguments)}function lt(r,s,l,d,m,v,T,N,U){if(Fe.apply(this,arguments),Re){if(Re){var J=ve;Re=!1,ve=null}else throw Error(n(198));ge||(ge=!0,fe=J)}}function ut(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function st(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function $e(r){if(ut(r)!==r)throw Error(n(188))}function Et(r){var s=r.alternate;if(!s){if(s=ut(r),s===null)throw Error(n(188));return s!==r?null:r}for(var l=r,d=s;;){var m=l.return;if(m===null)break;var v=m.alternate;if(v===null){if(d=m.return,d!==null){l=d;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===l)return $e(m),r;if(v===d)return $e(m),s;v=v.sibling}throw Error(n(188))}if(l.return!==d.return)l=m,d=v;else{for(var T=!1,N=m.child;N;){if(N===l){T=!0,l=m,d=v;break}if(N===d){T=!0,d=m,l=v;break}N=N.sibling}if(!T){for(N=v.child;N;){if(N===l){T=!0,l=v,d=m;break}if(N===d){T=!0,d=v,l=m;break}N=N.sibling}if(!T)throw Error(n(189))}}if(l.alternate!==d)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?r:s}function Xn(r){return r=Et(r),r!==null?Jn(r):null}function Jn(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Jn(r);if(s!==null)return s;r=r.sibling}return null}var un=e.unstable_scheduleCallback,cn=e.unstable_cancelCallback,zi=e.unstable_shouldYield,ci=e.unstable_requestPaint,Xe=e.unstable_now,hi=e.unstable_getCurrentPriorityLevel,Zn=e.unstable_ImmediatePriority,We=e.unstable_UserBlockingPriority,ct=e.unstable_NormalPriority,Mr=e.unstable_LowPriority,jr=e.unstable_IdlePriority,pt=null,Lt=null;function js(r){if(Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(pt,r,void 0,(r.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:fu,ja=Math.log,du=Math.LN2;function fu(r){return r>>>=0,r===0?32:31-(ja(r)/du|0)|0}var So=64,Co=4194304;function $i(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Fs(r,s){var l=r.pendingLanes;if(l===0)return 0;var d=0,m=r.suspendedLanes,v=r.pingedLanes,T=l&268435455;if(T!==0){var N=T&~m;N!==0?d=$i(N):(v&=T,v!==0&&(d=$i(v)))}else T=l&~m,T!==0?d=$i(T):v!==0&&(d=$i(v));if(d===0)return 0;if(s!==0&&s!==d&&(s&m)===0&&(m=d&-d,v=s&-s,m>=v||m===16&&(v&4194240)!==0))return s;if((d&4)!==0&&(d|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=d;0<s;)l=31-Yt(s),m=1<<l,d|=r[l],s&=~m;return d}function zh(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function di(r,s){for(var l=r.suspendedLanes,d=r.pingedLanes,m=r.expirationTimes,v=r.pendingLanes;0<v;){var T=31-Yt(v),N=1<<T,U=m[T];U===-1?((N&l)===0||(N&d)!==0)&&(m[T]=zh(N,s)):U<=s&&(r.expiredLanes|=N),v&=~N}}function On(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Os(){var r=So;return So<<=1,(So&4194240)===0&&(So=64),r}function Hi(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function Wi(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Yt(s),r[s]=l}function mt(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var d=r.eventTimes;for(r=r.expirationTimes;0<l;){var m=31-Yt(l),v=1<<m;s[m]=0,d[m]=-1,r[m]=-1,l&=~v}}function qi(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var d=31-Yt(l),m=1<<d;m&s|r[d]&s&&(r[d]|=s),l&=~m}}var qe=0;function Ki(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var pu,Ao,mu,gu,yu,Fa=!1,Fr=[],Xt=null,fr=null,pr=null,Gi=new Map,er=new Map,Or=[],$h="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vu(r,s){switch(r){case"focusin":case"focusout":Xt=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":Gi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":er.delete(s.pointerId)}}function In(r,s,l,d,m,v){return r===null||r.nativeEvent!==v?(r={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:v,targetContainers:[m]},s!==null&&(s=Za(s),s!==null&&Ao(s)),r):(r.eventSystemFlags|=d,s=r.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),r)}function Hh(r,s,l,d,m){switch(s){case"focusin":return Xt=In(Xt,r,s,l,d,m),!0;case"dragenter":return fr=In(fr,r,s,l,d,m),!0;case"mouseover":return pr=In(pr,r,s,l,d,m),!0;case"pointerover":var v=m.pointerId;return Gi.set(v,In(Gi.get(v)||null,r,s,l,d,m)),!0;case"gotpointercapture":return v=m.pointerId,er.set(v,In(er.get(v)||null,r,s,l,d,m)),!0}return!1}function _u(r){var s=Hs(r.target);if(s!==null){var l=ut(s);if(l!==null){if(s=l.tag,s===13){if(s=st(l),s!==null){r.blockedOn=s,yu(r.priority,function(){mu(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function fi(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=Po(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var d=new l.constructor(l.type,l);br=d,l.target.dispatchEvent(d),br=null}else return s=Za(l),s!==null&&Ao(s),r.blockedOn=l,!1;s.shift()}return!0}function Us(r,s,l){fi(r)&&l.delete(s)}function wu(){Fa=!1,Xt!==null&&fi(Xt)&&(Xt=null),fr!==null&&fi(fr)&&(fr=null),pr!==null&&fi(pr)&&(pr=null),Gi.forEach(Us),er.forEach(Us)}function mr(r,s){r.blockedOn===s&&(r.blockedOn=null,Fa||(Fa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wu)))}function gr(r){function s(m){return mr(m,r)}if(0<Fr.length){mr(Fr[0],r);for(var l=1;l<Fr.length;l++){var d=Fr[l];d.blockedOn===r&&(d.blockedOn=null)}}for(Xt!==null&&mr(Xt,r),fr!==null&&mr(fr,r),pr!==null&&mr(pr,r),Gi.forEach(s),er.forEach(s),l=0;l<Or.length;l++)d=Or[l],d.blockedOn===r&&(d.blockedOn=null);for(;0<Or.length&&(l=Or[0],l.blockedOn===null);)_u(l),l.blockedOn===null&&Or.shift()}var pi=ee.ReactCurrentBatchConfig,Qi=!0;function Tt(r,s,l,d){var m=qe,v=pi.transition;pi.transition=null;try{qe=1,Oa(r,s,l,d)}finally{qe=m,pi.transition=v}}function Wh(r,s,l,d){var m=qe,v=pi.transition;pi.transition=null;try{qe=4,Oa(r,s,l,d)}finally{qe=m,pi.transition=v}}function Oa(r,s,l,d){if(Qi){var m=Po(r,s,l,d);if(m===null)nd(r,s,d,Bs,l),vu(r,d);else if(Hh(m,r,s,l,d))d.stopPropagation();else if(vu(r,d),s&4&&-1<$h.indexOf(r)){for(;m!==null;){var v=Za(m);if(v!==null&&pu(v),v=Po(r,s,l,d),v===null&&nd(r,s,d,Bs,l),v===m)break;m=v}m!==null&&d.stopPropagation()}else nd(r,s,d,null,l)}}var Bs=null;function Po(r,s,l,d){if(Bs=null,r=Vr(d),r=Hs(r),r!==null)if(s=ut(r),s===null)r=null;else if(l=s.tag,l===13){if(r=st(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Bs=r,null}function Ua(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hi()){case Zn:return 1;case We:return 4;case ct:case Mr:return 16;case jr:return 536870912;default:return 16}default:return 16}}var Un=null,Io=null,Rn=null;function Ba(){if(Rn)return Rn;var r,s=Io,l=s.length,d,m="value"in Un?Un.value:Un.textContent,v=m.length;for(r=0;r<l&&s[r]===m[r];r++);var T=l-r;for(d=1;d<=T&&s[l-d]===m[v-d];d++);return Rn=m.slice(r,1<d?1-d:void 0)}function Ro(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Ur(){return!0}function za(){return!1}function Jt(r){function s(l,d,m,v,T){this._reactName=l,this._targetInst=m,this.type=d,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var N in r)r.hasOwnProperty(N)&&(l=r[N],this[N]=l?l(v):v[N]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ur:za,this.isPropagationStopped=za,this}return ue(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ur)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ur)},persist:function(){},isPersistent:Ur}),s}var yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ko=Jt(yr),Br=ue({},yr,{view:0,detail:0}),qh=Jt(Br),Do,mi,Yi,zs=ue({},Br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Yi&&(Yi&&r.type==="mousemove"?(Do=r.screenX-Yi.screenX,mi=r.screenY-Yi.screenY):mi=Do=0,Yi=r),Do)},movementY:function(r){return"movementY"in r?r.movementY:mi}}),No=Jt(zs),$a=ue({},zs,{dataTransfer:0}),xu=Jt($a),bo=ue({},Br,{relatedTarget:0}),Vo=Jt(bo),Eu=ue({},yr,{animationName:0,elapsedTime:0,pseudoElement:0}),gi=Jt(Eu),Tu=ue({},yr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Su=Jt(Tu),Cu=ue({},yr,{data:0}),Ha=Jt(Cu),Lo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Au={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Au[r])?!!s[r]:!1}function zr(){return Pu}var c=ue({},Br,{key:function(r){if(r.key){var s=Lo[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Ro(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Tn[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zr,charCode:function(r){return r.type==="keypress"?Ro(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ro(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),y=Jt(c),x=ue({},zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A=Jt(x),K=ue({},Br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zr}),Z=Jt(K),he=ue({},yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ht=Jt(he),Ut=ue({},zs,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Je=Jt(Ut),Wt=[9,13,27,32],Mt=h&&"CompositionEvent"in window,tr=null;h&&"documentMode"in document&&(tr=document.documentMode);var Bn=h&&"TextEvent"in window&&!tr,$s=h&&(!Mt||tr&&8<tr&&11>=tr),Mo=" ",lg=!1;function ug(r,s){switch(r){case"keyup":return Wt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cg(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var jo=!1;function rS(r,s){switch(r){case"compositionend":return cg(s);case"keypress":return s.which!==32?null:(lg=!0,Mo);case"textInput":return r=s.data,r===Mo&&lg?null:r;default:return null}}function iS(r,s){if(jo)return r==="compositionend"||!Mt&&ug(r,s)?(r=Ba(),Rn=Io=Un=null,jo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return $s&&s.locale!=="ko"?null:s.data;default:return null}}var sS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hg(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!sS[r.type]:s==="textarea"}function dg(r,s,l,d){En(d),s=Nu(s,"onChange"),0<s.length&&(l=new ko("onChange","change",null,l,d),r.push({event:l,listeners:s}))}var Wa=null,qa=null;function oS(r){kg(r,0)}function Iu(r){var s=zo(r);if(ii(s))return r}function aS(r,s){if(r==="change")return s}var fg=!1;if(h){var Kh;if(h){var Gh="oninput"in document;if(!Gh){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),Gh=typeof pg.oninput=="function"}Kh=Gh}else Kh=!1;fg=Kh&&(!document.documentMode||9<document.documentMode)}function mg(){Wa&&(Wa.detachEvent("onpropertychange",gg),qa=Wa=null)}function gg(r){if(r.propertyName==="value"&&Iu(qa)){var s=[];dg(s,qa,r,Vr(r)),q(oS,s)}}function lS(r,s,l){r==="focusin"?(mg(),Wa=s,qa=l,Wa.attachEvent("onpropertychange",gg)):r==="focusout"&&mg()}function uS(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Iu(qa)}function cS(r,s){if(r==="click")return Iu(s)}function hS(r,s){if(r==="input"||r==="change")return Iu(s)}function dS(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var vr=typeof Object.is=="function"?Object.is:dS;function Ka(r,s){if(vr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var m=l[d];if(!f.call(s,m)||!vr(r[m],s[m]))return!1}return!0}function yg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function vg(r,s){var l=yg(r);r=0;for(var d;l;){if(l.nodeType===3){if(d=r+l.textContent.length,r<=s&&d>=s)return{node:l,offset:s-r};r=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=yg(l)}}function _g(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?_g(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function wg(){for(var r=window,s=Rr();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Rr(r.document)}return s}function Qh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function fS(r){var s=wg(),l=r.focusedElem,d=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&_g(l.ownerDocument.documentElement,l)){if(d!==null&&Qh(l)){if(s=d.start,r=d.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var m=l.textContent.length,v=Math.min(d.start,m);d=d.end===void 0?v:Math.min(d.end,m),!r.extend&&v>d&&(m=d,d=v,v=m),m=vg(l,v);var T=vg(l,d);m&&T&&(r.rangeCount!==1||r.anchorNode!==m.node||r.anchorOffset!==m.offset||r.focusNode!==T.node||r.focusOffset!==T.offset)&&(s=s.createRange(),s.setStart(m.node,m.offset),r.removeAllRanges(),v>d?(r.addRange(s),r.extend(T.node,T.offset)):(s.setEnd(T.node,T.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var pS=h&&"documentMode"in document&&11>=document.documentMode,Fo=null,Yh=null,Ga=null,Xh=!1;function xg(r,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Xh||Fo==null||Fo!==Rr(d)||(d=Fo,"selectionStart"in d&&Qh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ga&&Ka(Ga,d)||(Ga=d,d=Nu(Yh,"onSelect"),0<d.length&&(s=new ko("onSelect","select",null,s,l),r.push({event:s,listeners:d}),s.target=Fo)))}function Ru(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var Oo={animationend:Ru("Animation","AnimationEnd"),animationiteration:Ru("Animation","AnimationIteration"),animationstart:Ru("Animation","AnimationStart"),transitionend:Ru("Transition","TransitionEnd")},Jh={},Eg={};h&&(Eg=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function ku(r){if(Jh[r])return Jh[r];if(!Oo[r])return r;var s=Oo[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Eg)return Jh[r]=s[l];return r}var Tg=ku("animationend"),Sg=ku("animationiteration"),Cg=ku("animationstart"),Ag=ku("transitionend"),Pg=new Map,Ig="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xi(r,s){Pg.set(r,s),a(s,[r])}for(var Zh=0;Zh<Ig.length;Zh++){var ed=Ig[Zh],mS=ed.toLowerCase(),gS=ed[0].toUpperCase()+ed.slice(1);Xi(mS,"on"+gS)}Xi(Tg,"onAnimationEnd"),Xi(Sg,"onAnimationIteration"),Xi(Cg,"onAnimationStart"),Xi("dblclick","onDoubleClick"),Xi("focusin","onFocus"),Xi("focusout","onBlur"),Xi(Ag,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qa));function Rg(r,s,l){var d=r.type||"unknown-event";r.currentTarget=l,lt(d,s,void 0,r),r.currentTarget=null}function kg(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var d=r[l],m=d.event;d=d.listeners;e:{var v=void 0;if(s)for(var T=d.length-1;0<=T;T--){var N=d[T],U=N.instance,J=N.currentTarget;if(N=N.listener,U!==v&&m.isPropagationStopped())break e;Rg(m,N,J),v=U}else for(T=0;T<d.length;T++){if(N=d[T],U=N.instance,J=N.currentTarget,N=N.listener,U!==v&&m.isPropagationStopped())break e;Rg(m,N,J),v=U}}}if(ge)throw r=fe,ge=!1,fe=null,r}function vt(r,s){var l=s[ld];l===void 0&&(l=s[ld]=new Set);var d=r+"__bubble";l.has(d)||(Dg(s,r,2,!1),l.add(d))}function td(r,s,l){var d=0;s&&(d|=4),Dg(l,r,d,s)}var Du="_reactListening"+Math.random().toString(36).slice(2);function Ya(r){if(!r[Du]){r[Du]=!0,i.forEach(function(l){l!=="selectionchange"&&(yS.has(l)||td(l,!1,r),td(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Du]||(s[Du]=!0,td("selectionchange",!1,s))}}function Dg(r,s,l,d){switch(Ua(s)){case 1:var m=Tt;break;case 4:m=Wh;break;default:m=Oa}l=m.bind(null,s,l,r),m=void 0,!se||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),d?m!==void 0?r.addEventListener(s,l,{capture:!0,passive:m}):r.addEventListener(s,l,!0):m!==void 0?r.addEventListener(s,l,{passive:m}):r.addEventListener(s,l,!1)}function nd(r,s,l,d,m){var v=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var N=d.stateNode.containerInfo;if(N===m||N.nodeType===8&&N.parentNode===m)break;if(T===4)for(T=d.return;T!==null;){var U=T.tag;if((U===3||U===4)&&(U=T.stateNode.containerInfo,U===m||U.nodeType===8&&U.parentNode===m))return;T=T.return}for(;N!==null;){if(T=Hs(N),T===null)return;if(U=T.tag,U===5||U===6){d=v=T;continue e}N=N.parentNode}}d=d.return}q(function(){var J=v,ae=Vr(l),le=[];e:{var oe=Pg.get(r);if(oe!==void 0){var ye=ko,Ee=r;switch(r){case"keypress":if(Ro(l)===0)break e;case"keydown":case"keyup":ye=y;break;case"focusin":Ee="focus",ye=Vo;break;case"focusout":Ee="blur",ye=Vo;break;case"beforeblur":case"afterblur":ye=Vo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=No;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=xu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=Z;break;case Tg:case Sg:case Cg:ye=gi;break;case Ag:ye=ht;break;case"scroll":ye=qh;break;case"wheel":ye=Je;break;case"copy":case"cut":case"paste":ye=Su;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=A}var Se=(s&4)!==0,Nt=!Se&&r==="scroll",G=Se?oe!==null?oe+"Capture":null:oe;Se=[];for(var B=J,Y;B!==null;){Y=B;var ce=Y.stateNode;if(Y.tag===5&&ce!==null&&(Y=ce,G!==null&&(ce=Q(B,G),ce!=null&&Se.push(Xa(B,ce,Y)))),Nt)break;B=B.return}0<Se.length&&(oe=new ye(oe,Ee,null,l,ae),le.push({event:oe,listeners:Se}))}}if((s&7)===0){e:{if(oe=r==="mouseover"||r==="pointerover",ye=r==="mouseout"||r==="pointerout",oe&&l!==br&&(Ee=l.relatedTarget||l.fromElement)&&(Hs(Ee)||Ee[yi]))break e;if((ye||oe)&&(oe=ae.window===ae?ae:(oe=ae.ownerDocument)?oe.defaultView||oe.parentWindow:window,ye?(Ee=l.relatedTarget||l.toElement,ye=J,Ee=Ee?Hs(Ee):null,Ee!==null&&(Nt=ut(Ee),Ee!==Nt||Ee.tag!==5&&Ee.tag!==6)&&(Ee=null)):(ye=null,Ee=J),ye!==Ee)){if(Se=No,ce="onMouseLeave",G="onMouseEnter",B="mouse",(r==="pointerout"||r==="pointerover")&&(Se=A,ce="onPointerLeave",G="onPointerEnter",B="pointer"),Nt=ye==null?oe:zo(ye),Y=Ee==null?oe:zo(Ee),oe=new Se(ce,B+"leave",ye,l,ae),oe.target=Nt,oe.relatedTarget=Y,ce=null,Hs(ae)===J&&(Se=new Se(G,B+"enter",Ee,l,ae),Se.target=Y,Se.relatedTarget=Nt,ce=Se),Nt=ce,ye&&Ee)t:{for(Se=ye,G=Ee,B=0,Y=Se;Y;Y=Uo(Y))B++;for(Y=0,ce=G;ce;ce=Uo(ce))Y++;for(;0<B-Y;)Se=Uo(Se),B--;for(;0<Y-B;)G=Uo(G),Y--;for(;B--;){if(Se===G||G!==null&&Se===G.alternate)break t;Se=Uo(Se),G=Uo(G)}Se=null}else Se=null;ye!==null&&Ng(le,oe,ye,Se,!1),Ee!==null&&Nt!==null&&Ng(le,Nt,Ee,Se,!0)}}e:{if(oe=J?zo(J):window,ye=oe.nodeName&&oe.nodeName.toLowerCase(),ye==="select"||ye==="input"&&oe.type==="file")var Pe=aS;else if(hg(oe))if(fg)Pe=hS;else{Pe=uS;var ke=lS}else(ye=oe.nodeName)&&ye.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Pe=cS);if(Pe&&(Pe=Pe(r,J))){dg(le,Pe,l,ae);break e}ke&&ke(r,oe,J),r==="focusout"&&(ke=oe._wrapperState)&&ke.controlled&&oe.type==="number"&&ji(oe,"number",oe.value)}switch(ke=J?zo(J):window,r){case"focusin":(hg(ke)||ke.contentEditable==="true")&&(Fo=ke,Yh=J,Ga=null);break;case"focusout":Ga=Yh=Fo=null;break;case"mousedown":Xh=!0;break;case"contextmenu":case"mouseup":case"dragend":Xh=!1,xg(le,l,ae);break;case"selectionchange":if(pS)break;case"keydown":case"keyup":xg(le,l,ae)}var De;if(Mt)e:{switch(r){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else jo?ug(r,l)&&(Me="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Me="onCompositionStart");Me&&($s&&l.locale!=="ko"&&(jo||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&jo&&(De=Ba()):(Un=ae,Io="value"in Un?Un.value:Un.textContent,jo=!0)),ke=Nu(J,Me),0<ke.length&&(Me=new Ha(Me,r,null,l,ae),le.push({event:Me,listeners:ke}),De?Me.data=De:(De=cg(l),De!==null&&(Me.data=De)))),(De=Bn?rS(r,l):iS(r,l))&&(J=Nu(J,"onBeforeInput"),0<J.length&&(ae=new Ha("onBeforeInput","beforeinput",null,l,ae),le.push({event:ae,listeners:J}),ae.data=De))}kg(le,s)})}function Xa(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Nu(r,s){for(var l=s+"Capture",d=[];r!==null;){var m=r,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=Q(r,l),v!=null&&d.unshift(Xa(r,v,m)),v=Q(r,s),v!=null&&d.push(Xa(r,v,m))),r=r.return}return d}function Uo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Ng(r,s,l,d,m){for(var v=s._reactName,T=[];l!==null&&l!==d;){var N=l,U=N.alternate,J=N.stateNode;if(U!==null&&U===d)break;N.tag===5&&J!==null&&(N=J,m?(U=Q(l,v),U!=null&&T.unshift(Xa(l,U,N))):m||(U=Q(l,v),U!=null&&T.push(Xa(l,U,N)))),l=l.return}T.length!==0&&r.push({event:s,listeners:T})}var vS=/\r\n?/g,_S=/\u0000|\uFFFD/g;function bg(r){return(typeof r=="string"?r:""+r).replace(vS,`
`).replace(_S,"")}function bu(r,s,l){if(s=bg(s),bg(r)!==s&&l)throw Error(n(425))}function Vu(){}var rd=null,id=null;function sd(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var od=typeof setTimeout=="function"?setTimeout:void 0,wS=typeof clearTimeout=="function"?clearTimeout:void 0,Vg=typeof Promise=="function"?Promise:void 0,xS=typeof queueMicrotask=="function"?queueMicrotask:typeof Vg<"u"?function(r){return Vg.resolve(null).then(r).catch(ES)}:od;function ES(r){setTimeout(function(){throw r})}function ad(r,s){var l=s,d=0;do{var m=l.nextSibling;if(r.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(d===0){r.removeChild(m),gr(s);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=m}while(l);gr(s)}function Ji(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Lg(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var Bo=Math.random().toString(36).slice(2),$r="__reactFiber$"+Bo,Ja="__reactProps$"+Bo,yi="__reactContainer$"+Bo,ld="__reactEvents$"+Bo,TS="__reactListeners$"+Bo,SS="__reactHandles$"+Bo;function Hs(r){var s=r[$r];if(s)return s;for(var l=r.parentNode;l;){if(s=l[yi]||l[$r]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=Lg(r);r!==null;){if(l=r[$r])return l;r=Lg(r)}return s}r=l,l=r.parentNode}return null}function Za(r){return r=r[$r]||r[yi],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function zo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function Lu(r){return r[Ja]||null}var ud=[],$o=-1;function Zi(r){return{current:r}}function _t(r){0>$o||(r.current=ud[$o],ud[$o]=null,$o--)}function gt(r,s){$o++,ud[$o]=r.current,r.current=s}var es={},hn=Zi(es),kn=Zi(!1),Ws=es;function Ho(r,s){var l=r.type.contextTypes;if(!l)return es;var d=r.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in l)m[v]=s[v];return d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=m),m}function Dn(r){return r=r.childContextTypes,r!=null}function Mu(){_t(kn),_t(hn)}function Mg(r,s,l){if(hn.current!==es)throw Error(n(168));gt(hn,s),gt(kn,l)}function jg(r,s,l){var d=r.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var m in d)if(!(m in s))throw Error(n(108,tt(r)||"Unknown",m));return ue({},l,d)}function ju(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||es,Ws=hn.current,gt(hn,r),gt(kn,kn.current),!0}function Fg(r,s,l){var d=r.stateNode;if(!d)throw Error(n(169));l?(r=jg(r,s,Ws),d.__reactInternalMemoizedMergedChildContext=r,_t(kn),_t(hn),gt(hn,r)):_t(kn),gt(kn,l)}var vi=null,Fu=!1,cd=!1;function Og(r){vi===null?vi=[r]:vi.push(r)}function CS(r){Fu=!0,Og(r)}function ts(){if(!cd&&vi!==null){cd=!0;var r=0,s=qe;try{var l=vi;for(qe=1;r<l.length;r++){var d=l[r];do d=d(!0);while(d!==null)}vi=null,Fu=!1}catch(m){throw vi!==null&&(vi=vi.slice(r+1)),un(Zn,ts),m}finally{qe=s,cd=!1}}return null}var Wo=[],qo=0,Ou=null,Uu=0,nr=[],rr=0,qs=null,_i=1,wi="";function Ks(r,s){Wo[qo++]=Uu,Wo[qo++]=Ou,Ou=r,Uu=s}function Ug(r,s,l){nr[rr++]=_i,nr[rr++]=wi,nr[rr++]=qs,qs=r;var d=_i;r=wi;var m=32-Yt(d)-1;d&=~(1<<m),l+=1;var v=32-Yt(s)+m;if(30<v){var T=m-m%5;v=(d&(1<<T)-1).toString(32),d>>=T,m-=T,_i=1<<32-Yt(s)+m|l<<m|d,wi=v+r}else _i=1<<v|l<<m|d,wi=r}function hd(r){r.return!==null&&(Ks(r,1),Ug(r,1,0))}function dd(r){for(;r===Ou;)Ou=Wo[--qo],Wo[qo]=null,Uu=Wo[--qo],Wo[qo]=null;for(;r===qs;)qs=nr[--rr],nr[rr]=null,wi=nr[--rr],nr[rr]=null,_i=nr[--rr],nr[rr]=null}var zn=null,$n=null,St=!1,_r=null;function Bg(r,s){var l=ar(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function zg(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,zn=r,$n=Ji(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,zn=r,$n=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=qs!==null?{id:_i,overflow:wi}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=ar(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,zn=r,$n=null,!0):!1;default:return!1}}function fd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function pd(r){if(St){var s=$n;if(s){var l=s;if(!zg(r,s)){if(fd(r))throw Error(n(418));s=Ji(l.nextSibling);var d=zn;s&&zg(r,s)?Bg(d,l):(r.flags=r.flags&-4097|2,St=!1,zn=r)}}else{if(fd(r))throw Error(n(418));r.flags=r.flags&-4097|2,St=!1,zn=r}}}function $g(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;zn=r}function Bu(r){if(r!==zn)return!1;if(!St)return $g(r),St=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!sd(r.type,r.memoizedProps)),s&&(s=$n)){if(fd(r))throw Hg(),Error(n(418));for(;s;)Bg(r,s),s=Ji(s.nextSibling)}if($g(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){$n=Ji(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}$n=null}}else $n=zn?Ji(r.stateNode.nextSibling):null;return!0}function Hg(){for(var r=$n;r;)r=Ji(r.nextSibling)}function Ko(){$n=zn=null,St=!1}function md(r){_r===null?_r=[r]:_r.push(r)}var AS=ee.ReactCurrentBatchConfig;function el(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(n(309));var d=l.stateNode}if(!d)throw Error(n(147,r));var m=d,v=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===v?s.ref:(s=function(T){var N=m.refs;T===null?delete N[v]:N[v]=T},s._stringRef=v,s)}if(typeof r!="string")throw Error(n(284));if(!l._owner)throw Error(n(290,r))}return r}function zu(r,s){throw r=Object.prototype.toString.call(s),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Wg(r){var s=r._init;return s(r._payload)}function qg(r){function s(G,B){if(r){var Y=G.deletions;Y===null?(G.deletions=[B],G.flags|=16):Y.push(B)}}function l(G,B){if(!r)return null;for(;B!==null;)s(G,B),B=B.sibling;return null}function d(G,B){for(G=new Map;B!==null;)B.key!==null?G.set(B.key,B):G.set(B.index,B),B=B.sibling;return G}function m(G,B){return G=us(G,B),G.index=0,G.sibling=null,G}function v(G,B,Y){return G.index=Y,r?(Y=G.alternate,Y!==null?(Y=Y.index,Y<B?(G.flags|=2,B):Y):(G.flags|=2,B)):(G.flags|=1048576,B)}function T(G){return r&&G.alternate===null&&(G.flags|=2),G}function N(G,B,Y,ce){return B===null||B.tag!==6?(B=af(Y,G.mode,ce),B.return=G,B):(B=m(B,Y),B.return=G,B)}function U(G,B,Y,ce){var Pe=Y.type;return Pe===R?ae(G,B,Y.props.children,ce,Y.key):B!==null&&(B.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===Ce&&Wg(Pe)===B.type)?(ce=m(B,Y.props),ce.ref=el(G,B,Y),ce.return=G,ce):(ce=dc(Y.type,Y.key,Y.props,null,G.mode,ce),ce.ref=el(G,B,Y),ce.return=G,ce)}function J(G,B,Y,ce){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=lf(Y,G.mode,ce),B.return=G,B):(B=m(B,Y.children||[]),B.return=G,B)}function ae(G,B,Y,ce,Pe){return B===null||B.tag!==7?(B=to(Y,G.mode,ce,Pe),B.return=G,B):(B=m(B,Y),B.return=G,B)}function le(G,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number")return B=af(""+B,G.mode,Y),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case X:return Y=dc(B.type,B.key,B.props,null,G.mode,Y),Y.ref=el(G,null,B),Y.return=G,Y;case b:return B=lf(B,G.mode,Y),B.return=G,B;case Ce:var ce=B._init;return le(G,ce(B._payload),Y)}if(hr(B)||pe(B))return B=to(B,G.mode,Y,null),B.return=G,B;zu(G,B)}return null}function oe(G,B,Y,ce){var Pe=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Pe!==null?null:N(G,B,""+Y,ce);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case X:return Y.key===Pe?U(G,B,Y,ce):null;case b:return Y.key===Pe?J(G,B,Y,ce):null;case Ce:return Pe=Y._init,oe(G,B,Pe(Y._payload),ce)}if(hr(Y)||pe(Y))return Pe!==null?null:ae(G,B,Y,ce,null);zu(G,Y)}return null}function ye(G,B,Y,ce,Pe){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return G=G.get(Y)||null,N(B,G,""+ce,Pe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case X:return G=G.get(ce.key===null?Y:ce.key)||null,U(B,G,ce,Pe);case b:return G=G.get(ce.key===null?Y:ce.key)||null,J(B,G,ce,Pe);case Ce:var ke=ce._init;return ye(G,B,Y,ke(ce._payload),Pe)}if(hr(ce)||pe(ce))return G=G.get(Y)||null,ae(B,G,ce,Pe,null);zu(B,ce)}return null}function Ee(G,B,Y,ce){for(var Pe=null,ke=null,De=B,Me=B=0,Gt=null;De!==null&&Me<Y.length;Me++){De.index>Me?(Gt=De,De=null):Gt=De.sibling;var it=oe(G,De,Y[Me],ce);if(it===null){De===null&&(De=Gt);break}r&&De&&it.alternate===null&&s(G,De),B=v(it,B,Me),ke===null?Pe=it:ke.sibling=it,ke=it,De=Gt}if(Me===Y.length)return l(G,De),St&&Ks(G,Me),Pe;if(De===null){for(;Me<Y.length;Me++)De=le(G,Y[Me],ce),De!==null&&(B=v(De,B,Me),ke===null?Pe=De:ke.sibling=De,ke=De);return St&&Ks(G,Me),Pe}for(De=d(G,De);Me<Y.length;Me++)Gt=ye(De,G,Me,Y[Me],ce),Gt!==null&&(r&&Gt.alternate!==null&&De.delete(Gt.key===null?Me:Gt.key),B=v(Gt,B,Me),ke===null?Pe=Gt:ke.sibling=Gt,ke=Gt);return r&&De.forEach(function(cs){return s(G,cs)}),St&&Ks(G,Me),Pe}function Se(G,B,Y,ce){var Pe=pe(Y);if(typeof Pe!="function")throw Error(n(150));if(Y=Pe.call(Y),Y==null)throw Error(n(151));for(var ke=Pe=null,De=B,Me=B=0,Gt=null,it=Y.next();De!==null&&!it.done;Me++,it=Y.next()){De.index>Me?(Gt=De,De=null):Gt=De.sibling;var cs=oe(G,De,it.value,ce);if(cs===null){De===null&&(De=Gt);break}r&&De&&cs.alternate===null&&s(G,De),B=v(cs,B,Me),ke===null?Pe=cs:ke.sibling=cs,ke=cs,De=Gt}if(it.done)return l(G,De),St&&Ks(G,Me),Pe;if(De===null){for(;!it.done;Me++,it=Y.next())it=le(G,it.value,ce),it!==null&&(B=v(it,B,Me),ke===null?Pe=it:ke.sibling=it,ke=it);return St&&Ks(G,Me),Pe}for(De=d(G,De);!it.done;Me++,it=Y.next())it=ye(De,G,Me,it.value,ce),it!==null&&(r&&it.alternate!==null&&De.delete(it.key===null?Me:it.key),B=v(it,B,Me),ke===null?Pe=it:ke.sibling=it,ke=it);return r&&De.forEach(function(s1){return s(G,s1)}),St&&Ks(G,Me),Pe}function Nt(G,B,Y,ce){if(typeof Y=="object"&&Y!==null&&Y.type===R&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case X:e:{for(var Pe=Y.key,ke=B;ke!==null;){if(ke.key===Pe){if(Pe=Y.type,Pe===R){if(ke.tag===7){l(G,ke.sibling),B=m(ke,Y.props.children),B.return=G,G=B;break e}}else if(ke.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===Ce&&Wg(Pe)===ke.type){l(G,ke.sibling),B=m(ke,Y.props),B.ref=el(G,ke,Y),B.return=G,G=B;break e}l(G,ke);break}else s(G,ke);ke=ke.sibling}Y.type===R?(B=to(Y.props.children,G.mode,ce,Y.key),B.return=G,G=B):(ce=dc(Y.type,Y.key,Y.props,null,G.mode,ce),ce.ref=el(G,B,Y),ce.return=G,G=ce)}return T(G);case b:e:{for(ke=Y.key;B!==null;){if(B.key===ke)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){l(G,B.sibling),B=m(B,Y.children||[]),B.return=G,G=B;break e}else{l(G,B);break}else s(G,B);B=B.sibling}B=lf(Y,G.mode,ce),B.return=G,G=B}return T(G);case Ce:return ke=Y._init,Nt(G,B,ke(Y._payload),ce)}if(hr(Y))return Ee(G,B,Y,ce);if(pe(Y))return Se(G,B,Y,ce);zu(G,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,B!==null&&B.tag===6?(l(G,B.sibling),B=m(B,Y),B.return=G,G=B):(l(G,B),B=af(Y,G.mode,ce),B.return=G,G=B),T(G)):l(G,B)}return Nt}var Go=qg(!0),Kg=qg(!1),$u=Zi(null),Hu=null,Qo=null,gd=null;function yd(){gd=Qo=Hu=null}function vd(r){var s=$u.current;_t($u),r._currentValue=s}function _d(r,s,l){for(;r!==null;){var d=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),r===l)break;r=r.return}}function Yo(r,s){Hu=r,gd=Qo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(Nn=!0),r.firstContext=null)}function ir(r){var s=r._currentValue;if(gd!==r)if(r={context:r,memoizedValue:s,next:null},Qo===null){if(Hu===null)throw Error(n(308));Qo=r,Hu.dependencies={lanes:0,firstContext:r}}else Qo=Qo.next=r;return s}var Gs=null;function wd(r){Gs===null?Gs=[r]:Gs.push(r)}function Gg(r,s,l,d){var m=s.interleaved;return m===null?(l.next=l,wd(s)):(l.next=m.next,m.next=l),s.interleaved=l,xi(r,d)}function xi(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var ns=!1;function xd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ei(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function rs(r,s,l){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(rt&2)!==0){var m=d.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),d.pending=s,xi(r,l)}return m=d.interleaved,m===null?(s.next=s,wd(d)):(s.next=m.next,m.next=s),d.interleaved=s,xi(r,l)}function Wu(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var d=s.lanes;d&=r.pendingLanes,l|=d,s.lanes=l,qi(r,l)}}function Yg(r,s){var l=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var m=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?m=v=T:v=v.next=T,l=l.next}while(l!==null);v===null?m=v=s:v=v.next=s}else m=v=s;l={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:d.shared,effects:d.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function qu(r,s,l,d){var m=r.updateQueue;ns=!1;var v=m.firstBaseUpdate,T=m.lastBaseUpdate,N=m.shared.pending;if(N!==null){m.shared.pending=null;var U=N,J=U.next;U.next=null,T===null?v=J:T.next=J,T=U;var ae=r.alternate;ae!==null&&(ae=ae.updateQueue,N=ae.lastBaseUpdate,N!==T&&(N===null?ae.firstBaseUpdate=J:N.next=J,ae.lastBaseUpdate=U))}if(v!==null){var le=m.baseState;T=0,ae=J=U=null,N=v;do{var oe=N.lane,ye=N.eventTime;if((d&oe)===oe){ae!==null&&(ae=ae.next={eventTime:ye,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var Ee=r,Se=N;switch(oe=s,ye=l,Se.tag){case 1:if(Ee=Se.payload,typeof Ee=="function"){le=Ee.call(ye,le,oe);break e}le=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Se.payload,oe=typeof Ee=="function"?Ee.call(ye,le,oe):Ee,oe==null)break e;le=ue({},le,oe);break e;case 2:ns=!0}}N.callback!==null&&N.lane!==0&&(r.flags|=64,oe=m.effects,oe===null?m.effects=[N]:oe.push(N))}else ye={eventTime:ye,lane:oe,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ae===null?(J=ae=ye,U=le):ae=ae.next=ye,T|=oe;if(N=N.next,N===null){if(N=m.shared.pending,N===null)break;oe=N,N=oe.next,oe.next=null,m.lastBaseUpdate=oe,m.shared.pending=null}}while(!0);if(ae===null&&(U=le),m.baseState=U,m.firstBaseUpdate=J,m.lastBaseUpdate=ae,s=m.shared.interleaved,s!==null){m=s;do T|=m.lane,m=m.next;while(m!==s)}else v===null&&(m.shared.lanes=0);Xs|=T,r.lanes=T,r.memoizedState=le}}function Xg(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var d=r[s],m=d.callback;if(m!==null){if(d.callback=null,d=l,typeof m!="function")throw Error(n(191,m));m.call(d)}}}var tl={},Hr=Zi(tl),nl=Zi(tl),rl=Zi(tl);function Qs(r){if(r===tl)throw Error(n(174));return r}function Ed(r,s){switch(gt(rl,s),gt(nl,r),gt(Hr,tl),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:at(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=at(s,r)}_t(Hr),gt(Hr,s)}function Xo(){_t(Hr),_t(nl),_t(rl)}function Jg(r){Qs(rl.current);var s=Qs(Hr.current),l=at(s,r.type);s!==l&&(gt(nl,r),gt(Hr,l))}function Td(r){nl.current===r&&(_t(Hr),_t(nl))}var At=Zi(0);function Ku(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Sd=[];function Cd(){for(var r=0;r<Sd.length;r++)Sd[r]._workInProgressVersionPrimary=null;Sd.length=0}var Gu=ee.ReactCurrentDispatcher,Ad=ee.ReactCurrentBatchConfig,Ys=0,Pt=null,Bt=null,qt=null,Qu=!1,il=!1,sl=0,PS=0;function dn(){throw Error(n(321))}function Pd(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!vr(r[l],s[l]))return!1;return!0}function Id(r,s,l,d,m,v){if(Ys=v,Pt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Gu.current=r===null||r.memoizedState===null?DS:NS,r=l(d,m),il){v=0;do{if(il=!1,sl=0,25<=v)throw Error(n(301));v+=1,qt=Bt=null,s.updateQueue=null,Gu.current=bS,r=l(d,m)}while(il)}if(Gu.current=Ju,s=Bt!==null&&Bt.next!==null,Ys=0,qt=Bt=Pt=null,Qu=!1,s)throw Error(n(300));return r}function Rd(){var r=sl!==0;return sl=0,r}function Wr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?Pt.memoizedState=qt=r:qt=qt.next=r,qt}function sr(){if(Bt===null){var r=Pt.alternate;r=r!==null?r.memoizedState:null}else r=Bt.next;var s=qt===null?Pt.memoizedState:qt.next;if(s!==null)qt=s,Bt=r;else{if(r===null)throw Error(n(310));Bt=r,r={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},qt===null?Pt.memoizedState=qt=r:qt=qt.next=r}return qt}function ol(r,s){return typeof s=="function"?s(r):s}function kd(r){var s=sr(),l=s.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=r;var d=Bt,m=d.baseQueue,v=l.pending;if(v!==null){if(m!==null){var T=m.next;m.next=v.next,v.next=T}d.baseQueue=m=v,l.pending=null}if(m!==null){v=m.next,d=d.baseState;var N=T=null,U=null,J=v;do{var ae=J.lane;if((Ys&ae)===ae)U!==null&&(U=U.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),d=J.hasEagerState?J.eagerState:r(d,J.action);else{var le={lane:ae,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};U===null?(N=U=le,T=d):U=U.next=le,Pt.lanes|=ae,Xs|=ae}J=J.next}while(J!==null&&J!==v);U===null?T=d:U.next=N,vr(d,s.memoizedState)||(Nn=!0),s.memoizedState=d,s.baseState=T,s.baseQueue=U,l.lastRenderedState=d}if(r=l.interleaved,r!==null){m=r;do v=m.lane,Pt.lanes|=v,Xs|=v,m=m.next;while(m!==r)}else m===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Dd(r){var s=sr(),l=s.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=r;var d=l.dispatch,m=l.pending,v=s.memoizedState;if(m!==null){l.pending=null;var T=m=m.next;do v=r(v,T.action),T=T.next;while(T!==m);vr(v,s.memoizedState)||(Nn=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),l.lastRenderedState=v}return[v,d]}function Zg(){}function ey(r,s){var l=Pt,d=sr(),m=s(),v=!vr(d.memoizedState,m);if(v&&(d.memoizedState=m,Nn=!0),d=d.queue,Nd(ry.bind(null,l,d,r),[r]),d.getSnapshot!==s||v||qt!==null&&qt.memoizedState.tag&1){if(l.flags|=2048,al(9,ny.bind(null,l,d,m,s),void 0,null),Kt===null)throw Error(n(349));(Ys&30)!==0||ty(l,s,m)}return m}function ty(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=Pt.updateQueue,s===null?(s={lastEffect:null,stores:null},Pt.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function ny(r,s,l,d){s.value=l,s.getSnapshot=d,iy(s)&&sy(r)}function ry(r,s,l){return l(function(){iy(s)&&sy(r)})}function iy(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!vr(r,l)}catch{return!0}}function sy(r){var s=xi(r,1);s!==null&&Tr(s,r,1,-1)}function oy(r){var s=Wr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:r},s.queue=r,r=r.dispatch=kS.bind(null,Pt,r),[s.memoizedState,r]}function al(r,s,l,d){return r={tag:r,create:s,destroy:l,deps:d,next:null},s=Pt.updateQueue,s===null?(s={lastEffect:null,stores:null},Pt.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(d=l.next,l.next=r,r.next=d,s.lastEffect=r)),r}function ay(){return sr().memoizedState}function Yu(r,s,l,d){var m=Wr();Pt.flags|=r,m.memoizedState=al(1|s,l,void 0,d===void 0?null:d)}function Xu(r,s,l,d){var m=sr();d=d===void 0?null:d;var v=void 0;if(Bt!==null){var T=Bt.memoizedState;if(v=T.destroy,d!==null&&Pd(d,T.deps)){m.memoizedState=al(s,l,v,d);return}}Pt.flags|=r,m.memoizedState=al(1|s,l,v,d)}function ly(r,s){return Yu(8390656,8,r,s)}function Nd(r,s){return Xu(2048,8,r,s)}function uy(r,s){return Xu(4,2,r,s)}function cy(r,s){return Xu(4,4,r,s)}function hy(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function dy(r,s,l){return l=l!=null?l.concat([r]):null,Xu(4,4,hy.bind(null,s,r),l)}function bd(){}function fy(r,s){var l=sr();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&Pd(s,d[1])?d[0]:(l.memoizedState=[r,s],r)}function py(r,s){var l=sr();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&Pd(s,d[1])?d[0]:(r=r(),l.memoizedState=[r,s],r)}function my(r,s,l){return(Ys&21)===0?(r.baseState&&(r.baseState=!1,Nn=!0),r.memoizedState=l):(vr(l,s)||(l=Os(),Pt.lanes|=l,Xs|=l,r.baseState=!0),s)}function IS(r,s){var l=qe;qe=l!==0&&4>l?l:4,r(!0);var d=Ad.transition;Ad.transition={};try{r(!1),s()}finally{qe=l,Ad.transition=d}}function gy(){return sr().memoizedState}function RS(r,s,l){var d=as(r);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},yy(r))vy(s,l);else if(l=Gg(r,s,l,d),l!==null){var m=Cn();Tr(l,r,d,m),_y(l,s,d)}}function kS(r,s,l){var d=as(r),m={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(yy(r))vy(s,m);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var T=s.lastRenderedState,N=v(T,l);if(m.hasEagerState=!0,m.eagerState=N,vr(N,T)){var U=s.interleaved;U===null?(m.next=m,wd(s)):(m.next=U.next,U.next=m),s.interleaved=m;return}}catch{}finally{}l=Gg(r,s,m,d),l!==null&&(m=Cn(),Tr(l,r,d,m),_y(l,s,d))}}function yy(r){var s=r.alternate;return r===Pt||s!==null&&s===Pt}function vy(r,s){il=Qu=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function _y(r,s,l){if((l&4194240)!==0){var d=s.lanes;d&=r.pendingLanes,l|=d,s.lanes=l,qi(r,l)}}var Ju={readContext:ir,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},DS={readContext:ir,useCallback:function(r,s){return Wr().memoizedState=[r,s===void 0?null:s],r},useContext:ir,useEffect:ly,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,Yu(4194308,4,hy.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Yu(4194308,4,r,s)},useInsertionEffect:function(r,s){return Yu(4,2,r,s)},useMemo:function(r,s){var l=Wr();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var d=Wr();return s=l!==void 0?l(s):s,d.memoizedState=d.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},d.queue=r,r=r.dispatch=RS.bind(null,Pt,r),[d.memoizedState,r]},useRef:function(r){var s=Wr();return r={current:r},s.memoizedState=r},useState:oy,useDebugValue:bd,useDeferredValue:function(r){return Wr().memoizedState=r},useTransition:function(){var r=oy(!1),s=r[0];return r=IS.bind(null,r[1]),Wr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var d=Pt,m=Wr();if(St){if(l===void 0)throw Error(n(407));l=l()}else{if(l=s(),Kt===null)throw Error(n(349));(Ys&30)!==0||ty(d,s,l)}m.memoizedState=l;var v={value:l,getSnapshot:s};return m.queue=v,ly(ry.bind(null,d,v,r),[r]),d.flags|=2048,al(9,ny.bind(null,d,v,l,s),void 0,null),l},useId:function(){var r=Wr(),s=Kt.identifierPrefix;if(St){var l=wi,d=_i;l=(d&~(1<<32-Yt(d)-1)).toString(32)+l,s=":"+s+"R"+l,l=sl++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=PS++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},NS={readContext:ir,useCallback:fy,useContext:ir,useEffect:Nd,useImperativeHandle:dy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:py,useReducer:kd,useRef:ay,useState:function(){return kd(ol)},useDebugValue:bd,useDeferredValue:function(r){var s=sr();return my(s,Bt.memoizedState,r)},useTransition:function(){var r=kd(ol)[0],s=sr().memoizedState;return[r,s]},useMutableSource:Zg,useSyncExternalStore:ey,useId:gy,unstable_isNewReconciler:!1},bS={readContext:ir,useCallback:fy,useContext:ir,useEffect:Nd,useImperativeHandle:dy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:py,useReducer:Dd,useRef:ay,useState:function(){return Dd(ol)},useDebugValue:bd,useDeferredValue:function(r){var s=sr();return Bt===null?s.memoizedState=r:my(s,Bt.memoizedState,r)},useTransition:function(){var r=Dd(ol)[0],s=sr().memoizedState;return[r,s]},useMutableSource:Zg,useSyncExternalStore:ey,useId:gy,unstable_isNewReconciler:!1};function wr(r,s){if(r&&r.defaultProps){s=ue({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}function Vd(r,s,l,d){s=r.memoizedState,l=l(d,s),l=l==null?s:ue({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Zu={isMounted:function(r){return(r=r._reactInternals)?ut(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var d=Cn(),m=as(r),v=Ei(d,m);v.payload=s,l!=null&&(v.callback=l),s=rs(r,v,m),s!==null&&(Tr(s,r,m,d),Wu(s,r,m))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var d=Cn(),m=as(r),v=Ei(d,m);v.tag=1,v.payload=s,l!=null&&(v.callback=l),s=rs(r,v,m),s!==null&&(Tr(s,r,m,d),Wu(s,r,m))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Cn(),d=as(r),m=Ei(l,d);m.tag=2,s!=null&&(m.callback=s),s=rs(r,m,d),s!==null&&(Tr(s,r,d,l),Wu(s,r,d))}};function wy(r,s,l,d,m,v,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,v,T):s.prototype&&s.prototype.isPureReactComponent?!Ka(l,d)||!Ka(m,v):!0}function xy(r,s,l){var d=!1,m=es,v=s.contextType;return typeof v=="object"&&v!==null?v=ir(v):(m=Dn(s)?Ws:hn.current,d=s.contextTypes,v=(d=d!=null)?Ho(r,m):es),s=new s(l,v),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Zu,r.stateNode=s,s._reactInternals=r,d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=m,r.__reactInternalMemoizedMaskedChildContext=v),s}function Ey(r,s,l,d){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==r&&Zu.enqueueReplaceState(s,s.state,null)}function Ld(r,s,l,d){var m=r.stateNode;m.props=l,m.state=r.memoizedState,m.refs={},xd(r);var v=s.contextType;typeof v=="object"&&v!==null?m.context=ir(v):(v=Dn(s)?Ws:hn.current,m.context=Ho(r,v)),m.state=r.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(Vd(r,s,v,l),m.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(s=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),s!==m.state&&Zu.enqueueReplaceState(m,m.state,null),qu(r,l,m,d),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308)}function Jo(r,s){try{var l="",d=s;do l+=je(d),d=d.return;while(d);var m=l}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:r,source:s,stack:m,digest:null}}function Md(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function jd(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var VS=typeof WeakMap=="function"?WeakMap:Map;function Ty(r,s,l){l=Ei(-1,l),l.tag=3,l.payload={element:null};var d=s.value;return l.callback=function(){oc||(oc=!0,Jd=d),jd(r,s)},l}function Sy(r,s,l){l=Ei(-1,l),l.tag=3;var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var m=s.value;l.payload=function(){return d(m)},l.callback=function(){jd(r,s)}}var v=r.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){jd(r,s),typeof d!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var T=s.stack;this.componentDidCatch(s.value,{componentStack:T!==null?T:""})}),l}function Cy(r,s,l){var d=r.pingCache;if(d===null){d=r.pingCache=new VS;var m=new Set;d.set(s,m)}else m=d.get(s),m===void 0&&(m=new Set,d.set(s,m));m.has(l)||(m.add(l),r=GS.bind(null,r,s,l),s.then(r,r))}function Ay(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Py(r,s,l,d,m){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Ei(-1,1),s.tag=2,rs(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=m,r)}var LS=ee.ReactCurrentOwner,Nn=!1;function Sn(r,s,l,d){s.child=r===null?Kg(s,null,l,d):Go(s,r.child,l,d)}function Iy(r,s,l,d,m){l=l.render;var v=s.ref;return Yo(s,m),d=Id(r,s,l,d,v,m),l=Rd(),r!==null&&!Nn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~m,Ti(r,s,m)):(St&&l&&hd(s),s.flags|=1,Sn(r,s,d,m),s.child)}function Ry(r,s,l,d,m){if(r===null){var v=l.type;return typeof v=="function"&&!of(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=v,ky(r,s,v,d,m)):(r=dc(l.type,null,d,s,s.mode,m),r.ref=s.ref,r.return=s,s.child=r)}if(v=r.child,(r.lanes&m)===0){var T=v.memoizedProps;if(l=l.compare,l=l!==null?l:Ka,l(T,d)&&r.ref===s.ref)return Ti(r,s,m)}return s.flags|=1,r=us(v,d),r.ref=s.ref,r.return=s,s.child=r}function ky(r,s,l,d,m){if(r!==null){var v=r.memoizedProps;if(Ka(v,d)&&r.ref===s.ref)if(Nn=!1,s.pendingProps=d=v,(r.lanes&m)!==0)(r.flags&131072)!==0&&(Nn=!0);else return s.lanes=r.lanes,Ti(r,s,m)}return Fd(r,s,l,d,m)}function Dy(r,s,l){var d=s.pendingProps,m=d.children,v=r!==null?r.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(ea,Hn),Hn|=l;else{if((l&1073741824)===0)return r=v!==null?v.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,gt(ea,Hn),Hn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=v!==null?v.baseLanes:l,gt(ea,Hn),Hn|=d}else v!==null?(d=v.baseLanes|l,s.memoizedState=null):d=l,gt(ea,Hn),Hn|=d;return Sn(r,s,m,l),s.child}function Ny(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Fd(r,s,l,d,m){var v=Dn(l)?Ws:hn.current;return v=Ho(s,v),Yo(s,m),l=Id(r,s,l,d,v,m),d=Rd(),r!==null&&!Nn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~m,Ti(r,s,m)):(St&&d&&hd(s),s.flags|=1,Sn(r,s,l,m),s.child)}function by(r,s,l,d,m){if(Dn(l)){var v=!0;ju(s)}else v=!1;if(Yo(s,m),s.stateNode===null)tc(r,s),xy(s,l,d),Ld(s,l,d,m),d=!0;else if(r===null){var T=s.stateNode,N=s.memoizedProps;T.props=N;var U=T.context,J=l.contextType;typeof J=="object"&&J!==null?J=ir(J):(J=Dn(l)?Ws:hn.current,J=Ho(s,J));var ae=l.getDerivedStateFromProps,le=typeof ae=="function"||typeof T.getSnapshotBeforeUpdate=="function";le||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(N!==d||U!==J)&&Ey(s,T,d,J),ns=!1;var oe=s.memoizedState;T.state=oe,qu(s,d,T,m),U=s.memoizedState,N!==d||oe!==U||kn.current||ns?(typeof ae=="function"&&(Vd(s,l,ae,d),U=s.memoizedState),(N=ns||wy(s,l,N,d,oe,U,J))?(le||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(s.flags|=4194308)):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=U),T.props=d,T.state=U,T.context=J,d=N):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{T=s.stateNode,Qg(r,s),N=s.memoizedProps,J=s.type===s.elementType?N:wr(s.type,N),T.props=J,le=s.pendingProps,oe=T.context,U=l.contextType,typeof U=="object"&&U!==null?U=ir(U):(U=Dn(l)?Ws:hn.current,U=Ho(s,U));var ye=l.getDerivedStateFromProps;(ae=typeof ye=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(N!==le||oe!==U)&&Ey(s,T,d,U),ns=!1,oe=s.memoizedState,T.state=oe,qu(s,d,T,m);var Ee=s.memoizedState;N!==le||oe!==Ee||kn.current||ns?(typeof ye=="function"&&(Vd(s,l,ye,d),Ee=s.memoizedState),(J=ns||wy(s,l,J,d,oe,Ee,U)||!1)?(ae||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(d,Ee,U),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(d,Ee,U)),typeof T.componentDidUpdate=="function"&&(s.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof T.componentDidUpdate!="function"||N===r.memoizedProps&&oe===r.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&oe===r.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=Ee),T.props=d,T.state=Ee,T.context=U,d=J):(typeof T.componentDidUpdate!="function"||N===r.memoizedProps&&oe===r.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&oe===r.memoizedState||(s.flags|=1024),d=!1)}return Od(r,s,l,d,v,m)}function Od(r,s,l,d,m,v){Ny(r,s);var T=(s.flags&128)!==0;if(!d&&!T)return m&&Fg(s,l,!1),Ti(r,s,v);d=s.stateNode,LS.current=s;var N=T&&typeof l.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,r!==null&&T?(s.child=Go(s,r.child,null,v),s.child=Go(s,null,N,v)):Sn(r,s,N,v),s.memoizedState=d.state,m&&Fg(s,l,!0),s.child}function Vy(r){var s=r.stateNode;s.pendingContext?Mg(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Mg(r,s.context,!1),Ed(r,s.containerInfo)}function Ly(r,s,l,d,m){return Ko(),md(m),s.flags|=256,Sn(r,s,l,d),s.child}var Ud={dehydrated:null,treeContext:null,retryLane:0};function Bd(r){return{baseLanes:r,cachePool:null,transitions:null}}function My(r,s,l){var d=s.pendingProps,m=At.current,v=!1,T=(s.flags&128)!==0,N;if((N=T)||(N=r!==null&&r.memoizedState===null?!1:(m&2)!==0),N?(v=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(m|=1),gt(At,m&1),r===null)return pd(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(T=d.children,r=d.fallback,v?(d=s.mode,v=s.child,T={mode:"hidden",children:T},(d&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=T):v=fc(T,d,0,null),r=to(r,d,l,null),v.return=s,r.return=s,v.sibling=r,s.child=v,s.child.memoizedState=Bd(l),s.memoizedState=Ud,r):zd(s,T));if(m=r.memoizedState,m!==null&&(N=m.dehydrated,N!==null))return MS(r,s,T,d,N,m,l);if(v){v=d.fallback,T=s.mode,m=r.child,N=m.sibling;var U={mode:"hidden",children:d.children};return(T&1)===0&&s.child!==m?(d=s.child,d.childLanes=0,d.pendingProps=U,s.deletions=null):(d=us(m,U),d.subtreeFlags=m.subtreeFlags&14680064),N!==null?v=us(N,v):(v=to(v,T,l,null),v.flags|=2),v.return=s,d.return=s,d.sibling=v,s.child=d,d=v,v=s.child,T=r.child.memoizedState,T=T===null?Bd(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},v.memoizedState=T,v.childLanes=r.childLanes&~l,s.memoizedState=Ud,d}return v=r.child,r=v.sibling,d=us(v,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=l),d.return=s,d.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=d,s.memoizedState=null,d}function zd(r,s){return s=fc({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function ec(r,s,l,d){return d!==null&&md(d),Go(s,r.child,null,l),r=zd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function MS(r,s,l,d,m,v,T){if(l)return s.flags&256?(s.flags&=-257,d=Md(Error(n(422))),ec(r,s,T,d)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(v=d.fallback,m=s.mode,d=fc({mode:"visible",children:d.children},m,0,null),v=to(v,m,T,null),v.flags|=2,d.return=s,v.return=s,d.sibling=v,s.child=d,(s.mode&1)!==0&&Go(s,r.child,null,T),s.child.memoizedState=Bd(T),s.memoizedState=Ud,v);if((s.mode&1)===0)return ec(r,s,T,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var N=d.dgst;return d=N,v=Error(n(419)),d=Md(v,d,void 0),ec(r,s,T,d)}if(N=(T&r.childLanes)!==0,Nn||N){if(d=Kt,d!==null){switch(T&-T){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(d.suspendedLanes|T))!==0?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,xi(r,m),Tr(d,r,m,-1))}return sf(),d=Md(Error(n(421))),ec(r,s,T,d)}return m.data==="$?"?(s.flags|=128,s.child=r.child,s=QS.bind(null,r),m._reactRetry=s,null):(r=v.treeContext,$n=Ji(m.nextSibling),zn=s,St=!0,_r=null,r!==null&&(nr[rr++]=_i,nr[rr++]=wi,nr[rr++]=qs,_i=r.id,wi=r.overflow,qs=s),s=zd(s,d.children),s.flags|=4096,s)}function jy(r,s,l){r.lanes|=s;var d=r.alternate;d!==null&&(d.lanes|=s),_d(r.return,s,l)}function $d(r,s,l,d,m){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=l,v.tailMode=m)}function Fy(r,s,l){var d=s.pendingProps,m=d.revealOrder,v=d.tail;if(Sn(r,s,d.children,l),d=At.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&jy(r,l,s);else if(r.tag===19)jy(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}if(gt(At,d),(s.mode&1)===0)s.memoizedState=null;else switch(m){case"forwards":for(l=s.child,m=null;l!==null;)r=l.alternate,r!==null&&Ku(r)===null&&(m=l),l=l.sibling;l=m,l===null?(m=s.child,s.child=null):(m=l.sibling,l.sibling=null),$d(s,!1,m,l,v);break;case"backwards":for(l=null,m=s.child,s.child=null;m!==null;){if(r=m.alternate,r!==null&&Ku(r)===null){s.child=m;break}r=m.sibling,m.sibling=l,l=m,m=r}$d(s,!0,l,null,v);break;case"together":$d(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function tc(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Ti(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),Xs|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(n(153));if(s.child!==null){for(r=s.child,l=us(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=us(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function jS(r,s,l){switch(s.tag){case 3:Vy(s),Ko();break;case 5:Jg(s);break;case 1:Dn(s.type)&&ju(s);break;case 4:Ed(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,m=s.memoizedProps.value;gt($u,d._currentValue),d._currentValue=m;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(gt(At,At.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?My(r,s,l):(gt(At,At.current&1),r=Ti(r,s,l),r!==null?r.sibling:null);gt(At,At.current&1);break;case 19:if(d=(l&s.childLanes)!==0,(r.flags&128)!==0){if(d)return Fy(r,s,l);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),gt(At,At.current),d)break;return null;case 22:case 23:return s.lanes=0,Dy(r,s,l)}return Ti(r,s,l)}var Oy,Hd,Uy,By;Oy=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Hd=function(){},Uy=function(r,s,l,d){var m=r.memoizedProps;if(m!==d){r=s.stateNode,Qs(Hr.current);var v=null;switch(l){case"input":m=wn(r,m),d=wn(r,d),v=[];break;case"select":m=ue({},m,{value:void 0}),d=ue({},d,{value:void 0}),v=[];break;case"textarea":m=Fn(r,m),d=Fn(r,d),v=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(r.onclick=Vu)}Ui(l,d);var T;l=null;for(J in m)if(!d.hasOwnProperty(J)&&m.hasOwnProperty(J)&&m[J]!=null)if(J==="style"){var N=m[J];for(T in N)N.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(o.hasOwnProperty(J)?v||(v=[]):(v=v||[]).push(J,null));for(J in d){var U=d[J];if(N=m!=null?m[J]:void 0,d.hasOwnProperty(J)&&U!==N&&(U!=null||N!=null))if(J==="style")if(N){for(T in N)!N.hasOwnProperty(T)||U&&U.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in U)U.hasOwnProperty(T)&&N[T]!==U[T]&&(l||(l={}),l[T]=U[T])}else l||(v||(v=[]),v.push(J,l)),l=U;else J==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,N=N?N.__html:void 0,U!=null&&N!==U&&(v=v||[]).push(J,U)):J==="children"?typeof U!="string"&&typeof U!="number"||(v=v||[]).push(J,""+U):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(o.hasOwnProperty(J)?(U!=null&&J==="onScroll"&&vt("scroll",r),v||N===U||(v=[])):(v=v||[]).push(J,U))}l&&(v=v||[]).push("style",l);var J=v;(s.updateQueue=J)&&(s.flags|=4)}},By=function(r,s,l,d){l!==d&&(s.flags|=4)};function ll(r,s){if(!St)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function fn(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,d=0;if(s)for(var m=r.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=d,r.childLanes=l,s}function FS(r,s,l){var d=s.pendingProps;switch(dd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(s),null;case 1:return Dn(s.type)&&Mu(),fn(s),null;case 3:return d=s.stateNode,Xo(),_t(kn),_t(hn),Cd(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(r===null||r.child===null)&&(Bu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,_r!==null&&(tf(_r),_r=null))),Hd(r,s),fn(s),null;case 5:Td(s);var m=Qs(rl.current);if(l=s.type,r!==null&&s.stateNode!=null)Uy(r,s,l,d,m),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(n(166));return fn(s),null}if(r=Qs(Hr.current),Bu(s)){d=s.stateNode,l=s.type;var v=s.memoizedProps;switch(d[$r]=s,d[Ja]=v,r=(s.mode&1)!==0,l){case"dialog":vt("cancel",d),vt("close",d);break;case"iframe":case"object":case"embed":vt("load",d);break;case"video":case"audio":for(m=0;m<Qa.length;m++)vt(Qa[m],d);break;case"source":vt("error",d);break;case"img":case"image":case"link":vt("error",d),vt("load",d);break;case"details":vt("toggle",d);break;case"input":Li(d,v),vt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!v.multiple},vt("invalid",d);break;case"textarea":Gn(d,v),vt("invalid",d)}Ui(l,v),m=null;for(var T in v)if(v.hasOwnProperty(T)){var N=v[T];T==="children"?typeof N=="string"?d.textContent!==N&&(v.suppressHydrationWarning!==!0&&bu(d.textContent,N,r),m=["children",N]):typeof N=="number"&&d.textContent!==""+N&&(v.suppressHydrationWarning!==!0&&bu(d.textContent,N,r),m=["children",""+N]):o.hasOwnProperty(T)&&N!=null&&T==="onScroll"&&vt("scroll",d)}switch(l){case"input":an(d),To(d,v,!0);break;case"textarea":an(d),oi(d);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(d.onclick=Vu)}d=m,s.updateQueue=d,d!==null&&(s.flags|=4)}else{T=m.nodeType===9?m:m.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=ft(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=T.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof d.is=="string"?r=T.createElement(l,{is:d.is}):(r=T.createElement(l),l==="select"&&(T=r,d.multiple?T.multiple=!0:d.size&&(T.size=d.size))):r=T.createElementNS(r,l),r[$r]=s,r[Ja]=d,Oy(r,s,!1,!1),s.stateNode=r;e:{switch(T=Nr(l,d),l){case"dialog":vt("cancel",r),vt("close",r),m=d;break;case"iframe":case"object":case"embed":vt("load",r),m=d;break;case"video":case"audio":for(m=0;m<Qa.length;m++)vt(Qa[m],r);m=d;break;case"source":vt("error",r),m=d;break;case"img":case"image":case"link":vt("error",r),vt("load",r),m=d;break;case"details":vt("toggle",r),m=d;break;case"input":Li(r,d),m=wn(r,d),vt("invalid",r);break;case"option":m=d;break;case"select":r._wrapperState={wasMultiple:!!d.multiple},m=ue({},d,{value:void 0}),vt("invalid",r);break;case"textarea":Gn(r,d),m=Fn(r,d),vt("invalid",r);break;default:m=d}Ui(l,m),N=m;for(v in N)if(N.hasOwnProperty(v)){var U=N[v];v==="style"?Oi(r,U):v==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&ai(r,U)):v==="children"?typeof U=="string"?(l!=="textarea"||U!=="")&&kr(r,U):typeof U=="number"&&kr(r,""+U):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?U!=null&&v==="onScroll"&&vt("scroll",r):U!=null&&W(r,v,U,T))}switch(l){case"input":an(r),To(r,d,!1);break;case"textarea":an(r),oi(r);break;case"option":d.value!=null&&r.setAttribute("value",""+nt(d.value));break;case"select":r.multiple=!!d.multiple,v=d.value,v!=null?dr(r,!!d.multiple,v,!1):d.defaultValue!=null&&dr(r,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(r.onclick=Vu)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return fn(s),null;case 6:if(r&&s.stateNode!=null)By(r,s,r.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(n(166));if(l=Qs(rl.current),Qs(Hr.current),Bu(s)){if(d=s.stateNode,l=s.memoizedProps,d[$r]=s,(v=d.nodeValue!==l)&&(r=zn,r!==null))switch(r.tag){case 3:bu(d.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&bu(d.nodeValue,l,(r.mode&1)!==0)}v&&(s.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[$r]=s,s.stateNode=d}return fn(s),null;case 13:if(_t(At),d=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(St&&$n!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Hg(),Ko(),s.flags|=98560,v=!1;else if(v=Bu(s),d!==null&&d.dehydrated!==null){if(r===null){if(!v)throw Error(n(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[$r]=s}else Ko(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;fn(s),v=!1}else _r!==null&&(tf(_r),_r=null),v=!0;if(!v)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(d=d!==null,d!==(r!==null&&r.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(At.current&1)!==0?zt===0&&(zt=3):sf())),s.updateQueue!==null&&(s.flags|=4),fn(s),null);case 4:return Xo(),Hd(r,s),r===null&&Ya(s.stateNode.containerInfo),fn(s),null;case 10:return vd(s.type._context),fn(s),null;case 17:return Dn(s.type)&&Mu(),fn(s),null;case 19:if(_t(At),v=s.memoizedState,v===null)return fn(s),null;if(d=(s.flags&128)!==0,T=v.rendering,T===null)if(d)ll(v,!1);else{if(zt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(T=Ku(r),T!==null){for(s.flags|=128,ll(v,!1),d=T.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=l,l=s.child;l!==null;)v=l,r=d,v.flags&=14680066,T=v.alternate,T===null?(v.childLanes=0,v.lanes=r,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=T.childLanes,v.lanes=T.lanes,v.child=T.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=T.memoizedProps,v.memoizedState=T.memoizedState,v.updateQueue=T.updateQueue,v.type=T.type,r=T.dependencies,v.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return gt(At,At.current&1|2),s.child}r=r.sibling}v.tail!==null&&Xe()>ta&&(s.flags|=128,d=!0,ll(v,!1),s.lanes=4194304)}else{if(!d)if(r=Ku(T),r!==null){if(s.flags|=128,d=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),ll(v,!0),v.tail===null&&v.tailMode==="hidden"&&!T.alternate&&!St)return fn(s),null}else 2*Xe()-v.renderingStartTime>ta&&l!==1073741824&&(s.flags|=128,d=!0,ll(v,!1),s.lanes=4194304);v.isBackwards?(T.sibling=s.child,s.child=T):(l=v.last,l!==null?l.sibling=T:s.child=T,v.last=T)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=Xe(),s.sibling=null,l=At.current,gt(At,d?l&1|2:l&1),s):(fn(s),null);case 22:case 23:return rf(),d=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(Hn&1073741824)!==0&&(fn(s),s.subtreeFlags&6&&(s.flags|=8192)):fn(s),null;case 24:return null;case 25:return null}throw Error(n(156,s.tag))}function OS(r,s){switch(dd(s),s.tag){case 1:return Dn(s.type)&&Mu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Xo(),_t(kn),_t(hn),Cd(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return Td(s),null;case 13:if(_t(At),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(n(340));Ko()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return _t(At),null;case 4:return Xo(),null;case 10:return vd(s.type._context),null;case 22:case 23:return rf(),null;case 24:return null;default:return null}}var nc=!1,pn=!1,US=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Zo(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){kt(r,s,d)}else l.current=null}function Wd(r,s,l){try{l()}catch(d){kt(r,s,d)}}var zy=!1;function BS(r,s){if(rd=Qi,r=wg(),Qh(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var m=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var T=0,N=-1,U=-1,J=0,ae=0,le=r,oe=null;t:for(;;){for(var ye;le!==l||m!==0&&le.nodeType!==3||(N=T+m),le!==v||d!==0&&le.nodeType!==3||(U=T+d),le.nodeType===3&&(T+=le.nodeValue.length),(ye=le.firstChild)!==null;)oe=le,le=ye;for(;;){if(le===r)break t;if(oe===l&&++J===m&&(N=T),oe===v&&++ae===d&&(U=T),(ye=le.nextSibling)!==null)break;le=oe,oe=le.parentNode}le=ye}l=N===-1||U===-1?null:{start:N,end:U}}else l=null}l=l||{start:0,end:0}}else l=null;for(id={focusedElem:r,selectionRange:l},Qi=!1,xe=s;xe!==null;)if(s=xe,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,xe=r;else for(;xe!==null;){s=xe;try{var Ee=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ee!==null){var Se=Ee.memoizedProps,Nt=Ee.memoizedState,G=s.stateNode,B=G.getSnapshotBeforeUpdate(s.elementType===s.type?Se:wr(s.type,Se),Nt);G.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var Y=s.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ce){kt(s,s.return,ce)}if(r=s.sibling,r!==null){r.return=s.return,xe=r;break}xe=s.return}return Ee=zy,zy=!1,Ee}function ul(r,s,l){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&r)===r){var v=m.destroy;m.destroy=void 0,v!==void 0&&Wd(s,l,v)}m=m.next}while(m!==d)}}function rc(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var d=l.create;l.destroy=d()}l=l.next}while(l!==s)}}function qd(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function $y(r){var s=r.alternate;s!==null&&(r.alternate=null,$y(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[$r],delete s[Ja],delete s[ld],delete s[TS],delete s[SS])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Hy(r){return r.tag===5||r.tag===3||r.tag===4}function Wy(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Hy(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Kd(r,s,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Vu));else if(d!==4&&(r=r.child,r!==null))for(Kd(r,s,l),r=r.sibling;r!==null;)Kd(r,s,l),r=r.sibling}function Gd(r,s,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(d!==4&&(r=r.child,r!==null))for(Gd(r,s,l),r=r.sibling;r!==null;)Gd(r,s,l),r=r.sibling}var Zt=null,xr=!1;function is(r,s,l){for(l=l.child;l!==null;)qy(r,s,l),l=l.sibling}function qy(r,s,l){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(pt,l)}catch{}switch(l.tag){case 5:pn||Zo(l,s);case 6:var d=Zt,m=xr;Zt=null,is(r,s,l),Zt=d,xr=m,Zt!==null&&(xr?(r=Zt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):Zt.removeChild(l.stateNode));break;case 18:Zt!==null&&(xr?(r=Zt,l=l.stateNode,r.nodeType===8?ad(r.parentNode,l):r.nodeType===1&&ad(r,l),gr(r)):ad(Zt,l.stateNode));break;case 4:d=Zt,m=xr,Zt=l.stateNode.containerInfo,xr=!0,is(r,s,l),Zt=d,xr=m;break;case 0:case 11:case 14:case 15:if(!pn&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var v=m,T=v.destroy;v=v.tag,T!==void 0&&((v&2)!==0||(v&4)!==0)&&Wd(l,s,T),m=m.next}while(m!==d)}is(r,s,l);break;case 1:if(!pn&&(Zo(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(N){kt(l,s,N)}is(r,s,l);break;case 21:is(r,s,l);break;case 22:l.mode&1?(pn=(d=pn)||l.memoizedState!==null,is(r,s,l),pn=d):is(r,s,l);break;default:is(r,s,l)}}function Ky(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new US),s.forEach(function(d){var m=YS.bind(null,r,d);l.has(d)||(l.add(d),d.then(m,m))})}}function Er(r,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];try{var v=r,T=s,N=T;e:for(;N!==null;){switch(N.tag){case 5:Zt=N.stateNode,xr=!1;break e;case 3:Zt=N.stateNode.containerInfo,xr=!0;break e;case 4:Zt=N.stateNode.containerInfo,xr=!0;break e}N=N.return}if(Zt===null)throw Error(n(160));qy(v,T,m),Zt=null,xr=!1;var U=m.alternate;U!==null&&(U.return=null),m.return=null}catch(J){kt(m,s,J)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Gy(s,r),s=s.sibling}function Gy(r,s){var l=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Er(s,r),qr(r),d&4){try{ul(3,r,r.return),rc(3,r)}catch(Se){kt(r,r.return,Se)}try{ul(5,r,r.return)}catch(Se){kt(r,r.return,Se)}}break;case 1:Er(s,r),qr(r),d&512&&l!==null&&Zo(l,l.return);break;case 5:if(Er(s,r),qr(r),d&512&&l!==null&&Zo(l,l.return),r.flags&32){var m=r.stateNode;try{kr(m,"")}catch(Se){kt(r,r.return,Se)}}if(d&4&&(m=r.stateNode,m!=null)){var v=r.memoizedProps,T=l!==null?l.memoizedProps:v,N=r.type,U=r.updateQueue;if(r.updateQueue=null,U!==null)try{N==="input"&&v.type==="radio"&&v.name!=null&&Vs(m,v),Nr(N,T);var J=Nr(N,v);for(T=0;T<U.length;T+=2){var ae=U[T],le=U[T+1];ae==="style"?Oi(m,le):ae==="dangerouslySetInnerHTML"?ai(m,le):ae==="children"?kr(m,le):W(m,ae,le,J)}switch(N){case"input":Mi(m,v);break;case"textarea":si(m,v);break;case"select":var oe=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var ye=v.value;ye!=null?dr(m,!!v.multiple,ye,!1):oe!==!!v.multiple&&(v.defaultValue!=null?dr(m,!!v.multiple,v.defaultValue,!0):dr(m,!!v.multiple,v.multiple?[]:"",!1))}m[Ja]=v}catch(Se){kt(r,r.return,Se)}}break;case 6:if(Er(s,r),qr(r),d&4){if(r.stateNode===null)throw Error(n(162));m=r.stateNode,v=r.memoizedProps;try{m.nodeValue=v}catch(Se){kt(r,r.return,Se)}}break;case 3:if(Er(s,r),qr(r),d&4&&l!==null&&l.memoizedState.isDehydrated)try{gr(s.containerInfo)}catch(Se){kt(r,r.return,Se)}break;case 4:Er(s,r),qr(r);break;case 13:Er(s,r),qr(r),m=r.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||(Xd=Xe())),d&4&&Ky(r);break;case 22:if(ae=l!==null&&l.memoizedState!==null,r.mode&1?(pn=(J=pn)||ae,Er(s,r),pn=J):Er(s,r),qr(r),d&8192){if(J=r.memoizedState!==null,(r.stateNode.isHidden=J)&&!ae&&(r.mode&1)!==0)for(xe=r,ae=r.child;ae!==null;){for(le=xe=ae;xe!==null;){switch(oe=xe,ye=oe.child,oe.tag){case 0:case 11:case 14:case 15:ul(4,oe,oe.return);break;case 1:Zo(oe,oe.return);var Ee=oe.stateNode;if(typeof Ee.componentWillUnmount=="function"){d=oe,l=oe.return;try{s=d,Ee.props=s.memoizedProps,Ee.state=s.memoizedState,Ee.componentWillUnmount()}catch(Se){kt(d,l,Se)}}break;case 5:Zo(oe,oe.return);break;case 22:if(oe.memoizedState!==null){Xy(le);continue}}ye!==null?(ye.return=oe,xe=ye):Xy(le)}ae=ae.sibling}e:for(ae=null,le=r;;){if(le.tag===5){if(ae===null){ae=le;try{m=le.stateNode,J?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(N=le.stateNode,U=le.memoizedProps.style,T=U!=null&&U.hasOwnProperty("display")?U.display:null,N.style.display=Fi("display",T))}catch(Se){kt(r,r.return,Se)}}}else if(le.tag===6){if(ae===null)try{le.stateNode.nodeValue=J?"":le.memoizedProps}catch(Se){kt(r,r.return,Se)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===r)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===r)break e;for(;le.sibling===null;){if(le.return===null||le.return===r)break e;ae===le&&(ae=null),le=le.return}ae===le&&(ae=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Er(s,r),qr(r),d&4&&Ky(r);break;case 21:break;default:Er(s,r),qr(r)}}function qr(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(Hy(l)){var d=l;break e}l=l.return}throw Error(n(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(kr(m,""),d.flags&=-33);var v=Wy(r);Gd(r,v,m);break;case 3:case 4:var T=d.stateNode.containerInfo,N=Wy(r);Kd(r,N,T);break;default:throw Error(n(161))}}catch(U){kt(r,r.return,U)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function zS(r,s,l){xe=r,Qy(r)}function Qy(r,s,l){for(var d=(r.mode&1)!==0;xe!==null;){var m=xe,v=m.child;if(m.tag===22&&d){var T=m.memoizedState!==null||nc;if(!T){var N=m.alternate,U=N!==null&&N.memoizedState!==null||pn;N=nc;var J=pn;if(nc=T,(pn=U)&&!J)for(xe=m;xe!==null;)T=xe,U=T.child,T.tag===22&&T.memoizedState!==null?Jy(m):U!==null?(U.return=T,xe=U):Jy(m);for(;v!==null;)xe=v,Qy(v),v=v.sibling;xe=m,nc=N,pn=J}Yy(r)}else(m.subtreeFlags&8772)!==0&&v!==null?(v.return=m,xe=v):Yy(r)}}function Yy(r){for(;xe!==null;){var s=xe;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:pn||rc(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!pn)if(l===null)d.componentDidMount();else{var m=s.elementType===s.type?l.memoizedProps:wr(s.type,l.memoizedProps);d.componentDidUpdate(m,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var v=s.updateQueue;v!==null&&Xg(s,v,d);break;case 3:var T=s.updateQueue;if(T!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}Xg(s,T,l)}break;case 5:var N=s.stateNode;if(l===null&&s.flags&4){l=N;var U=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&l.focus();break;case"img":U.src&&(l.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var J=s.alternate;if(J!==null){var ae=J.memoizedState;if(ae!==null){var le=ae.dehydrated;le!==null&&gr(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}pn||s.flags&512&&qd(s)}catch(oe){kt(s,s.return,oe)}}if(s===r){xe=null;break}if(l=s.sibling,l!==null){l.return=s.return,xe=l;break}xe=s.return}}function Xy(r){for(;xe!==null;){var s=xe;if(s===r){xe=null;break}var l=s.sibling;if(l!==null){l.return=s.return,xe=l;break}xe=s.return}}function Jy(r){for(;xe!==null;){var s=xe;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{rc(4,s)}catch(U){kt(s,l,U)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var m=s.return;try{d.componentDidMount()}catch(U){kt(s,m,U)}}var v=s.return;try{qd(s)}catch(U){kt(s,v,U)}break;case 5:var T=s.return;try{qd(s)}catch(U){kt(s,T,U)}}}catch(U){kt(s,s.return,U)}if(s===r){xe=null;break}var N=s.sibling;if(N!==null){N.return=s.return,xe=N;break}xe=s.return}}var $S=Math.ceil,ic=ee.ReactCurrentDispatcher,Qd=ee.ReactCurrentOwner,or=ee.ReactCurrentBatchConfig,rt=0,Kt=null,jt=null,en=0,Hn=0,ea=Zi(0),zt=0,cl=null,Xs=0,sc=0,Yd=0,hl=null,bn=null,Xd=0,ta=1/0,Si=null,oc=!1,Jd=null,ss=null,ac=!1,os=null,lc=0,dl=0,Zd=null,uc=-1,cc=0;function Cn(){return(rt&6)!==0?Xe():uc!==-1?uc:uc=Xe()}function as(r){return(r.mode&1)===0?1:(rt&2)!==0&&en!==0?en&-en:AS.transition!==null?(cc===0&&(cc=Os()),cc):(r=qe,r!==0||(r=window.event,r=r===void 0?16:Ua(r.type)),r)}function Tr(r,s,l,d){if(50<dl)throw dl=0,Zd=null,Error(n(185));Wi(r,l,d),((rt&2)===0||r!==Kt)&&(r===Kt&&((rt&2)===0&&(sc|=l),zt===4&&ls(r,en)),Vn(r,d),l===1&&rt===0&&(s.mode&1)===0&&(ta=Xe()+500,Fu&&ts()))}function Vn(r,s){var l=r.callbackNode;di(r,s);var d=Fs(r,r===Kt?en:0);if(d===0)l!==null&&cn(l),r.callbackNode=null,r.callbackPriority=0;else if(s=d&-d,r.callbackPriority!==s){if(l!=null&&cn(l),s===1)r.tag===0?CS(ev.bind(null,r)):Og(ev.bind(null,r)),xS(function(){(rt&6)===0&&ts()}),l=null;else{switch(Ki(d)){case 1:l=Zn;break;case 4:l=We;break;case 16:l=ct;break;case 536870912:l=jr;break;default:l=ct}l=lv(l,Zy.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function Zy(r,s){if(uc=-1,cc=0,(rt&6)!==0)throw Error(n(327));var l=r.callbackNode;if(na()&&r.callbackNode!==l)return null;var d=Fs(r,r===Kt?en:0);if(d===0)return null;if((d&30)!==0||(d&r.expiredLanes)!==0||s)s=hc(r,d);else{s=d;var m=rt;rt|=2;var v=nv();(Kt!==r||en!==s)&&(Si=null,ta=Xe()+500,Zs(r,s));do try{qS();break}catch(N){tv(r,N)}while(!0);yd(),ic.current=v,rt=m,jt!==null?s=0:(Kt=null,en=0,s=zt)}if(s!==0){if(s===2&&(m=On(r),m!==0&&(d=m,s=ef(r,m))),s===1)throw l=cl,Zs(r,0),ls(r,d),Vn(r,Xe()),l;if(s===6)ls(r,d);else{if(m=r.current.alternate,(d&30)===0&&!HS(m)&&(s=hc(r,d),s===2&&(v=On(r),v!==0&&(d=v,s=ef(r,v))),s===1))throw l=cl,Zs(r,0),ls(r,d),Vn(r,Xe()),l;switch(r.finishedWork=m,r.finishedLanes=d,s){case 0:case 1:throw Error(n(345));case 2:eo(r,bn,Si);break;case 3:if(ls(r,d),(d&130023424)===d&&(s=Xd+500-Xe(),10<s)){if(Fs(r,0)!==0)break;if(m=r.suspendedLanes,(m&d)!==d){Cn(),r.pingedLanes|=r.suspendedLanes&m;break}r.timeoutHandle=od(eo.bind(null,r,bn,Si),s);break}eo(r,bn,Si);break;case 4:if(ls(r,d),(d&4194240)===d)break;for(s=r.eventTimes,m=-1;0<d;){var T=31-Yt(d);v=1<<T,T=s[T],T>m&&(m=T),d&=~v}if(d=m,d=Xe()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*$S(d/1960))-d,10<d){r.timeoutHandle=od(eo.bind(null,r,bn,Si),d);break}eo(r,bn,Si);break;case 5:eo(r,bn,Si);break;default:throw Error(n(329))}}}return Vn(r,Xe()),r.callbackNode===l?Zy.bind(null,r):null}function ef(r,s){var l=hl;return r.current.memoizedState.isDehydrated&&(Zs(r,s).flags|=256),r=hc(r,s),r!==2&&(s=bn,bn=l,s!==null&&tf(s)),r}function tf(r){bn===null?bn=r:bn.push.apply(bn,r)}function HS(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var m=l[d],v=m.getSnapshot;m=m.value;try{if(!vr(v(),m))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ls(r,s){for(s&=~Yd,s&=~sc,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-Yt(s),d=1<<l;r[l]=-1,s&=~d}}function ev(r){if((rt&6)!==0)throw Error(n(327));na();var s=Fs(r,0);if((s&1)===0)return Vn(r,Xe()),null;var l=hc(r,s);if(r.tag!==0&&l===2){var d=On(r);d!==0&&(s=d,l=ef(r,d))}if(l===1)throw l=cl,Zs(r,0),ls(r,s),Vn(r,Xe()),l;if(l===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,eo(r,bn,Si),Vn(r,Xe()),null}function nf(r,s){var l=rt;rt|=1;try{return r(s)}finally{rt=l,rt===0&&(ta=Xe()+500,Fu&&ts())}}function Js(r){os!==null&&os.tag===0&&(rt&6)===0&&na();var s=rt;rt|=1;var l=or.transition,d=qe;try{if(or.transition=null,qe=1,r)return r()}finally{qe=d,or.transition=l,rt=s,(rt&6)===0&&ts()}}function rf(){Hn=ea.current,_t(ea)}function Zs(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,wS(l)),jt!==null)for(l=jt.return;l!==null;){var d=l;switch(dd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Mu();break;case 3:Xo(),_t(kn),_t(hn),Cd();break;case 5:Td(d);break;case 4:Xo();break;case 13:_t(At);break;case 19:_t(At);break;case 10:vd(d.type._context);break;case 22:case 23:rf()}l=l.return}if(Kt=r,jt=r=us(r.current,null),en=Hn=s,zt=0,cl=null,Yd=sc=Xs=0,bn=hl=null,Gs!==null){for(s=0;s<Gs.length;s++)if(l=Gs[s],d=l.interleaved,d!==null){l.interleaved=null;var m=d.next,v=l.pending;if(v!==null){var T=v.next;v.next=m,d.next=T}l.pending=d}Gs=null}return r}function tv(r,s){do{var l=jt;try{if(yd(),Gu.current=Ju,Qu){for(var d=Pt.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}Qu=!1}if(Ys=0,qt=Bt=Pt=null,il=!1,sl=0,Qd.current=null,l===null||l.return===null){zt=1,cl=s,jt=null;break}e:{var v=r,T=l.return,N=l,U=s;if(s=en,N.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var J=U,ae=N,le=ae.tag;if((ae.mode&1)===0&&(le===0||le===11||le===15)){var oe=ae.alternate;oe?(ae.updateQueue=oe.updateQueue,ae.memoizedState=oe.memoizedState,ae.lanes=oe.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var ye=Ay(T);if(ye!==null){ye.flags&=-257,Py(ye,T,N,v,s),ye.mode&1&&Cy(v,J,s),s=ye,U=J;var Ee=s.updateQueue;if(Ee===null){var Se=new Set;Se.add(U),s.updateQueue=Se}else Ee.add(U);break e}else{if((s&1)===0){Cy(v,J,s),sf();break e}U=Error(n(426))}}else if(St&&N.mode&1){var Nt=Ay(T);if(Nt!==null){(Nt.flags&65536)===0&&(Nt.flags|=256),Py(Nt,T,N,v,s),md(Jo(U,N));break e}}v=U=Jo(U,N),zt!==4&&(zt=2),hl===null?hl=[v]:hl.push(v),v=T;do{switch(v.tag){case 3:v.flags|=65536,s&=-s,v.lanes|=s;var G=Ty(v,U,s);Yg(v,G);break e;case 1:N=U;var B=v.type,Y=v.stateNode;if((v.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(ss===null||!ss.has(Y)))){v.flags|=65536,s&=-s,v.lanes|=s;var ce=Sy(v,N,s);Yg(v,ce);break e}}v=v.return}while(v!==null)}iv(l)}catch(Pe){s=Pe,jt===l&&l!==null&&(jt=l=l.return);continue}break}while(!0)}function nv(){var r=ic.current;return ic.current=Ju,r===null?Ju:r}function sf(){(zt===0||zt===3||zt===2)&&(zt=4),Kt===null||(Xs&268435455)===0&&(sc&268435455)===0||ls(Kt,en)}function hc(r,s){var l=rt;rt|=2;var d=nv();(Kt!==r||en!==s)&&(Si=null,Zs(r,s));do try{WS();break}catch(m){tv(r,m)}while(!0);if(yd(),rt=l,ic.current=d,jt!==null)throw Error(n(261));return Kt=null,en=0,zt}function WS(){for(;jt!==null;)rv(jt)}function qS(){for(;jt!==null&&!zi();)rv(jt)}function rv(r){var s=av(r.alternate,r,Hn);r.memoizedProps=r.pendingProps,s===null?iv(r):jt=s,Qd.current=null}function iv(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=FS(l,s,Hn),l!==null){jt=l;return}}else{if(l=OS(l,s),l!==null){l.flags&=32767,jt=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{zt=6,jt=null;return}}if(s=s.sibling,s!==null){jt=s;return}jt=s=r}while(s!==null);zt===0&&(zt=5)}function eo(r,s,l){var d=qe,m=or.transition;try{or.transition=null,qe=1,KS(r,s,l,d)}finally{or.transition=m,qe=d}return null}function KS(r,s,l,d){do na();while(os!==null);if((rt&6)!==0)throw Error(n(327));l=r.finishedWork;var m=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var v=l.lanes|l.childLanes;if(mt(r,v),r===Kt&&(jt=Kt=null,en=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||ac||(ac=!0,lv(ct,function(){return na(),null})),v=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||v){v=or.transition,or.transition=null;var T=qe;qe=1;var N=rt;rt|=4,Qd.current=null,BS(r,l),Gy(l,r),fS(id),Qi=!!rd,id=rd=null,r.current=l,zS(l),ci(),rt=N,qe=T,or.transition=v}else r.current=l;if(ac&&(ac=!1,os=r,lc=m),v=r.pendingLanes,v===0&&(ss=null),js(l.stateNode),Vn(r,Xe()),s!==null)for(d=r.onRecoverableError,l=0;l<s.length;l++)m=s[l],d(m.value,{componentStack:m.stack,digest:m.digest});if(oc)throw oc=!1,r=Jd,Jd=null,r;return(lc&1)!==0&&r.tag!==0&&na(),v=r.pendingLanes,(v&1)!==0?r===Zd?dl++:(dl=0,Zd=r):dl=0,ts(),null}function na(){if(os!==null){var r=Ki(lc),s=or.transition,l=qe;try{if(or.transition=null,qe=16>r?16:r,os===null)var d=!1;else{if(r=os,os=null,lc=0,(rt&6)!==0)throw Error(n(331));var m=rt;for(rt|=4,xe=r.current;xe!==null;){var v=xe,T=v.child;if((xe.flags&16)!==0){var N=v.deletions;if(N!==null){for(var U=0;U<N.length;U++){var J=N[U];for(xe=J;xe!==null;){var ae=xe;switch(ae.tag){case 0:case 11:case 15:ul(8,ae,v)}var le=ae.child;if(le!==null)le.return=ae,xe=le;else for(;xe!==null;){ae=xe;var oe=ae.sibling,ye=ae.return;if($y(ae),ae===J){xe=null;break}if(oe!==null){oe.return=ye,xe=oe;break}xe=ye}}}var Ee=v.alternate;if(Ee!==null){var Se=Ee.child;if(Se!==null){Ee.child=null;do{var Nt=Se.sibling;Se.sibling=null,Se=Nt}while(Se!==null)}}xe=v}}if((v.subtreeFlags&2064)!==0&&T!==null)T.return=v,xe=T;else e:for(;xe!==null;){if(v=xe,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:ul(9,v,v.return)}var G=v.sibling;if(G!==null){G.return=v.return,xe=G;break e}xe=v.return}}var B=r.current;for(xe=B;xe!==null;){T=xe;var Y=T.child;if((T.subtreeFlags&2064)!==0&&Y!==null)Y.return=T,xe=Y;else e:for(T=B;xe!==null;){if(N=xe,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:rc(9,N)}}catch(Pe){kt(N,N.return,Pe)}if(N===T){xe=null;break e}var ce=N.sibling;if(ce!==null){ce.return=N.return,xe=ce;break e}xe=N.return}}if(rt=m,ts(),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(pt,r)}catch{}d=!0}return d}finally{qe=l,or.transition=s}}return!1}function sv(r,s,l){s=Jo(l,s),s=Ty(r,s,1),r=rs(r,s,1),s=Cn(),r!==null&&(Wi(r,1,s),Vn(r,s))}function kt(r,s,l){if(r.tag===3)sv(r,r,l);else for(;s!==null;){if(s.tag===3){sv(s,r,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ss===null||!ss.has(d))){r=Jo(l,r),r=Sy(s,r,1),s=rs(s,r,1),r=Cn(),s!==null&&(Wi(s,1,r),Vn(s,r));break}}s=s.return}}function GS(r,s,l){var d=r.pingCache;d!==null&&d.delete(s),s=Cn(),r.pingedLanes|=r.suspendedLanes&l,Kt===r&&(en&l)===l&&(zt===4||zt===3&&(en&130023424)===en&&500>Xe()-Xd?Zs(r,0):Yd|=l),Vn(r,s)}function ov(r,s){s===0&&((r.mode&1)===0?s=1:(s=Co,Co<<=1,(Co&130023424)===0&&(Co=4194304)));var l=Cn();r=xi(r,s),r!==null&&(Wi(r,s,l),Vn(r,l))}function QS(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),ov(r,l)}function YS(r,s){var l=0;switch(r.tag){case 13:var d=r.stateNode,m=r.memoizedState;m!==null&&(l=m.retryLane);break;case 19:d=r.stateNode;break;default:throw Error(n(314))}d!==null&&d.delete(s),ov(r,l)}var av;av=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||kn.current)Nn=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return Nn=!1,jS(r,s,l);Nn=(r.flags&131072)!==0}else Nn=!1,St&&(s.flags&1048576)!==0&&Ug(s,Uu,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;tc(r,s),r=s.pendingProps;var m=Ho(s,hn.current);Yo(s,l),m=Id(null,s,d,r,m,l);var v=Rd();return s.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Dn(d)?(v=!0,ju(s)):v=!1,s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,xd(s),m.updater=Zu,s.stateNode=m,m._reactInternals=s,Ld(s,d,r,l),s=Od(null,s,d,!0,v,l)):(s.tag=0,St&&v&&hd(s),Sn(null,s,m,l),s=s.child),s;case 16:d=s.elementType;e:{switch(tc(r,s),r=s.pendingProps,m=d._init,d=m(d._payload),s.type=d,m=s.tag=JS(d),r=wr(d,r),m){case 0:s=Fd(null,s,d,r,l);break e;case 1:s=by(null,s,d,r,l);break e;case 11:s=Iy(null,s,d,r,l);break e;case 14:s=Ry(null,s,d,wr(d.type,r),l);break e}throw Error(n(306,d,""))}return s;case 0:return d=s.type,m=s.pendingProps,m=s.elementType===d?m:wr(d,m),Fd(r,s,d,m,l);case 1:return d=s.type,m=s.pendingProps,m=s.elementType===d?m:wr(d,m),by(r,s,d,m,l);case 3:e:{if(Vy(s),r===null)throw Error(n(387));d=s.pendingProps,v=s.memoizedState,m=v.element,Qg(r,s),qu(s,d,null,l);var T=s.memoizedState;if(d=T.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){m=Jo(Error(n(423)),s),s=Ly(r,s,d,l,m);break e}else if(d!==m){m=Jo(Error(n(424)),s),s=Ly(r,s,d,l,m);break e}else for($n=Ji(s.stateNode.containerInfo.firstChild),zn=s,St=!0,_r=null,l=Kg(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ko(),d===m){s=Ti(r,s,l);break e}Sn(r,s,d,l)}s=s.child}return s;case 5:return Jg(s),r===null&&pd(s),d=s.type,m=s.pendingProps,v=r!==null?r.memoizedProps:null,T=m.children,sd(d,m)?T=null:v!==null&&sd(d,v)&&(s.flags|=32),Ny(r,s),Sn(r,s,T,l),s.child;case 6:return r===null&&pd(s),null;case 13:return My(r,s,l);case 4:return Ed(s,s.stateNode.containerInfo),d=s.pendingProps,r===null?s.child=Go(s,null,d,l):Sn(r,s,d,l),s.child;case 11:return d=s.type,m=s.pendingProps,m=s.elementType===d?m:wr(d,m),Iy(r,s,d,m,l);case 7:return Sn(r,s,s.pendingProps,l),s.child;case 8:return Sn(r,s,s.pendingProps.children,l),s.child;case 12:return Sn(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(d=s.type._context,m=s.pendingProps,v=s.memoizedProps,T=m.value,gt($u,d._currentValue),d._currentValue=T,v!==null)if(vr(v.value,T)){if(v.children===m.children&&!kn.current){s=Ti(r,s,l);break e}}else for(v=s.child,v!==null&&(v.return=s);v!==null;){var N=v.dependencies;if(N!==null){T=v.child;for(var U=N.firstContext;U!==null;){if(U.context===d){if(v.tag===1){U=Ei(-1,l&-l),U.tag=2;var J=v.updateQueue;if(J!==null){J=J.shared;var ae=J.pending;ae===null?U.next=U:(U.next=ae.next,ae.next=U),J.pending=U}}v.lanes|=l,U=v.alternate,U!==null&&(U.lanes|=l),_d(v.return,l,s),N.lanes|=l;break}U=U.next}}else if(v.tag===10)T=v.type===s.type?null:v.child;else if(v.tag===18){if(T=v.return,T===null)throw Error(n(341));T.lanes|=l,N=T.alternate,N!==null&&(N.lanes|=l),_d(T,l,s),T=v.sibling}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===s){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}Sn(r,s,m.children,l),s=s.child}return s;case 9:return m=s.type,d=s.pendingProps.children,Yo(s,l),m=ir(m),d=d(m),s.flags|=1,Sn(r,s,d,l),s.child;case 14:return d=s.type,m=wr(d,s.pendingProps),m=wr(d.type,m),Ry(r,s,d,m,l);case 15:return ky(r,s,s.type,s.pendingProps,l);case 17:return d=s.type,m=s.pendingProps,m=s.elementType===d?m:wr(d,m),tc(r,s),s.tag=1,Dn(d)?(r=!0,ju(s)):r=!1,Yo(s,l),xy(s,d,m),Ld(s,d,m,l),Od(null,s,d,!0,r,l);case 19:return Fy(r,s,l);case 22:return Dy(r,s,l)}throw Error(n(156,s.tag))};function lv(r,s){return un(r,s)}function XS(r,s,l,d){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(r,s,l,d){return new XS(r,s,l,d)}function of(r){return r=r.prototype,!(!r||!r.isReactComponent)}function JS(r){if(typeof r=="function")return of(r)?1:0;if(r!=null){if(r=r.$$typeof,r===$)return 11;if(r===xt)return 14}return 2}function us(r,s){var l=r.alternate;return l===null?(l=ar(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function dc(r,s,l,d,m,v){var T=2;if(d=r,typeof r=="function")of(r)&&(T=1);else if(typeof r=="string")T=5;else e:switch(r){case R:return to(l.children,m,v,s);case C:T=8,m|=8;break;case P:return r=ar(12,l,s,m|2),r.elementType=P,r.lanes=v,r;case V:return r=ar(13,l,s,m),r.elementType=V,r.lanes=v,r;case Qe:return r=ar(19,l,s,m),r.elementType=Qe,r.lanes=v,r;case Ae:return fc(l,m,v,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:T=10;break e;case O:T=9;break e;case $:T=11;break e;case xt:T=14;break e;case Ce:T=16,d=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return s=ar(T,l,s,m),s.elementType=r,s.type=d,s.lanes=v,s}function to(r,s,l,d){return r=ar(7,r,d,s),r.lanes=l,r}function fc(r,s,l,d){return r=ar(22,r,d,s),r.elementType=Ae,r.lanes=l,r.stateNode={isHidden:!1},r}function af(r,s,l){return r=ar(6,r,null,s),r.lanes=l,r}function lf(r,s,l){return s=ar(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function ZS(r,s,l,d,m){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hi(0),this.expirationTimes=Hi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hi(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function uf(r,s,l,d,m,v,T,N,U){return r=new ZS(r,s,l,N,U),s===1?(s=1,v===!0&&(s|=8)):s=0,v=ar(3,null,null,s),r.current=v,v.stateNode=r,v.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},xd(v),r}function e1(r,s,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:b,key:d==null?null:""+d,children:r,containerInfo:s,implementation:l}}function uv(r){if(!r)return es;r=r._reactInternals;e:{if(ut(r)!==r||r.tag!==1)throw Error(n(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Dn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(n(171))}if(r.tag===1){var l=r.type;if(Dn(l))return jg(r,l,s)}return s}function cv(r,s,l,d,m,v,T,N,U){return r=uf(l,d,!0,r,m,v,T,N,U),r.context=uv(null),l=r.current,d=Cn(),m=as(l),v=Ei(d,m),v.callback=s??null,rs(l,v,m),r.current.lanes=m,Wi(r,m,d),Vn(r,d),r}function pc(r,s,l,d){var m=s.current,v=Cn(),T=as(m);return l=uv(l),s.context===null?s.context=l:s.pendingContext=l,s=Ei(v,T),s.payload={element:r},d=d===void 0?null:d,d!==null&&(s.callback=d),r=rs(m,s,T),r!==null&&(Tr(r,m,T,v),Wu(r,m,T)),T}function mc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function hv(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function cf(r,s){hv(r,s),(r=r.alternate)&&hv(r,s)}function t1(){return null}var dv=typeof reportError=="function"?reportError:function(r){console.error(r)};function hf(r){this._internalRoot=r}gc.prototype.render=hf.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(n(409));pc(r,s,null,null)},gc.prototype.unmount=hf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Js(function(){pc(null,r,null,null)}),s[yi]=null}};function gc(r){this._internalRoot=r}gc.prototype.unstable_scheduleHydration=function(r){if(r){var s=gu();r={blockedOn:null,target:r,priority:s};for(var l=0;l<Or.length&&s!==0&&s<Or[l].priority;l++);Or.splice(l,0,r),l===0&&_u(r)}};function df(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function yc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function fv(){}function n1(r,s,l,d,m){if(m){if(typeof d=="function"){var v=d;d=function(){var J=mc(T);v.call(J)}}var T=cv(s,d,r,0,null,!1,!1,"",fv);return r._reactRootContainer=T,r[yi]=T.current,Ya(r.nodeType===8?r.parentNode:r),Js(),T}for(;m=r.lastChild;)r.removeChild(m);if(typeof d=="function"){var N=d;d=function(){var J=mc(U);N.call(J)}}var U=uf(r,0,!1,null,null,!1,!1,"",fv);return r._reactRootContainer=U,r[yi]=U.current,Ya(r.nodeType===8?r.parentNode:r),Js(function(){pc(s,U,l,d)}),U}function vc(r,s,l,d,m){var v=l._reactRootContainer;if(v){var T=v;if(typeof m=="function"){var N=m;m=function(){var U=mc(T);N.call(U)}}pc(s,T,r,m)}else T=n1(l,s,r,m,d);return mc(T)}pu=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=$i(s.pendingLanes);l!==0&&(qi(s,l|1),Vn(s,Xe()),(rt&6)===0&&(ta=Xe()+500,ts()))}break;case 13:Js(function(){var d=xi(r,1);if(d!==null){var m=Cn();Tr(d,r,1,m)}}),cf(r,1)}},Ao=function(r){if(r.tag===13){var s=xi(r,134217728);if(s!==null){var l=Cn();Tr(s,r,134217728,l)}cf(r,134217728)}},mu=function(r){if(r.tag===13){var s=as(r),l=xi(r,s);if(l!==null){var d=Cn();Tr(l,r,s,d)}cf(r,s)}},gu=function(){return qe},yu=function(r,s){var l=qe;try{return qe=r,s()}finally{qe=l}},Bi=function(r,s,l){switch(s){case"input":if(Mi(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==r&&d.form===r.form){var m=Lu(d);if(!m)throw Error(n(90));ii(d),Mi(d,m)}}}break;case"textarea":si(r,l);break;case"select":s=l.value,s!=null&&dr(r,!!l.multiple,s,!1)}},ui=nf,Ms=Js;var r1={usingClientEntryPoint:!1,Events:[Za,zo,Lu,En,Lr,nf]},fl={findFiberByHostInstance:Hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},i1={bundleType:fl.bundleType,version:fl.version,rendererPackageName:fl.rendererPackageName,rendererConfig:fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Xn(r),r===null?null:r.stateNode},findFiberByHostInstance:fl.findFiberByHostInstance||t1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_c.isDisabled&&_c.supportsFiber)try{pt=_c.inject(i1),Lt=_c}catch{}}return Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r1,Ln.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!df(s))throw Error(n(200));return e1(r,s,null,l)},Ln.createRoot=function(r,s){if(!df(r))throw Error(n(299));var l=!1,d="",m=dv;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),s=uf(r,1,!1,null,null,l,!1,d,m),r[yi]=s.current,Ya(r.nodeType===8?r.parentNode:r),new hf(s)},Ln.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=Xn(s),r=r===null?null:r.stateNode,r},Ln.flushSync=function(r){return Js(r)},Ln.hydrate=function(r,s,l){if(!yc(s))throw Error(n(200));return vc(null,r,s,!0,l)},Ln.hydrateRoot=function(r,s,l){if(!df(r))throw Error(n(405));var d=l!=null&&l.hydratedSources||null,m=!1,v="",T=dv;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),s=cv(s,null,r,1,l??null,m,!1,v,T),r[yi]=s.current,Ya(r),d)for(r=0;r<d.length;r++)l=d[r],m=l._getVersion,m=m(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,m]:s.mutableSourceEagerHydrationData.push(l,m);return new gc(s)},Ln.render=function(r,s,l){if(!yc(s))throw Error(n(200));return vc(null,r,s,!1,l)},Ln.unmountComponentAtNode=function(r){if(!yc(r))throw Error(n(40));return r._reactRootContainer?(Js(function(){vc(null,null,r,!1,function(){r._reactRootContainer=null,r[yi]=null})}),!0):!1},Ln.unstable_batchedUpdates=nf,Ln.unstable_renderSubtreeIntoContainer=function(r,s,l,d){if(!yc(l))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return vc(r,s,l,!1,d)},Ln.version="18.3.1-next-f1338f8080-20240426",Ln}var xv;function gw(){if(xv)return mf.exports;xv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),mf.exports=d1(),mf.exports}var Ev;function f1(){if(Ev)return wc;Ev=1;var t=gw();return wc.createRoot=t.createRoot,wc.hydrateRoot=t.hydrateRoot,wc}var p1=f1();const m1="/EcommerceCw/assets/sofaHero-CS3_frxv.jpg",g1="/EcommerceCw/assets/living-room-B8yrP2e1.jpg",y1="/EcommerceCw/assets/kitchen-BNj0Y2X4.jpg";var ml={},Tv;function v1(){if(Tv)return ml;Tv=1,Object.defineProperty(ml,"__esModule",{value:!0}),ml.parse=u,ml.serialize=p;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function u(E,S){const I=new a,k=E.length;if(k<2)return I;const D=(S==null?void 0:S.decode)||g;let j=0;do{const z=E.indexOf("=",j);if(z===-1)break;const W=E.indexOf(";",j),ee=W===-1?k:W;if(z>ee){j=E.lastIndexOf(";",z-1)+1;continue}const X=h(E,j,z),b=f(E,z,X),R=E.slice(X,b);if(I[R]===void 0){let C=h(E,z+1,ee),P=f(E,ee,C);const L=D(E.slice(C,P));I[R]=L}j=ee+1}while(j<k);return I}function h(E,S,I){do{const k=E.charCodeAt(S);if(k!==32&&k!==9)return S}while(++S<I);return I}function f(E,S,I){for(;S>I;){const k=E.charCodeAt(--S);if(k!==32&&k!==9)return S+1}return I}function p(E,S,I){const k=(I==null?void 0:I.encode)||encodeURIComponent;if(!t.test(E))throw new TypeError(`argument name is invalid: ${E}`);const D=k(S);if(!e.test(D))throw new TypeError(`argument val is invalid: ${S}`);let j=E+"="+D;if(!I)return j;if(I.maxAge!==void 0){if(!Number.isInteger(I.maxAge))throw new TypeError(`option maxAge is invalid: ${I.maxAge}`);j+="; Max-Age="+I.maxAge}if(I.domain){if(!n.test(I.domain))throw new TypeError(`option domain is invalid: ${I.domain}`);j+="; Domain="+I.domain}if(I.path){if(!i.test(I.path))throw new TypeError(`option path is invalid: ${I.path}`);j+="; Path="+I.path}if(I.expires){if(!_(I.expires)||!Number.isFinite(I.expires.valueOf()))throw new TypeError(`option expires is invalid: ${I.expires}`);j+="; Expires="+I.expires.toUTCString()}if(I.httpOnly&&(j+="; HttpOnly"),I.secure&&(j+="; Secure"),I.partitioned&&(j+="; Partitioned"),I.priority)switch(typeof I.priority=="string"?I.priority.toLowerCase():void 0){case"low":j+="; Priority=Low";break;case"medium":j+="; Priority=Medium";break;case"high":j+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${I.priority}`)}if(I.sameSite)switch(typeof I.sameSite=="string"?I.sameSite.toLowerCase():I.sameSite){case!0:case"strict":j+="; SameSite=Strict";break;case"lax":j+="; SameSite=Lax";break;case"none":j+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${I.sameSite}`)}return j}function g(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function _(E){return o.call(E)==="[object Date]"}return ml}v1();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Sv="popstate";function _1(t={}){function e(i,o){let{pathname:a,search:u,hash:h}=i.location;return Ll("",{pathname:a,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:xs(o)}return x1(e,n,null,t)}function Ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function sn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function w1(){return Math.random().toString(36).substring(2,10)}function Cv(t,e){return{usr:t.state,key:t.key,idx:e}}function Ll(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ks(e):e,state:n,key:e&&e.key||i||w1()}}function xs({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ks(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function x1(t,e,n,i={}){let{window:o=document.defaultView,v5Compat:a=!1}=i,u=o.history,h="POP",f=null,p=g();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function g(){return(u.state||{idx:null}).idx}function _(){h="POP";let D=g(),j=D==null?null:D-p;p=D,f&&f({action:h,location:k.location,delta:j})}function E(D,j){h="PUSH";let z=Ll(k.location,D,j);p=g()+1;let W=Cv(z,p),ee=k.createHref(z);try{u.pushState(W,"",ee)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;o.location.assign(ee)}a&&f&&f({action:h,location:k.location,delta:1})}function S(D,j){h="REPLACE";let z=Ll(k.location,D,j);p=g();let W=Cv(z,p),ee=k.createHref(z);u.replaceState(W,"",ee),a&&f&&f({action:h,location:k.location,delta:0})}function I(D){let j=o.location.origin!=="null"?o.location.origin:o.location.href,z=typeof D=="string"?D:xs(D);return z=z.replace(/ $/,"%20"),Ge(j,`No window.location.(origin|href) available to create URL for href: ${z}`),new URL(z,j)}let k={get action(){return h},get location(){return t(o,u)},listen(D){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(Sv,_),f=D,()=>{o.removeEventListener(Sv,_),f=null}},createHref(D){return e(o,D)},createURL:I,encodeLocation(D){let j=I(D);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:E,replace:S,go(D){return u.go(D)}};return k}var E1=new Set(["lazy","caseSensitive","path","id","index","children"]);function T1(t){return t.index===!0}function Hc(t,e,n=[],i={}){return t.map((o,a)=>{let u=[...n,String(a)],h=typeof o.id=="string"?o.id:u.join("-");if(Ge(o.index!==!0||!o.children,"Cannot specify children on an index route"),Ge(!i[h],`Found a route id collision on id "${h}".  Route id's must be globally unique within Data Router usages`),T1(o)){let f={...o,...e(o),id:h};return i[h]=f,f}else{let f={...o,...e(o),id:h,children:void 0};return i[h]=f,o.children&&(f.children=Hc(o.children,e,u,i)),f}})}function ps(t,e,n="/"){return Nc(t,e,n,!1)}function Nc(t,e,n,i){let o=typeof e=="string"?ks(e):e,a=Pr(o.pathname||"/",n);if(a==null)return null;let u=yw(t);C1(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let p=M1(a);h=V1(u[f],p,i)}return h}function S1(t,e){let{route:n,pathname:i,params:o}=t;return{id:n.id,pathname:i,params:o,data:e[n.id],handle:n.handle}}function yw(t,e=[],n=[],i=""){let o=(a,u,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(Ge(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length));let p=Yr([i,f.relativePath]),g=n.concat(f);a.children&&a.children.length>0&&(Ge(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),yw(a.children,e,g,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:N1(p,a.index),routesMeta:g})};return t.forEach((a,u)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))o(a,u);else for(let f of vw(a.path))o(a,u,f)}),e}function vw(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let u=vw(i.join("/")),h=[];return h.push(...u.map(f=>f===""?a:[a,f].join("/"))),o&&h.push(...u),h.map(f=>t.startsWith("/")&&f===""?"/":f)}function C1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:b1(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var A1=/^:[\w-]+$/,P1=3,I1=2,R1=1,k1=10,D1=-2,Av=t=>t==="*";function N1(t,e){let n=t.split("/"),i=n.length;return n.some(Av)&&(i+=D1),e&&(i+=I1),n.filter(o=>!Av(o)).reduce((o,a)=>o+(A1.test(a)?P1:a===""?R1:k1),i)}function b1(t,e){return t.length===e.length&&t.slice(0,-1).every((i,o)=>i===e[o])?t[t.length-1]-e[e.length-1]:0}function V1(t,e,n=!1){let{routesMeta:i}=t,o={},a="/",u=[];for(let h=0;h<i.length;++h){let f=i[h],p=h===i.length-1,g=a==="/"?e:e.slice(a.length)||"/",_=Wc({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},g),E=f.route;if(!_&&p&&n&&!i[i.length-1].route.index&&(_=Wc({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!_)return null;Object.assign(o,_.params),u.push({params:o,pathname:Yr([a,_.pathname]),pathnameBase:O1(Yr([a,_.pathnameBase])),route:E}),_.pathnameBase!=="/"&&(a=Yr([a,_.pathnameBase]))}return u}function Wc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=L1(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:i.reduce((p,{paramName:g,isOptional:_},E)=>{if(g==="*"){let I=h[E]||"";u=a.slice(0,a.length-I.length).replace(/(.)\/+$/,"$1")}const S=h[E];return _&&!S?p[g]=void 0:p[g]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:u,pattern:t}}function L1(t,e=!1,n=!0){sn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function M1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Pr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function j1(t,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof t=="string"?ks(t):t;return{pathname:n?n.startsWith("/")?n:F1(n,e):e,search:U1(i),hash:B1(o)}}function F1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function vf(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _w(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Dp(t){let e=_w(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Np(t,e,n,i=!1){let o;typeof t=="string"?o=ks(t):(o={...t},Ge(!o.pathname||!o.pathname.includes("?"),vf("?","pathname","search",o)),Ge(!o.pathname||!o.pathname.includes("#"),vf("#","pathname","hash",o)),Ge(!o.search||!o.search.includes("#"),vf("#","search","hash",o)));let a=t===""||o.pathname==="",u=a?"/":o.pathname,h;if(u==null)h=n;else{let _=e.length-1;if(!i&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),_-=1;o.pathname=E.join("/")}h=_>=0?e[_]:"/"}let f=j1(o,h),p=u&&u!=="/"&&u.endsWith("/"),g=(a||u===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(p||g)&&(f.pathname+="/"),f}var Yr=t=>t.join("/").replace(/\/\/+/g,"/"),O1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),U1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,B1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,qc=class{constructor(t,e,n,i=!1){this.status=t,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Ml(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var ww=["POST","PUT","PATCH","DELETE"],z1=new Set(ww),$1=["GET",...ww],H1=new Set($1),W1=new Set([301,302,303,307,308]),q1=new Set([307,308]),_f={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},K1={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},gl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},bp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,G1=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),xw="remix-router-transitions",Ew=Symbol("ResetLoaderData");function Q1(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Ge(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i=t.mapRouteProperties||G1,o={},a=Hc(t.routes,i,void 0,o),u,h=t.basename||"/",f=t.dataStrategy||eC,p=t.patchRoutesOnNavigation,g={...t.future},_=null,E=new Set,S=null,I=null,k=null,D=t.hydrationData!=null,j=ps(a,t.history.location,h),z=!1,W=null;if(j==null&&!p){let F=cr(404,{pathname:t.history.location.pathname}),{matches:q,route:Q}=jv(a);j=q,W={[Q.id]:F}}j&&!t.hydrationData&&En(j,a,t.history.location.pathname).active&&(j=null);let ee;if(j)if(j.some(F=>F.route.lazy))ee=!1;else if(!j.some(F=>F.route.loader))ee=!0;else{let F=t.hydrationData?t.hydrationData.loaderData:null,q=t.hydrationData?t.hydrationData.errors:null;if(q){let Q=j.findIndex(se=>q[se.route.id]!==void 0);ee=j.slice(0,Q+1).every(se=>!$f(se.route,F,q))}else ee=j.every(Q=>!$f(Q.route,F,q))}else{ee=!1,j=[];let F=En(null,a,t.history.location.pathname);F.active&&F.matches&&(z=!0,j=F.matches)}let X,b={historyAction:t.history.action,location:t.history.location,matches:j,initialized:ee,navigation:_f,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||W,fetchers:new Map,blockers:new Map},R="POP",C=!1,P,L=!1,O=new Map,$=null,V=!1,Qe=!1,xt=new Set,Ce=new Map,Ae=0,ie=-1,pe=new Map,ue=new Set,H=new Map,te=new Map,me=new Set,be=new Map,je,Be=null;function tt(){if(_=t.history.listen(({action:F,location:q,delta:Q})=>{if(je){je(),je=void 0;return}sn(be.size===0||Q!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let se=br({currentLocation:b.location,nextLocation:q,historyAction:F});if(se&&Q!=null){let de=new Promise(Te=>{je=Te});t.history.go(Q*-1),Nr(se,{state:"blocked",location:q,proceed(){Nr(se,{state:"proceeding",proceed:void 0,reset:void 0,location:q}),de.then(()=>t.history.go(Q))},reset(){let Te=new Map(b.blockers);Te.set(se,gl),Ye({blockers:Te})}});return}return wn(F,q)}),n){hC(e,O);let F=()=>dC(e,O);e.addEventListener("pagehide",F),$=()=>e.removeEventListener("pagehide",F)}return b.initialized||wn("POP",b.location,{initialHydration:!0}),X}function nt(){_&&_(),$&&$(),E.clear(),P&&P.abort(),b.fetchers.forEach((F,q)=>ai(q)),b.blockers.forEach((F,q)=>Ui(q))}function dt(F){return E.add(F),()=>E.delete(F)}function Ye(F,q={}){b={...b,...F};let Q=[],se=[];b.fetchers.forEach((de,Te)=>{de.state==="idle"&&(me.has(Te)?Q.push(Te):se.push(Te))}),me.forEach(de=>{!b.fetchers.has(de)&&!Ce.has(de)&&Q.push(de)}),[...E].forEach(de=>de(b,{deletedFetchers:Q,viewTransitionOpts:q.viewTransitionOpts,flushSync:q.flushSync===!0})),Q.forEach(de=>ai(de)),se.forEach(de=>b.fetchers.delete(de))}function an(F,q,{flushSync:Q}={}){var fe,Le;let se=b.actionData!=null&&b.navigation.formMethod!=null&&Cr(b.navigation.formMethod)&&b.navigation.state==="loading"&&((fe=F.state)==null?void 0:fe._isRedirect)!==!0,de;q.actionData?Object.keys(q.actionData).length>0?de=q.actionData:de=null:se?de=b.actionData:de=null;let Te=q.loaderData?Lv(b.loaderData,q.loaderData,q.matches||[],q.errors):b.loaderData,Re=b.blockers;Re.size>0&&(Re=new Map(Re),Re.forEach((Fe,lt)=>Re.set(lt,gl)));let ve=C===!0||b.navigation.formMethod!=null&&Cr(b.navigation.formMethod)&&((Le=F.state)==null?void 0:Le._isRedirect)!==!0;u&&(a=u,u=void 0),V||R==="POP"||(R==="PUSH"?t.history.push(F,F.state):R==="REPLACE"&&t.history.replace(F,F.state));let ge;if(R==="POP"){let Fe=O.get(b.location.pathname);Fe&&Fe.has(F.pathname)?ge={currentLocation:b.location,nextLocation:F}:O.has(F.pathname)&&(ge={currentLocation:F,nextLocation:b.location})}else if(L){let Fe=O.get(b.location.pathname);Fe?Fe.add(F.pathname):(Fe=new Set([F.pathname]),O.set(b.location.pathname,Fe)),ge={currentLocation:b.location,nextLocation:F}}Ye({...q,actionData:de,loaderData:Te,historyAction:R,location:F,initialized:!0,navigation:_f,revalidation:"idle",restoreScrollPosition:li(F,q.matches||b.matches),preventScrollReset:ve,blockers:Re},{viewTransitionOpts:ge,flushSync:Q===!0}),R="POP",C=!1,L=!1,V=!1,Qe=!1,Be==null||Be.resolve(),Be=null}async function ii(F,q){if(typeof F=="number"){t.history.go(F);return}let Q=zf(b.location,b.matches,h,F,q==null?void 0:q.fromRouteId,q==null?void 0:q.relative),{path:se,submission:de,error:Te}=Pv(!1,Q,q),Re=b.location,ve=Ll(b.location,se,q&&q.state);ve={...ve,...t.history.encodeLocation(ve)};let ge=q&&q.replace!=null?q.replace:void 0,fe="PUSH";ge===!0?fe="REPLACE":ge===!1||de!=null&&Cr(de.formMethod)&&de.formAction===b.location.pathname+b.location.search&&(fe="REPLACE");let Le=q&&"preventScrollReset"in q?q.preventScrollReset===!0:void 0,Fe=(q&&q.flushSync)===!0,lt=br({currentLocation:Re,nextLocation:ve,historyAction:fe});if(lt){Nr(lt,{state:"blocked",location:ve,proceed(){Nr(lt,{state:"proceeding",proceed:void 0,reset:void 0,location:ve}),ii(F,q)},reset(){let ut=new Map(b.blockers);ut.set(lt,gl),Ye({blockers:ut})}});return}await wn(fe,ve,{submission:de,pendingError:Te,preventScrollReset:Le,replace:q&&q.replace,enableViewTransition:q&&q.viewTransition,flushSync:Fe})}function Rr(){Be||(Be=fC()),oi(),Ye({revalidation:"loading"});let F=Be.promise;return b.navigation.state==="submitting"?F:b.navigation.state==="idle"?(wn(b.historyAction,b.location,{startUninterruptedRevalidation:!0}),F):(wn(R||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation,enableViewTransition:L===!0}),F)}async function wn(F,q,Q){P&&P.abort(),P=null,R=F,V=(Q&&Q.startUninterruptedRevalidation)===!0,Yn(b.location,b.matches),C=(Q&&Q.preventScrollReset)===!0,L=(Q&&Q.enableViewTransition)===!0;let se=u||a,de=Q&&Q.overrideNavigation,Te=Q!=null&&Q.initialHydration&&b.matches&&b.matches.length>0&&!z?b.matches:ps(se,q,h),Re=(Q&&Q.flushSync)===!0;if(Te&&b.initialized&&!Qe&&oC(b.location,q)&&!(Q&&Q.submission&&Cr(Q.submission.formMethod))){an(q,{matches:Te},{flushSync:Re});return}let ve=En(Te,se,q.pathname);if(ve.active&&ve.matches&&(Te=ve.matches),!Te){let{error:st,notFoundMatches:$e,route:Et}=Vr(q.pathname);an(q,{matches:$e,loaderData:{},errors:{[Et.id]:st}},{flushSync:Re});return}P=new AbortController;let ge=ra(t.history,q,P.signal,Q&&Q.submission),fe;if(Q&&Q.pendingError)fe=[oo(Te).route.id,{type:"error",error:Q.pendingError}];else if(Q&&Q.submission&&Cr(Q.submission.formMethod)){let st=await Li(ge,q,Q.submission,Te,ve.active,{replace:Q.replace,flushSync:Re});if(st.shortCircuited)return;if(st.pendingActionResult){let[$e,Et]=st.pendingActionResult;if(Wn(Et)&&Ml(Et.error)&&Et.error.status===404){P=null,an(q,{matches:st.matches,loaderData:{},errors:{[$e]:Et.error}});return}}Te=st.matches||Te,fe=st.pendingActionResult,de=wf(q,Q.submission),Re=!1,ve.active=!1,ge=ra(t.history,ge.url,ge.signal)}let{shortCircuited:Le,matches:Fe,loaderData:lt,errors:ut}=await Vs(ge,q,Te,ve.active,de,Q&&Q.submission,Q&&Q.fetcherSubmission,Q&&Q.replace,Q&&Q.initialHydration===!0,Re,fe);Le||(P=null,an(q,{matches:Fe||Te,...Mv(fe),loaderData:lt,errors:ut}))}async function Li(F,q,Q,se,de,Te={}){oi();let Re=uC(q,Q);if(Ye({navigation:Re},{flushSync:Te.flushSync===!0}),de){let fe=await Lr(se,q.pathname,F.signal);if(fe.type==="aborted")return{shortCircuited:!0};if(fe.type==="error"){let Le=oo(fe.partialMatches).route.id;return{matches:fe.partialMatches,pendingActionResult:[Le,{type:"error",error:fe.error}]}}else if(fe.matches)se=fe.matches;else{let{notFoundMatches:Le,error:Fe,route:lt}=Vr(q.pathname);return{matches:Le,pendingActionResult:[lt.id,{type:"error",error:Fe}]}}}let ve,ge=xl(se,q);if(!ge.route.action&&!ge.route.lazy)ve={type:"error",error:cr(405,{method:F.method,pathname:q.pathname,routeId:ge.route.id})};else if(ve=(await Gn("action",b,F,[ge],se,null))[ge.route.id],F.signal.aborted)return{shortCircuited:!0};if(lo(ve)){let fe;return Te&&Te.replace!=null?fe=Te.replace:fe=Nv(ve.response.headers.get("Location"),new URL(F.url),h)===b.location.pathname+b.location.search,await Fn(F,ve,!0,{submission:Q,replace:fe}),{shortCircuited:!0}}if(Wn(ve)){let fe=oo(se,ge.route.id);return(Te&&Te.replace)!==!0&&(R="PUSH"),{matches:se,pendingActionResult:[fe.route.id,ve]}}return{matches:se,pendingActionResult:[ge.route.id,ve]}}async function Vs(F,q,Q,se,de,Te,Re,ve,ge,fe,Le){let Fe=de||wf(q,Te),lt=Te||Re||Ov(Fe),ut=!V&&!ge;if(se){if(ut){let ct=Mi(Le);Ye({navigation:Fe,...ct!==void 0?{actionData:ct}:{}},{flushSync:fe})}let We=await Lr(Q,q.pathname,F.signal);if(We.type==="aborted")return{shortCircuited:!0};if(We.type==="error"){let ct=oo(We.partialMatches).route.id;return{matches:We.partialMatches,loaderData:{},errors:{[ct]:We.error}}}else if(We.matches)Q=We.matches;else{let{error:ct,notFoundMatches:Mr,route:jr}=Vr(q.pathname);return{matches:Mr,loaderData:{},errors:{[jr.id]:ct}}}}let st=u||a,[$e,Et]=Rv(t.history,b,Q,lt,q,ge===!0,Qe,xt,me,H,ue,st,h,Le);if(ie=++Ae,$e.length===0&&Et.length===0){let We=Fi();return an(q,{matches:Q,loaderData:{},errors:Le&&Wn(Le[1])?{[Le[0]]:Le[1].error}:null,...Mv(Le),...We?{fetchers:new Map(b.fetchers)}:{}},{flushSync:fe}),{shortCircuited:!0}}if(ut){let We={};if(!se){We.navigation=Fe;let ct=Mi(Le);ct!==void 0&&(We.actionData=ct)}Et.length>0&&(We.fetchers=To(Et)),Ye(We,{flushSync:fe})}Et.forEach(We=>{ln(We.key),We.controller&&Ce.set(We.key,We.controller)});let Xn=()=>Et.forEach(We=>ln(We.key));P&&P.signal.addEventListener("abort",Xn);let{loaderResults:Jn,fetcherResults:un}=await si(b,Q,$e,Et,F);if(F.signal.aborted)return{shortCircuited:!0};P&&P.signal.removeEventListener("abort",Xn),Et.forEach(We=>Ce.delete(We.key));let cn=xc(Jn);if(cn)return await Fn(F,cn.result,!0,{replace:ve}),{shortCircuited:!0};if(cn=xc(un),cn)return ue.add(cn.key),await Fn(F,cn.result,!0,{replace:ve}),{shortCircuited:!0};let{loaderData:zi,errors:ci}=Vv(b,Q,Jn,Le,Et,un);ge&&b.errors&&(ci={...b.errors,...ci});let Xe=Fi(),hi=Oi(ie),Zn=Xe||hi||Et.length>0;return{matches:Q,loaderData:zi,errors:ci,...Zn?{fetchers:new Map(b.fetchers)}:{}}}function Mi(F){if(F&&!Wn(F[1]))return{[F[0]]:F[1].data};if(b.actionData)return Object.keys(b.actionData).length===0?null:b.actionData}function To(F){return F.forEach(q=>{let Q=b.fetchers.get(q.key),se=yl(void 0,Q?Q.data:void 0);b.fetchers.set(q.key,se)}),new Map(b.fetchers)}async function ji(F,q,Q,se){ln(F);let de=(se&&se.flushSync)===!0,Te=u||a,Re=zf(b.location,b.matches,h,Q,q,se==null?void 0:se.relative),ve=ps(Te,Re,h),ge=En(ve,Te,Re);if(ge.active&&ge.matches&&(ve=ge.matches),!ve){at(F,q,cr(404,{pathname:Re}),{flushSync:de});return}let{path:fe,submission:Le,error:Fe}=Pv(!0,Re,se);if(Fe){at(F,q,Fe,{flushSync:de});return}let lt=xl(ve,fe),ut=(se&&se.preventScrollReset)===!0;if(Le&&Cr(Le.formMethod)){await hr(F,q,fe,lt,ve,ge.active,de,ut,Le);return}H.set(F,{routeId:q,path:fe}),await dr(F,q,fe,lt,ve,ge.active,de,ut,Le)}async function hr(F,q,Q,se,de,Te,Re,ve,ge){oi(),H.delete(F);function fe(pt){if(!pt.route.action&&!pt.route.lazy){let Lt=cr(405,{method:ge.formMethod,pathname:Q,routeId:q});return at(F,q,Lt,{flushSync:Re}),!0}return!1}if(!Te&&fe(se))return;let Le=b.fetchers.get(F);ft(F,cC(ge,Le),{flushSync:Re});let Fe=new AbortController,lt=ra(t.history,Q,Fe.signal,ge);if(Te){let pt=await Lr(de,Q,lt.signal);if(pt.type==="aborted")return;if(pt.type==="error"){at(F,q,pt.error,{flushSync:Re});return}else if(pt.matches){if(de=pt.matches,se=xl(de,Q),fe(se))return}else{at(F,q,cr(404,{pathname:Q}),{flushSync:Re});return}}Ce.set(F,Fe);let ut=Ae,$e=(await Gn("action",b,lt,[se],de,F))[se.route.id];if(lt.signal.aborted){Ce.get(F)===Fe&&Ce.delete(F);return}if(me.has(F)){if(lo($e)||Wn($e)){ft(F,ds(void 0));return}}else{if(lo($e))if(Ce.delete(F),ie>ut){ft(F,ds(void 0));return}else return ue.add(F),ft(F,yl(ge)),Fn(lt,$e,!1,{fetcherSubmission:ge,preventScrollReset:ve});if(Wn($e)){at(F,q,$e.error);return}}let Et=b.navigation.location||b.location,Xn=ra(t.history,Et,Fe.signal),Jn=u||a,un=b.navigation.state!=="idle"?ps(Jn,b.navigation.location,h):b.matches;Ge(un,"Didn't find any matches after fetcher action");let cn=++Ae;pe.set(F,cn);let zi=yl(ge,$e.data);b.fetchers.set(F,zi);let[ci,Xe]=Rv(t.history,b,un,ge,Et,!1,Qe,xt,me,H,ue,Jn,h,[se.route.id,$e]);Xe.filter(pt=>pt.key!==F).forEach(pt=>{let Lt=pt.key,js=b.fetchers.get(Lt),Yt=yl(void 0,js?js.data:void 0);b.fetchers.set(Lt,Yt),ln(Lt),pt.controller&&Ce.set(Lt,pt.controller)}),Ye({fetchers:new Map(b.fetchers)});let hi=()=>Xe.forEach(pt=>ln(pt.key));Fe.signal.addEventListener("abort",hi);let{loaderResults:Zn,fetcherResults:We}=await si(b,un,ci,Xe,Xn);if(Fe.signal.aborted)return;Fe.signal.removeEventListener("abort",hi),pe.delete(F),Ce.delete(F),Xe.forEach(pt=>Ce.delete(pt.key));let ct=xc(Zn);if(ct)return Fn(Xn,ct.result,!1,{preventScrollReset:ve});if(ct=xc(We),ct)return ue.add(ct.key),Fn(Xn,ct.result,!1,{preventScrollReset:ve});let{loaderData:Mr,errors:jr}=Vv(b,un,Zn,void 0,Xe,We);if(b.fetchers.has(F)){let pt=ds($e.data);b.fetchers.set(F,pt)}Oi(cn),b.navigation.state==="loading"&&cn>ie?(Ge(R,"Expected pending action"),P&&P.abort(),an(b.navigation.location,{matches:un,loaderData:Mr,errors:jr,fetchers:new Map(b.fetchers)})):(Ye({errors:jr,loaderData:Lv(b.loaderData,Mr,un,jr),fetchers:new Map(b.fetchers)}),Qe=!1)}async function dr(F,q,Q,se,de,Te,Re,ve,ge){let fe=b.fetchers.get(F);ft(F,yl(ge,fe?fe.data:void 0),{flushSync:Re});let Le=new AbortController,Fe=ra(t.history,Q,Le.signal);if(Te){let $e=await Lr(de,Q,Fe.signal);if($e.type==="aborted")return;if($e.type==="error"){at(F,q,$e.error,{flushSync:Re});return}else if($e.matches)de=$e.matches,se=xl(de,Q);else{at(F,q,cr(404,{pathname:Q}),{flushSync:Re});return}}Ce.set(F,Le);let lt=Ae,st=(await Gn("loader",b,Fe,[se],de,F))[se.route.id];if(Ce.get(F)===Le&&Ce.delete(F),!Fe.signal.aborted){if(me.has(F)){ft(F,ds(void 0));return}if(lo(st))if(ie>lt){ft(F,ds(void 0));return}else{ue.add(F),await Fn(Fe,st,!1,{preventScrollReset:ve});return}if(Wn(st)){at(F,q,st.error);return}ft(F,ds(st.data))}}async function Fn(F,q,Q,{submission:se,fetcherSubmission:de,preventScrollReset:Te,replace:Re}={}){q.response.headers.has("X-Remix-Revalidate")&&(Qe=!0);let ve=q.response.headers.get("Location");Ge(ve,"Expected a Location header on the redirect Response"),ve=Nv(ve,new URL(F.url),h);let ge=Ll(b.location,ve,{_isRedirect:!0});if(n){let st=!1;if(q.response.headers.has("X-Remix-Reload-Document"))st=!0;else if(bp.test(ve)){const $e=t.history.createURL(ve);st=$e.origin!==e.location.origin||Pr($e.pathname,h)==null}if(st){Re?e.location.replace(ve):e.location.assign(ve);return}}P=null;let fe=Re===!0||q.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Le,formAction:Fe,formEncType:lt}=b.navigation;!se&&!de&&Le&&Fe&&lt&&(se=Ov(b.navigation));let ut=se||de;if(q1.has(q.response.status)&&ut&&Cr(ut.formMethod))await wn(fe,ge,{submission:{...ut,formAction:ve},preventScrollReset:Te||C,enableViewTransition:Q?L:void 0});else{let st=wf(ge,se);await wn(fe,ge,{overrideNavigation:st,fetcherSubmission:de,preventScrollReset:Te||C,enableViewTransition:Q?L:void 0})}}async function Gn(F,q,Q,se,de,Te){let Re,ve={};try{Re=await tC(f,F,q,Q,se,de,Te,o,i)}catch(ge){return se.forEach(fe=>{ve[fe.route.id]={type:"error",error:ge}}),ve}for(let[ge,fe]of Object.entries(Re))if(aC(fe)){let Le=fe.result;ve[ge]={type:"redirect",response:iC(Le,Q,ge,de,h)}}else ve[ge]=await rC(fe);return ve}async function si(F,q,Q,se,de){let Te=Gn("loader",F,de,Q,q,null),Re=Promise.all(se.map(async fe=>{if(fe.matches&&fe.match&&fe.controller){let Fe=(await Gn("loader",F,ra(t.history,fe.path,fe.controller.signal),[fe.match],fe.matches,fe.key))[fe.match.route.id];return{[fe.key]:Fe}}else return Promise.resolve({[fe.key]:{type:"error",error:cr(404,{pathname:fe.path})}})})),ve=await Te,ge=(await Re).reduce((fe,Le)=>Object.assign(fe,Le),{});return{loaderResults:ve,fetcherResults:ge}}function oi(){Qe=!0,H.forEach((F,q)=>{Ce.has(q)&&xt.add(q),ln(q)})}function ft(F,q,Q={}){b.fetchers.set(F,q),Ye({fetchers:new Map(b.fetchers)},{flushSync:(Q&&Q.flushSync)===!0})}function at(F,q,Q,se={}){let de=oo(b.matches,q);ai(F),Ye({errors:{[de.route.id]:Q},fetchers:new Map(b.fetchers)},{flushSync:(se&&se.flushSync)===!0})}function Qn(F){return te.set(F,(te.get(F)||0)+1),me.has(F)&&me.delete(F),b.fetchers.get(F)||K1}function ai(F){let q=b.fetchers.get(F);Ce.has(F)&&!(q&&q.state==="loading"&&pe.has(F))&&ln(F),H.delete(F),pe.delete(F),ue.delete(F),me.delete(F),xt.delete(F),b.fetchers.delete(F)}function kr(F){let q=(te.get(F)||0)-1;q<=0?(te.delete(F),me.add(F)):te.set(F,q),Ye({fetchers:new Map(b.fetchers)})}function ln(F){let q=Ce.get(F);q&&(q.abort(),Ce.delete(F))}function Dr(F){for(let q of F){let Q=Qn(q),se=ds(Q.data);b.fetchers.set(q,se)}}function Fi(){let F=[],q=!1;for(let Q of ue){let se=b.fetchers.get(Q);Ge(se,`Expected fetcher: ${Q}`),se.state==="loading"&&(ue.delete(Q),F.push(Q),q=!0)}return Dr(F),q}function Oi(F){let q=[];for(let[Q,se]of pe)if(se<F){let de=b.fetchers.get(Q);Ge(de,`Expected fetcher: ${Q}`),de.state==="loading"&&(ln(Q),pe.delete(Q),q.push(Q))}return Dr(q),q.length>0}function Ls(F,q){let Q=b.blockers.get(F)||gl;return be.get(F)!==q&&be.set(F,q),Q}function Ui(F){b.blockers.delete(F),be.delete(F)}function Nr(F,q){let Q=b.blockers.get(F)||gl;Ge(Q.state==="unblocked"&&q.state==="blocked"||Q.state==="blocked"&&q.state==="blocked"||Q.state==="blocked"&&q.state==="proceeding"||Q.state==="blocked"&&q.state==="unblocked"||Q.state==="proceeding"&&q.state==="unblocked",`Invalid blocker state transition: ${Q.state} -> ${q.state}`);let se=new Map(b.blockers);se.set(F,q),Ye({blockers:se})}function br({currentLocation:F,nextLocation:q,historyAction:Q}){if(be.size===0)return;be.size>1&&sn(!1,"A router only supports one blocker at a time");let se=Array.from(be.entries()),[de,Te]=se[se.length-1],Re=b.blockers.get(de);if(!(Re&&Re.state==="proceeding")&&Te({currentLocation:F,nextLocation:q,historyAction:Q}))return de}function Vr(F){let q=cr(404,{pathname:F}),Q=u||a,{matches:se,route:de}=jv(Q);return{notFoundMatches:se,route:de,error:q}}function Bi(F,q,Q){if(S=F,k=q,I=Q||null,!D&&b.navigation===_f){D=!0;let se=li(b.location,b.matches);se!=null&&Ye({restoreScrollPosition:se})}return()=>{S=null,k=null,I=null}}function xn(F,q){return I&&I(F,q.map(se=>S1(se,b.loaderData)))||F.key}function Yn(F,q){if(S&&k){let Q=xn(F,q);S[Q]=k()}}function li(F,q){if(S){let Q=xn(F,q),se=S[Q];if(typeof se=="number")return se}return null}function En(F,q,Q){if(p)if(F){if(Object.keys(F[0].params).length>0)return{active:!0,matches:Nc(q,Q,h,!0)}}else return{active:!0,matches:Nc(q,Q,h,!0)||[]};return{active:!1,matches:null}}async function Lr(F,q,Q){if(!p)return{type:"success",matches:F};let se=F;for(;;){let de=u==null,Te=u||a,Re=o;try{await p({signal:Q,path:q,matches:se,patch:(fe,Le)=>{Q.aborted||Dv(fe,Le,Te,Re,i)}})}catch(fe){return{type:"error",error:fe,partialMatches:se}}finally{de&&!Q.aborted&&(a=[...a])}if(Q.aborted)return{type:"aborted"};let ve=ps(Te,q,h);if(ve)return{type:"success",matches:ve};let ge=Nc(Te,q,h,!0);if(!ge||se.length===ge.length&&se.every((fe,Le)=>fe.route.id===ge[Le].route.id))return{type:"success",matches:null};se=ge}}function ui(F){o={},u=Hc(F,i,void 0,o)}function Ms(F,q){let Q=u==null;Dv(F,q,u||a,o,i),Q&&(a=[...a],Ye({}))}return X={get basename(){return h},get future(){return g},get state(){return b},get routes(){return a},get window(){return e},initialize:tt,subscribe:dt,enableScrollRestoration:Bi,navigate:ii,fetch:ji,revalidate:Rr,createHref:F=>t.history.createHref(F),encodeLocation:F=>t.history.encodeLocation(F),getFetcher:Qn,deleteFetcher:kr,dispose:nt,getBlocker:Ls,deleteBlocker:Ui,patchRoutes:Ms,_internalFetchControllers:Ce,_internalSetRoutes:ui},X}function Y1(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function zf(t,e,n,i,o,a){let u,h;if(o){u=[];for(let p of e)if(u.push(p),p.route.id===o){h=p;break}}else u=e,h=e[e.length-1];let f=Np(i||".",Dp(u),Pr(t.pathname,n)||t.pathname,a==="path");if(i==null&&(f.search=t.search,f.hash=t.hash),(i==null||i===""||i===".")&&h){let p=Vp(f.search);if(h.route.index&&!p)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&p){let g=new URLSearchParams(f.search),_=g.getAll("index");g.delete("index"),_.filter(S=>S).forEach(S=>g.append("index",S));let E=g.toString();f.search=E?`?${E}`:""}}return n!=="/"&&(f.pathname=f.pathname==="/"?n:Yr([n,f.pathname])),xs(f)}function Pv(t,e,n){if(!n||!Y1(n))return{path:e};if(n.formMethod&&!lC(n.formMethod))return{path:e,error:cr(405,{method:n.formMethod})};let i=()=>({path:e,error:cr(400,{type:"invalid-body"})}),a=(n.formMethod||"get").toUpperCase(),u=Sw(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Cr(a))return i();let _=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((E,[S,I])=>`${E}${S}=${I}
`,""):String(n.body);return{path:e,submission:{formMethod:a,formAction:u,formEncType:n.formEncType,formData:void 0,json:void 0,text:_}}}else if(n.formEncType==="application/json"){if(!Cr(a))return i();try{let _=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:a,formAction:u,formEncType:n.formEncType,formData:void 0,json:_,text:void 0}}}catch{return i()}}}Ge(typeof FormData=="function","FormData is not available in this environment");let h,f;if(n.formData)h=Hf(n.formData),f=n.formData;else if(n.body instanceof FormData)h=Hf(n.body),f=n.body;else if(n.body instanceof URLSearchParams)h=n.body,f=bv(h);else if(n.body==null)h=new URLSearchParams,f=new FormData;else try{h=new URLSearchParams(n.body),f=bv(h)}catch{return i()}let p={formMethod:a,formAction:u,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:f,json:void 0,text:void 0};if(Cr(p.formMethod))return{path:e,submission:p};let g=ks(e);return t&&g.search&&Vp(g.search)&&h.append("index",""),g.search=`?${h}`,{path:xs(g),submission:p}}function Iv(t,e,n=!1){let i=t.findIndex(o=>o.route.id===e);return i>=0?t.slice(0,n?i+1:i):t}function Rv(t,e,n,i,o,a,u,h,f,p,g,_,E,S){let I=S?Wn(S[1])?S[1].error:S[1].data:void 0,k=t.createURL(e.location),D=t.createURL(o),j=n;a&&e.errors?j=Iv(n,Object.keys(e.errors)[0],!0):S&&Wn(S[1])&&(j=Iv(n,S[0]));let z=S?S[1].statusCode:void 0,W=z&&z>=400,ee=j.filter((b,R)=>{let{route:C}=b;if(C.lazy)return!0;if(C.loader==null)return!1;if(a)return $f(C,e.loaderData,e.errors);if(X1(e.loaderData,e.matches[R],b))return!0;let P=e.matches[R],L=b;return kv(b,{currentUrl:k,currentParams:P.params,nextUrl:D,nextParams:L.params,...i,actionResult:I,actionStatus:z,defaultShouldRevalidate:W?!1:u||k.pathname+k.search===D.pathname+D.search||k.search!==D.search||J1(P,L)})}),X=[];return p.forEach((b,R)=>{if(a||!n.some($=>$.route.id===b.routeId)||f.has(R))return;let C=ps(_,b.path,E);if(!C){X.push({key:R,routeId:b.routeId,path:b.path,matches:null,match:null,controller:null});return}let P=e.fetchers.get(R),L=xl(C,b.path),O=!1;g.has(R)?O=!1:h.has(R)?(h.delete(R),O=!0):P&&P.state!=="idle"&&P.data===void 0?O=u:O=kv(L,{currentUrl:k,currentParams:e.matches[e.matches.length-1].params,nextUrl:D,nextParams:n[n.length-1].params,...i,actionResult:I,actionStatus:z,defaultShouldRevalidate:W?!1:u}),O&&X.push({key:R,routeId:b.routeId,path:b.path,matches:C,match:L,controller:new AbortController})}),[ee,X]}function $f(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let i=e!=null&&e[t.id]!==void 0,o=n!=null&&n[t.id]!==void 0;return!i&&o?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!i&&!o}function X1(t,e,n){let i=!e||n.route.id!==e.route.id,o=!t.hasOwnProperty(n.route.id);return i||o}function J1(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function kv(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function Dv(t,e,n,i,o){let a;if(t){let f=i[t];Ge(f,`No route found to patch children into: routeId = ${t}`),f.children||(f.children=[]),a=f.children}else a=n;let u=e.filter(f=>!a.some(p=>Tw(f,p))),h=Hc(u,o,[t||"_","patch",String((a==null?void 0:a.length)||"0")],i);a.push(...h)}function Tw(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,i)=>{var o;return(o=e.children)==null?void 0:o.some(a=>Tw(n,a))}):!1}async function Z1(t,e,n){if(!t.lazy)return;let i=await t.lazy();if(!t.lazy)return;let o=n[t.id];Ge(o,"No route found in manifest");let a={};for(let u in i){let f=o[u]!==void 0&&u!=="hasErrorBoundary";sn(!f,`Route "${o.id}" has a static property "${u}" defined but its lazy function is also returning a value for this property. The lazy route property "${u}" will be ignored.`),!f&&!E1.has(u)&&(a[u]=i[u])}Object.assign(o,a),Object.assign(o,{...e(o),lazy:void 0})}async function eC({matches:t}){let e=t.filter(i=>i.shouldLoad);return(await Promise.all(e.map(i=>i.resolve()))).reduce((i,o,a)=>Object.assign(i,{[e[a].route.id]:o}),{})}async function tC(t,e,n,i,o,a,u,h,f,p){let g=a.map(S=>S.route.lazy?Z1(S.route,f,h):void 0),_=a.map((S,I)=>{let k=g[I],D=o.some(z=>z.route.id===S.route.id);return{...S,shouldLoad:D,resolve:async z=>(z&&i.method==="GET"&&(S.route.lazy||S.route.loader)&&(D=!0),D?nC(e,i,S,k,z,p):Promise.resolve({type:"data",result:void 0}))}}),E=await t({matches:_,request:i,params:a[0].params,fetcherKey:u,context:p});try{await Promise.all(g)}catch{}return E}async function nC(t,e,n,i,o,a){let u,h,f=p=>{let g,_=new Promise((I,k)=>g=k);h=()=>g(),e.signal.addEventListener("abort",h);let E=I=>typeof p!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${t}" [routeId: ${n.route.id}]`)):p({request:e,params:n.params,context:a},...I!==void 0?[I]:[]),S=(async()=>{try{return{type:"data",result:await(o?o(k=>E(k)):E())}}catch(I){return{type:"error",result:I}}})();return Promise.race([S,_])};try{let p=n.route[t];if(i)if(p){let g,[_]=await Promise.all([f(p).catch(E=>{g=E}),i]);if(g!==void 0)throw g;u=_}else if(await i,p=n.route[t],p)u=await f(p);else if(t==="action"){let g=new URL(e.url),_=g.pathname+g.search;throw cr(405,{method:e.method,pathname:_,routeId:n.route.id})}else return{type:"data",result:void 0};else if(p)u=await f(p);else{let g=new URL(e.url),_=g.pathname+g.search;throw cr(404,{pathname:_})}}catch(p){return{type:"error",result:p}}finally{h&&e.signal.removeEventListener("abort",h)}return u}async function rC(t){var i,o,a,u,h,f;let{result:e,type:n}=t;if(Cw(e)){let p;try{let g=e.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?e.body==null?p=null:p=await e.json():p=await e.text()}catch(g){return{type:"error",error:g}}return n==="error"?{type:"error",error:new qc(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:"data",data:p,statusCode:e.status,headers:e.headers}}return n==="error"?Fv(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new qc(((a=e.init)==null?void 0:a.status)||500,void 0,e.data),statusCode:Ml(e)?e.status:void 0,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Ml(e)?e.status:void 0}:Fv(e)?{type:"data",data:e.data,statusCode:(h=e.init)==null?void 0:h.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function iC(t,e,n,i,o){let a=t.headers.get("Location");if(Ge(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!bp.test(a)){let u=i.slice(0,i.findIndex(h=>h.route.id===n)+1);a=zf(new URL(e.url),u,o,a),t.headers.set("Location",a)}return t}function Nv(t,e,n){if(bp.test(t)){let i=t,o=i.startsWith("//")?new URL(e.protocol+i):new URL(i),a=Pr(o.pathname,n)!=null;if(o.origin===e.origin&&a)return o.pathname+o.search+o.hash}return t}function ra(t,e,n,i){let o=t.createURL(Sw(e)).toString(),a={signal:n};if(i&&Cr(i.formMethod)){let{formMethod:u,formEncType:h}=i;a.method=u.toUpperCase(),h==="application/json"?(a.headers=new Headers({"Content-Type":h}),a.body=JSON.stringify(i.json)):h==="text/plain"?a.body=i.text:h==="application/x-www-form-urlencoded"&&i.formData?a.body=Hf(i.formData):a.body=i.formData}return new Request(o,a)}function Hf(t){let e=new URLSearchParams;for(let[n,i]of t.entries())e.append(n,typeof i=="string"?i:i.name);return e}function bv(t){let e=new FormData;for(let[n,i]of t.entries())e.append(n,i);return e}function sC(t,e,n,i=!1,o=!1){let a={},u=null,h,f=!1,p={},g=n&&Wn(n[1])?n[1].error:void 0;return t.forEach(_=>{if(!(_.route.id in e))return;let E=_.route.id,S=e[E];if(Ge(!lo(S),"Cannot handle redirect results in processLoaderData"),Wn(S)){let I=S.error;if(g!==void 0&&(I=g,g=void 0),u=u||{},o)u[E]=I;else{let k=oo(t,E);u[k.route.id]==null&&(u[k.route.id]=I)}i||(a[E]=Ew),f||(f=!0,h=Ml(S.error)?S.error.status:500),S.headers&&(p[E]=S.headers)}else a[E]=S.data,S.statusCode&&S.statusCode!==200&&!f&&(h=S.statusCode),S.headers&&(p[E]=S.headers)}),g!==void 0&&n&&(u={[n[0]]:g},a[n[0]]=void 0),{loaderData:a,errors:u,statusCode:h||200,loaderHeaders:p}}function Vv(t,e,n,i,o,a){let{loaderData:u,errors:h}=sC(e,n,i);return o.forEach(f=>{let{key:p,match:g,controller:_}=f,E=a[p];if(Ge(E,"Did not find corresponding fetcher result"),!(_&&_.signal.aborted))if(Wn(E)){let S=oo(t.matches,g==null?void 0:g.route.id);h&&h[S.route.id]||(h={...h,[S.route.id]:E.error}),t.fetchers.delete(p)}else if(lo(E))Ge(!1,"Unhandled fetcher revalidation redirect");else{let S=ds(E.data);t.fetchers.set(p,S)}}),{loaderData:u,errors:h}}function Lv(t,e,n,i){let o=Object.entries(e).filter(([,a])=>a!==Ew).reduce((a,[u,h])=>(a[u]=h,a),{});for(let a of n){let u=a.route.id;if(!e.hasOwnProperty(u)&&t.hasOwnProperty(u)&&a.route.loader&&(o[u]=t[u]),i&&i.hasOwnProperty(u))break}return o}function Mv(t){return t?Wn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function oo(t,e){return(e?t.slice(0,t.findIndex(i=>i.route.id===e)+1):[...t]).reverse().find(i=>i.route.hasErrorBoundary===!0)||t[0]}function jv(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function cr(t,{pathname:e,routeId:n,method:i,type:o,message:a}={}){let u="Unknown Server Error",h="Unknown @remix-run/router error";return t===400?(u="Bad Request",i&&e&&n?h=`You made a ${i} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:o==="invalid-body"&&(h="Unable to encode submission body")):t===403?(u="Forbidden",h=`Route "${n}" does not match URL "${e}"`):t===404?(u="Not Found",h=`No route matches URL "${e}"`):t===405&&(u="Method Not Allowed",i&&e&&n?h=`You made a ${i.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:i&&(h=`Invalid request method "${i.toUpperCase()}"`)),new qc(t||500,u,new Error(h),!0)}function xc(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[i,o]=e[n];if(lo(o))return{key:i,result:o}}}function Sw(t){let e=typeof t=="string"?ks(t):t;return xs({...e,hash:""})}function oC(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function aC(t){return Cw(t.result)&&W1.has(t.result.status)}function Wn(t){return t.type==="error"}function lo(t){return(t&&t.type)==="redirect"}function Fv(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function Cw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function lC(t){return H1.has(t.toUpperCase())}function Cr(t){return z1.has(t.toUpperCase())}function Vp(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function xl(t,e){let n=typeof e=="string"?ks(e).search:e.search;if(t[t.length-1].route.index&&Vp(n||""))return t[t.length-1];let i=_w(t);return i[i.length-1]}function Ov(t){let{formMethod:e,formAction:n,formEncType:i,text:o,formData:a,json:u}=t;if(!(!e||!n||!i)){if(o!=null)return{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:void 0,text:o};if(a!=null)return{formMethod:e,formAction:n,formEncType:i,formData:a,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:u,text:void 0}}}function wf(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function uC(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function yl(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function cC(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function ds(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function hC(t,e){try{let n=t.sessionStorage.getItem(xw);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i||{}))a&&Array.isArray(a)&&e.set(o,new Set(a||[]))}}catch{}}function dC(t,e){if(e.size>0){let n={};for(let[i,o]of e)n[i]=[...o];try{t.sessionStorage.setItem(xw,JSON.stringify(n))}catch(i){sn(!1,`Failed to save applied view transitions in sessionStorage (${i}).`)}}}function fC(){let t,e,n=new Promise((i,o)=>{t=async a=>{i(a);try{await n}catch{}},e=async a=>{o(a);try{await n}catch{}}});return{promise:n,resolve:t,reject:e}}var go=M.createContext(null);go.displayName="DataRouter";var eu=M.createContext(null);eu.displayName="DataRouterState";var Lp=M.createContext({isTransitioning:!1});Lp.displayName="ViewTransition";var Aw=M.createContext(new Map);Aw.displayName="Fetchers";var pC=M.createContext(null);pC.displayName="Await";var ri=M.createContext(null);ri.displayName="Navigation";var yh=M.createContext(null);yh.displayName="Location";var bi=M.createContext({outlet:null,matches:[],isDataRoute:!1});bi.displayName="Route";var Mp=M.createContext(null);Mp.displayName="RouteError";function mC(t,{relative:e}={}){Ge(tu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=M.useContext(ri),{hash:o,pathname:a,search:u}=nu(t,{relative:e}),h=a;return n!=="/"&&(h=a==="/"?n:Yr([n,a])),i.createHref({pathname:h,search:u,hash:o})}function tu(){return M.useContext(yh)!=null}function Vi(){return Ge(tu(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(yh).location}var Pw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Iw(t){M.useContext(ri).static||M.useLayoutEffect(t)}function vh(){let{isDataRoute:t}=M.useContext(bi);return t?IC():gC()}function gC(){Ge(tu(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(go),{basename:e,navigator:n}=M.useContext(ri),{matches:i}=M.useContext(bi),{pathname:o}=Vi(),a=JSON.stringify(Dp(i)),u=M.useRef(!1);return Iw(()=>{u.current=!0}),M.useCallback((f,p={})=>{if(sn(u.current,Pw),!u.current)return;if(typeof f=="number"){n.go(f);return}let g=Np(f,JSON.parse(a),o,p.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Yr([e,g.pathname])),(p.replace?n.replace:n.push)(g,p.state,p)},[e,n,a,o,t])}M.createContext(null);function nu(t,{relative:e}={}){let{matches:n}=M.useContext(bi),{pathname:i}=Vi(),o=JSON.stringify(Dp(n));return M.useMemo(()=>Np(t,JSON.parse(o),i,e==="path"),[t,o,i,e])}function yC(t,e,n,i){Ge(tu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:a}=M.useContext(ri),{matches:u}=M.useContext(bi),h=u[u.length-1],f=h?h.params:{},p=h?h.pathname:"/",g=h?h.pathnameBase:"/",_=h&&h.route;{let z=_&&_.path||"";Rw(p,!_||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let E=Vi(),S;S=E;let I=S.pathname||"/",k=I;if(g!=="/"){let z=g.replace(/^\//,"").split("/");k="/"+I.replace(/^\//,"").split("/").slice(z.length).join("/")}let D=!a&&n&&n.matches&&n.matches.length>0?n.matches:ps(t,{pathname:k});return sn(_||D!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),sn(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),EC(D&&D.map(z=>Object.assign({},z,{params:Object.assign({},f,z.params),pathname:Yr([g,o.encodeLocation?o.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?g:Yr([g,o.encodeLocation?o.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),u,n,i)}function vC(){let t=PC(),e=Ml(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:a},"ErrorBoundary")," or"," ",M.createElement("code",{style:a},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:o},n):null,u)}var _C=M.createElement(vC,null),wC=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?M.createElement(bi.Provider,{value:this.props.routeContext},M.createElement(Mp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xC({routeContext:t,match:e,children:n}){let i=M.useContext(go);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(bi.Provider,{value:t},n)}function EC(t,e=[],n=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=n==null?void 0:n.errors;if(a!=null){let f=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);Ge(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,h=-1;if(n)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:g,errors:_}=n,E=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!_||_[p.route.id]===void 0);if(p.route.lazy||E){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let _,E=!1,S=null,I=null;n&&(_=a&&p.route.id?a[p.route.id]:void 0,S=p.route.errorElement||_C,u&&(h<0&&g===0?(Rw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,I=null):h===g&&(E=!0,I=p.route.hydrateFallbackElement||null)));let k=e.concat(o.slice(0,g+1)),D=()=>{let j;return _?j=S:E?j=I:p.route.Component?j=M.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=f,M.createElement(xC,{match:p,routeContext:{outlet:f,matches:k,isDataRoute:n!=null},children:j})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?M.createElement(wC,{location:n.location,revalidation:n.revalidation,component:S,error:_,children:D(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):D()},null)}function jp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TC(t){let e=M.useContext(go);return Ge(e,jp(t)),e}function SC(t){let e=M.useContext(eu);return Ge(e,jp(t)),e}function CC(t){let e=M.useContext(bi);return Ge(e,jp(t)),e}function Fp(t){let e=CC(t),n=e.matches[e.matches.length-1];return Ge(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function AC(){return Fp("useRouteId")}function PC(){var i;let t=M.useContext(Mp),e=SC("useRouteError"),n=Fp("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function IC(){let{router:t}=TC("useNavigate"),e=Fp("useNavigate"),n=M.useRef(!1);return Iw(()=>{n.current=!0}),M.useCallback(async(o,a={})=>{sn(n.current,Pw),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...a}))},[t,e])}var Uv={};function Rw(t,e,n){!e&&!Uv[t]&&(Uv[t]=!0,sn(!1,n))}var Bv={};function zv(t,e){!t&&!Bv[e]&&(Bv[e]=!0,console.warn(e))}function RC(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&sn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:M.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&sn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:M.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&sn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:M.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var kC=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",n(i))}})}};function DC({router:t,flushSync:e}){let[n,i]=M.useState(t.state),[o,a]=M.useState(),[u,h]=M.useState({isTransitioning:!1}),[f,p]=M.useState(),[g,_]=M.useState(),[E,S]=M.useState(),I=M.useRef(new Map),k=M.useCallback((W,{deletedFetchers:ee,flushSync:X,viewTransitionOpts:b})=>{W.fetchers.forEach((C,P)=>{C.data!==void 0&&I.current.set(P,C.data)}),ee.forEach(C=>I.current.delete(C)),zv(X===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let R=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(zv(b==null||R,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!b||!R){e&&X?e(()=>i(W)):M.startTransition(()=>i(W));return}if(e&&X){e(()=>{g&&(f&&f.resolve(),g.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:b.currentLocation,nextLocation:b.nextLocation})});let C=t.window.document.startViewTransition(()=>{e(()=>i(W))});C.finished.finally(()=>{e(()=>{p(void 0),_(void 0),a(void 0),h({isTransitioning:!1})})}),e(()=>_(C));return}g?(f&&f.resolve(),g.skipTransition(),S({state:W,currentLocation:b.currentLocation,nextLocation:b.nextLocation})):(a(W),h({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}))},[t.window,e,g,f]);M.useLayoutEffect(()=>t.subscribe(k),[t,k]),M.useEffect(()=>{u.isTransitioning&&!u.flushSync&&p(new kC)},[u]),M.useEffect(()=>{if(f&&o&&t.window){let W=o,ee=f.promise,X=t.window.document.startViewTransition(async()=>{M.startTransition(()=>i(W)),await ee});X.finished.finally(()=>{p(void 0),_(void 0),a(void 0),h({isTransitioning:!1})}),_(X)}},[o,f,t.window]),M.useEffect(()=>{f&&o&&n.location.key===o.location.key&&f.resolve()},[f,g,n.location,o]),M.useEffect(()=>{!u.isTransitioning&&E&&(a(E.state),h({isTransitioning:!0,flushSync:!1,currentLocation:E.currentLocation,nextLocation:E.nextLocation}),S(void 0))},[u.isTransitioning,E]);let D=M.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:W=>t.navigate(W),push:(W,ee,X)=>t.navigate(W,{state:ee,preventScrollReset:X==null?void 0:X.preventScrollReset}),replace:(W,ee,X)=>t.navigate(W,{replace:!0,state:ee,preventScrollReset:X==null?void 0:X.preventScrollReset})}),[t]),j=t.basename||"/",z=M.useMemo(()=>({router:t,navigator:D,static:!1,basename:j}),[t,D,j]);return M.createElement(M.Fragment,null,M.createElement(go.Provider,{value:z},M.createElement(eu.Provider,{value:n},M.createElement(Aw.Provider,{value:I.current},M.createElement(Lp.Provider,{value:u},M.createElement(VC,{basename:j,location:n.location,navigationType:n.historyAction,navigator:D},M.createElement(NC,{routes:t.routes,future:t.future,state:n})))))),null)}var NC=M.memo(bC);function bC({routes:t,future:e,state:n}){return yC(t,void 0,n,e)}function VC({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:a=!1}){Ge(!tu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),h=M.useMemo(()=>({basename:u,navigator:o,static:a,future:{}}),[u,o,a]);typeof n=="string"&&(n=ks(n));let{pathname:f="/",search:p="",hash:g="",state:_=null,key:E="default"}=n,S=M.useMemo(()=>{let I=Pr(f,u);return I==null?null:{location:{pathname:I,search:p,hash:g,state:_,key:E},navigationType:i}},[u,f,p,g,_,E,i]);return sn(S!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:M.createElement(ri.Provider,{value:h},M.createElement(yh.Provider,{children:e,value:S}))}var bc="get",Vc="application/x-www-form-urlencoded";function _h(t){return t!=null&&typeof t.tagName=="string"}function LC(t){return _h(t)&&t.tagName.toLowerCase()==="button"}function MC(t){return _h(t)&&t.tagName.toLowerCase()==="form"}function jC(t){return _h(t)&&t.tagName.toLowerCase()==="input"}function FC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function OC(t,e){return t.button===0&&(!e||e==="_self")&&!FC(t)}var Ec=null;function UC(){if(Ec===null)try{new FormData(document.createElement("form"),0),Ec=!1}catch{Ec=!0}return Ec}var BC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xf(t){return t!=null&&!BC.has(t)?(sn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vc}"`),null):t}function zC(t,e){let n,i,o,a,u;if(MC(t)){let h=t.getAttribute("action");i=h?Pr(h,e):null,n=t.getAttribute("method")||bc,o=xf(t.getAttribute("enctype"))||Vc,a=new FormData(t)}else if(LC(t)||jC(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||h.getAttribute("action");if(i=f?Pr(f,e):null,n=t.getAttribute("formmethod")||h.getAttribute("method")||bc,o=xf(t.getAttribute("formenctype"))||xf(h.getAttribute("enctype"))||Vc,a=new FormData(h,t),!UC()){let{name:p,type:g,value:_}=t;if(g==="image"){let E=p?`${p}.`:"";a.append(`${E}x`,"0"),a.append(`${E}y`,"0")}else p&&a.append(p,_)}}else{if(_h(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=bc,i=null,o=Vc,u=t}return a&&o==="text/plain"&&(u=a,a=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:a,body:u}}function Op(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function $C(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function HC(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function WC(t,e,n){let i=await Promise.all(t.map(async o=>{let a=e.routes[o.route.id];if(a){let u=await $C(a,n);return u.links?u.links():[]}return[]}));return QC(i.flat(1).filter(HC).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function $v(t,e,n,i,o,a){let u=(f,p)=>n[p]?f.route.id!==n[p].route.id:!0,h=(f,p)=>{var g;return n[p].pathname!==f.pathname||((g=n[p].route.path)==null?void 0:g.endsWith("*"))&&n[p].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,p)=>u(f,p)||h(f,p)):a==="data"?e.filter((f,p)=>{var _;let g=i.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(u(f,p)||h(f,p))return!0;if(f.route.shouldRevalidate){let E=f.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((_=n[0])==null?void 0:_.params)||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function qC(t,e,{includeHydrateFallback:n}={}){return KC(t.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function KC(t){return[...new Set(t)]}function GC(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function QC(t,e){let n=new Set;return new Set(e),t.reduce((i,o)=>{let a=JSON.stringify(GC(o));return n.has(a)||(n.add(a),i.push({key:a,link:o})),i},[])}function YC(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function XC(){let t=M.useContext(go);return Op(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function JC(){let t=M.useContext(eu);return Op(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Up=M.createContext(void 0);Up.displayName="FrameworkContext";function kw(){let t=M.useContext(Up);return Op(t,"You must render this element inside a <HydratedRouter> element"),t}function ZC(t,e){let n=M.useContext(Up),[i,o]=M.useState(!1),[a,u]=M.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:p,onMouseLeave:g,onTouchStart:_}=e,E=M.useRef(null);M.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let k=j=>{j.forEach(z=>{u(z.isIntersecting)})},D=new IntersectionObserver(k,{threshold:.5});return E.current&&D.observe(E.current),()=>{D.disconnect()}}},[t]),M.useEffect(()=>{if(i){let k=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(k)}}},[i]);let S=()=>{o(!0)},I=()=>{o(!1),u(!1)};return n?t!=="intent"?[a,E,{}]:[a,E,{onFocus:vl(h,S),onBlur:vl(f,I),onMouseEnter:vl(p,S),onMouseLeave:vl(g,I),onTouchStart:vl(_,S)}]:[!1,E,{}]}function vl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function eA({page:t,...e}){let{router:n}=XC(),i=M.useMemo(()=>ps(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?M.createElement(nA,{page:t,matches:i,...e}):null}function tA(t){let{manifest:e,routeModules:n}=kw(),[i,o]=M.useState([]);return M.useEffect(()=>{let a=!1;return WC(t,e,n).then(u=>{a||o(u)}),()=>{a=!0}},[t,e,n]),i}function nA({page:t,matches:e,...n}){let i=Vi(),{manifest:o,routeModules:a}=kw(),{loaderData:u,matches:h}=JC(),f=M.useMemo(()=>$v(t,e,h,o,i,"data"),[t,e,h,o,i]),p=M.useMemo(()=>$v(t,e,h,o,i,"assets"),[t,e,h,o,i]),g=M.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let S=new Set,I=!1;if(e.forEach(D=>{var z;let j=o.routes[D.route.id];!j||!j.hasLoader||(!f.some(W=>W.route.id===D.route.id)&&D.route.id in u&&((z=a[D.route.id])!=null&&z.shouldRevalidate)||j.hasClientLoader?I=!0:S.add(D.route.id))}),S.size===0)return[];let k=YC(t);return I&&S.size>0&&k.searchParams.set("_routes",e.filter(D=>S.has(D.route.id)).map(D=>D.route.id).join(",")),[k.pathname+k.search]},[u,i,o,f,e,t,a]),_=M.useMemo(()=>qC(p,o),[p,o]),E=tA(p);return M.createElement(M.Fragment,null,g.map(S=>M.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),_.map(S=>M.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),E.map(({key:S,link:I})=>M.createElement("link",{key:S,...I})))}function rA(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Dw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Dw&&(window.__reactRouterVersion="7.2.0")}catch{}function iA(t,e){return Q1({basename:e==null?void 0:e.basename,future:e==null?void 0:e.future,history:_1({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||sA(),routes:t,mapRouteProperties:RC,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function sA(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:oA(t.errors)}),t}function oA(t){if(!t)return null;let e=Object.entries(t),n={};for(let[i,o]of e)if(o&&o.__type==="RouteErrorResponse")n[i]=new qc(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let a=window[o.__subType];if(typeof a=="function")try{let u=new a(o.message);u.stack="",n[i]=u}catch{}}if(n[i]==null){let a=new Error(o.message);a.stack="",n[i]=a}}else n[i]=o;return n}var Nw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ao=M.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:a,replace:u,state:h,target:f,to:p,preventScrollReset:g,viewTransition:_,...E},S){let{basename:I}=M.useContext(ri),k=typeof p=="string"&&Nw.test(p),D,j=!1;if(typeof p=="string"&&k&&(D=p,Dw))try{let P=new URL(window.location.href),L=p.startsWith("//")?new URL(P.protocol+p):new URL(p),O=Pr(L.pathname,I);L.origin===P.origin&&O!=null?p=O+L.search+L.hash:j=!0}catch{sn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=mC(p,{relative:o}),[W,ee,X]=ZC(i,E),b=cA(p,{replace:u,state:h,target:f,preventScrollReset:g,relative:o,viewTransition:_});function R(P){e&&e(P),P.defaultPrevented||b(P)}let C=M.createElement("a",{...E,...X,href:D||z,onClick:j||a?e:R,ref:rA(S,ee),target:f,"data-discover":!k&&n==="render"?"true":void 0});return W&&!k?M.createElement(M.Fragment,null,C,M.createElement(eA,{page:z})):C});ao.displayName="Link";var aA=M.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:a,to:u,viewTransition:h,children:f,...p},g){let _=nu(u,{relative:p.relative}),E=Vi(),S=M.useContext(eu),{navigator:I,basename:k}=M.useContext(ri),D=S!=null&&mA(_)&&h===!0,j=I.encodeLocation?I.encodeLocation(_).pathname:_.pathname,z=E.pathname,W=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;n||(z=z.toLowerCase(),W=W?W.toLowerCase():null,j=j.toLowerCase()),W&&k&&(W=Pr(W,k)||W);const ee=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let X=z===j||!o&&z.startsWith(j)&&z.charAt(ee)==="/",b=W!=null&&(W===j||!o&&W.startsWith(j)&&W.charAt(j.length)==="/"),R={isActive:X,isPending:b,isTransitioning:D},C=X?e:void 0,P;typeof i=="function"?P=i(R):P=[i,X?"active":null,b?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let L=typeof a=="function"?a(R):a;return M.createElement(ao,{...p,"aria-current":C,className:P,ref:g,style:L,to:u,viewTransition:h},typeof f=="function"?f(R):f)});aA.displayName="NavLink";var lA=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:a,method:u=bc,action:h,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:_,...E},S)=>{let I=fA(),k=pA(h,{relative:p}),D=u.toLowerCase()==="get"?"get":"post",j=typeof h=="string"&&Nw.test(h),z=W=>{if(f&&f(W),W.defaultPrevented)return;W.preventDefault();let ee=W.nativeEvent.submitter,X=(ee==null?void 0:ee.getAttribute("formmethod"))||u;I(ee||W.currentTarget,{fetcherKey:e,method:X,navigate:n,replace:o,state:a,relative:p,preventScrollReset:g,viewTransition:_})};return M.createElement("form",{ref:S,method:D,action:k,onSubmit:i?f:z,...E,"data-discover":!j&&t==="render"?"true":void 0})});lA.displayName="Form";function uA(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bw(t){let e=M.useContext(go);return Ge(e,uA(t)),e}function cA(t,{target:e,replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:u}={}){let h=vh(),f=Vi(),p=nu(t,{relative:a});return M.useCallback(g=>{if(OC(g,e)){g.preventDefault();let _=n!==void 0?n:xs(f)===xs(p);h(t,{replace:_,state:i,preventScrollReset:o,relative:a,viewTransition:u})}},[f,h,p,n,i,e,t,o,a,u])}var hA=0,dA=()=>`__${String(++hA)}__`;function fA(){let{router:t}=bw("useSubmit"),{basename:e}=M.useContext(ri),n=AC();return M.useCallback(async(i,o={})=>{let{action:a,method:u,encType:h,formData:f,body:p}=zC(i,e);if(o.navigate===!1){let g=o.fetcherKey||dA();await t.fetch(g,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||u,formEncType:o.encType||h,flushSync:o.flushSync})}else await t.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||u,formEncType:o.encType||h,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function pA(t,{relative:e}={}){let{basename:n}=M.useContext(ri),i=M.useContext(bi);Ge(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),a={...nu(t||".",{relative:e})},u=Vi();if(t==null){a.search=u.search;let h=new URLSearchParams(a.search),f=h.getAll("index");if(f.some(g=>g==="")){h.delete("index"),f.filter(_=>_).forEach(_=>h.append("index",_));let g=h.toString();a.search=g?`?${g}`:""}}return(!t||t===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Yr([n,a.pathname])),xs(a)}function mA(t,e={}){let n=M.useContext(Lp);Ge(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=bw("useViewTransitionState"),o=nu(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=Pr(n.currentLocation.pathname,i)||n.currentLocation.pathname,u=Pr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Wc(o.pathname,u)!=null||Wc(o.pathname,a)!=null}new TextEncoder;var gA=gw();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yA(t){return M.createElement(DC,{flushSync:gA.flushSync,...t})}function yo(){return w.jsxs("nav",{className:"bg-(--bg3) flex items-center justify-between text-(--secondary) max-w-[1440px] m-auto border uppercase",children:[w.jsxs("ul",{className:"flex text-base items-center",children:[w.jsx("li",{className:"py-[16px]",children:w.jsx(ao,{to:"/",className:"py-[16px] px-[32px] border-r",children:"Home"})}),w.jsx("li",{className:"py-[16px]",children:w.jsx(ao,{to:"/explore",className:"border-r py-[16px] px-[32px]",children:"Explore"})}),w.jsx("li",{className:"py-[16px]",children:w.jsx(ao,{to:"/about",className:"border-r py-[16px] px-[32px]",children:"About"})})]}),w.jsxs("ul",{className:"flex text-base items-center",children:[w.jsx("li",{className:"py-[16px]",children:w.jsx(ao,{to:"/cart",className:"border-l py-[16px] px-[32px]",children:"Cart"})}),w.jsx("li",{className:"py-[16px]",children:w.jsx(ao,{to:"/account",className:"border-l py-[16px] px-[32px]",children:"Account"})})]})]})}const Bp=M.createContext({});function zp(t){const e=M.useRef(null);return e.current===null&&(e.current=t()),e.current}const wh=M.createContext(null),$p=M.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class vA extends M.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,o=i instanceof HTMLElement&&i.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=o-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function _A({children:t,isPresent:e,anchorX:n}){const i=M.useId(),o=M.useRef(null),a=M.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=M.useContext($p);return M.useInsertionEffect(()=>{const{width:h,height:f,top:p,left:g,right:_}=a.current;if(e||!o.current||!h||!f)return;const E=n==="left"?`left: ${g}`:`right: ${_}`;o.current.dataset.motionPopId=i;const S=document.createElement("style");return u&&(S.nonce=u),document.head.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${f}px !important;
            ${E}px !important;
            top: ${p}px !important;
          }
        `),()=>{document.head.removeChild(S)}},[e]),w.jsx(vA,{isPresent:e,childRef:o,sizeRef:a,children:M.cloneElement(t,{ref:o})})}const wA=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:o,presenceAffectsLayout:a,mode:u,anchorX:h})=>{const f=zp(xA),p=M.useId(),g=M.useCallback(E=>{f.set(E,!0);for(const S of f.values())if(!S)return;i&&i()},[f,i]),_=M.useMemo(()=>({id:p,initial:e,isPresent:n,custom:o,onExitComplete:g,register:E=>(f.set(E,!1),()=>f.delete(E))}),a?[Math.random(),g]:[n,g]);return M.useMemo(()=>{f.forEach((E,S)=>f.set(S,!1))},[n]),M.useEffect(()=>{!n&&!f.size&&i&&i()},[n]),u==="popLayout"&&(t=w.jsx(_A,{isPresent:n,anchorX:h,children:t})),w.jsx(wh.Provider,{value:_,children:t})};function xA(){return new Map}function Vw(t=!0){const e=M.useContext(wh);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:o}=e,a=M.useId();M.useEffect(()=>{if(t)return o(a)},[t]);const u=M.useCallback(()=>t&&i&&i(a),[a,i,t]);return!n&&i?[!1,u]:[!0]}const Tc=t=>t.key||"";function Hv(t){const e=[];return M.Children.forEach(t,n=>{M.isValidElement(n)&&e.push(n)}),e}const Hp=typeof window<"u",Lw=Hp?M.useLayoutEffect:M.useEffect,Mw=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:a="sync",propagate:u=!1,anchorX:h="left"})=>{const[f,p]=Vw(u),g=M.useMemo(()=>Hv(t),[t]),_=u&&!f?[]:g.map(Tc),E=M.useRef(!0),S=M.useRef(g),I=zp(()=>new Map),[k,D]=M.useState(g),[j,z]=M.useState(g);Lw(()=>{E.current=!1,S.current=g;for(let X=0;X<j.length;X++){const b=Tc(j[X]);_.includes(b)?I.delete(b):I.get(b)!==!0&&I.set(b,!1)}},[j,_.length,_.join("-")]);const W=[];if(g!==k){let X=[...g];for(let b=0;b<j.length;b++){const R=j[b],C=Tc(R);_.includes(C)||(X.splice(b,0,R),W.push(R))}return a==="wait"&&W.length&&(X=W),z(Hv(X)),D(g),null}const{forceRender:ee}=M.useContext(Bp);return w.jsx(w.Fragment,{children:j.map(X=>{const b=Tc(X),R=u&&!f?!1:g===j||_.includes(b),C=()=>{if(I.has(b))I.set(b,!0);else return;let P=!0;I.forEach(L=>{L||(P=!1)}),P&&(ee==null||ee(),z(S.current),u&&(p==null||p()),i&&i())};return w.jsx(wA,{isPresent:R,initial:!E.current||n?void 0:!1,custom:e,presenceAffectsLayout:o,mode:a,onExitComplete:R?void 0:C,anchorX:h,children:X},b)})})},Kn=t=>t;let jw=Kn;function Wp(t){let e;return()=>(e===void 0&&(e=t()),e)}const ga=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Ci=t=>t*1e3,Ai=t=>t/1e3,EA={useManualTiming:!1},Sc=["read","resolveKeyframes","update","preRender","render","postRender"],Wv={value:null};function TA(t,e){let n=new Set,i=new Set,o=!1,a=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1},f=0;function p(_){u.has(_)&&(g.schedule(_),t()),f++,_(h)}const g={schedule:(_,E=!1,S=!1)=>{const k=S&&o?n:i;return E&&u.add(_),k.has(_)||k.add(_),_},cancel:_=>{i.delete(_),u.delete(_)},process:_=>{if(h=_,o){a=!0;return}o=!0,[n,i]=[i,n],n.forEach(p),e&&Wv.value&&Wv.value.frameloop[e].push(f),f=0,n.clear(),o=!1,a&&(a=!1,g.process(_))}};return g}const SA=40;function Fw(t,e){let n=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,u=Sc.reduce((j,z)=>(j[z]=TA(a,e?z:void 0),j),{}),{read:h,resolveKeyframes:f,update:p,preRender:g,render:_,postRender:E}=u,S=()=>{const j=performance.now();n=!1,o.delta=i?1e3/60:Math.max(Math.min(j-o.timestamp,SA),1),o.timestamp=j,o.isProcessing=!0,h.process(o),f.process(o),p.process(o),g.process(o),_.process(o),E.process(o),o.isProcessing=!1,n&&e&&(i=!1,t(S))},I=()=>{n=!0,i=!0,o.isProcessing||t(S)};return{schedule:Sc.reduce((j,z)=>{const W=u[z];return j[z]=(ee,X=!1,b=!1)=>(n||I(),W.schedule(ee,X,b)),j},{}),cancel:j=>{for(let z=0;z<Sc.length;z++)u[Sc[z]].cancel(j)},state:o,steps:u}}const{schedule:yt,cancel:Es,state:tn,steps:Ef}=Fw(typeof requestAnimationFrame<"u"?requestAnimationFrame:Kn,!0),Ow=M.createContext({strict:!1}),qv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ya={};for(const t in qv)ya[t]={isEnabled:e=>qv[t].some(n=>!!e[n])};function CA(t){for(const e in t)ya[e]={...ya[e],...t[e]}}const AA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Kc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||AA.has(t)}let Uw=t=>!Kc(t);function PA(t){t&&(Uw=e=>e.startsWith("on")?!Kc(e):t(e))}try{PA(require("@emotion/is-prop-valid").default)}catch{}function IA(t,e,n){const i={};for(const o in t)o==="values"&&typeof t.values=="object"||(Uw(o)||n===!0&&Kc(o)||!e&&!Kc(o)||t.draggable&&o.startsWith("onDrag"))&&(i[o]=t[o]);return i}function RA(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,o)=>o==="create"?t:(e.has(o)||e.set(o,t(o)),e.get(o))})}const xh=M.createContext({});function Eh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function jl(t){return typeof t=="string"||Array.isArray(t)}const qp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Kp=["initial",...qp];function Th(t){return Eh(t.animate)||Kp.some(e=>jl(t[e]))}function Bw(t){return!!(Th(t)||t.variants)}function kA(t,e){if(Th(t)){const{initial:n,animate:i}=t;return{initial:n===!1||jl(n)?n:void 0,animate:jl(i)?i:void 0}}return t.inherit!==!1?e:{}}function DA(t){const{initial:e,animate:n}=kA(t,M.useContext(xh));return M.useMemo(()=>({initial:e,animate:n}),[Kv(e),Kv(n)])}function Kv(t){return Array.isArray(t)?t.join(" "):t}const NA=Symbol.for("motionComponentSymbol");function la(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function bA(t,e,n){return M.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):la(n)&&(n.current=i))},[e])}const Gp=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),VA="framerAppearId",zw="data-"+Gp(VA),{schedule:Qp}=Fw(queueMicrotask,!1),$w=M.createContext({});function LA(t,e,n,i,o){var a,u;const{visualElement:h}=M.useContext(xh),f=M.useContext(Ow),p=M.useContext(wh),g=M.useContext($p).reducedMotion,_=M.useRef(null);i=i||f.renderer,!_.current&&i&&(_.current=i(t,{visualState:e,parent:h,props:n,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:g}));const E=_.current,S=M.useContext($w);E&&!E.projection&&o&&(E.type==="html"||E.type==="svg")&&MA(_.current,n,o,S);const I=M.useRef(!1);M.useInsertionEffect(()=>{E&&I.current&&E.update(n,p)});const k=n[zw],D=M.useRef(!!k&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,k))&&((u=window.MotionHasOptimisedAnimation)===null||u===void 0?void 0:u.call(window,k)));return Lw(()=>{E&&(I.current=!0,window.MotionIsMounted=!0,E.updateFeatures(),Qp.render(E.render),D.current&&E.animationState&&E.animationState.animateChanges())}),M.useEffect(()=>{E&&(!D.current&&E.animationState&&E.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{var j;(j=window.MotionHandoffMarkAsComplete)===null||j===void 0||j.call(window,k)}),D.current=!1))}),E}function MA(t,e,n,i){const{layoutId:o,layout:a,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Hw(t.parent)),t.projection.setOptions({layoutId:o,layout:a,alwaysMeasureLayout:!!u||h&&la(h),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:p})}function Hw(t){if(t)return t.options.allowProjection!==!1?t.projection:Hw(t.parent)}function jA({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:o}){var a,u;t&&CA(t);function h(p,g){let _;const E={...M.useContext($p),...p,layoutId:FA(p)},{isStatic:S}=E,I=DA(p),k=i(p,S);if(!S&&Hp){OA();const D=UA(E);_=D.MeasureLayout,I.visualElement=LA(o,k,E,e,D.ProjectionNode)}return w.jsxs(xh.Provider,{value:I,children:[_&&I.visualElement?w.jsx(_,{visualElement:I.visualElement,...E}):null,n(o,p,bA(k,I.visualElement,g),k,S,I.visualElement)]})}h.displayName=`motion.${typeof o=="string"?o:`create(${(u=(a=o.displayName)!==null&&a!==void 0?a:o.name)!==null&&u!==void 0?u:""})`}`;const f=M.forwardRef(h);return f[NA]=o,f}function FA({layoutId:t}){const e=M.useContext(Bp).id;return e&&t!==void 0?e+"-"+t:t}function OA(t,e){M.useContext(Ow).strict}function UA(t){const{drag:e,layout:n}=ya;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const Ww=t=>e=>typeof e=="string"&&e.startsWith(t),Yp=Ww("--"),BA=Ww("var(--"),Xp=t=>BA(t)?zA.test(t.split("/*")[0].trim()):!1,zA=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Fl={};function $A(t){for(const e in t)Fl[e]=t[e],Yp(e)&&(Fl[e].isCSSVariable=!0)}const Pa=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vo=new Set(Pa);function qw(t,{layout:e,layoutId:n}){return vo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Fl[t]||t==="opacity")}const _n=t=>!!(t&&t.getVelocity),Kw=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ii=(t,e,n)=>n>e?e:n<t?t:n,Ia={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ol={...Ia,transform:t=>Ii(0,1,t)},Cc={...Ia,default:1},ru=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),fs=ru("deg"),Xr=ru("%"),Ne=ru("px"),HA=ru("vh"),WA=ru("vw"),Gv={...Xr,parse:t=>Xr.parse(t)/100,transform:t=>Xr.transform(t*100)},qA={borderWidth:Ne,borderTopWidth:Ne,borderRightWidth:Ne,borderBottomWidth:Ne,borderLeftWidth:Ne,borderRadius:Ne,radius:Ne,borderTopLeftRadius:Ne,borderTopRightRadius:Ne,borderBottomRightRadius:Ne,borderBottomLeftRadius:Ne,width:Ne,maxWidth:Ne,height:Ne,maxHeight:Ne,top:Ne,right:Ne,bottom:Ne,left:Ne,padding:Ne,paddingTop:Ne,paddingRight:Ne,paddingBottom:Ne,paddingLeft:Ne,margin:Ne,marginTop:Ne,marginRight:Ne,marginBottom:Ne,marginLeft:Ne,backgroundPositionX:Ne,backgroundPositionY:Ne},KA={rotate:fs,rotateX:fs,rotateY:fs,rotateZ:fs,scale:Cc,scaleX:Cc,scaleY:Cc,scaleZ:Cc,skew:fs,skewX:fs,skewY:fs,distance:Ne,translateX:Ne,translateY:Ne,translateZ:Ne,x:Ne,y:Ne,z:Ne,perspective:Ne,transformPerspective:Ne,opacity:Ol,originX:Gv,originY:Gv,originZ:Ne},Qv={...Ia,transform:Math.round},Jp={...qA,...KA,zIndex:Qv,size:Ne,fillOpacity:Ol,strokeOpacity:Ol,numOctaves:Qv},GA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},QA=Pa.length;function YA(t,e,n){let i="",o=!0;for(let a=0;a<QA;a++){const u=Pa[a],h=t[u];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(u.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||n){const p=Kw(h,Jp[u]);if(!f){o=!1;const g=GA[u]||u;i+=`${g}(${p}) `}n&&(e[u]=p)}}return i=i.trim(),n?i=n(e,o?"":i):o&&(i="none"),i}function Zp(t,e,n){const{style:i,vars:o,transformOrigin:a}=t;let u=!1,h=!1;for(const f in e){const p=e[f];if(vo.has(f)){u=!0;continue}else if(Yp(f)){o[f]=p;continue}else{const g=Kw(p,Jp[f]);f.startsWith("origin")?(h=!0,a[f]=g):i[f]=g}}if(e.transform||(u||n?i.transform=YA(e,t.transform,n):i.transform&&(i.transform="none")),h){const{originX:f="50%",originY:p="50%",originZ:g=0}=a;i.transformOrigin=`${f} ${p} ${g}`}}const em=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Gw(t,e,n){for(const i in e)!_n(e[i])&&!qw(i,n)&&(t[i]=e[i])}function XA({transformTemplate:t},e){return M.useMemo(()=>{const n=em();return Zp(n,e,t),Object.assign({},n.vars,n.style)},[e])}function JA(t,e){const n=t.style||{},i={};return Gw(i,n,t),Object.assign(i,XA(t,e)),i}function ZA(t,e){const n={},i=JA(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const eP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tm(t){return typeof t!="string"||t.includes("-")?!1:!!(eP.indexOf(t)>-1||/[A-Z]/u.test(t))}const tP={offset:"stroke-dashoffset",array:"stroke-dasharray"},nP={offset:"strokeDashoffset",array:"strokeDasharray"};function rP(t,e,n=1,i=0,o=!0){t.pathLength=1;const a=o?tP:nP;t[a.offset]=Ne.transform(-i);const u=Ne.transform(e),h=Ne.transform(n);t[a.array]=`${u} ${h}`}function Yv(t,e,n){return typeof t=="string"?t:Ne.transform(e+n*t)}function iP(t,e,n){const i=Yv(e,t.x,t.width),o=Yv(n,t.y,t.height);return`${i} ${o}`}function nm(t,{attrX:e,attrY:n,attrScale:i,originX:o,originY:a,pathLength:u,pathSpacing:h=1,pathOffset:f=0,...p},g,_){if(Zp(t,p,_),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:E,style:S,dimensions:I}=t;E.transform&&(I&&(S.transform=E.transform),delete E.transform),I&&(o!==void 0||a!==void 0||S.transform)&&(S.transformOrigin=iP(I,o!==void 0?o:.5,a!==void 0?a:.5)),e!==void 0&&(E.x=e),n!==void 0&&(E.y=n),i!==void 0&&(E.scale=i),u!==void 0&&rP(E,u,h,f,!1)}const Qw=()=>({...em(),attrs:{}}),rm=t=>typeof t=="string"&&t.toLowerCase()==="svg";function sP(t,e,n,i){const o=M.useMemo(()=>{const a=Qw();return nm(a,e,rm(i),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};Gw(a,t.style,t),o.style={...a,...o.style}}return o}function oP(t=!1){return(n,i,o,{latestValues:a},u)=>{const f=(tm(n)?sP:ZA)(i,a,u,n),p=IA(i,typeof n=="string",t),g=n!==M.Fragment?{...p,...f,ref:o}:{},{children:_}=i,E=M.useMemo(()=>_n(_)?_.get():_,[_]);return M.createElement(n,{...g,children:E})}}function Xv(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function im(t,e,n,i){if(typeof e=="function"){const[o,a]=Xv(i);e=e(n!==void 0?n:t.custom,o,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,a]=Xv(i);e=e(n!==void 0?n:t.custom,o,a)}return e}const Wf=t=>Array.isArray(t),aP=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),lP=t=>Wf(t)?t[t.length-1]||0:t;function Lc(t){const e=_n(t)?t.get():t;return aP(e)?e.toValue():e}function uP({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,o,a){const u={latestValues:cP(i,o,a,t),renderState:e()};return n&&(u.onMount=h=>n({props:i,current:h,...u}),u.onUpdate=h=>n(h)),u}const Yw=t=>(e,n)=>{const i=M.useContext(xh),o=M.useContext(wh),a=()=>uP(t,e,i,o);return n?a():zp(a)};function cP(t,e,n,i){const o={},a=i(t,{});for(const E in a)o[E]=Lc(a[E]);let{initial:u,animate:h}=t;const f=Th(t),p=Bw(t);e&&p&&!f&&t.inherit!==!1&&(u===void 0&&(u=e.initial),h===void 0&&(h=e.animate));let g=n?n.initial===!1:!1;g=g||u===!1;const _=g?h:u;if(_&&typeof _!="boolean"&&!Eh(_)){const E=Array.isArray(_)?_:[_];for(let S=0;S<E.length;S++){const I=im(t,E[S]);if(I){const{transitionEnd:k,transition:D,...j}=I;for(const z in j){let W=j[z];if(Array.isArray(W)){const ee=g?W.length-1:0;W=W[ee]}W!==null&&(o[z]=W)}for(const z in k)o[z]=k[z]}}}return o}function sm(t,e,n){var i;const{style:o}=t,a={};for(const u in o)(_n(o[u])||e.style&&_n(e.style[u])||qw(u,t)||((i=n==null?void 0:n.getValue(u))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(a[u]=o[u]);return a}const hP={useVisualState:Yw({scrapeMotionValuesFromProps:sm,createRenderState:em})};function Xw(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function Jw(t,{style:e,vars:n},i,o){Object.assign(t.style,e,o&&o.getProjectionStyles(i));for(const a in n)t.style.setProperty(a,n[a])}const Zw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ex(t,e,n,i){Jw(t,e,void 0,i);for(const o in e.attrs)t.setAttribute(Zw.has(o)?o:Gp(o),e.attrs[o])}function tx(t,e,n){const i=sm(t,e,n);for(const o in t)if(_n(t[o])||_n(e[o])){const a=Pa.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[a]=t[o]}return i}const Jv=["x","y","width","height","cx","cy","r"],dP={useVisualState:Yw({scrapeMotionValuesFromProps:tx,createRenderState:Qw,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:o})=>{if(!n)return;let a=!!t.drag;if(!a){for(const h in o)if(vo.has(h)){a=!0;break}}if(!a)return;let u=!e;if(e)for(let h=0;h<Jv.length;h++){const f=Jv[h];t[f]!==e[f]&&(u=!0)}u&&yt.read(()=>{Xw(n,i),yt.render(()=>{nm(i,o,rm(n.tagName),t.transformTemplate),ex(n,i)})})}})};function fP(t,e){return function(i,{forwardMotionProps:o}={forwardMotionProps:!1}){const u={...tm(i)?dP:hP,preloadedFeatures:t,useRender:oP(o),createVisualElement:e,Component:i};return jA(u)}}function Ul(t,e,n){const i=t.getProps();return im(i,e,n!==void 0?n:i.custom,t)}const pP=Wp(()=>window.ScrollTimeline!==void 0);class mP{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(o=>{if(pP()&&o.attachTimeline)return o.attachTimeline(e);if(typeof n=="function")return n(o)});return()=>{i.forEach((o,a)=>{o&&o(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class gP extends mP{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function om(t,e){return t?t[e]||t.default||t:void 0}const qf=2e4;function nx(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<qf;)e+=n,i=t.next(e);return e>=qf?1/0:e}function am(t){return typeof t=="function"}function Zv(t,e){t.timeline=e,t.onfinish=null}const lm=t=>Array.isArray(t)&&typeof t[0]=="number",yP={linearEasing:void 0};function vP(t,e){const n=Wp(t);return()=>{var i;return(i=yP[e])!==null&&i!==void 0?i:n()}}const Gc=vP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),rx=(t,e,n=10)=>{let i="";const o=Math.max(Math.round(e/n),2);for(let a=0;a<o;a++)i+=t(ga(0,o-1,a))+", ";return`linear(${i.substring(0,i.length-2)})`};function ix(t){return!!(typeof t=="function"&&Gc()||!t||typeof t=="string"&&(t in Kf||Gc())||lm(t)||Array.isArray(t)&&t.every(ix))}const El=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Kf={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:El([0,.65,.55,1]),circOut:El([.55,0,1,.45]),backIn:El([.31,.01,.66,-.59]),backOut:El([.33,1.53,.69,.99])};function sx(t,e){if(t)return typeof t=="function"&&Gc()?rx(t,e):lm(t)?El(t):Array.isArray(t)?t.map(n=>sx(n,e)||Kf.easeOut):Kf[t]}const Sr={x:!1,y:!1};function ox(){return Sr.x||Sr.y}function _P(t,e,n){var i;if(t instanceof EventTarget)return[t];if(typeof t=="string"){let o=document;const a=(i=void 0)!==null&&i!==void 0?i:o.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function ax(t,e){const n=_P(t),i=new AbortController,o={passive:!0,...e,signal:i.signal};return[n,o,()=>i.abort()]}function e0(t){return!(t.pointerType==="touch"||ox())}function wP(t,e,n={}){const[i,o,a]=ax(t,n),u=h=>{if(!e0(h))return;const{target:f}=h,p=e(f,h);if(typeof p!="function"||!f)return;const g=_=>{e0(_)&&(p(_),f.removeEventListener("pointerleave",g))};f.addEventListener("pointerleave",g,o)};return i.forEach(h=>{h.addEventListener("pointerenter",u,o)}),a}function Qc(t,e){const n=`${e}PointerCapture`;if(t.target instanceof Element&&n in t.target&&t.pointerId!==void 0)try{t.target[n](t.pointerId)}catch{}}const lx=(t,e)=>e?t===e?!0:lx(t,e.parentElement):!1,um=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,xP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function EP(t){return xP.has(t.tagName)||t.tabIndex!==-1}const Tl=new WeakSet;function t0(t){return e=>{e.key==="Enter"&&t(e)}}function Tf(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const TP=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=t0(()=>{if(Tl.has(n))return;Tf(n,"down");const o=t0(()=>{Tf(n,"up")}),a=()=>Tf(n,"cancel");n.addEventListener("keyup",o,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function n0(t){return um(t)&&!ox()}function SP(t,e,n={}){const[i,o,a]=ax(t,n),u=h=>{const f=h.currentTarget;if(!f||!n0(h)||Tl.has(f))return;Tl.add(f),Qc(h,"set");const p=e(f,h),g=(S,I)=>{f.removeEventListener("pointerup",_),f.removeEventListener("pointercancel",E),Qc(S,"release"),!(!n0(S)||!Tl.has(f))&&(Tl.delete(f),typeof p=="function"&&p(S,{success:I}))},_=S=>{(S.isTrusted?CP(S,f instanceof Element?f.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}):!1)?g(S,!1):g(S,!(f instanceof Element)||lx(f,S.target))},E=S=>{g(S,!1)};f.addEventListener("pointerup",_,o),f.addEventListener("pointercancel",E,o),f.addEventListener("lostpointercapture",E,o)};return i.forEach(h=>{h=n.useGlobalTarget?window:h;let f=!1;h instanceof HTMLElement&&(f=!0,!EP(h)&&h.getAttribute("tabindex")===null&&(h.tabIndex=0)),h.addEventListener("pointerdown",u,o),f&&h.addEventListener("focus",p=>TP(p,o),o)}),a}function CP(t,e){return t.clientX<e.left||t.clientX>e.right||t.clientY<e.top||t.clientY>e.bottom}function AP(t){return t==="x"||t==="y"?Sr[t]?null:(Sr[t]=!0,()=>{Sr[t]=!1}):Sr.x||Sr.y?null:(Sr.x=Sr.y=!0,()=>{Sr.x=Sr.y=!1})}const ux=new Set(["width","height","top","left","right","bottom",...Pa]);let Mc;function PP(){Mc=void 0}const Jr={now:()=>(Mc===void 0&&Jr.set(tn.isProcessing||EA.useManualTiming?tn.timestamp:performance.now()),Mc),set:t=>{Mc=t,queueMicrotask(PP)}};function cm(t,e){t.indexOf(e)===-1&&t.push(e)}function hm(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class dm{constructor(){this.subscriptions=[]}add(e){return cm(this.subscriptions,e),()=>hm(this.subscriptions,e)}notify(e,n,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,i);else for(let a=0;a<o;a++){const u=this.subscriptions[a];u&&u(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function cx(t,e){return e?t*(1e3/e):0}const r0=30,IP=t=>!isNaN(parseFloat(t));class RP{constructor(e,n={}){this.version="12.4.7",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,o=!0)=>{const a=Jr.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Jr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=IP(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new dm);const i=this.events[e].add(n);return e==="change"?()=>{i(),yt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Jr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>r0)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,r0);return cx(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bl(t,e){return new RP(t,e)}function kP(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Bl(n))}function DP(t,e){const n=Ul(t,e);let{transitionEnd:i={},transition:o={},...a}=n||{};a={...a,...i};for(const u in a){const h=lP(a[u]);kP(t,u,h)}}function NP(t){return!!(_n(t)&&t.add)}function Gf(t,e){const n=t.getValue("willChange");if(NP(n))return n.add(e)}function hx(t){return t.props[zw]}const dx=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,bP=1e-7,VP=12;function LP(t,e,n,i,o){let a,u,h=0;do u=e+(n-e)/2,a=dx(u,i,o)-t,a>0?n=u:e=u;while(Math.abs(a)>bP&&++h<VP);return u}function iu(t,e,n,i){if(t===e&&n===i)return Kn;const o=a=>LP(a,0,1,t,n);return a=>a===0||a===1?a:dx(o(a),e,i)}const fx=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,px=t=>e=>1-t(1-e),mx=iu(.33,1.53,.69,.99),fm=px(mx),gx=fx(fm),yx=t=>(t*=2)<1?.5*fm(t):.5*(2-Math.pow(2,-10*(t-1))),pm=t=>1-Math.sin(Math.acos(t)),vx=px(pm),_x=fx(pm),wx=t=>/^0[^.\s]+$/u.test(t);function MP(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||wx(t):!0}const Il=t=>Math.round(t*1e5)/1e5,mm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function jP(t){return t==null}const FP=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gm=(t,e)=>n=>!!(typeof n=="string"&&FP.test(n)&&n.startsWith(t)||e&&!jP(n)&&Object.prototype.hasOwnProperty.call(n,e)),xx=(t,e,n)=>i=>{if(typeof i!="string")return i;const[o,a,u,h]=i.match(mm);return{[t]:parseFloat(o),[e]:parseFloat(a),[n]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},OP=t=>Ii(0,255,t),Sf={...Ia,transform:t=>Math.round(OP(t))},uo={test:gm("rgb","red"),parse:xx("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Sf.transform(t)+", "+Sf.transform(e)+", "+Sf.transform(n)+", "+Il(Ol.transform(i))+")"};function UP(t){let e="",n="",i="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,i+=i,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const Qf={test:gm("#"),parse:UP,transform:uo.transform},ua={test:gm("hsl","hue"),parse:xx("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Xr.transform(Il(e))+", "+Xr.transform(Il(n))+", "+Il(Ol.transform(i))+")"},gn={test:t=>uo.test(t)||Qf.test(t)||ua.test(t),parse:t=>uo.test(t)?uo.parse(t):ua.test(t)?ua.parse(t):Qf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?uo.transform(t):ua.transform(t)},BP=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function zP(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(mm))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(BP))===null||n===void 0?void 0:n.length)||0)>0}const Ex="number",Tx="color",$P="var",HP="var(",i0="${}",WP=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zl(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},o=[];let a=0;const h=e.replace(WP,f=>(gn.test(f)?(i.color.push(a),o.push(Tx),n.push(gn.parse(f))):f.startsWith(HP)?(i.var.push(a),o.push($P),n.push(f)):(i.number.push(a),o.push(Ex),n.push(parseFloat(f))),++a,i0)).split(i0);return{values:n,split:h,indexes:i,types:o}}function Sx(t){return zl(t).values}function Cx(t){const{split:e,types:n}=zl(t),i=e.length;return o=>{let a="";for(let u=0;u<i;u++)if(a+=e[u],o[u]!==void 0){const h=n[u];h===Ex?a+=Il(o[u]):h===Tx?a+=gn.transform(o[u]):a+=o[u]}return a}}const qP=t=>typeof t=="number"?0:t;function KP(t){const e=Sx(t);return Cx(t)(e.map(qP))}const Ts={test:zP,parse:Sx,createTransformer:Cx,getAnimatableNone:KP},GP=new Set(["brightness","contrast","saturate","opacity"]);function QP(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(mm)||[];if(!i)return t;const o=n.replace(i,"");let a=GP.has(e)?1:0;return i!==n&&(a*=100),e+"("+a+o+")"}const YP=/\b([a-z-]*)\(.*?\)/gu,Yf={...Ts,getAnimatableNone:t=>{const e=t.match(YP);return e?e.map(QP).join(" "):t}},XP={...Jp,color:gn,backgroundColor:gn,outlineColor:gn,fill:gn,stroke:gn,borderColor:gn,borderTopColor:gn,borderRightColor:gn,borderBottomColor:gn,borderLeftColor:gn,filter:Yf,WebkitFilter:Yf},ym=t=>XP[t];function Ax(t,e){let n=ym(t);return n!==Yf&&(n=Ts),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const JP=new Set(["auto","none","0"]);function ZP(t,e,n){let i=0,o;for(;i<t.length&&!o;){const a=t[i];typeof a=="string"&&!JP.has(a)&&zl(a).values.length&&(o=t[i]),i++}if(o&&n)for(const a of e)t[a]=Ax(n,o)}const s0=t=>t===Ia||t===Ne,o0=(t,e)=>parseFloat(t.split(", ")[e]),a0=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const o=i.match(/^matrix3d\((.+)\)$/u);if(o)return o0(o[1],e);{const a=i.match(/^matrix\((.+)\)$/u);return a?o0(a[1],t):0}},eI=new Set(["x","y","z"]),tI=Pa.filter(t=>!eI.has(t));function nI(t){const e=[];return tI.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const va={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:a0(4,13),y:a0(5,14)};va.translateX=va.x;va.translateY=va.y;const fo=new Set;let Xf=!1,Jf=!1;function Px(){if(Jf){const t=Array.from(fo).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const o=nI(i);o.length&&(n.set(i,o),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const o=n.get(i);o&&o.forEach(([a,u])=>{var h;(h=i.getValue(a))===null||h===void 0||h.set(u)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Jf=!1,Xf=!1,fo.forEach(t=>t.complete()),fo.clear()}function Ix(){fo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Jf=!0)})}function rI(){Ix(),Px()}class vm{constructor(e,n,i,o,a,u=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=o,this.element=a,this.isAsync=u}scheduleResolve(){this.isScheduled=!0,this.isAsync?(fo.add(this),Xf||(Xf=!0,yt.read(Ix),yt.resolveKeyframes(Px))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:o}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const u=o==null?void 0:o.get(),h=e[e.length-1];if(u!==void 0)e[0]=u;else if(i&&n){const f=i.readValue(n,h);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=h),o&&u===void 0&&o.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),fo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,fo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Rx=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),iI=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function sI(t){const e=iI.exec(t);if(!e)return[,];const[,n,i,o]=e;return[`--${n??i}`,o]}function kx(t,e,n=1){const[i,o]=sI(t);if(!i)return;const a=window.getComputedStyle(e).getPropertyValue(i);if(a){const u=a.trim();return Rx(u)?parseFloat(u):u}return Xp(o)?kx(o,e,n+1):o}const Dx=t=>e=>e.test(t),oI={test:t=>t==="auto",parse:t=>t},Nx=[Ia,Ne,Xr,fs,WA,HA,oI],l0=t=>Nx.find(Dx(t));class bx extends vm{constructor(e,n,i,o,a){super(e,n,i,o,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let p=e[f];if(typeof p=="string"&&(p=p.trim(),Xp(p))){const g=kx(p,n.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!ux.has(i)||e.length!==2)return;const[o,a]=e,u=l0(o),h=l0(a);if(u!==h)if(s0(u)&&s0(h))for(let f=0;f<e.length;f++){const p=e[f];typeof p=="string"&&(e[f]=parseFloat(p))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let o=0;o<e.length;o++)MP(e[o])&&i.push(o);i.length&&ZP(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=va[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(i,o).jump(o,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:o}=this;if(!n||!n.current)return;const a=n.getValue(i);a&&a.jump(this.measuredOrigin,!1);const u=o.length-1,h=o[u];o[u]=va[i](n.measureViewportBox(),window.getComputedStyle(n.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([f,p])=>{n.getValue(f).set(p)}),this.resolveNoneKeyframes()}}const u0=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ts.test(t)||t==="0")&&!t.startsWith("url("));function aI(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function lI(t,e,n,i){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],u=u0(o,e),h=u0(a,e);return!u||!h?!1:aI(t)||(n==="spring"||am(n))&&i}const uI=t=>t!==null;function Sh(t,{repeat:e,repeatType:n="loop"},i){const o=t.filter(uI),a=e&&n!=="loop"&&e%2===1?0:o.length-1;return!a||i===void 0?o[a]:i}const cI=40;class Vx{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",...h}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Jr.now(),this.options={autoplay:e,delay:n,type:i,repeat:o,repeatDelay:a,repeatType:u,...h},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>cI?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&rI(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Jr.now(),this.hasAttemptedResolve=!0;const{name:i,type:o,velocity:a,delay:u,onComplete:h,onUpdate:f,isGenerator:p}=this.options;if(!p&&!lI(e,i,o,a))if(u)this.options.duration=0;else{f&&f(Sh(e,this.options,n)),h&&h(),this.resolveFinishedPromise();return}const g=this.initPlayback(e,n);g!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...g},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const It=(t,e,n)=>t+(e-t)*n;function Cf(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function hI({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let o=0,a=0,u=0;if(!e)o=a=u=n;else{const h=n<.5?n*(1+e):n+e-n*e,f=2*n-h;o=Cf(f,h,t+1/3),a=Cf(f,h,t),u=Cf(f,h,t-1/3)}return{red:Math.round(o*255),green:Math.round(a*255),blue:Math.round(u*255),alpha:i}}function Yc(t,e){return n=>n>0?e:t}const Af=(t,e,n)=>{const i=t*t,o=n*(e*e-i)+i;return o<0?0:Math.sqrt(o)},dI=[Qf,uo,ua],fI=t=>dI.find(e=>e.test(t));function c0(t){const e=fI(t);if(!e)return!1;let n=e.parse(t);return e===ua&&(n=hI(n)),n}const h0=(t,e)=>{const n=c0(t),i=c0(e);if(!n||!i)return Yc(t,e);const o={...n};return a=>(o.red=Af(n.red,i.red,a),o.green=Af(n.green,i.green,a),o.blue=Af(n.blue,i.blue,a),o.alpha=It(n.alpha,i.alpha,a),uo.transform(o))},pI=(t,e)=>n=>e(t(n)),su=(...t)=>t.reduce(pI),Zf=new Set(["none","hidden"]);function mI(t,e){return Zf.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function gI(t,e){return n=>It(t,e,n)}function _m(t){return typeof t=="number"?gI:typeof t=="string"?Xp(t)?Yc:gn.test(t)?h0:_I:Array.isArray(t)?Lx:typeof t=="object"?gn.test(t)?h0:yI:Yc}function Lx(t,e){const n=[...t],i=n.length,o=t.map((a,u)=>_m(a)(a,e[u]));return a=>{for(let u=0;u<i;u++)n[u]=o[u](a);return n}}function yI(t,e){const n={...t,...e},i={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(i[o]=_m(t[o])(t[o],e[o]));return o=>{for(const a in i)n[a]=i[a](o);return n}}function vI(t,e){var n;const i=[],o={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const u=e.types[a],h=t.indexes[u][o[u]],f=(n=t.values[h])!==null&&n!==void 0?n:0;i[a]=f,o[u]++}return i}const _I=(t,e)=>{const n=Ts.createTransformer(e),i=zl(t),o=zl(e);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?Zf.has(t)&&!o.values.length||Zf.has(e)&&!i.values.length?mI(t,e):su(Lx(vI(i,o),o.values),n):Yc(t,e)};function Mx(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?It(t,e,n):_m(t)(t,e)}const wI=5;function jx(t,e,n){const i=Math.max(e-wI,0);return cx(n-t(i),e-i)}const Dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},d0=.001;function xI({duration:t=Dt.duration,bounce:e=Dt.bounce,velocity:n=Dt.velocity,mass:i=Dt.mass}){let o,a,u=1-e;u=Ii(Dt.minDamping,Dt.maxDamping,u),t=Ii(Dt.minDuration,Dt.maxDuration,Ai(t)),u<1?(o=p=>{const g=p*u,_=g*t,E=g-n,S=ep(p,u),I=Math.exp(-_);return d0-E/S*I},a=p=>{const _=p*u*t,E=_*n+n,S=Math.pow(u,2)*Math.pow(p,2)*t,I=Math.exp(-_),k=ep(Math.pow(p,2),u);return(-o(p)+d0>0?-1:1)*((E-S)*I)/k}):(o=p=>{const g=Math.exp(-p*t),_=(p-n)*t+1;return-.001+g*_},a=p=>{const g=Math.exp(-p*t),_=(n-p)*(t*t);return g*_});const h=5/t,f=TI(o,a,h);if(t=Ci(t),isNaN(f))return{stiffness:Dt.stiffness,damping:Dt.damping,duration:t};{const p=Math.pow(f,2)*i;return{stiffness:p,damping:u*2*Math.sqrt(i*p),duration:t}}}const EI=12;function TI(t,e,n){let i=n;for(let o=1;o<EI;o++)i=i-t(i)/e(i);return i}function ep(t,e){return t*Math.sqrt(1-e*e)}const SI=["duration","bounce"],CI=["stiffness","damping","mass"];function f0(t,e){return e.some(n=>t[n]!==void 0)}function AI(t){let e={velocity:Dt.velocity,stiffness:Dt.stiffness,damping:Dt.damping,mass:Dt.mass,isResolvedFromDuration:!1,...t};if(!f0(t,CI)&&f0(t,SI))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),o=i*i,a=2*Ii(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:Dt.mass,stiffness:o,damping:a}}else{const n=xI(t);e={...e,...n,mass:Dt.mass},e.isResolvedFromDuration=!0}return e}function Fx(t=Dt.visualDuration,e=Dt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:o}=n;const a=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],h={done:!1,value:a},{stiffness:f,damping:p,mass:g,duration:_,velocity:E,isResolvedFromDuration:S}=AI({...n,velocity:-Ai(n.velocity||0)}),I=E||0,k=p/(2*Math.sqrt(f*g)),D=u-a,j=Ai(Math.sqrt(f/g)),z=Math.abs(D)<5;i||(i=z?Dt.restSpeed.granular:Dt.restSpeed.default),o||(o=z?Dt.restDelta.granular:Dt.restDelta.default);let W;if(k<1){const X=ep(j,k);W=b=>{const R=Math.exp(-k*j*b);return u-R*((I+k*j*D)/X*Math.sin(X*b)+D*Math.cos(X*b))}}else if(k===1)W=X=>u-Math.exp(-j*X)*(D+(I+j*D)*X);else{const X=j*Math.sqrt(k*k-1);W=b=>{const R=Math.exp(-k*j*b),C=Math.min(X*b,300);return u-R*((I+k*j*D)*Math.sinh(C)+X*D*Math.cosh(C))/X}}const ee={calculatedDuration:S&&_||null,next:X=>{const b=W(X);if(S)h.done=X>=_;else{let R=0;k<1&&(R=X===0?Ci(I):jx(W,X,b));const C=Math.abs(R)<=i,P=Math.abs(u-b)<=o;h.done=C&&P}return h.value=h.done?u:b,h},toString:()=>{const X=Math.min(nx(ee),qf),b=rx(R=>ee.next(X*R).value,X,30);return X+"ms "+b}};return ee}function p0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:u,min:h,max:f,restDelta:p=.5,restSpeed:g}){const _=t[0],E={done:!1,value:_},S=C=>h!==void 0&&C<h||f!==void 0&&C>f,I=C=>h===void 0?f:f===void 0||Math.abs(h-C)<Math.abs(f-C)?h:f;let k=n*e;const D=_+k,j=u===void 0?D:u(D);j!==D&&(k=j-_);const z=C=>-k*Math.exp(-C/i),W=C=>j+z(C),ee=C=>{const P=z(C),L=W(C);E.done=Math.abs(P)<=p,E.value=E.done?j:L};let X,b;const R=C=>{S(E.value)&&(X=C,b=Fx({keyframes:[E.value,I(E.value)],velocity:jx(W,C,E.value),damping:o,stiffness:a,restDelta:p,restSpeed:g}))};return R(0),{calculatedDuration:null,next:C=>{let P=!1;return!b&&X===void 0&&(P=!0,ee(C),R(C)),X!==void 0&&C>=X?b.next(C-X):(!P&&ee(C),E)}}}const PI=iu(.42,0,1,1),II=iu(0,0,.58,1),_a=iu(.42,0,.58,1),RI=t=>Array.isArray(t)&&typeof t[0]!="number",kI={linear:Kn,easeIn:PI,easeInOut:_a,easeOut:II,circIn:pm,circInOut:_x,circOut:vx,backIn:fm,backInOut:gx,backOut:mx,anticipate:yx},m0=t=>{if(lm(t)){jw(t.length===4);const[e,n,i,o]=t;return iu(e,n,i,o)}else if(typeof t=="string")return kI[t];return t};function DI(t,e,n){const i=[],o=n||Mx,a=t.length-1;for(let u=0;u<a;u++){let h=o(t[u],t[u+1]);if(e){const f=Array.isArray(e)?e[u]||Kn:e;h=su(f,h)}i.push(h)}return i}function NI(t,e,{clamp:n=!0,ease:i,mixer:o}={}){const a=t.length;if(jw(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const h=DI(e,i,o),f=h.length,p=g=>{if(u&&g<t[0])return e[0];let _=0;if(f>1)for(;_<t.length-2&&!(g<t[_+1]);_++);const E=ga(t[_],t[_+1],g);return h[_](E)};return n?g=>p(Ii(t[0],t[a-1],g)):p}function bI(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const o=ga(0,e,i);t.push(It(n,1,o))}}function VI(t){const e=[0];return bI(e,t.length-1),e}function LI(t,e){return t.map(n=>n*e)}function MI(t,e){return t.map(()=>e||_a).splice(0,t.length-1)}function Xc({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const o=RI(i)?i.map(m0):m0(i),a={done:!1,value:e[0]},u=LI(n&&n.length===e.length?n:VI(e),t),h=NI(u,e,{ease:Array.isArray(o)?o:MI(e,o)});return{calculatedDuration:t,next:f=>(a.value=h(f),a.done=f>=t,a)}}const jI=t=>{const e=({timestamp:n})=>t(n);return{start:()=>yt.update(e,!0),stop:()=>Es(e),now:()=>tn.isProcessing?tn.timestamp:Jr.now()}},FI={decay:p0,inertia:p0,tween:Xc,keyframes:Xc,spring:Fx},OI=t=>t/100;class wm extends Vx{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:n,motionValue:i,element:o,keyframes:a}=this.options,u=(o==null?void 0:o.KeyframeResolver)||vm,h=(f,p)=>this.onKeyframesResolved(f,p);this.resolver=new u(a,h,n,i,o),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a,velocity:u=0}=this.options,h=am(n)?n:FI[n]||Xc;let f,p;h!==Xc&&typeof e[0]!="number"&&(f=su(OI,Mx(e[0],e[1])),e=[0,100]);const g=h({...this.options,keyframes:e});a==="mirror"&&(p=h({...this.options,keyframes:[...e].reverse(),velocity:-u})),g.calculatedDuration===null&&(g.calculatedDuration=nx(g));const{calculatedDuration:_}=g,E=_+o,S=E*(i+1)-o;return{generator:g,mirroredGenerator:p,mapPercentToKeyframes:f,calculatedDuration:_,resolvedDuration:E,totalDuration:S}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:o,generator:a,mirroredGenerator:u,mapPercentToKeyframes:h,keyframes:f,calculatedDuration:p,totalDuration:g,resolvedDuration:_}=i;if(this.startTime===null)return a.next(0);const{delay:E,repeat:S,repeatType:I,repeatDelay:k,onUpdate:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-g/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const j=this.currentTime-E*(this.speed>=0?1:-1),z=this.speed>=0?j<0:j>g;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let W=this.currentTime,ee=a;if(S){const C=Math.min(this.currentTime,g)/_;let P=Math.floor(C),L=C%1;!L&&C>=1&&(L=1),L===1&&P--,P=Math.min(P,S+1),!!(P%2)&&(I==="reverse"?(L=1-L,k&&(L-=k/_)):I==="mirror"&&(ee=u)),W=Ii(0,1,L)*_}const X=z?{done:!1,value:f[0]}:ee.next(W);h&&(X.value=h(X.value));let{done:b}=X;!z&&p!==null&&(b=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&b);return R&&o!==void 0&&(X.value=Sh(f,this.options,o)),D&&D(X.value),R&&this.finish(),X}get duration(){const{resolved:e}=this;return e?Ai(e.calculatedDuration):0}get time(){return Ai(this.currentTime)}set time(e){e=Ci(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ai(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=jI,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const o=this.driver.now();this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=o):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const UI=new Set(["opacity","clipPath","filter","transform"]);function BI(t,e,n,{delay:i=0,duration:o=300,repeat:a=0,repeatType:u="loop",ease:h="easeInOut",times:f}={}){const p={[e]:n};f&&(p.offset=f);const g=sx(h,o);return Array.isArray(g)&&(p.easing=g),t.animate(p,{delay:i,duration:o,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:u==="reverse"?"alternate":"normal"})}const zI=Wp(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Jc=10,$I=2e4;function HI(t){return am(t.type)||t.type==="spring"||!ix(t.ease)}function WI(t,e){const n=new wm({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const o=[];let a=0;for(;!i.done&&a<$I;)i=n.sample(a),o.push(i.value),a+=Jc;return{times:void 0,keyframes:o,duration:a-Jc,ease:"linear"}}const Ox={anticipate:yx,backInOut:gx,circInOut:_x};function qI(t){return t in Ox}class g0 extends Vx{constructor(e){super(e);const{name:n,motionValue:i,element:o,keyframes:a}=this.options;this.resolver=new bx(a,(u,h)=>this.onKeyframesResolved(u,h),n,i,o),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:o,ease:a,type:u,motionValue:h,name:f,startTime:p}=this.options;if(!h.owner||!h.owner.current)return!1;if(typeof a=="string"&&Gc()&&qI(a)&&(a=Ox[a]),HI(this.options)){const{onComplete:_,onUpdate:E,motionValue:S,element:I,...k}=this.options,D=WI(e,k);e=D.keyframes,e.length===1&&(e[1]=e[0]),i=D.duration,o=D.times,a=D.ease,u="keyframes"}const g=BI(h.owner.current,f,e,{...this.options,duration:i,times:o,ease:a});return g.startTime=p??this.calcStartTime(),this.pendingTimeline?(Zv(g,this.pendingTimeline),this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:_}=this.options;h.set(Sh(e,this.options,n)),_&&_(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:i,times:o,type:u,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Ai(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Ai(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=Ci(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Kn;const{animation:i}=n;Zv(i,e)}return Kn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:o,type:a,ease:u,times:h}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:p,onUpdate:g,onComplete:_,element:E,...S}=this.options,I=new wm({...S,keyframes:i,duration:o,type:a,ease:u,times:h,isGenerator:!0}),k=Ci(this.time);p.setWithVelocity(I.sample(k-Jc).value,I.sample(k).value,Jc)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:o,repeatType:a,damping:u,type:h}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:p}=n.owner.getProps();return zI()&&i&&UI.has(i)&&!f&&!p&&!o&&a!=="mirror"&&u!==0&&h!=="inertia"}}const KI={type:"spring",stiffness:500,damping:25,restSpeed:10},GI=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),QI={type:"keyframes",duration:.8},YI={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},XI=(t,{keyframes:e})=>e.length>2?QI:vo.has(t)?t.startsWith("scale")?GI(e[1]):KI:YI;function JI({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:o,repeat:a,repeatType:u,repeatDelay:h,from:f,elapsed:p,...g}){return!!Object.keys(g).length}const xm=(t,e,n,i={},o,a)=>u=>{const h=om(i,t)||{},f=h.delay||i.delay||0;let{elapsed:p=0}=i;p=p-Ci(f);let g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-p,onUpdate:E=>{e.set(E),h.onUpdate&&h.onUpdate(E)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:t,motionValue:e,element:a?void 0:o};JI(h)||(g={...g,...XI(t,g)}),g.duration&&(g.duration=Ci(g.duration)),g.repeatDelay&&(g.repeatDelay=Ci(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let _=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(_=!0)),_&&!a&&e.get()!==void 0){const E=Sh(g.keyframes,h);if(E!==void 0)return yt.update(()=>{g.onUpdate(E),g.onComplete()}),new gP([])}return!a&&g0.supports(g)?new g0(g):new wm(g)};function ZI({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function Ux(t,e,{delay:n=0,transitionOverride:i,type:o}={}){var a;let{transition:u=t.getDefaultTransition(),transitionEnd:h,...f}=e;i&&(u=i);const p=[],g=o&&t.animationState&&t.animationState.getState()[o];for(const _ in f){const E=t.getValue(_,(a=t.latestValues[_])!==null&&a!==void 0?a:null),S=f[_];if(S===void 0||g&&ZI(g,_))continue;const I={delay:n,...om(u||{},_)};let k=!1;if(window.MotionHandoffAnimation){const j=hx(t);if(j){const z=window.MotionHandoffAnimation(j,_,yt);z!==null&&(I.startTime=z,k=!0)}}Gf(t,_),E.start(xm(_,E,S,t.shouldReduceMotion&&ux.has(_)?{type:!1}:I,t,k));const D=E.animation;D&&p.push(D)}return h&&Promise.all(p).then(()=>{yt.update(()=>{h&&DP(t,h)})}),p}function tp(t,e,n={}){var i;const o=Ul(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(a=n.transitionOverride);const u=o?()=>Promise.all(Ux(t,o,n)):()=>Promise.resolve(),h=t.variantChildren&&t.variantChildren.size?(p=0)=>{const{delayChildren:g=0,staggerChildren:_,staggerDirection:E}=a;return eR(t,e,g+p,_,E,n)}:()=>Promise.resolve(),{when:f}=a;if(f){const[p,g]=f==="beforeChildren"?[u,h]:[h,u];return p().then(()=>g())}else return Promise.all([u(),h(n.delay)])}function eR(t,e,n=0,i=0,o=1,a){const u=[],h=(t.variantChildren.size-1)*i,f=o===1?(p=0)=>p*i:(p=0)=>h-p*i;return Array.from(t.variantChildren).sort(tR).forEach((p,g)=>{p.notify("AnimationStart",e),u.push(tp(p,e,{...a,delay:n+f(g)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(u)}function tR(t,e){return t.sortNodePosition(e)}function nR(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const o=e.map(a=>tp(t,a,n));i=Promise.all(o)}else if(typeof e=="string")i=tp(t,e,n);else{const o=typeof e=="function"?Ul(t,e,n.custom):e;i=Promise.all(Ux(t,o,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function Bx(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const rR=Kp.length;function zx(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?zx(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<rR;n++){const i=Kp[n],o=t.props[i];(jl(o)||o===!1)&&(e[i]=o)}return e}const iR=[...qp].reverse(),sR=qp.length;function oR(t){return e=>Promise.all(e.map(({animation:n,options:i})=>nR(t,n,i)))}function aR(t){let e=oR(t),n=y0(),i=!0;const o=f=>(p,g)=>{var _;const E=Ul(t,g,f==="exit"?(_=t.presenceContext)===null||_===void 0?void 0:_.custom:void 0);if(E){const{transition:S,transitionEnd:I,...k}=E;p={...p,...k,...I}}return p};function a(f){e=f(t)}function u(f){const{props:p}=t,g=zx(t.parent)||{},_=[],E=new Set;let S={},I=1/0;for(let D=0;D<sR;D++){const j=iR[D],z=n[j],W=p[j]!==void 0?p[j]:g[j],ee=jl(W),X=j===f?z.isActive:null;X===!1&&(I=D);let b=W===g[j]&&W!==p[j]&&ee;if(b&&i&&t.manuallyAnimateOnMount&&(b=!1),z.protectedKeys={...S},!z.isActive&&X===null||!W&&!z.prevProp||Eh(W)||typeof W=="boolean")continue;const R=lR(z.prevProp,W);let C=R||j===f&&z.isActive&&!b&&ee||D>I&&ee,P=!1;const L=Array.isArray(W)?W:[W];let O=L.reduce(o(j),{});X===!1&&(O={});const{prevResolvedValues:$={}}=z,V={...$,...O},Qe=Ae=>{C=!0,E.has(Ae)&&(P=!0,E.delete(Ae)),z.needsAnimating[Ae]=!0;const ie=t.getValue(Ae);ie&&(ie.liveStyle=!1)};for(const Ae in V){const ie=O[Ae],pe=$[Ae];if(S.hasOwnProperty(Ae))continue;let ue=!1;Wf(ie)&&Wf(pe)?ue=!Bx(ie,pe):ue=ie!==pe,ue?ie!=null?Qe(Ae):E.add(Ae):ie!==void 0&&E.has(Ae)?Qe(Ae):z.protectedKeys[Ae]=!0}z.prevProp=W,z.prevResolvedValues=O,z.isActive&&(S={...S,...O}),i&&t.blockInitialAnimation&&(C=!1),C&&(!(b&&R)||P)&&_.push(...L.map(Ae=>({animation:Ae,options:{type:j}})))}if(E.size){const D={};if(typeof p.initial!="boolean"){const j=Ul(t,Array.isArray(p.initial)?p.initial[0]:p.initial);j&&j.transition&&(D.transition=j.transition)}E.forEach(j=>{const z=t.getBaseTarget(j),W=t.getValue(j);W&&(W.liveStyle=!0),D[j]=z??null}),_.push({animation:D})}let k=!!_.length;return i&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(k=!1),i=!1,k?e(_):Promise.resolve()}function h(f,p){var g;if(n[f].isActive===p)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(E=>{var S;return(S=E.animationState)===null||S===void 0?void 0:S.setActive(f,p)}),n[f].isActive=p;const _=u(f);for(const E in n)n[E].protectedKeys={};return _}return{animateChanges:u,setActive:h,setAnimateFunction:a,getState:()=>n,reset:()=>{n=y0(),i=!0}}}function lR(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Bx(e,t):!1}function no(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function y0(){return{animate:no(!0),whileInView:no(),whileHover:no(),whileTap:no(),whileDrag:no(),whileFocus:no(),exit:no()}}class Ds{constructor(e){this.isMounted=!1,this.node=e}update(){}}class uR extends Ds{constructor(e){super(e),e.animationState||(e.animationState=aR(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Eh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let cR=0;class hR extends Ds{constructor(){super(...arguments),this.id=cR++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e);n&&!e&&o.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const dR={animation:{Feature:uR},exit:{Feature:hR}};function $l(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function ou(t){return{point:{x:t.pageX,y:t.pageY}}}const fR=t=>e=>um(e)&&t(e,ou(e));function ca(t,e,n,i){return $l(t,e,fR(n),i)}function $x({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function pR({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function mR(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}const Hx=1e-4,gR=1-Hx,yR=1+Hx,Wx=.01,vR=0-Wx,_R=0+Wx;function An(t){return t.max-t.min}function wR(t,e,n){return Math.abs(t-e)<=n}function v0(t,e,n,i=.5){t.origin=i,t.originPoint=It(e.min,e.max,t.origin),t.scale=An(n)/An(e),t.translate=It(n.min,n.max,t.origin)-t.originPoint,(t.scale>=gR&&t.scale<=yR||isNaN(t.scale))&&(t.scale=1),(t.translate>=vR&&t.translate<=_R||isNaN(t.translate))&&(t.translate=0)}function Rl(t,e,n,i){v0(t.x,e.x,n.x,i?i.originX:void 0),v0(t.y,e.y,n.y,i?i.originY:void 0)}function _0(t,e,n){t.min=n.min+e.min,t.max=t.min+An(e)}function xR(t,e,n){_0(t.x,e.x,n.x),_0(t.y,e.y,n.y)}function w0(t,e,n){t.min=e.min-n.min,t.max=t.min+An(e)}function kl(t,e,n){w0(t.x,e.x,n.x),w0(t.y,e.y,n.y)}const x0=()=>({translate:0,scale:1,origin:0,originPoint:0}),ha=()=>({x:x0(),y:x0()}),E0=()=>({min:0,max:0}),bt=()=>({x:E0(),y:E0()});function ur(t){return[t("x"),t("y")]}function Pf(t){return t===void 0||t===1}function np({scale:t,scaleX:e,scaleY:n}){return!Pf(t)||!Pf(e)||!Pf(n)}function io(t){return np(t)||qx(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function qx(t){return T0(t.x)||T0(t.y)}function T0(t){return t&&t!=="0%"}function Zc(t,e,n){const i=t-n,o=e*i;return n+o}function S0(t,e,n,i,o){return o!==void 0&&(t=Zc(t,o,i)),Zc(t,n,i)+e}function rp(t,e=0,n=1,i,o){t.min=S0(t.min,e,n,i,o),t.max=S0(t.max,e,n,i,o)}function Kx(t,{x:e,y:n}){rp(t.x,e.translate,e.scale,e.originPoint),rp(t.y,n.translate,n.scale,n.originPoint)}const C0=.999999999999,A0=1.0000000000001;function ER(t,e,n,i=!1){const o=n.length;if(!o)return;e.x=e.y=1;let a,u;for(let h=0;h<o;h++){a=n[h],u=a.projectionDelta;const{visualElement:f}=a.options;f&&f.props.style&&f.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&fa(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,Kx(t,u)),i&&io(a.latestValues)&&fa(t,a.latestValues))}e.x<A0&&e.x>C0&&(e.x=1),e.y<A0&&e.y>C0&&(e.y=1)}function da(t,e){t.min=t.min+e,t.max=t.max+e}function P0(t,e,n,i,o=.5){const a=It(t.min,t.max,o);rp(t,e,n,a,i)}function fa(t,e){P0(t.x,e.x,e.scaleX,e.scale,e.originX),P0(t.y,e.y,e.scaleY,e.scale,e.originY)}function Gx(t,e){return $x(mR(t.getBoundingClientRect(),e))}function TR(t,e,n){const i=Gx(t,n),{scroll:o}=e;return o&&(da(i.x,o.offset.x),da(i.y,o.offset.y)),i}const I0=(t,e)=>Math.abs(t-e);function SR(t,e){const n=I0(t.x,e.x),i=I0(t.y,e.y);return Math.sqrt(n**2+i**2)}class Qx{constructor(e,n,{transformPagePoint:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Rf(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,E=SR(g.offset,{x:0,y:0})>=3;if(!_&&!E)return;const{point:S}=g,{timestamp:I}=tn;this.history.push({...S,timestamp:I});const{onStart:k,onMove:D}=this.handlers;_||(k&&k(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,g)},this.handlePointerMove=(g,_)=>{if(g.target instanceof Element&&g.target.hasPointerCapture&&g.pointerId!==void 0)try{if(!g.target.hasPointerCapture(g.pointerId))return}catch{}this.lastMoveEvent=g,this.lastMoveEventInfo=If(_,this.transformPagePoint),yt.update(this.updatePoint,!0)},this.handlePointerUp=(g,_)=>{Qc(g,"release"),this.end();const{onEnd:E,onSessionEnd:S,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=Rf(g.type==="pointercancel"||g.type==="lostpointercapture"?this.lastMoveEventInfo:If(_,this.transformPagePoint),this.history);this.startEvent&&E&&E(g,k),S&&S(g,k)},!um(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i;const a=ou(e),u=If(a,this.transformPagePoint),{point:h}=u,{timestamp:f}=tn;this.history=[{...h,timestamp:f}];const{onSessionStart:p}=n;p&&p(e,Rf(u,this.history)),Qc(e,"set"),this.removeListeners=su(ca(e.currentTarget,"pointermove",this.handlePointerMove),ca(e.currentTarget,"pointerup",this.handlePointerUp),ca(e.currentTarget,"pointercancel",this.handlePointerUp),ca(e.currentTarget,"lostpointercapture",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Es(this.updatePoint)}}function If(t,e){return e?{point:e(t.point)}:t}function R0(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Rf({point:t},e){return{point:t,delta:R0(t,Yx(e)),offset:R0(t,CR(e)),velocity:AR(e,.1)}}function CR(t){return t[0]}function Yx(t){return t[t.length-1]}function AR(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const o=Yx(t);for(;n>=0&&(i=t[n],!(o.timestamp-i.timestamp>Ci(e)));)n--;if(!i)return{x:0,y:0};const a=Ai(o.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const u={x:(o.x-i.x)/a,y:(o.y-i.y)/a};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function PR(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?It(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?It(n,t,i.max):Math.min(t,n)),t}function k0(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function IR(t,{top:e,left:n,bottom:i,right:o}){return{x:k0(t.x,n,o),y:k0(t.y,e,i)}}function D0(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function RR(t,e){return{x:D0(t.x,e.x),y:D0(t.y,e.y)}}function kR(t,e){let n=.5;const i=An(t),o=An(e);return o>i?n=ga(e.min,e.max-i,t.min):i>o&&(n=ga(t.min,t.max-o,e.min)),Ii(0,1,n)}function DR(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const ip=.35;function NR(t=ip){return t===!1?t=0:t===!0&&(t=ip),{x:N0(t,"left","right"),y:N0(t,"top","bottom")}}function N0(t,e,n){return{min:b0(t,e),max:b0(t,n)}}function b0(t,e){return typeof t=="number"?t:t[e]||0}const bR=new WeakMap;class VR{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=g=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ou(g).point)},a=(g,_)=>{const{drag:E,dragPropagation:S,onDragStart:I}=this.getProps();if(E&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=AP(E),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ur(D=>{let j=this.getAxisMotionValue(D).get()||0;if(Xr.test(j)){const{projection:z}=this.visualElement;if(z&&z.layout){const W=z.layout.layoutBox[D];W&&(j=An(W)*(parseFloat(j)/100))}}this.originPoint[D]=j}),I&&yt.postRender(()=>I(g,_)),Gf(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},u=(g,_)=>{const{dragPropagation:E,dragDirectionLock:S,onDirectionLock:I,onDrag:k}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:D}=_;if(S&&this.currentDirection===null){this.currentDirection=LR(D),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",_.point,D),this.updateAxis("y",_.point,D),this.visualElement.render(),k&&k(g,_)},h=(g,_)=>this.stop(g,_),f=()=>ur(g=>{var _;return this.getAnimationState(g)==="paused"&&((_=this.getAxisMotionValue(g).animation)===null||_===void 0?void 0:_.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new Qx(e,{onSessionStart:o,onStart:a,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&yt.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:o}=this.getProps();if(!i||!Ac(e,o,this.currentDirection))return;const a=this.getAxisMotionValue(e);let u=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(u=PR(u,this.constraints[e],this.elastic[e])),a.set(u)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&la(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&o?this.constraints=IR(o.layoutBox,n):this.constraints=!1,this.elastic=NR(i),a!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&ur(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=DR(o.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!la(e))return!1;const i=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const a=TR(i,o.root,this.visualElement.getTransformPagePoint());let u=RR(o.layout.layoutBox,a);if(n){const h=n(pR(u));this.hasMutatedConstraints=!!h,h&&(u=$x(h))}return u}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:o,dragTransition:a,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},p=ur(g=>{if(!Ac(g,n,this.currentDirection))return;let _=f&&f[g]||{};u&&(_={min:0,max:0});const E=o?200:1e6,S=o?40:1e7,I={type:"inertia",velocity:i?e[g]:0,bounceStiffness:E,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...a,..._};return this.startAxisValueAnimation(g,I)});return Promise.all(p).then(h)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Gf(this.visualElement,e),i.start(xm(e,i,0,n,this.visualElement,!1))}stopAnimation(){ur(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ur(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),o=i[n];return o||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){ur(n=>{const{drag:i}=this.getProps();if(!Ac(n,i,this.currentDirection))return;const{projection:o}=this.visualElement,a=this.getAxisMotionValue(n);if(o&&o.layout){const{min:u,max:h}=o.layout.layoutBox[n];a.set(e[n]-It(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!la(n)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};ur(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const f=h.get();o[u]=kR({min:f,max:f},this.constraints[u])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ur(u=>{if(!Ac(u,e,null))return;const h=this.getAxisMotionValue(u),{min:f,max:p}=this.constraints[u];h.set(It(f,p,o[u]))})}addListeners(){if(!this.visualElement.current)return;bR.set(this.visualElement,this);const e=this.visualElement.current,n=ca(e,"pointerdown",f=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();la(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,a=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),yt.read(i);const u=$l(window,"resize",()=>this.scalePositionWithinConstraints()),h=o.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(ur(g=>{const _=this.getAxisMotionValue(g);_&&(this.originPoint[g]+=f[g].translate,_.set(_.get()+f[g].translate))}),this.visualElement.render())});return()=>{u(),n(),a(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:a=!1,dragElastic:u=ip,dragMomentum:h=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:a,dragElastic:u,dragMomentum:h}}}function Ac(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function LR(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class MR extends Ds{constructor(e){super(e),this.removeGroupControls=Kn,this.removeListeners=Kn,this.controls=new VR(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Kn}unmount(){this.removeGroupControls(),this.removeListeners()}}const V0=t=>(e,n)=>{t&&yt.postRender(()=>t(e,n))};class jR extends Ds{constructor(){super(...arguments),this.removePointerDownListener=Kn}onPointerDown(e){this.session=new Qx(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:V0(e),onStart:V0(n),onMove:i,onEnd:(a,u)=>{delete this.session,o&&yt.postRender(()=>o(a,u))}}}mount(){this.removePointerDownListener=ca(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const jc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function L0(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const _l={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ne.test(t))t=parseFloat(t);else return t;const n=L0(t,e.target.x),i=L0(t,e.target.y);return`${n}% ${i}%`}},FR={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,o=Ts.parse(t);if(o.length>5)return i;const a=Ts.createTransformer(t),u=typeof o[0]!="number"?1:0,h=n.x.scale*e.x,f=n.y.scale*e.y;o[0+u]/=h,o[1+u]/=f;const p=It(h,f,.5);return typeof o[2+u]=="number"&&(o[2+u]/=p),typeof o[3+u]=="number"&&(o[3+u]/=p),a(o)}};class OR extends M.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:o}=this.props,{projection:a}=e;$A(UR),a&&(n.group&&n.group.add(a),i&&i.register&&o&&i.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),jc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:o,isPresent:a}=this.props,u=i.projection;return u&&(u.isPresent=a,o||e.layoutDependency!==n||n===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?u.promote():u.relegate()||yt.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Qp.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Xx(t){const[e,n]=Vw(),i=M.useContext(Bp);return w.jsx(OR,{...t,layoutGroup:i,switchLayoutGroup:M.useContext($w),isPresent:e,safeToRemove:n})}const UR={borderRadius:{..._l,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_l,borderTopRightRadius:_l,borderBottomLeftRadius:_l,borderBottomRightRadius:_l,boxShadow:FR};function BR(t,e,n){const i=_n(t)?t:Bl(t);return i.start(xm("",i,e,n)),i.animation}function zR(t){return t instanceof SVGElement&&t.tagName!=="svg"}const $R=(t,e)=>t.depth-e.depth;class HR{constructor(){this.children=[],this.isDirty=!1}add(e){cm(this.children,e),this.isDirty=!0}remove(e){hm(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort($R),this.isDirty=!1,this.children.forEach(e)}}function WR(t,e){const n=Jr.now(),i=({timestamp:o})=>{const a=o-n;a>=e&&(Es(i),t(a-e))};return yt.read(i,!0),()=>Es(i)}const Jx=["TopLeft","TopRight","BottomLeft","BottomRight"],qR=Jx.length,M0=t=>typeof t=="string"?parseFloat(t):t,j0=t=>typeof t=="number"||Ne.test(t);function KR(t,e,n,i,o,a){o?(t.opacity=It(0,n.opacity!==void 0?n.opacity:1,GR(i)),t.opacityExit=It(e.opacity!==void 0?e.opacity:1,0,QR(i))):a&&(t.opacity=It(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let u=0;u<qR;u++){const h=`border${Jx[u]}Radius`;let f=F0(e,h),p=F0(n,h);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||j0(f)===j0(p)?(t[h]=Math.max(It(M0(f),M0(p),i),0),(Xr.test(p)||Xr.test(f))&&(t[h]+="%")):t[h]=p}(e.rotate||n.rotate)&&(t.rotate=It(e.rotate||0,n.rotate||0,i))}function F0(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const GR=Zx(0,.5,vx),QR=Zx(.5,.95,Kn);function Zx(t,e,n){return i=>i<t?0:i>e?1:n(ga(t,e,i))}function O0(t,e){t.min=e.min,t.max=e.max}function lr(t,e){O0(t.x,e.x),O0(t.y,e.y)}function U0(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function B0(t,e,n,i,o){return t-=e,t=Zc(t,1/n,i),o!==void 0&&(t=Zc(t,1/o,i)),t}function YR(t,e=0,n=1,i=.5,o,a=t,u=t){if(Xr.test(e)&&(e=parseFloat(e),e=It(u.min,u.max,e/100)-u.min),typeof e!="number")return;let h=It(a.min,a.max,i);t===a&&(h-=e),t.min=B0(t.min,e,n,h,o),t.max=B0(t.max,e,n,h,o)}function z0(t,e,[n,i,o],a,u){YR(t,e[n],e[i],e[o],e.scale,a,u)}const XR=["x","scaleX","originX"],JR=["y","scaleY","originY"];function $0(t,e,n,i){z0(t.x,e,XR,n?n.x:void 0,i?i.x:void 0),z0(t.y,e,JR,n?n.y:void 0,i?i.y:void 0)}function H0(t){return t.translate===0&&t.scale===1}function eE(t){return H0(t.x)&&H0(t.y)}function W0(t,e){return t.min===e.min&&t.max===e.max}function ZR(t,e){return W0(t.x,e.x)&&W0(t.y,e.y)}function q0(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function tE(t,e){return q0(t.x,e.x)&&q0(t.y,e.y)}function K0(t){return An(t.x)/An(t.y)}function G0(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class ek{constructor(){this.members=[]}add(e){cm(this.members,e),e.scheduleRender()}remove(e){if(hm(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let i;for(let o=n;o>=0;o--){const a=this.members[o];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tk(t,e,n){let i="";const o=t.x.translate/e.x,a=t.y.translate/e.y,u=(n==null?void 0:n.z)||0;if((o||a||u)&&(i=`translate3d(${o}px, ${a}px, ${u}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:g,rotateX:_,rotateY:E,skewX:S,skewY:I}=n;p&&(i=`perspective(${p}px) ${i}`),g&&(i+=`rotate(${g}deg) `),_&&(i+=`rotateX(${_}deg) `),E&&(i+=`rotateY(${E}deg) `),S&&(i+=`skewX(${S}deg) `),I&&(i+=`skewY(${I}deg) `)}const h=t.x.scale*e.x,f=t.y.scale*e.y;return(h!==1||f!==1)&&(i+=`scale(${h}, ${f})`),i||"none"}const kf=["","X","Y","Z"],nk={visibility:"hidden"},Q0=1e3;let rk=0;function Df(t,e,n,i){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),i&&(i[t]=0))}function nE(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=hx(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",yt,!(o||a))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&nE(i)}function rE({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(u={},h=e==null?void 0:e()){this.id=rk++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ok),this.nodes.forEach(hk),this.nodes.forEach(dk),this.nodes.forEach(ak)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new HR)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new dm),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const f=this.eventHandlers.get(u);f&&f.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,h=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=zR(u),this.instance=u;const{layoutId:f,layout:p,visualElement:g}=this.options;if(g&&!g.current&&g.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),h&&(p||f)&&(this.isLayoutDirty=!0),t){let _;const E=()=>this.root.updateBlockedByResize=!1;t(u,()=>{this.root.updateBlockedByResize=!0,_&&_(),_=WR(E,250),jc.hasAnimatedSinceResize&&(jc.hasAnimatedSinceResize=!1,this.nodes.forEach(X0))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&g&&(f||p)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:E,hasRelativeLayoutChanged:S,layout:I})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||g.getDefaultTransition()||yk,{onLayoutAnimationStart:D,onLayoutAnimationComplete:j}=g.getProps(),z=!this.targetLayout||!tE(this.targetLayout,I),W=!E&&S;if(this.options.layoutRoot||this.resumeFrom||W||E&&(z||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(_,W);const ee={...om(k,"layout"),onPlay:D,onComplete:j};(g.shouldReduceMotion||this.options.layoutRoot)&&(ee.delay=0,ee.type=!1),this.startAnimation(ee)}else E||X0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=I})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Es(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(fk),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&nE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const _=this.path[g];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Y0);return}this.isUpdating||this.nodes.forEach(uk),this.isUpdating=!1,this.nodes.forEach(ck),this.nodes.forEach(ik),this.nodes.forEach(sk),this.clearAllSnapshots();const h=Jr.now();tn.delta=Ii(0,1e3/60,h-tn.timestamp),tn.timestamp=h,tn.isProcessing=!0,Ef.update.process(tn),Ef.preRender.process(tn),Ef.render.process(tn),tn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Qp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(lk),this.sharedNodes.forEach(pk)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,yt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){yt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!An(this.snapshot.measuredBox.x)&&!An(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=bt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h){const f=i(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!o)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!eE(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;u&&(h||io(this.latestValues)||g)&&(o(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return u&&(f=this.removeTransform(f)),vk(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:h}=this.options;if(!h)return bt();const f=h.measureViewportBox();if(!(((u=this.scroll)===null||u===void 0?void 0:u.wasRoot)||this.path.some(_k))){const{scroll:g}=this.root;g&&(da(f.x,g.offset.x),da(f.y,g.offset.y))}return f}removeElementScroll(u){var h;const f=bt();if(lr(f,u),!((h=this.scroll)===null||h===void 0)&&h.wasRoot)return f;for(let p=0;p<this.path.length;p++){const g=this.path[p],{scroll:_,options:E}=g;g!==this.root&&_&&E.layoutScroll&&(_.wasRoot&&lr(f,u),da(f.x,_.offset.x),da(f.y,_.offset.y))}return f}applyTransform(u,h=!1){const f=bt();lr(f,u);for(let p=0;p<this.path.length;p++){const g=this.path[p];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&fa(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),io(g.latestValues)&&fa(f,g.latestValues)}return io(this.latestValues)&&fa(f,this.latestValues),f}removeTransform(u){const h=bt();lr(h,u);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!io(p.latestValues))continue;np(p.latestValues)&&p.updateSnapshot();const g=bt(),_=p.measurePageBox();lr(g,_),$0(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return io(this.latestValues)&&$0(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var h;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==f;if(!(u||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:_,layoutId:E}=this.options;if(!(!this.layout||!(_||E))){if(this.resolvedRelativeTargetAt=tn.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bt(),this.relativeTargetOrigin=bt(),kl(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=bt(),this.targetWithTransforms=bt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),xR(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):lr(this.target,this.layout.layoutBox),Kx(this.target,this.targetDelta)):lr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bt(),this.relativeTargetOrigin=bt(),kl(this.relativeTargetOrigin,this.target,S.target),lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||np(this.parent.latestValues)||qx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const h=this.getLead(),f=!!this.resumingFrom||this!==h;let p=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(p=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===tn.timestamp&&(p=!1),p)return;const{layout:g,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||_))return;lr(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,S=this.treeScale.y;ER(this.layoutCorrected,this.treeScale,this.path,f),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=bt());const{target:I}=h;if(!I){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(U0(this.prevProjectionDelta.x,this.projectionDelta.x),U0(this.prevProjectionDelta.y,this.projectionDelta.y)),Rl(this.projectionDelta,this.layoutCorrected,I,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==S||!G0(this.projectionDelta.x,this.prevProjectionDelta.x)||!G0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",I))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var h;if((h=this.options.visualElement)===null||h===void 0||h.scheduleRender(),u){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ha(),this.projectionDelta=ha(),this.projectionDeltaWithTransform=ha()}setAnimationOrigin(u,h=!1){const f=this.snapshot,p=f?f.latestValues:{},g={...this.latestValues},_=ha();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const E=bt(),S=f?f.source:void 0,I=this.layout?this.layout.source:void 0,k=S!==I,D=this.getStack(),j=!D||D.members.length<=1,z=!!(k&&!j&&this.options.crossfade===!0&&!this.path.some(gk));this.animationProgress=0;let W;this.mixTargetDelta=ee=>{const X=ee/1e3;J0(_.x,u.x,X),J0(_.y,u.y,X),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(kl(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mk(this.relativeTarget,this.relativeTargetOrigin,E,X),W&&ZR(this.relativeTarget,W)&&(this.isProjectionDirty=!1),W||(W=bt()),lr(W,this.relativeTarget)),k&&(this.animationValues=g,KR(g,p,this.latestValues,X,z,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=X},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Es(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=yt.update(()=>{jc.hasAnimatedSinceResize=!0,this.currentAnimation=BR(0,Q0,{...u,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Q0),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:f,layout:p,latestValues:g}=u;if(!(!h||!f||!p)){if(this!==u&&this.layout&&p&&iE(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||bt();const _=An(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+_;const E=An(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+E}lr(h,f),fa(h,g),Rl(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new ek),this.sharedNodes.get(u).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:h}=this.options;return h?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:h}=this.options;return h?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const p={};f.z&&Df("z",u,p,this.animationValues);for(let g=0;g<kf.length;g++)Df(`rotate${kf[g]}`,u,p,this.animationValues),Df(`skew${kf[g]}`,u,p,this.animationValues);u.render();for(const g in p)u.setStaticValue(g,p[g]),this.animationValues&&(this.animationValues[g]=p[g]);u.scheduleRender()}getProjectionStyles(u){var h,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return nk;const p={visibility:""},g=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=Lc(u==null?void 0:u.pointerEvents)||"",p.transform=g?g(this.latestValues,""):"none",p;const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=Lc(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!io(this.latestValues)&&(k.transform=g?g({},""):"none",this.hasProjected=!1),k}const E=_.animationValues||_.latestValues;this.applyTransformsToTarget(),p.transform=tk(this.projectionDeltaWithTransform,this.treeScale,E),g&&(p.transform=g(E,p.transform));const{x:S,y:I}=this.projectionDelta;p.transformOrigin=`${S.origin*100}% ${I.origin*100}% 0`,_.animationValues?p.opacity=_===this?(f=(h=E.opacity)!==null&&h!==void 0?h:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:p.opacity=_===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const k in Fl){if(E[k]===void 0)continue;const{correct:D,applyTo:j,isCSSVariable:z}=Fl[k],W=p.transform==="none"?E[k]:D(E[k],_);if(j){const ee=j.length;for(let X=0;X<ee;X++)p[j[X]]=W}else z?this.options.visualElement.renderState.vars[k]=W:p[k]=W}return this.options.layoutId&&(p.pointerEvents=_===this?Lc(u==null?void 0:u.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)===null||h===void 0?void 0:h.stop()}),this.root.nodes.forEach(Y0),this.root.sharedNodes.clear()}}}function ik(t){t.updateLayout()}function sk(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:o}=t.layout,{animationType:a}=t.options,u=n.source!==t.layout.source;a==="size"?ur(_=>{const E=u?n.measuredBox[_]:n.layoutBox[_],S=An(E);E.min=i[_].min,E.max=E.min+S}):iE(a,n.layoutBox,i)&&ur(_=>{const E=u?n.measuredBox[_]:n.layoutBox[_],S=An(i[_]);E.max=E.min+S,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[_].max=t.relativeTarget[_].min+S)});const h=ha();Rl(h,i,n.layoutBox);const f=ha();u?Rl(f,t.applyTransform(o,!0),n.measuredBox):Rl(f,i,n.layoutBox);const p=!eE(h);let g=!1;if(!t.resumeFrom){const _=t.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:E,layout:S}=_;if(E&&S){const I=bt();kl(I,n.layoutBox,E.layoutBox);const k=bt();kl(k,i,S.layoutBox),tE(I,k)||(g=!0),_.options.layoutRoot&&(t.relativeTarget=k,t.relativeTargetOrigin=I,t.relativeParent=_)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:f,layoutDelta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function ok(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ak(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function lk(t){t.clearSnapshot()}function Y0(t){t.clearMeasurements()}function uk(t){t.isLayoutDirty=!1}function ck(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function X0(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function hk(t){t.resolveTargetDelta()}function dk(t){t.calcProjection()}function fk(t){t.resetSkewAndRotation()}function pk(t){t.removeLeadSnapshot()}function J0(t,e,n){t.translate=It(e.translate,0,n),t.scale=It(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Z0(t,e,n,i){t.min=It(e.min,n.min,i),t.max=It(e.max,n.max,i)}function mk(t,e,n,i){Z0(t.x,e.x,n.x,i),Z0(t.y,e.y,n.y,i)}function gk(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const yk={duration:.45,ease:[.4,0,.1,1]},e_=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),t_=e_("applewebkit/")&&!e_("chrome/")?Math.round:Kn;function n_(t){t.min=t_(t.min),t.max=t_(t.max)}function vk(t){n_(t.x),n_(t.y)}function iE(t,e,n){return t==="position"||t==="preserve-aspect"&&!wR(K0(e),K0(n),.2)}function _k(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const wk=rE({attachResizeListener:(t,e)=>$l(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Nf={current:void 0},sE=rE({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Nf.current){const t=new wk({});t.mount(window),t.setOptions({layoutScroll:!0}),Nf.current=t}return Nf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),xk={pan:{Feature:jR},drag:{Feature:MR,ProjectionNode:sE,MeasureLayout:Xx}};function r_(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,a=i[o];a&&yt.postRender(()=>a(e,ou(e)))}class Ek extends Ds{mount(){const{current:e}=this.node;e&&(this.unmount=wP(e,(n,i)=>(r_(this.node,i,"Start"),o=>r_(this.node,o,"End"))))}unmount(){}}class Tk extends Ds{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=su($l(this.node.current,"focus",()=>this.onFocus()),$l(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function i_(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),a=i[o];a&&yt.postRender(()=>a(e,ou(e)))}class Sk extends Ds{mount(){const{current:e}=this.node;e&&(this.unmount=SP(e,(n,i)=>(i_(this.node,i,"Start"),(o,{success:a})=>i_(this.node,o,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const sp=new WeakMap,bf=new WeakMap,Ck=t=>{const e=sp.get(t.target);e&&e(t)},Ak=t=>{t.forEach(Ck)};function Pk({root:t,...e}){const n=t||document;bf.has(n)||bf.set(n,{});const i=bf.get(n),o=JSON.stringify(e);return i[o]||(i[o]=new IntersectionObserver(Ak,{root:t,...e})),i[o]}function Ik(t,e,n){const i=Pk(e);return sp.set(t,n),i.observe(t),()=>{sp.delete(t),i.unobserve(t)}}const Rk={some:0,all:1};class kk extends Ds{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:o="some",once:a}=e,u={root:n?n.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:Rk[o]},h=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,a&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:_}=this.node.getProps(),E=p?g:_;E&&E(f)};return Ik(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Dk(e,n))&&this.startObserver()}unmount(){}}function Dk({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Nk={inView:{Feature:kk},tap:{Feature:Sk},focus:{Feature:Tk},hover:{Feature:Ek}},bk={layout:{ProjectionNode:sE,MeasureLayout:Xx}},op={current:null},oE={current:!1};function Vk(){if(oE.current=!0,!!Hp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>op.current=t.matches;t.addListener(e),e()}else op.current=!1}const Lk=[...Nx,gn,Ts],Mk=t=>Lk.find(Dx(t)),jk=new WeakMap;function Fk(t,e,n){for(const i in e){const o=e[i],a=n[i];if(_n(o))t.addValue(i,o);else if(_n(a))t.addValue(i,Bl(o,{owner:t}));else if(a!==o)if(t.hasValue(i)){const u=t.getValue(i);u.liveStyle===!0?u.jump(o):u.hasAnimated||u.set(o)}else{const u=t.getStaticValue(i);t.addValue(i,Bl(u!==void 0?u:o,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const s_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Ok{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:a,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const S=Jr.now();this.renderScheduledAt<S&&(this.renderScheduledAt=S,yt.render(this.render,!1,!0))};const{latestValues:f,renderState:p,onUpdate:g}=u;this.onUpdate=g,this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=h,this.blockInitialAnimation=!!a,this.isControllingVariants=Th(n),this.isVariantNode=Bw(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:_,...E}=this.scrapeMotionValuesFromProps(n,{},this);for(const S in E){const I=E[S];f[S]!==void 0&&_n(I)&&I.set(f[S],!1)}}mount(e){this.current=e,jk.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),oE.current||Vk(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:op.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Es(this.notifyUpdate),Es(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=vo.has(e);i&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",h=>{this.latestValues[e]=h,this.props.onUpdate&&yt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{o(),a(),u&&u(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ya){const n=ya[e];if(!n)continue;const{isEnabled:i,Feature:o}=n;if(!this.features[e]&&o&&i(this.props)&&(this.features[e]=new o(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<s_.length;i++){const o=s_[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const a="on"+o,u=e[a];u&&(this.propEventSubscriptions[o]=this.on(o,u))}this.prevMotionValues=Fk(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Bl(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let o=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return o!=null&&(typeof o=="string"&&(Rx(o)||wx(o))?o=parseFloat(o):!Mk(o)&&Ts.test(n)&&(o=Ax(e,n)),this.setBaseTarget(e,_n(o)?o.get():o)),_n(o)?o.get():o}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let o;if(typeof i=="string"||typeof i=="object"){const u=im(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);u&&(o=u[e])}if(i&&o!==void 0)return o;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!_n(a)?a:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new dm),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class aE extends Ok{constructor(){super(...arguments),this.KeyframeResolver=bx}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;_n(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Uk(t){return window.getComputedStyle(t)}class Bk extends aE{constructor(){super(...arguments),this.type="html",this.renderInstance=Jw}readValueFromInstance(e,n){if(vo.has(n)){const i=ym(n);return i&&i.default||0}else{const i=Uk(e),o=(Yp(n)?i.getPropertyValue(n):i[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Gx(e,n)}build(e,n,i){Zp(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return sm(e,n,i)}}class zk extends aE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=bt,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&Xw(this.current,this.renderState)}}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(vo.has(n)){const i=ym(n);return i&&i.default||0}return n=Zw.has(n)?n:Gp(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return tx(e,n,i)}onBindTransform(){this.current&&!this.renderState.dimensions&&yt.postRender(this.updateDimensions)}build(e,n,i){nm(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,o){ex(e,n,i,o)}mount(e){this.isSVGTag=rm(e.tagName),super.mount(e)}}const $k=(t,e)=>tm(t)?new zk(e):new Bk(e,{allowProjection:t!==M.Fragment}),Hk=fP({...dR,...Nk,...xk,...bk},$k),Ct=RA(Hk),hs=({children:t,href:e})=>w.jsx(Ct.div,{className:"w-fit cursor-pointer",whileHover:"hovered",initial:"initial",whileTap:{scale:.95},children:w.jsxs(Ct.a,{href:e,className:"relative block overflow-hidden py-[1px]",style:{lineHeight:.75},children:[w.jsx("div",{children:t.split("").map((o,a)=>w.jsx(Ct.span,{variants:{initial:{y:0},hovered:{y:"-110%"}},transition:{duration:.25,ease:"easeInOut",delay:.025*a},className:"inline-block",children:o===" "?"":o},`top-${a}`))}),w.jsx("div",{className:"absolute inset-0 flex",children:t.split("").map((o,a)=>w.jsx(Ct.span,{variants:{initial:{y:"120%"},hovered:{y:1}},transition:{duration:.25,ease:"easeInOut",delay:.025*a},className:"inline-block",children:o===" "?"":o},`bottom-${a}`))})]})});function Ra(){return w.jsxs("section",{className:"mt-[256px] max-w-[1440px] text-2xl uppercase m-auto",children:[w.jsxs("ul",{className:"flex justify-between pb-[32px]",children:[w.jsx("li",{children:w.jsx(hs,{href:"#",children:"Facebook"})}),w.jsx("li",{children:w.jsx(hs,{href:"#",children:"Instagram"})}),w.jsx("li",{children:w.jsx(hs,{href:"#",children:"linkedin"})}),w.jsx("li",{children:w.jsx(hs,{href:"#",children:"Pinterest"})})]}),w.jsxs("div",{className:"flex flex-col border-t border-b pt-[32px] pb-[16px] gap-[32px]",children:[w.jsxs("div",{className:"flex justify-between",children:[w.jsx("h2",{children:w.jsx(hs,{href:"#",children:"About us"})}),w.jsx("h2",{children:w.jsx(hs,{href:"#",children:"Products"})})]}),w.jsxs("div",{className:"flex justify-between",children:[w.jsx("h2",{children:w.jsx(hs,{href:"#",children:"Delivery & Returns"})}),w.jsx("h2",{children:w.jsx(hs,{href:"#",children:"Contact"})})]})]}),w.jsx("h1",{className:"text-[256px] leading-[256px] mt-[calc(256px-1em)]",children:"Essence"})]})}const _o=({name:t,onClick:e})=>w.jsxs(Ct.a,{className:"px-[48px] py-[16px] border text-2xl uppercase cursor-pointer flex flex-col relative overflow-hidden",whileHover:"hovered",initial:"initial",style:{maxWidth:"fit-content"},onClick:e,children:[w.jsx(Ct.div,{className:"absolute px-[48px] py-[16px] left-0 top-0",variants:{initial:{y:0},hovered:{y:"-200%",scale:.2,transition:{ease:_a,duration:.2}}},children:t}),w.jsx("span",{className:"opacity-[0%]",children:t}),w.jsx(Ct.div,{className:"absolute bg-(--primary) px-[48px] py-[16px] left-0 top-0 text-(--bg)",variants:{initial:{y:"150%",scale:1},hovered:{y:0,scale:1,transition:{ease:_a,duration:.2}}},children:t})]}),Wk="/EcommerceCw/assets/discover1-2CP4AghA.webp",qk="/EcommerceCw/assets/discover2-Cu3EVhCj.webp",Kk="/EcommerceCw/assets/discover3-8uaqyIYK.webp",Gk="/EcommerceCw/assets/discover4-D4fH4sKv.jpg",Qk="/EcommerceCw/assets/discover5-NLrys5oR.avif",Yk="/EcommerceCw/assets/discover6-BSvZNFQ9.jpg",Kr=[{image:m1,category:"Sofa",productName:"Sofa"},{image:g1,category:"Living Room",productName:"Living Room"},{image:y1,category:"Kitchen",productName:"Kitchen"}],Xk=()=>w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"relative h-[100dvh]",children:w.jsxs("div",{className:"absolute z-[99] inset-0 m-auto top-[32px]",children:[w.jsx(yo,{}),w.jsx("div",{className:"max-w-[1440px] m-auto border-l border-r border-b",children:w.jsx(Jk,{})})]})}),w.jsx("section",{className:"max-w-[1440px] m-auto",children:w.jsxs("div",{children:[w.jsx(Zk,{}),w.jsx(eD,{}),w.jsx(Ra,{})]})})]}),Jk=()=>{var n;const[t,e]=M.useState(0);return M.useEffect(()=>{Kr.forEach(i=>{const o=new Image;o.src=i.image})},[]),M.useEffect(()=>{const i=setInterval(()=>{e(o=>(o+1)%Kr.length)},5e3);return()=>clearInterval(i)},[]),w.jsxs("div",{className:"relative h-[90dvh] w-full overflow-hidden",children:[w.jsx("div",{className:"absolute inset-0 bg-cover bg-center will-change-transform",style:{backgroundImage:`url(${((n=Kr[(t+1)%Kr.length])==null?void 0:n.image)||Kr[0].image})`}}),w.jsx(Mw,{children:w.jsxs(Ct.div,{className:"absolute inset-0 overflow-hidden will-change-transform",initial:{transform:"translateX(0%)"},animate:{transform:"translateX(-100%)"},exit:{transform:"translateX(-100%)"},transition:{ease:"easeInOut",duration:.5,delay:4},children:[w.jsx("div",{className:"absolute inset-0 bg-cover bg-center will-change-transform",style:{backgroundImage:`url(${Kr[t].image})`}}),w.jsxs(Ct.div,{className:"absolute left-[32px] bottom-[32px] text-white p-4 rounded-lg text-left gap-[16px] flex flex-col text-nowrap",children:[w.jsxs("div",{className:"relative w-fit text-2xl overflow-hidden",children:[w.jsx(Ct.h3,{className:"absolute",initial:{opacity:0,y:"-100%"},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:Kr[t].category}),w.jsx("span",{className:"opacity-0",children:Kr[t].category})]}),w.jsxs("div",{className:"relative w-fit h-fit text-9xl overflow-hidden pb-[16px]",children:[w.jsx(Ct.h1,{className:"absolute",initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},transition:{duration:.5,delay:0},children:Kr[t].productName}),w.jsx("span",{className:"opacity-0",children:Kr[t].productName})]})]},t)]},t)})]})},Zk=()=>w.jsxs("section",{className:"flex flex-col gap-[32px] mt-[256px]",children:[w.jsx("h2",{className:"text-5xl text-start font-[400]",children:"Essence - Inspired by Nature, Designed for Modern Living, Crafted to Elevate Your Space"}),w.jsx(_o,{name:"about us"})]}),eD=()=>w.jsxs("section",{className:"grid grid-cols-4 gap-[12px] justify-between mt-[256px]",children:[w.jsx(tD,{image:Wk}),w.jsxs("div",{className:"col-span-2 row-span 2 text-right uppercase text-2xl",children:[w.jsx("h3",{children:"Discover our"}),w.jsx("h3",{children:"unique furniture,"}),w.jsx("h3",{children:"designed for you by you"})]}),w.jsx(wl,{image:qk}),w.jsx(wl,{image:Kk}),w.jsx("div",{className:"col-span-1 row-span-1 flex flex-col justify-end",children:w.jsx(_o,{name:"Explore more"})}),w.jsx(wl,{image:Gk}),w.jsx(wl,{image:Qk}),w.jsx(wl,{image:Yk})]}),tD=({image:t})=>w.jsxs(Ct.a,{className:"col-span-2 row-span-2 cursor-pointer relative overflow-hidden",whileHover:"hoveredCard",initial:"initial",children:[w.jsx(Ct.div,{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${t})`,backgroundSize:"cover",backgroundPosition:"bottom",aspectRatio:"1/.8"},variants:{initial:{scale:1.05},hoveredCard:{scale:1,transition:{ease:"easeInOut",duration:.2}}}}),w.jsxs(Ct.div,{className:"flex items-center justify-between px-[16px] py-[16px] text-xl bg-white border border-(--black20) absolute w-full bottom-0 uppercase",variants:{initial:{y:"100%"},hoveredCard:{y:0,transition:{ease:_a,duration:.2}}},children:[w.jsx("h1",{className:"font-[400]",children:"Product Name"}),w.jsx("h2",{className:"text-base",children:"Category"})]})]}),wl=({image:t})=>w.jsxs(Ct.a,{className:"col-span-1 row-span-1 DiscoverImg self-end cursor-pointer relative overflow-hidden aspect-square",whileHover:"hoveredCard",initial:"initial",children:[w.jsx(Ct.div,{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${t})`},variants:{initial:{scale:1.05},hoveredCard:{scale:1,transition:{ease:"easeInOut",duration:.2}}}}),w.jsxs(Ct.div,{className:"flex items-center justify-between px-[16px] py-[16px] text-xl bg-white border border-(--black20) absolute w-full bottom-0 uppercase",variants:{initial:{y:"100%"},hoveredCard:{y:0,transition:{ease:_a,duration:.2}}},children:[w.jsx("h1",{className:"font-[400]",children:"Product Name"}),w.jsx("h2",{className:"text-base",children:"Category"})]})]}),nD=()=>{};var o_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},rD=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=t[n++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=t[n++],u=t[n++],h=t[n++],f=((o&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=t[n++],u=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},uE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){const a=t[o],u=o+1<t.length,h=u?t[o+1]:0,f=o+2<t.length,p=f?t[o+2]:0,g=a>>2,_=(a&3)<<4|h>>4;let E=(h&15)<<2|p>>6,S=p&63;f||(S=64,u||(E=64)),i.push(n[g],n[_],n[E],n[S])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){const a=n[t.charAt(o++)],h=o<t.length?n[t.charAt(o)]:0;++o;const p=o<t.length?n[t.charAt(o)]:64;++o;const _=o<t.length?n[t.charAt(o)]:64;if(++o,a==null||h==null||p==null||_==null)throw new iD;const E=a<<2|h>>4;if(i.push(E),p!==64){const S=h<<4&240|p>>2;if(i.push(S),_!==64){const I=p<<6&192|_;i.push(I)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class iD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sD=function(t){const e=lE(t);return uE.encodeByteArray(e,!0)},eh=function(t){return sD(t).replace(/\./g,"")},oD=function(t){try{return uE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=()=>aD().__FIREBASE_DEFAULTS__,uD=()=>{if(typeof process>"u"||typeof o_>"u")return;const t=o_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&oD(t[1]);return e&&JSON.parse(e)},Em=()=>{try{return nD()||lD()||uD()||cD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hD=t=>{var e,n;return(n=(e=Em())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},dD=t=>{const e=hD(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},cE=()=>{var t;return(t=Em())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[eh(JSON.stringify(n)),eh(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gD(){var t;const e=(t=Em())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yD(){return!gD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vD(){try{return typeof indexedDB=="object"}catch{return!1}}function _D(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="FirebaseError";class ka extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=wD,Object.setPrototypeOf(this,ka.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hE.prototype.create)}}class hE{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?xD(a,i):"Error",h=`${this.serviceName}: ${u} (${o}).`;return new ka(o,h,i)}}function xD(t,e){return t.replace(ED,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const ED=/\{\$([^}]+)}/g;function th(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const a=t[o],u=e[o];if(a_(a)&&a_(u)){if(!th(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function a_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t){return t&&t._delegate?t._delegate:t}class Hl{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new fD;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CD(e))try{this.getOrInitializeService({instanceIdentifier:so})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=so){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=so){return this.instances.has(e)}getOptions(e=so){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&u.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:SD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=so){return this.component?this.component.multipleInstances?e:so:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SD(t){return t===so?void 0:t}function CD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(et||(et={}));const PD={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},ID=et.INFO,RD={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},kD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),o=RD[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dE{constructor(e){this.name=e,this._logLevel=ID,this._logHandler=kD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const DD=(t,e)=>e.some(n=>t instanceof n);let l_,u_;function ND(){return l_||(l_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bD(){return u_||(u_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fE=new WeakMap,ap=new WeakMap,pE=new WeakMap,Vf=new WeakMap,Tm=new WeakMap;function VD(t){const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(gs(t.result)),o()},u=()=>{i(t.error),o()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&fE.set(n,t)}).catch(()=>{}),Tm.set(e,t),e}function LD(t){if(ap.has(t))return;const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),o()},u=()=>{i(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});ap.set(t,e)}let lp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function MD(t){lp=t(lp)}function jD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Lf(this),e,...n);return pE.set(i,e.sort?e.sort():[e]),gs(i)}:bD().includes(t)?function(...e){return t.apply(Lf(this),e),gs(fE.get(this))}:function(...e){return gs(t.apply(Lf(this),e))}}function FD(t){return typeof t=="function"?jD(t):(t instanceof IDBTransaction&&LD(t),DD(t,ND())?new Proxy(t,lp):t)}function gs(t){if(t instanceof IDBRequest)return VD(t);if(Vf.has(t))return Vf.get(t);const e=FD(t);return e!==t&&(Vf.set(t,e),Tm.set(e,t)),e}const Lf=t=>Tm.get(t);function OD(t,e,{blocked:n,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(t,e),h=gs(u);return i&&u.addEventListener("upgradeneeded",f=>{i(gs(u.result),f.oldVersion,f.newVersion,gs(u.transaction),f)}),n&&u.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const UD=["get","getKey","getAll","getAllKeys","count"],BD=["put","add","delete","clear"],Mf=new Map;function c_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mf.get(e))return Mf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=BD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||UD.includes(n)))return;const a=async function(u,...h){const f=this.transaction(u,o?"readwrite":"readonly");let p=f.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),o&&f.done]))[0]};return Mf.set(e,a),a}MD(t=>({...t,get:(e,n,i)=>c_(e,n)||t.get(e,n,i),has:(e,n)=>!!c_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($D(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function $D(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const up="@firebase/app",h_="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new dE("@firebase/app"),HD="@firebase/app-compat",WD="@firebase/analytics-compat",qD="@firebase/analytics",KD="@firebase/app-check-compat",GD="@firebase/app-check",QD="@firebase/auth",YD="@firebase/auth-compat",XD="@firebase/database",JD="@firebase/data-connect",ZD="@firebase/database-compat",eN="@firebase/functions",tN="@firebase/functions-compat",nN="@firebase/installations",rN="@firebase/installations-compat",iN="@firebase/messaging",sN="@firebase/messaging-compat",oN="@firebase/performance",aN="@firebase/performance-compat",lN="@firebase/remote-config",uN="@firebase/remote-config-compat",cN="@firebase/storage",hN="@firebase/storage-compat",dN="@firebase/firestore",fN="@firebase/vertexai",pN="@firebase/firestore-compat",mN="firebase",gN="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="[DEFAULT]",yN={[up]:"fire-core",[HD]:"fire-core-compat",[qD]:"fire-analytics",[WD]:"fire-analytics-compat",[GD]:"fire-app-check",[KD]:"fire-app-check-compat",[QD]:"fire-auth",[YD]:"fire-auth-compat",[XD]:"fire-rtdb",[JD]:"fire-data-connect",[ZD]:"fire-rtdb-compat",[eN]:"fire-fn",[tN]:"fire-fn-compat",[nN]:"fire-iid",[rN]:"fire-iid-compat",[iN]:"fire-fcm",[sN]:"fire-fcm-compat",[oN]:"fire-perf",[aN]:"fire-perf-compat",[lN]:"fire-rc",[uN]:"fire-rc-compat",[cN]:"fire-gcs",[hN]:"fire-gcs-compat",[dN]:"fire-fst",[pN]:"fire-fst-compat",[fN]:"fire-vertex","fire-js":"fire-js",[mN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=new Map,vN=new Map,hp=new Map;function d_(t,e){try{t.container.addComponent(e)}catch(n){ki.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rh(t){const e=t.name;if(hp.has(e))return ki.debug(`There were multiple attempts to register component ${e}.`),!1;hp.set(e,t);for(const n of nh.values())d_(n,t);for(const n of vN.values())d_(n,t);return!0}function _N(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wN(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new hE("app","Firebase",xN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Hl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=gN;function mE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:cp,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw ys.create("bad-app-name",{appName:String(o)});if(n||(n=cE()),!n)throw ys.create("no-options");const a=nh.get(o);if(a){if(th(n,a.options)&&th(i,a.config))return a;throw ys.create("duplicate-app",{appName:o})}const u=new AD(o);for(const f of hp.values())u.addComponent(f);const h=new EN(n,i,u);return nh.set(o,h),h}function SN(t=cp){const e=nh.get(t);if(!e&&t===cp&&cE())return mE();if(!e)throw ys.create("no-app",{appName:t});return e}function pa(t,e,n){var i;let o=(i=yN[t])!==null&&i!==void 0?i:t;n&&(o+=`-${n}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const h=[`Unable to register library "${o}" with version "${e}":`];a&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ki.warn(h.join(" "));return}rh(new Hl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="firebase-heartbeat-database",AN=1,Wl="firebase-heartbeat-store";let jf=null;function gE(){return jf||(jf=OD(CN,AN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ys.create("idb-open",{originalErrorMessage:t.message})})),jf}async function PN(t){try{const n=(await gE()).transaction(Wl),i=await n.objectStore(Wl).get(yE(t));return await n.done,i}catch(e){if(e instanceof ka)ki.warn(e.message);else{const n=ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ki.warn(n.message)}}}async function f_(t,e){try{const i=(await gE()).transaction(Wl,"readwrite");await i.objectStore(Wl).put(e,yE(t)),await i.done}catch(n){if(n instanceof ka)ki.warn(n.message);else{const i=ys.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ki.warn(i.message)}}}function yE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=1024,RN=30;class kN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=p_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>RN){const u=bN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ki.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=p_(),{heartbeatsToSend:i,unsentEntries:o}=DN(this._heartbeatsCache.heartbeats),a=eh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return ki.warn(n),""}}}function p_(){return new Date().toISOString().substring(0,10)}function DN(t,e=IN){const n=[];let i=t.slice();for(const o of t){const a=n.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),m_(n)>e){a.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),m_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class NN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vD()?_D().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await PN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return f_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return f_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function m_(t){return eh(JSON.stringify({version:2,heartbeats:t})).length}function bN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t){rh(new Hl("platform-logger",e=>new zD(e),"PRIVATE")),rh(new Hl("heartbeat",e=>new kN(e),"PRIVATE")),pa(up,h_,t),pa(up,h_,"esm2017"),pa("fire-js","")}VN("");var LN="firebase",MN="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pa(LN,MN,"app");var g_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,vE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,C){function P(){}P.prototype=C.prototype,R.D=C.prototype,R.prototype=new P,R.prototype.constructor=R,R.C=function(L,O,$){for(var V=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)V[Qe-2]=arguments[Qe];return C.prototype[O].apply(L,V)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,C,P){P||(P=0);var L=Array(16);if(typeof C=="string")for(var O=0;16>O;++O)L[O]=C.charCodeAt(P++)|C.charCodeAt(P++)<<8|C.charCodeAt(P++)<<16|C.charCodeAt(P++)<<24;else for(O=0;16>O;++O)L[O]=C[P++]|C[P++]<<8|C[P++]<<16|C[P++]<<24;C=R.g[0],P=R.g[1],O=R.g[2];var $=R.g[3],V=C+($^P&(O^$))+L[0]+3614090360&4294967295;C=P+(V<<7&4294967295|V>>>25),V=$+(O^C&(P^O))+L[1]+3905402710&4294967295,$=C+(V<<12&4294967295|V>>>20),V=O+(P^$&(C^P))+L[2]+606105819&4294967295,O=$+(V<<17&4294967295|V>>>15),V=P+(C^O&($^C))+L[3]+3250441966&4294967295,P=O+(V<<22&4294967295|V>>>10),V=C+($^P&(O^$))+L[4]+4118548399&4294967295,C=P+(V<<7&4294967295|V>>>25),V=$+(O^C&(P^O))+L[5]+1200080426&4294967295,$=C+(V<<12&4294967295|V>>>20),V=O+(P^$&(C^P))+L[6]+2821735955&4294967295,O=$+(V<<17&4294967295|V>>>15),V=P+(C^O&($^C))+L[7]+4249261313&4294967295,P=O+(V<<22&4294967295|V>>>10),V=C+($^P&(O^$))+L[8]+1770035416&4294967295,C=P+(V<<7&4294967295|V>>>25),V=$+(O^C&(P^O))+L[9]+2336552879&4294967295,$=C+(V<<12&4294967295|V>>>20),V=O+(P^$&(C^P))+L[10]+4294925233&4294967295,O=$+(V<<17&4294967295|V>>>15),V=P+(C^O&($^C))+L[11]+2304563134&4294967295,P=O+(V<<22&4294967295|V>>>10),V=C+($^P&(O^$))+L[12]+1804603682&4294967295,C=P+(V<<7&4294967295|V>>>25),V=$+(O^C&(P^O))+L[13]+4254626195&4294967295,$=C+(V<<12&4294967295|V>>>20),V=O+(P^$&(C^P))+L[14]+2792965006&4294967295,O=$+(V<<17&4294967295|V>>>15),V=P+(C^O&($^C))+L[15]+1236535329&4294967295,P=O+(V<<22&4294967295|V>>>10),V=C+(O^$&(P^O))+L[1]+4129170786&4294967295,C=P+(V<<5&4294967295|V>>>27),V=$+(P^O&(C^P))+L[6]+3225465664&4294967295,$=C+(V<<9&4294967295|V>>>23),V=O+(C^P&($^C))+L[11]+643717713&4294967295,O=$+(V<<14&4294967295|V>>>18),V=P+($^C&(O^$))+L[0]+3921069994&4294967295,P=O+(V<<20&4294967295|V>>>12),V=C+(O^$&(P^O))+L[5]+3593408605&4294967295,C=P+(V<<5&4294967295|V>>>27),V=$+(P^O&(C^P))+L[10]+38016083&4294967295,$=C+(V<<9&4294967295|V>>>23),V=O+(C^P&($^C))+L[15]+3634488961&4294967295,O=$+(V<<14&4294967295|V>>>18),V=P+($^C&(O^$))+L[4]+3889429448&4294967295,P=O+(V<<20&4294967295|V>>>12),V=C+(O^$&(P^O))+L[9]+568446438&4294967295,C=P+(V<<5&4294967295|V>>>27),V=$+(P^O&(C^P))+L[14]+3275163606&4294967295,$=C+(V<<9&4294967295|V>>>23),V=O+(C^P&($^C))+L[3]+4107603335&4294967295,O=$+(V<<14&4294967295|V>>>18),V=P+($^C&(O^$))+L[8]+1163531501&4294967295,P=O+(V<<20&4294967295|V>>>12),V=C+(O^$&(P^O))+L[13]+2850285829&4294967295,C=P+(V<<5&4294967295|V>>>27),V=$+(P^O&(C^P))+L[2]+4243563512&4294967295,$=C+(V<<9&4294967295|V>>>23),V=O+(C^P&($^C))+L[7]+1735328473&4294967295,O=$+(V<<14&4294967295|V>>>18),V=P+($^C&(O^$))+L[12]+2368359562&4294967295,P=O+(V<<20&4294967295|V>>>12),V=C+(P^O^$)+L[5]+4294588738&4294967295,C=P+(V<<4&4294967295|V>>>28),V=$+(C^P^O)+L[8]+2272392833&4294967295,$=C+(V<<11&4294967295|V>>>21),V=O+($^C^P)+L[11]+1839030562&4294967295,O=$+(V<<16&4294967295|V>>>16),V=P+(O^$^C)+L[14]+4259657740&4294967295,P=O+(V<<23&4294967295|V>>>9),V=C+(P^O^$)+L[1]+2763975236&4294967295,C=P+(V<<4&4294967295|V>>>28),V=$+(C^P^O)+L[4]+1272893353&4294967295,$=C+(V<<11&4294967295|V>>>21),V=O+($^C^P)+L[7]+4139469664&4294967295,O=$+(V<<16&4294967295|V>>>16),V=P+(O^$^C)+L[10]+3200236656&4294967295,P=O+(V<<23&4294967295|V>>>9),V=C+(P^O^$)+L[13]+681279174&4294967295,C=P+(V<<4&4294967295|V>>>28),V=$+(C^P^O)+L[0]+3936430074&4294967295,$=C+(V<<11&4294967295|V>>>21),V=O+($^C^P)+L[3]+3572445317&4294967295,O=$+(V<<16&4294967295|V>>>16),V=P+(O^$^C)+L[6]+76029189&4294967295,P=O+(V<<23&4294967295|V>>>9),V=C+(P^O^$)+L[9]+3654602809&4294967295,C=P+(V<<4&4294967295|V>>>28),V=$+(C^P^O)+L[12]+3873151461&4294967295,$=C+(V<<11&4294967295|V>>>21),V=O+($^C^P)+L[15]+530742520&4294967295,O=$+(V<<16&4294967295|V>>>16),V=P+(O^$^C)+L[2]+3299628645&4294967295,P=O+(V<<23&4294967295|V>>>9),V=C+(O^(P|~$))+L[0]+4096336452&4294967295,C=P+(V<<6&4294967295|V>>>26),V=$+(P^(C|~O))+L[7]+1126891415&4294967295,$=C+(V<<10&4294967295|V>>>22),V=O+(C^($|~P))+L[14]+2878612391&4294967295,O=$+(V<<15&4294967295|V>>>17),V=P+($^(O|~C))+L[5]+4237533241&4294967295,P=O+(V<<21&4294967295|V>>>11),V=C+(O^(P|~$))+L[12]+1700485571&4294967295,C=P+(V<<6&4294967295|V>>>26),V=$+(P^(C|~O))+L[3]+2399980690&4294967295,$=C+(V<<10&4294967295|V>>>22),V=O+(C^($|~P))+L[10]+4293915773&4294967295,O=$+(V<<15&4294967295|V>>>17),V=P+($^(O|~C))+L[1]+2240044497&4294967295,P=O+(V<<21&4294967295|V>>>11),V=C+(O^(P|~$))+L[8]+1873313359&4294967295,C=P+(V<<6&4294967295|V>>>26),V=$+(P^(C|~O))+L[15]+4264355552&4294967295,$=C+(V<<10&4294967295|V>>>22),V=O+(C^($|~P))+L[6]+2734768916&4294967295,O=$+(V<<15&4294967295|V>>>17),V=P+($^(O|~C))+L[13]+1309151649&4294967295,P=O+(V<<21&4294967295|V>>>11),V=C+(O^(P|~$))+L[4]+4149444226&4294967295,C=P+(V<<6&4294967295|V>>>26),V=$+(P^(C|~O))+L[11]+3174756917&4294967295,$=C+(V<<10&4294967295|V>>>22),V=O+(C^($|~P))+L[2]+718787259&4294967295,O=$+(V<<15&4294967295|V>>>17),V=P+($^(O|~C))+L[9]+3951481745&4294967295,R.g[0]=R.g[0]+C&4294967295,R.g[1]=R.g[1]+(O+(V<<21&4294967295|V>>>11))&4294967295,R.g[2]=R.g[2]+O&4294967295,R.g[3]=R.g[3]+$&4294967295}i.prototype.u=function(R,C){C===void 0&&(C=R.length);for(var P=C-this.blockSize,L=this.B,O=this.h,$=0;$<C;){if(O==0)for(;$<=P;)o(this,R,$),$+=this.blockSize;if(typeof R=="string"){for(;$<C;)if(L[O++]=R.charCodeAt($++),O==this.blockSize){o(this,L),O=0;break}}else for(;$<C;)if(L[O++]=R[$++],O==this.blockSize){o(this,L),O=0;break}}this.h=O,this.o+=C},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var C=1;C<R.length-8;++C)R[C]=0;var P=8*this.o;for(C=R.length-8;C<R.length;++C)R[C]=P&255,P/=256;for(this.u(R),R=Array(16),C=P=0;4>C;++C)for(var L=0;32>L;L+=8)R[P++]=this.g[C]>>>L&255;return R};function a(R,C){var P=h;return Object.prototype.hasOwnProperty.call(P,R)?P[R]:P[R]=C(R)}function u(R,C){this.h=C;for(var P=[],L=!0,O=R.length-1;0<=O;O--){var $=R[O]|0;L&&$==C||(P[O]=$,L=!1)}this.g=P}var h={};function f(R){return-128<=R&&128>R?a(R,function(C){return new u([C|0],0>C?-1:0)}):new u([R|0],0>R?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return _;if(0>R)return D(p(-R));for(var C=[],P=1,L=0;R>=P;L++)C[L]=R/P|0,P*=4294967296;return new u(C,0)}function g(R,C){if(R.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(R.charAt(0)=="-")return D(g(R.substring(1),C));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=p(Math.pow(C,8)),L=_,O=0;O<R.length;O+=8){var $=Math.min(8,R.length-O),V=parseInt(R.substring(O,O+$),C);8>$?($=p(Math.pow(C,$)),L=L.j($).add(p(V))):(L=L.j(P),L=L.add(p(V)))}return L}var _=f(0),E=f(1),S=f(16777216);t=u.prototype,t.m=function(){if(k(this))return-D(this).m();for(var R=0,C=1,P=0;P<this.g.length;P++){var L=this.i(P);R+=(0<=L?L:4294967296+L)*C,C*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I(this))return"0";if(k(this))return"-"+D(this).toString(R);for(var C=p(Math.pow(R,6)),P=this,L="";;){var O=ee(P,C).g;P=j(P,O.j(C));var $=((0<P.g.length?P.g[0]:P.h)>>>0).toString(R);if(P=O,I(P))return $+L;for(;6>$.length;)$="0"+$;L=$+L}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function I(R){if(R.h!=0)return!1;for(var C=0;C<R.g.length;C++)if(R.g[C]!=0)return!1;return!0}function k(R){return R.h==-1}t.l=function(R){return R=j(this,R),k(R)?-1:I(R)?0:1};function D(R){for(var C=R.g.length,P=[],L=0;L<C;L++)P[L]=~R.g[L];return new u(P,~R.h).add(E)}t.abs=function(){return k(this)?D(this):this},t.add=function(R){for(var C=Math.max(this.g.length,R.g.length),P=[],L=0,O=0;O<=C;O++){var $=L+(this.i(O)&65535)+(R.i(O)&65535),V=($>>>16)+(this.i(O)>>>16)+(R.i(O)>>>16);L=V>>>16,$&=65535,V&=65535,P[O]=V<<16|$}return new u(P,P[P.length-1]&-2147483648?-1:0)};function j(R,C){return R.add(D(C))}t.j=function(R){if(I(this)||I(R))return _;if(k(this))return k(R)?D(this).j(D(R)):D(D(this).j(R));if(k(R))return D(this.j(D(R)));if(0>this.l(S)&&0>R.l(S))return p(this.m()*R.m());for(var C=this.g.length+R.g.length,P=[],L=0;L<2*C;L++)P[L]=0;for(L=0;L<this.g.length;L++)for(var O=0;O<R.g.length;O++){var $=this.i(L)>>>16,V=this.i(L)&65535,Qe=R.i(O)>>>16,xt=R.i(O)&65535;P[2*L+2*O]+=V*xt,z(P,2*L+2*O),P[2*L+2*O+1]+=$*xt,z(P,2*L+2*O+1),P[2*L+2*O+1]+=V*Qe,z(P,2*L+2*O+1),P[2*L+2*O+2]+=$*Qe,z(P,2*L+2*O+2)}for(L=0;L<C;L++)P[L]=P[2*L+1]<<16|P[2*L];for(L=C;L<2*C;L++)P[L]=0;return new u(P,0)};function z(R,C){for(;(R[C]&65535)!=R[C];)R[C+1]+=R[C]>>>16,R[C]&=65535,C++}function W(R,C){this.g=R,this.h=C}function ee(R,C){if(I(C))throw Error("division by zero");if(I(R))return new W(_,_);if(k(R))return C=ee(D(R),C),new W(D(C.g),D(C.h));if(k(C))return C=ee(R,D(C)),new W(D(C.g),C.h);if(30<R.g.length){if(k(R)||k(C))throw Error("slowDivide_ only works with positive integers.");for(var P=E,L=C;0>=L.l(R);)P=X(P),L=X(L);var O=b(P,1),$=b(L,1);for(L=b(L,2),P=b(P,2);!I(L);){var V=$.add(L);0>=V.l(R)&&(O=O.add(P),$=V),L=b(L,1),P=b(P,1)}return C=j(R,O.j(C)),new W(O,C)}for(O=_;0<=R.l(C);){for(P=Math.max(1,Math.floor(R.m()/C.m())),L=Math.ceil(Math.log(P)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),$=p(P),V=$.j(C);k(V)||0<V.l(R);)P-=L,$=p(P),V=$.j(C);I($)&&($=E),O=O.add($),R=j(R,V)}return new W(O,R)}t.A=function(R){return ee(this,R).h},t.and=function(R){for(var C=Math.max(this.g.length,R.g.length),P=[],L=0;L<C;L++)P[L]=this.i(L)&R.i(L);return new u(P,this.h&R.h)},t.or=function(R){for(var C=Math.max(this.g.length,R.g.length),P=[],L=0;L<C;L++)P[L]=this.i(L)|R.i(L);return new u(P,this.h|R.h)},t.xor=function(R){for(var C=Math.max(this.g.length,R.g.length),P=[],L=0;L<C;L++)P[L]=this.i(L)^R.i(L);return new u(P,this.h^R.h)};function X(R){for(var C=R.g.length+1,P=[],L=0;L<C;L++)P[L]=R.i(L)<<1|R.i(L-1)>>>31;return new u(P,R.h)}function b(R,C){var P=C>>5;C%=32;for(var L=R.g.length-P,O=[],$=0;$<L;$++)O[$]=0<C?R.i($+P)>>>C|R.i($+P+1)<<32-C:R.i($+P);return new u(O,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,vE=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=g,vs=u}).apply(typeof g_<"u"?g_:typeof self<"u"?self:typeof window<"u"?window:{});var Pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _E,Sl,wE,Fc,dp,xE,EE,TE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,x){return c==Array.prototype||c==Object.prototype||(c[y]=x.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pc=="object"&&Pc];for(var y=0;y<c.length;++y){var x=c[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function o(c,y){if(y)e:{var x=i;c=c.split(".");for(var A=0;A<c.length-1;A++){var K=c[A];if(!(K in x))break e;x=x[K]}c=c[c.length-1],A=x[c],y=y(A),y!=A&&y!=null&&e(x,c,{configurable:!0,writable:!0,value:y})}}function a(c,y){c instanceof String&&(c+="");var x=0,A=!1,K={next:function(){if(!A&&x<c.length){var Z=x++;return{value:y(Z,c[Z]),done:!1}}return A=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}o("Array.prototype.values",function(c){return c||function(){return a(this,function(y,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function p(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function g(c,y,x){return c.call.apply(c.bind,arguments)}function _(c,y,x){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,A),c.apply(y,K)}}return function(){return c.apply(y,arguments)}}function E(c,y,x){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:_,E.apply(null,arguments)}function S(c,y){var x=Array.prototype.slice.call(arguments,1);return function(){var A=x.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function I(c,y){function x(){}x.prototype=y.prototype,c.aa=y.prototype,c.prototype=new x,c.prototype.constructor=c,c.Qb=function(A,K,Z){for(var he=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)he[ht-2]=arguments[ht];return y.prototype[K].apply(A,he)}}function k(c){const y=c.length;if(0<y){const x=Array(y);for(let A=0;A<y;A++)x[A]=c[A];return x}return[]}function D(c,y){for(let x=1;x<arguments.length;x++){const A=arguments[x];if(f(A)){const K=c.length||0,Z=A.length||0;c.length=K+Z;for(let he=0;he<Z;he++)c[K+he]=A[he]}else c.push(A)}}class j{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function z(c){return/^[\s\xa0]*$/.test(c)}function W(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function ee(c){return ee[" "](c),c}ee[" "]=function(){};var X=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function b(c,y,x){for(const A in c)y.call(x,c[A],A,c)}function R(c,y){for(const x in c)y.call(void 0,c[x],x,c)}function C(c){const y={};for(const x in c)y[x]=c[x];return y}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(c,y){let x,A;for(let K=1;K<arguments.length;K++){A=arguments[K];for(x in A)c[x]=A[x];for(let Z=0;Z<P.length;Z++)x=P[Z],Object.prototype.hasOwnProperty.call(A,x)&&(c[x]=A[x])}}function O(c){var y=1;c=c.split(":");const x=[];for(;0<y&&c.length;)x.push(c.shift()),y--;return c.length&&x.push(c.join(":")),x}function $(c){h.setTimeout(()=>{throw c},0)}function V(){var c=pe;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class Qe{constructor(){this.h=this.g=null}add(y,x){const A=xt.get();A.set(y,x),this.h?this.h.next=A:this.g=A,this.h=A}}var xt=new j(()=>new Ce,c=>c.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,ie=!1,pe=new Qe,ue=()=>{const c=h.Promise.resolve(void 0);Ae=()=>{c.then(H)}};var H=()=>{for(var c;c=V();){try{c.h.call(c.g)}catch(x){$(x)}var y=xt;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}ie=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};h.addEventListener("test",x,y),h.removeEventListener("test",x,y)}catch{}return c}();function je(c,y){if(me.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var x=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(X){e:{try{ee(y.nodeName);var K=!0;break e}catch{}K=!1}K||(y=null)}}else x=="mouseover"?y=c.fromElement:x=="mouseout"&&(y=c.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Be[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&je.aa.h.call(this)}}I(je,me);var Be={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var tt="closure_listenable_"+(1e6*Math.random()|0),nt=0;function dt(c,y,x,A,K){this.listener=c,this.proxy=null,this.src=y,this.type=x,this.capture=!!A,this.ha=K,this.key=++nt,this.da=this.fa=!1}function Ye(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function an(c){this.src=c,this.g={},this.h=0}an.prototype.add=function(c,y,x,A,K){var Z=c.toString();c=this.g[Z],c||(c=this.g[Z]=[],this.h++);var he=Rr(c,y,A,K);return-1<he?(y=c[he],x||(y.fa=!1)):(y=new dt(y,this.src,Z,!!A,K),y.fa=x,c.push(y)),y};function ii(c,y){var x=y.type;if(x in c.g){var A=c.g[x],K=Array.prototype.indexOf.call(A,y,void 0),Z;(Z=0<=K)&&Array.prototype.splice.call(A,K,1),Z&&(Ye(y),c.g[x].length==0&&(delete c.g[x],c.h--))}}function Rr(c,y,x,A){for(var K=0;K<c.length;++K){var Z=c[K];if(!Z.da&&Z.listener==y&&Z.capture==!!x&&Z.ha==A)return K}return-1}var wn="closure_lm_"+(1e6*Math.random()|0),Li={};function Vs(c,y,x,A,K){if(Array.isArray(y)){for(var Z=0;Z<y.length;Z++)Vs(c,y[Z],x,A,K);return null}return x=oi(x),c&&c[tt]?c.K(y,x,p(A)?!!A.capture:!1,K):Mi(c,y,x,!1,A,K)}function Mi(c,y,x,A,K,Z){if(!y)throw Error("Invalid event type");var he=p(K)?!!K.capture:!!K,ht=Gn(c);if(ht||(c[wn]=ht=new an(c)),x=ht.add(y,x,A,he,Z),x.proxy)return x;if(A=To(),x.proxy=A,A.src=c,A.listener=x,c.addEventListener)be||(K=he),K===void 0&&(K=!1),c.addEventListener(y.toString(),A,K);else if(c.attachEvent)c.attachEvent(dr(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return x}function To(){function c(x){return y.call(c.src,c.listener,x)}const y=Fn;return c}function ji(c,y,x,A,K){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)ji(c,y[Z],x,A,K);else A=p(A)?!!A.capture:!!A,x=oi(x),c&&c[tt]?(c=c.i,y=String(y).toString(),y in c.g&&(Z=c.g[y],x=Rr(Z,x,A,K),-1<x&&(Ye(Z[x]),Array.prototype.splice.call(Z,x,1),Z.length==0&&(delete c.g[y],c.h--)))):c&&(c=Gn(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Rr(y,x,A,K)),(x=-1<c?y[c]:null)&&hr(x))}function hr(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[tt])ii(y.i,c);else{var x=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(x,A,c.capture):y.detachEvent?y.detachEvent(dr(x),A):y.addListener&&y.removeListener&&y.removeListener(A),(x=Gn(y))?(ii(x,c),x.h==0&&(x.src=null,y[wn]=null)):Ye(c)}}}function dr(c){return c in Li?Li[c]:Li[c]="on"+c}function Fn(c,y){if(c.da)c=!0;else{y=new je(y,this);var x=c.listener,A=c.ha||c.src;c.fa&&hr(c),c=x.call(A,y)}return c}function Gn(c){return c=c[wn],c instanceof an?c:null}var si="__closure_events_fn_"+(1e9*Math.random()>>>0);function oi(c){return typeof c=="function"?c:(c[si]||(c[si]=function(y){return c.handleEvent(y)}),c[si])}function ft(){te.call(this),this.i=new an(this),this.M=this,this.F=null}I(ft,te),ft.prototype[tt]=!0,ft.prototype.removeEventListener=function(c,y,x,A){ji(this,c,y,x,A)};function at(c,y){var x,A=c.F;if(A)for(x=[];A;A=A.F)x.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new me(y,c);else if(y instanceof me)y.target=y.target||c;else{var K=y;y=new me(A,c),L(y,K)}if(K=!0,x)for(var Z=x.length-1;0<=Z;Z--){var he=y.g=x[Z];K=Qn(he,A,!0,y)&&K}if(he=y.g=c,K=Qn(he,A,!0,y)&&K,K=Qn(he,A,!1,y)&&K,x)for(Z=0;Z<x.length;Z++)he=y.g=x[Z],K=Qn(he,A,!1,y)&&K}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var x=c.g[y],A=0;A<x.length;A++)Ye(x[A]);delete c.g[y],c.h--}}this.F=null},ft.prototype.K=function(c,y,x,A){return this.i.add(String(c),y,!1,x,A)},ft.prototype.L=function(c,y,x,A){return this.i.add(String(c),y,!0,x,A)};function Qn(c,y,x,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var K=!0,Z=0;Z<y.length;++Z){var he=y[Z];if(he&&!he.da&&he.capture==x){var ht=he.listener,Ut=he.ha||he.src;he.fa&&ii(c.i,he),K=ht.call(Ut,A)!==!1&&K}}return K&&!A.defaultPrevented}function ai(c,y,x){if(typeof c=="function")x&&(c=E(c,x));else if(c&&typeof c.handleEvent=="function")c=E(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(c,y||0)}function kr(c){c.g=ai(()=>{c.g=null,c.i&&(c.i=!1,kr(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class ln extends te{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:kr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dr(c){te.call(this),this.h=c,this.g={}}I(Dr,te);var Fi=[];function Oi(c){b(c.g,function(y,x){this.g.hasOwnProperty(x)&&hr(y)},c),c.g={}}Dr.prototype.N=function(){Dr.aa.N.call(this),Oi(this)},Dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ls=h.JSON.stringify,Ui=h.JSON.parse,Nr=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function br(){}br.prototype.h=null;function Vr(c){return c.h||(c.h=c.i())}function Bi(){}var xn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yn(){me.call(this,"d")}I(Yn,me);function li(){me.call(this,"c")}I(li,me);var En={},Lr=null;function ui(){return Lr=Lr||new ft}En.La="serverreachability";function Ms(c){me.call(this,En.La,c)}I(Ms,me);function F(c){const y=ui();at(y,new Ms(y))}En.STAT_EVENT="statevent";function q(c,y){me.call(this,En.STAT_EVENT,c),this.stat=y}I(q,me);function Q(c){const y=ui();at(y,new q(y,c))}En.Ma="timingevent";function se(c,y){me.call(this,En.Ma,c),this.size=y}I(se,me);function de(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function Te(){this.g=!0}Te.prototype.xa=function(){this.g=!1};function Re(c,y,x,A,K,Z){c.info(function(){if(c.g)if(Z)for(var he="",ht=Z.split("&"),Ut=0;Ut<ht.length;Ut++){var Je=ht[Ut].split("=");if(1<Je.length){var Wt=Je[0];Je=Je[1];var Mt=Wt.split("_");he=2<=Mt.length&&Mt[1]=="type"?he+(Wt+"="+Je+"&"):he+(Wt+"=redacted&")}}else he=null;else he=Z;return"XMLHTTP REQ ("+A+") [attempt "+K+"]: "+y+`
`+x+`
`+he})}function ve(c,y,x,A,K,Z,he){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+K+"]: "+y+`
`+x+`
`+Z+" "+he})}function ge(c,y,x,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Le(c,x)+(A?" "+A:"")})}function fe(c,y){c.info(function(){return"TIMEOUT: "+y})}Te.prototype.info=function(){};function Le(c,y){if(!c.g)return y;if(!y)return null;try{var x=JSON.parse(y);if(x){for(c=0;c<x.length;c++)if(Array.isArray(x[c])){var A=x[c];if(!(2>A.length)){var K=A[1];if(Array.isArray(K)&&!(1>K.length)){var Z=K[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var he=1;he<K.length;he++)K[he]=""}}}}return Ls(x)}catch{return y}}var Fe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ut;function st(){}I(st,br),st.prototype.g=function(){return new XMLHttpRequest},st.prototype.i=function(){return{}},ut=new st;function $e(c,y,x,A){this.j=c,this.i=y,this.l=x,this.R=A||1,this.U=new Dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Et}function Et(){this.i=null,this.g="",this.h=!1}var Xn={},Jn={};function un(c,y,x){c.L=1,c.v=qi(On(y)),c.m=x,c.P=!0,cn(c,null)}function cn(c,y){c.F=Date.now(),Xe(c),c.A=On(c.v);var x=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),Gi(x.i,"t",A),c.C=0,x=c.j.J,c.h=new Et,c.g=Cu(c.j,x?y:null,!c.m),0<c.O&&(c.M=new ln(E(c.Y,c,c.g),c.O)),y=c.U,x=c.g,A=c.ca;var K="readystatechange";Array.isArray(K)||(K&&(Fi[0]=K.toString()),K=Fi);for(var Z=0;Z<K.length;Z++){var he=Vs(x,K[Z],A||y.handleEvent,!1,y.h||y);if(!he)break;y.g[he.key]=he}y=c.H?C(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),F(),Re(c.i,c.u,c.A,c.l,c.R,c.m)}$e.prototype.ca=function(c){c=c.target;const y=this.M;y&&Rn(c)==3?y.j():this.Y(c)},$e.prototype.Y=function(c){try{if(c==this.g)e:{const Mt=Rn(this.g);var y=this.g.Ba();const tr=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||Ba(this.g)))){this.J||Mt!=4||y==7||(y==8||0>=tr?F(3):F(2)),Zn(this);var x=this.g.Z();this.X=x;t:if(zi(this)){var A=Ba(this.g);c="";var K=A.length,Z=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ct(this),We(this);var he="";break t}this.h.i=new h.TextDecoder}for(y=0;y<K;y++)this.h.h=!0,c+=this.h.i.decode(A[y],{stream:!(Z&&y==K-1)});A.length=0,this.h.g+=c,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=x==200,ve(this.i,this.u,this.A,this.l,this.R,Mt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var ht,Ut=this.g;if((ht=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(ht)){var Je=ht;break t}}Je=null}if(x=Je)ge(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mr(this,x);else{this.o=!1,this.s=3,Q(12),ct(this),We(this);break e}}if(this.P){x=!0;let Bn;for(;!this.J&&this.C<he.length;)if(Bn=ci(this,he),Bn==Jn){Mt==4&&(this.s=4,Q(14),x=!1),ge(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==Xn){this.s=4,Q(15),ge(this.i,this.l,he,"[Invalid Chunk]"),x=!1;break}else ge(this.i,this.l,Bn,null),Mr(this,Bn);if(zi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||he.length!=0||this.h.h||(this.s=1,Q(16),x=!1),this.o=this.o&&x,!x)ge(this.i,this.l,he,"[Invalid Chunked Response]"),ct(this),We(this);else if(0<he.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),$a(Wt),Wt.M=!0,Q(11))}}else ge(this.i,this.l,he,null),Mr(this,he);Mt==4&&ct(this),this.o&&!this.J&&(Mt==4?Vo(this.j,this):(this.o=!1,Xe(this)))}else Ro(this.g),x==400&&0<he.indexOf("Unknown SID")?(this.s=3,Q(12)):(this.s=0,Q(13)),ct(this),We(this)}}}catch{}finally{}};function zi(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ci(c,y){var x=c.C,A=y.indexOf(`
`,x);return A==-1?Jn:(x=Number(y.substring(x,A)),isNaN(x)?Xn:(A+=1,A+x>y.length?Jn:(y=y.slice(A,A+x),c.C=A+x,y)))}$e.prototype.cancel=function(){this.J=!0,ct(this)};function Xe(c){c.S=Date.now()+c.I,hi(c,c.I)}function hi(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=de(E(c.ba,c),y)}function Zn(c){c.B&&(h.clearTimeout(c.B),c.B=null)}$e.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(fe(this.i,this.A),this.L!=2&&(F(),Q(17)),ct(this),this.s=2,We(this)):hi(this,this.S-c)};function We(c){c.j.G==0||c.J||Vo(c.j,c)}function ct(c){Zn(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,Oi(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Mr(c,y){try{var x=c.j;if(x.G!=0&&(x.g==c||Yt(x.h,c))){if(!c.K&&Yt(x.h,c)&&x.G==3){try{var A=x.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var K=A;if(K[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<c.F)bo(x),yr(x);else break e;No(x),Q(18)}}else x.za=K[1],0<x.za-x.T&&37500>K[2]&&x.F&&x.v==0&&!x.C&&(x.C=de(E(x.Za,x),6e3));if(1>=js(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else gi(x,11)}else if((c.K||x.g==c)&&bo(x),!z(y))for(K=x.Da.g.parse(y),y=0;y<K.length;y++){let Je=K[y];if(x.T=Je[0],Je=Je[1],x.G==2)if(Je[0]=="c"){x.K=Je[1],x.ia=Je[2];const Wt=Je[3];Wt!=null&&(x.la=Wt,x.j.info("VER="+x.la));const Mt=Je[4];Mt!=null&&(x.Aa=Mt,x.j.info("SVER="+x.Aa));const tr=Je[5];tr!=null&&typeof tr=="number"&&0<tr&&(A=1.5*tr,x.L=A,x.j.info("backChannelRequestTimeoutMs_="+A)),A=x;const Bn=c.g;if(Bn){const $s=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($s){var Z=A.h;Z.g||$s.indexOf("spdy")==-1&&$s.indexOf("quic")==-1&&$s.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(ja(Z,Z.h),Z.h=null))}if(A.D){const Mo=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;Mo&&(A.ya=Mo,mt(A.I,A.D,Mo))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-c.F,x.j.info("Handshake RTT: "+x.R+"ms")),A=x;var he=c;if(A.qa=Su(A,A.J?A.ia:null,A.W),he.K){du(A.h,he);var ht=he,Ut=A.L;Ut&&(ht.I=Ut),ht.B&&(Zn(ht),Xe(ht)),A.g=he}else zs(A);0<x.i.length&&Br(x)}else Je[0]!="stop"&&Je[0]!="close"||gi(x,7);else x.G==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?gi(x,7):Jt(x):Je[0]!="noop"&&x.l&&x.l.ta(Je),x.v=0)}}F(4)}catch{}}var jr=class{constructor(c,y){this.g=c,this.map=y}};function pt(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lt(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function js(c){return c.h?1:c.g?c.g.size:0}function Yt(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function ja(c,y){c.g?c.g.add(y):c.h=y}function du(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}pt.prototype.cancel=function(){if(this.i=fu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function fu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const x of c.g.values())y=y.concat(x.D);return y}return k(c.i)}function So(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var y=[],x=c.length,A=0;A<x;A++)y.push(c[A]);return y}y=[],x=0;for(A in c)y[x++]=c[A];return y}function Co(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var y=[];c=c.length;for(var x=0;x<c;x++)y.push(x);return y}y=[],x=0;for(const A in c)y[x++]=A;return y}}}function $i(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var x=Co(c),A=So(c),K=A.length,Z=0;Z<K;Z++)y.call(void 0,A[Z],x&&x[Z],c)}var Fs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zh(c,y){if(c){c=c.split("&");for(var x=0;x<c.length;x++){var A=c[x].indexOf("="),K=null;if(0<=A){var Z=c[x].substring(0,A);K=c[x].substring(A+1)}else Z=c[x];y(Z,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function di(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof di){this.h=c.h,Os(this,c.j),this.o=c.o,this.g=c.g,Hi(this,c.s),this.l=c.l;var y=c.i,x=new Fr;x.i=y.i,y.g&&(x.g=new Map(y.g),x.h=y.h),Wi(this,x),this.m=c.m}else c&&(y=String(c).match(Fs))?(this.h=!1,Os(this,y[1]||"",!0),this.o=qe(y[2]||""),this.g=qe(y[3]||"",!0),Hi(this,y[4]),this.l=qe(y[5]||"",!0),Wi(this,y[6]||"",!0),this.m=qe(y[7]||"")):(this.h=!1,this.i=new Fr(null,this.h))}di.prototype.toString=function(){var c=[],y=this.j;y&&c.push(Ki(y,Ao,!0),":");var x=this.g;return(x||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Ki(y,Ao,!0),"@"),c.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&c.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(Ki(x,x.charAt(0)=="/"?gu:mu,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",Ki(x,Fa)),c.join("")};function On(c){return new di(c)}function Os(c,y,x){c.j=x?qe(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Hi(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Wi(c,y,x){y instanceof Fr?(c.i=y,Or(c.i,c.h)):(x||(y=Ki(y,yu)),c.i=new Fr(y,c.h))}function mt(c,y,x){c.i.set(y,x)}function qi(c){return mt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function qe(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ki(c,y,x){return typeof c=="string"?(c=encodeURI(c).replace(y,pu),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function pu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ao=/[#\/\?@]/g,mu=/[#\?:]/g,gu=/[#\?]/g,yu=/[#\?@]/g,Fa=/#/g;function Fr(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Xt(c){c.g||(c.g=new Map,c.h=0,c.i&&zh(c.i,function(y,x){c.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}t=Fr.prototype,t.add=function(c,y){Xt(this),this.i=null,c=er(this,c);var x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(y),this.h+=1,this};function fr(c,y){Xt(c),y=er(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function pr(c,y){return Xt(c),y=er(c,y),c.g.has(y)}t.forEach=function(c,y){Xt(this),this.g.forEach(function(x,A){x.forEach(function(K){c.call(y,K,A,this)},this)},this)},t.na=function(){Xt(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),x=[];for(let A=0;A<y.length;A++){const K=c[A];for(let Z=0;Z<K.length;Z++)x.push(y[A])}return x},t.V=function(c){Xt(this);let y=[];if(typeof c=="string")pr(this,c)&&(y=y.concat(this.g.get(er(this,c))));else{c=Array.from(this.g.values());for(let x=0;x<c.length;x++)y=y.concat(c[x])}return y},t.set=function(c,y){return Xt(this),this.i=null,c=er(this,c),pr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},t.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function Gi(c,y,x){fr(c,y),0<x.length&&(c.i=null,c.g.set(er(c,y),k(x)),c.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var x=0;x<y.length;x++){var A=y[x];const Z=encodeURIComponent(String(A)),he=this.V(A);for(A=0;A<he.length;A++){var K=Z;he[A]!==""&&(K+="="+encodeURIComponent(String(he[A]))),c.push(K)}}return this.i=c.join("&")};function er(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Or(c,y){y&&!c.j&&(Xt(c),c.i=null,c.g.forEach(function(x,A){var K=A.toLowerCase();A!=K&&(fr(this,A),Gi(this,K,x))},c)),c.j=y}function $h(c,y){const x=new Te;if(h.Image){const A=new Image;A.onload=S(In,x,"TestLoadImage: loaded",!0,y,A),A.onerror=S(In,x,"TestLoadImage: error",!1,y,A),A.onabort=S(In,x,"TestLoadImage: abort",!1,y,A),A.ontimeout=S(In,x,"TestLoadImage: timeout",!1,y,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function vu(c,y){const x=new Te,A=new AbortController,K=setTimeout(()=>{A.abort(),In(x,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(Z=>{clearTimeout(K),Z.ok?In(x,"TestPingServer: ok",!0,y):In(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(K),In(x,"TestPingServer: error",!1,y)})}function In(c,y,x,A,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),A(x)}catch{}}function Hh(){this.g=new Nr}function _u(c,y,x){const A=x||"";try{$i(c,function(K,Z){let he=K;p(K)&&(he=Ls(K)),y.push(A+Z+"="+encodeURIComponent(he))})}catch(K){throw y.push(A+"type="+encodeURIComponent("_badmap")),K}}function fi(c){this.l=c.Ub||null,this.j=c.eb||!1}I(fi,br),fi.prototype.g=function(){return new Us(this.l,this.j)},fi.prototype.i=function(c){return function(){return c}}({});function Us(c,y){ft.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Us,ft),t=Us.prototype,t.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,gr(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mr(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function wu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?mr(this):gr(this),this.readyState==3&&wu(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,mr(this))},t.Qa=function(c){this.g&&(this.response=c,mr(this))},t.ga=function(){this.g&&mr(this)};function mr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,gr(c)}t.setRequestHeader=function(c,y){this.u.append(c,y)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=y.next();return c.join(`\r
`)};function gr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Us.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function pi(c){let y="";return b(c,function(x,A){y+=A,y+=":",y+=x,y+=`\r
`}),y}function Qi(c,y,x){e:{for(A in x){var A=!1;break e}A=!0}A||(x=pi(x),typeof c=="string"?x!=null&&encodeURIComponent(String(x)):mt(c,y,x))}function Tt(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Tt,ft);var Wh=/^https?$/i,Oa=["POST","PUT"];t=Tt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,y,x,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ut.g(),this.v=this.o?Vr(this.o):Vr(ut),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Z){Bs(this,Z);return}if(c=x||"",x=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var K in A)x.set(K,A[K]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Z of A.keys())x.set(Z,A.get(Z));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(x.keys()).find(Z=>Z.toLowerCase()=="content-type"),K=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Oa,y,void 0))||A||K||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,he]of x)this.g.setRequestHeader(Z,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Io(this),this.u=!0,this.g.send(c),this.u=!1}catch(Z){Bs(this,Z)}};function Bs(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,Po(c),Un(c)}function Po(c){c.A||(c.A=!0,at(c,"complete"),at(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,at(this,"complete"),at(this,"abort"),Un(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Un(this,!0)),Tt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ua(this):this.bb())},t.bb=function(){Ua(this)};function Ua(c){if(c.h&&typeof u<"u"&&(!c.v[1]||Rn(c)!=4||c.Z()!=2)){if(c.u&&Rn(c)==4)ai(c.Ea,0,c);else if(at(c,"readystatechange"),Rn(c)==4){c.h=!1;try{const he=c.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var A;if(A=he===0){var K=String(c.D).match(Fs)[1]||null;!K&&h.self&&h.self.location&&(K=h.self.location.protocol.slice(0,-1)),A=!Wh.test(K?K.toLowerCase():"")}x=A}if(x)at(c,"complete"),at(c,"success");else{c.m=6;try{var Z=2<Rn(c)?c.g.statusText:""}catch{Z=""}c.l=Z+" ["+c.Z()+"]",Po(c)}}finally{Un(c)}}}}function Un(c,y){if(c.g){Io(c);const x=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||at(c,"ready");try{x.onreadystatechange=A}catch{}}}function Io(c){c.I&&(h.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Rn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Ui(y)}};function Ba(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ro(c){const y={};c=(c.g&&2<=Rn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(z(c[A]))continue;var x=O(c[A]);const K=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Z=y[K]||[];y[K]=Z,Z.push(x)}R(y,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ur(c,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||y}function za(c){this.Aa=0,this.i=[],this.j=new Te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ur("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ur("baseRetryDelayMs",5e3,c),this.cb=Ur("retryDelaySeedMs",1e4,c),this.Wa=Ur("forwardChannelMaxRetries",2,c),this.wa=Ur("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new pt(c&&c.concurrentRequestLimit),this.Da=new Hh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=za.prototype,t.la=8,t.G=1,t.connect=function(c,y,x,A){Q(0),this.W=c,this.H=y||{},x&&A!==void 0&&(this.H.OSID=x,this.H.OAID=A),this.F=this.X,this.I=Su(this,null,this.W),Br(this)};function Jt(c){if(ko(c),c.G==3){var y=c.U++,x=On(c.I);if(mt(x,"SID",c.K),mt(x,"RID",y),mt(x,"TYPE","terminate"),mi(c,x),y=new $e(c,c.j,y),y.L=2,y.v=qi(On(x)),x=!1,h.navigator&&h.navigator.sendBeacon)try{x=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!x&&h.Image&&(new Image().src=y.v,x=!0),x||(y.g=Cu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Xe(y)}Tu(c)}function yr(c){c.g&&($a(c),c.g.cancel(),c.g=null)}function ko(c){yr(c),c.u&&(h.clearTimeout(c.u),c.u=null),bo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function Br(c){if(!Lt(c.h)&&!c.s){c.s=!0;var y=c.Ga;Ae||ue(),ie||(Ae(),ie=!0),pe.add(y,c),c.B=0}}function qh(c,y){return js(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=de(E(c.Ga,c,y),Eu(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const K=new $e(this,this.j,c);let Z=this.o;if(this.S&&(Z?(Z=C(Z),L(Z,this.S)):Z=this.S),this.m!==null||this.O||(K.H=Z,Z=null),this.P)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var A=this.i[x];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=Yi(this,K,y),x=On(this.I),mt(x,"RID",c),mt(x,"CVER",22),this.D&&mt(x,"X-HTTP-Session-Id",this.D),mi(this,x),Z&&(this.O?y="headers="+encodeURIComponent(String(pi(Z)))+"&"+y:this.m&&Qi(x,this.m,Z)),ja(this.h,K),this.Ua&&mt(x,"TYPE","init"),this.P?(mt(x,"$req",y),mt(x,"SID","null"),K.T=!0,un(K,x,null)):un(K,x,y),this.G=2}}else this.G==3&&(c?Do(this,c):this.i.length==0||Lt(this.h)||Do(this))};function Do(c,y){var x;y?x=y.l:x=c.U++;const A=On(c.I);mt(A,"SID",c.K),mt(A,"RID",x),mt(A,"AID",c.T),mi(c,A),c.m&&c.o&&Qi(A,c.m,c.o),x=new $e(c,c.j,x,c.B+1),c.m===null&&(x.H=c.o),y&&(c.i=y.D.concat(c.i)),y=Yi(c,x,1e3),x.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ja(c.h,x),un(x,A,y)}function mi(c,y){c.H&&b(c.H,function(x,A){mt(y,A,x)}),c.l&&$i({},function(x,A){mt(y,A,x)})}function Yi(c,y,x){x=Math.min(c.i.length,x);var A=c.l?E(c.l.Na,c.l,c):null;e:{var K=c.i;let Z=-1;for(;;){const he=["count="+x];Z==-1?0<x?(Z=K[0].g,he.push("ofs="+Z)):Z=0:he.push("ofs="+Z);let ht=!0;for(let Ut=0;Ut<x;Ut++){let Je=K[Ut].g;const Wt=K[Ut].map;if(Je-=Z,0>Je)Z=Math.max(0,K[Ut].g-100),ht=!1;else try{_u(Wt,he,"req"+Je+"_")}catch{A&&A(Wt)}}if(ht){A=he.join("&");break e}}}return c=c.i.splice(0,x),y.D=c,A}function zs(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;Ae||ue(),ie||(Ae(),ie=!0),pe.add(y,c),c.v=0}}function No(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=de(E(c.Fa,c),Eu(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=de(E(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Q(10),yr(this),xu(this))};function $a(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function xu(c){c.g=new $e(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=On(c.qa);mt(y,"RID","rpc"),mt(y,"SID",c.K),mt(y,"AID",c.T),mt(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&mt(y,"TO",c.ja),mt(y,"TYPE","xmlhttp"),mi(c,y),c.m&&c.o&&Qi(y,c.m,c.o),c.L&&(c.g.I=c.L);var x=c.g;c=c.ia,x.L=1,x.v=qi(On(y)),x.m=null,x.P=!0,cn(x,c)}t.Za=function(){this.C!=null&&(this.C=null,yr(this),No(this),Q(19))};function bo(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Vo(c,y){var x=null;if(c.g==y){bo(c),$a(c),c.g=null;var A=2}else if(Yt(c.h,y))x=y.D,du(c.h,y),A=1;else return;if(c.G!=0){if(y.o)if(A==1){x=y.m?y.m.length:0,y=Date.now()-y.F;var K=c.B;A=ui(),at(A,new se(A,x)),Br(c)}else zs(c);else if(K=y.s,K==3||K==0&&0<y.X||!(A==1&&qh(c,y)||A==2&&No(c)))switch(x&&0<x.length&&(y=c.h,y.i=y.i.concat(x)),K){case 1:gi(c,5);break;case 4:gi(c,10);break;case 3:gi(c,6);break;default:gi(c,2)}}}function Eu(c,y){let x=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(x*=2),x*y}function gi(c,y){if(c.j.info("Error code "+y),y==2){var x=E(c.fb,c),A=c.Xa;const K=!A;A=new di(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Os(A,"https"),qi(A),K?$h(A.toString(),x):vu(A.toString(),x)}else Q(2);c.G=0,c.l&&c.l.sa(y),Tu(c),ko(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Q(2)):(this.j.info("Failed to ping google.com"),Q(1))};function Tu(c){if(c.G=0,c.ka=[],c.l){const y=fu(c.h);(y.length!=0||c.i.length!=0)&&(D(c.ka,y),D(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function Su(c,y,x){var A=x instanceof di?On(x):new di(x);if(A.g!="")y&&(A.g=y+"."+A.g),Hi(A,A.s);else{var K=h.location;A=K.protocol,y=y?y+"."+K.hostname:K.hostname,K=+K.port;var Z=new di(null);A&&Os(Z,A),y&&(Z.g=y),K&&Hi(Z,K),x&&(Z.l=x),A=Z}return x=c.D,y=c.ya,x&&y&&mt(A,x,y),mt(A,"VER",c.la),mi(c,A),A}function Cu(c,y,x){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new Tt(new fi({eb:x})):new Tt(c.pa),y.Ha(c.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ha(){}t=Ha.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Lo(){}Lo.prototype.g=function(c,y){return new Tn(c,y)};function Tn(c,y){ft.call(this),this.g=new za(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!z(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!z(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new zr(this)}I(Tn,ft),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){Jt(this.g)},Tn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.u&&(x={},x.__data__=Ls(c),c=x);y.i.push(new jr(y.Ya++,c)),y.G==3&&Br(y)},Tn.prototype.N=function(){this.g.l=null,delete this.j,Jt(this.g),delete this.g,Tn.aa.N.call(this)};function Au(c){Yn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const x in y){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}I(Au,Yn);function Pu(){li.call(this),this.status=1}I(Pu,li);function zr(c){this.g=c}I(zr,Ha),zr.prototype.ua=function(){at(this.g,"a")},zr.prototype.ta=function(c){at(this.g,new Au(c))},zr.prototype.sa=function(c){at(this.g,new Pu)},zr.prototype.ra=function(){at(this.g,"b")},Lo.prototype.createWebChannel=Lo.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,TE=function(){return new Lo},EE=function(){return ui()},xE=En,dp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fe.NO_ERROR=0,Fe.TIMEOUT=8,Fe.HTTP_ERROR=6,Fc=Fe,lt.COMPLETE="complete",wE=lt,Bi.EventType=xn,xn.OPEN="a",xn.CLOSE="b",xn.ERROR="c",xn.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Sl=Bi,Tt.prototype.listenOnce=Tt.prototype.L,Tt.prototype.getLastError=Tt.prototype.Ka,Tt.prototype.getLastErrorCode=Tt.prototype.Ba,Tt.prototype.getStatus=Tt.prototype.Z,Tt.prototype.getResponseJson=Tt.prototype.Oa,Tt.prototype.getResponseText=Tt.prototype.oa,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Ha,_E=Tt}).apply(typeof Pc<"u"?Pc:typeof self<"u"?self:typeof window<"u"?window:{});const y_="@firebase/firestore",v_="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Da="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new dE("@firebase/firestore");function ia(){return po.logLevel}function _e(t,...e){if(po.logLevel<=et.DEBUG){const n=e.map(Sm);po.debug(`Firestore (${Da}): ${t}`,...n)}}function Di(t,...e){if(po.logLevel<=et.ERROR){const n=e.map(Sm);po.error(`Firestore (${Da}): ${t}`,...n)}}function wa(t,...e){if(po.logLevel<=et.WARN){const n=e.map(Sm);po.warn(`Firestore (${Da}): ${t}`,...n)}}function Sm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t="Unexpected state"){const e=`FIRESTORE (${Da}) INTERNAL ASSERTION FAILED: `+t;throw Di(e),new Error(e)}function ot(t,e){t||Ve()}function Ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends ka{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yn.UNAUTHENTICATED))}shutdown(){}}class FN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ON{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ot(this.o===void 0);let i=this.i;const o=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let a=new Pi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Pi,e.enqueueRetryable(()=>o(this.currentUser))};const u=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await o(this.currentUser)})},h=f=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Pi)}},0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ot(typeof i.accessToken=="string"),new SE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string"),new yn(e)}}class UN{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class BN{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new UN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class __{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zN{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,wN(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){ot(this.o===void 0);const i=a=>{a.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,_e("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const o=a=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new __(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ot(typeof n.token=="string"),this.R=n.token,new __(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=$N(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<n&&(i+=e.charAt(o[a]%62))}return i}}function Ke(t,e){return t<e?-1:t>e?1:0}function xa(t,e,n){return t.length===e.length&&t.every((i,o)=>n(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=-62135596800,x_=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*x_);return new $t(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new we(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new we(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<w_)throw new we(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/x_}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-w_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new $t(0,0))}static max(){return new Oe(new $t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="__name__";class Gr{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ve(),i===void 0?i=e.length-n:i>e.length-n&&Ve(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Gr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gr?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const a=Gr.compareSegments(e.get(o),n.get(o));if(a!==0)return a}return Math.sign(e.length-n.length)}static compareSegments(e,n){const i=Gr.isNumericId(e),o=Gr.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?Gr.extractNumericId(e).compare(Gr.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vs.fromString(e.substring(4,e.length-2))}}class wt extends Gr{construct(e,n,i){return new wt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new we(ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(o=>o.length>0))}return new wt(n)}static emptyPath(){return new wt([])}}const HN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Gr{construct(e,n,i){return new rn(e,n,i)}static isValidIdentifier(e){return HN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===E_}static keyField(){return new rn([E_])}static fromServerFormat(e){const n=[];let i="",o=0;const a=()=>{if(i.length===0)throw new we(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let u=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new we(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new we(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,o+=2}else h==="`"?(u=!u,o++):h!=="."||u?(i+=h,o++):(a(),o++)}if(a(),u)throw new we(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(wt.fromString(e))}static fromName(e){return new Ie(wt.fromString(e).popFirst(5))}static empty(){return new Ie(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return wt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new wt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=-1;function WN(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,o=Oe.fromTimestamp(i===1e9?new $t(n+1,0):new $t(n,i));return new Ss(o,Ie.empty(),e)}function qN(t){return new Ss(t.readTime,t.key,ql)}class Ss{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ss(Oe.min(),Ie.empty(),ql)}static max(){return new Ss(Oe.max(),Ie.empty(),ql)}}function KN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(t){if(t.code!==ne.FAILED_PRECONDITION||t.message!==GN)throw t;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):re.reject(n)}static resolve(e){return new re((n,i)=>{n(e)})}static reject(e){return new re((n,i)=>{i(e)})}static waitFor(e){return new re((n,i)=>{let o=0,a=0,u=!1;e.forEach(h=>{++o,h.next(()=>{++a,u&&a===o&&n()},f=>i(f))}),u=!0,a===o&&n()})}static or(e){let n=re.resolve(!1);for(const i of e)n=n.next(o=>o?re.resolve(o):i());return n}static forEach(e,n){const i=[];return e.forEach((o,a)=>{i.push(n.call(this,o,a))}),this.waitFor(i)}static mapArray(e,n){return new re((i,o)=>{const a=e.length,u=new Array(a);let h=0;for(let f=0;f<a;f++){const p=f;n(e[p]).next(g=>{u[p]=g,++h,h===a&&i(u)},g=>o(g))}})}static doWhile(e,n){return new re((i,o)=>{const a=()=>{e()===!0?n().next(()=>{a()},o):i()};a()})}}function YN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ba(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.oe(i),this._e=i=>n.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Ch.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm=-1;function Ah(t){return t==null}function ih(t){return t===0&&1/t==-1/0}function XN(t){return typeof t=="number"&&Number.isInteger(t)&&!ih(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="";function JN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=T_(e)),e=ZN(t.get(n),e);return T_(e)}function ZN(t,e){let n=e;const i=t.length;for(let o=0;o<i;o++){const a=t.charAt(o);switch(a){case"\0":n+="";break;case AE:n+="";break;default:n+=a}}return n}function T_(t){return t+AE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ns(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n){this.comparator=e,this.root=n||nn.EMPTY}insert(e,n){return new Rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ic(this.root,e,this.comparator,!0)}}class Ic{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,n,i,o,a){this.key=e,this.value=n,this.color=i??nn.RED,this.left=o??nn.EMPTY,this.right=a??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,a){return new nn(e??this.key,n??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,n,i),null):a===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return nn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ve();const e=this.left.check();if(e!==this.right.check())throw Ve();return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve()}get value(){throw Ve()}get color(){throw Ve()}get left(){throw Ve()}get right(){throw Ve()}copy(e,n,i,o,a){return this}insert(e,n,i){return new nn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new C_(this.data.getIterator())}getIteratorFrom(e){return new C_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ht(this.comparator);return n.data=e,n}}class C_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new qn([])}unionWith(e){let n=new Ht(rn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new qn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xa(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new IE("Invalid base64 string: "+a):a}}(e);return new on(n)}static fromUint8Array(e){const n=function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a}(e);return new on(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const e2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cs(t){if(ot(!!t),typeof t=="string"){let e=0;const n=e2.exec(t);if(ot(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function As(t){return typeof t=="string"?on.fromBase64String(t):on.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="server_timestamp",kE="__type__",DE="__previous_value__",NE="__local_write_time__";function Am(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[kE])===null||n===void 0?void 0:n.stringValue)===RE}function Ph(t){const e=t.mapValue.fields[DE];return Am(e)?Ph(e):e}function Kl(t){const e=Cs(t.mapValue.fields[NE].timestampValue);return new $t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n,i,o,a,u,h,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=p}}const sh="(default)";class Gl{constructor(e,n){this.projectId=e,this.database=n||sh}static empty(){return new Gl("","")}get isDefaultDatabase(){return this.database===sh}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="__type__",n2="__max__",Rc={mapValue:{}},VE="__vector__",oh="value";function Ps(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Am(t)?4:i2(t)?9007199254740991:r2(t)?10:11:Ve()}function ti(t,e){if(t===e)return!0;const n=Ps(t);if(n!==Ps(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kl(t).isEqual(Kl(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Cs(o.timestampValue),h=Cs(a.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(o,a){return As(o.bytesValue).isEqual(As(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(o,a){return Vt(o.geoPointValue.latitude)===Vt(a.geoPointValue.latitude)&&Vt(o.geoPointValue.longitude)===Vt(a.geoPointValue.longitude)}(t,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return Vt(o.integerValue)===Vt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=Vt(o.doubleValue),h=Vt(a.doubleValue);return u===h?ih(u)===ih(h):isNaN(u)&&isNaN(h)}return!1}(t,e);case 9:return xa(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return function(o,a){const u=o.mapValue.fields||{},h=a.mapValue.fields||{};if(S_(u)!==S_(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!ti(u[f],h[f])))return!1;return!0}(t,e);default:return Ve()}}function Ql(t,e){return(t.values||[]).find(n=>ti(n,e))!==void 0}function Ea(t,e){if(t===e)return 0;const n=Ps(t),i=Ps(e);if(n!==i)return Ke(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return function(a,u){const h=Vt(a.integerValue||a.doubleValue),f=Vt(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(t,e);case 3:return A_(t.timestampValue,e.timestampValue);case 4:return A_(Kl(t),Kl(e));case 5:return Ke(t.stringValue,e.stringValue);case 6:return function(a,u){const h=As(a),f=As(u);return h.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(a,u){const h=a.split("/"),f=u.split("/");for(let p=0;p<h.length&&p<f.length;p++){const g=Ke(h[p],f[p]);if(g!==0)return g}return Ke(h.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,u){const h=Ke(Vt(a.latitude),Vt(u.latitude));return h!==0?h:Ke(Vt(a.longitude),Vt(u.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return P_(t.arrayValue,e.arrayValue);case 10:return function(a,u){var h,f,p,g;const _=a.fields||{},E=u.fields||{},S=(h=_[oh])===null||h===void 0?void 0:h.arrayValue,I=(f=E[oh])===null||f===void 0?void 0:f.arrayValue,k=Ke(((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0,((g=I==null?void 0:I.values)===null||g===void 0?void 0:g.length)||0);return k!==0?k:P_(S,I)}(t.mapValue,e.mapValue);case 11:return function(a,u){if(a===Rc.mapValue&&u===Rc.mapValue)return 0;if(a===Rc.mapValue)return 1;if(u===Rc.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),p=u.fields||{},g=Object.keys(p);f.sort(),g.sort();for(let _=0;_<f.length&&_<g.length;++_){const E=Ke(f[_],g[_]);if(E!==0)return E;const S=Ea(h[f[_]],p[g[_]]);if(S!==0)return S}return Ke(f.length,g.length)}(t.mapValue,e.mapValue);default:throw Ve()}}function A_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=Cs(t),i=Cs(e),o=Ke(n.seconds,i.seconds);return o!==0?o:Ke(n.nanos,i.nanos)}function P_(t,e){const n=t.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const a=Ea(n[o],i[o]);if(a)return a}return Ke(n.length,i.length)}function Ta(t){return fp(t)}function fp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Cs(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return As(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",o=!0;for(const a of n.values||[])o?o=!1:i+=",",i+=fp(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${fp(n.fields[u])}`;return o+"}"}(t.mapValue):Ve()}function Oc(t){switch(Ps(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ph(t);return e?16+Oc(e):16;case 5:return 2*t.stringValue.length;case 6:return As(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,a)=>o+Oc(a),0)}(t.arrayValue);case 10:case 11:return function(i){let o=0;return Ns(i.fields,(a,u)=>{o+=a.length+Oc(u)}),o}(t.mapValue);default:throw Ve()}}function I_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function pp(t){return!!t&&"integerValue"in t}function Pm(t){return!!t&&"arrayValue"in t}function R_(t){return!!t&&"nullValue"in t}function k_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uc(t){return!!t&&"mapValue"in t}function r2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[bE])===null||n===void 0?void 0:n.stringValue)===VE}function Dl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ns(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Dl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function i2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===n2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Uc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dl(n)}setAll(e){let n=rn.emptyPath(),i={},o=[];e.forEach((u,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,i,o),i={},o=[],n=h.popLast()}u?i[h.lastSegment()]=Dl(u):o.push(h.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,i,o)}delete(e){const n=this.field(e.popLast());Uc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];Uc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){Ns(n,(o,a)=>e[o]=a);for(const o of i)delete e[o]}clone(){return new jn(Dl(this.value))}}function LE(t){const e=[];return Ns(t.fields,(n,i)=>{const o=new rn([n]);if(Uc(i)){const a=LE(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)}),new qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n,i,o,a,u,h){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=h}static newInvalidDocument(e){return new vn(e,0,Oe.min(),Oe.min(),Oe.min(),jn.empty(),0)}static newFoundDocument(e,n,i,o){return new vn(e,1,n,Oe.min(),i,o,0)}static newNoDocument(e,n){return new vn(e,2,n,Oe.min(),Oe.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new vn(e,3,n,Oe.min(),Oe.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n){this.position=e,this.inclusive=n}}function D_(t,e,n){let i=0;for(let o=0;o<t.position.length;o++){const a=e[o],u=t.position[o];if(a.field.isKeyField()?i=Ie.comparator(Ie.fromName(u.referenceValue),n.key):i=Ea(u,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function N_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n="asc"){this.field=e,this.dir=n}}function s2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{}class Ot extends ME{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new a2(e,n,i):n==="array-contains"?new c2(e,i):n==="in"?new h2(e,i):n==="not-in"?new d2(e,i):n==="array-contains-any"?new f2(e,i):new Ot(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new l2(e,i):new u2(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ea(n,this.value)):n!==null&&Ps(this.value)===Ps(n)&&this.matchesComparison(Ea(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ir extends ME{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Ir(e,n)}matches(e){return jE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function jE(t){return t.op==="and"}function FE(t){return o2(t)&&jE(t)}function o2(t){for(const e of t.filters)if(e instanceof Ir)return!1;return!0}function mp(t){if(t instanceof Ot)return t.field.canonicalString()+t.op.toString()+Ta(t.value);if(FE(t))return t.filters.map(e=>mp(e)).join(",");{const e=t.filters.map(n=>mp(n)).join(",");return`${t.op}(${e})`}}function OE(t,e){return t instanceof Ot?function(i,o){return o instanceof Ot&&i.op===o.op&&i.field.isEqual(o.field)&&ti(i.value,o.value)}(t,e):t instanceof Ir?function(i,o){return o instanceof Ir&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((a,u,h)=>a&&OE(u,o.filters[h]),!0):!1}(t,e):void Ve()}function UE(t){return t instanceof Ot?function(n){return`${n.field.canonicalString()} ${n.op} ${Ta(n.value)}`}(t):t instanceof Ir?function(n){return n.op.toString()+" {"+n.getFilters().map(UE).join(" ,")+"}"}(t):"Filter"}class a2 extends Ot{constructor(e,n,i){super(e,n,i),this.key=Ie.fromName(i.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class l2 extends Ot{constructor(e,n){super(e,"in",n),this.keys=BE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class u2 extends Ot{constructor(e,n){super(e,"not-in",n),this.keys=BE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function BE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ie.fromName(i.referenceValue))}class c2 extends Ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pm(n)&&Ql(n.arrayValue,this.value)}}class h2 extends Ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ql(this.value.arrayValue,n)}}class d2 extends Ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ql(this.value.arrayValue,n)}}class f2 extends Ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ql(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n=null,i=[],o=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=h,this.le=null}}function b_(t,e=null,n=[],i=[],o=null,a=null,u=null){return new p2(t,e,n,i,o,a,u)}function Im(t){const e=Ue(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>mp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),Ah(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ta(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ta(i)).join(",")),e.le=n}return e.le}function Rm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!s2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!OE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!N_(t.startAt,e.startAt)&&N_(t.endAt,e.endAt)}function gp(t){return Ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n=null,i=[],o=[],a=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=f,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function m2(t,e,n,i,o,a,u,h){return new Va(t,e,n,i,o,a,u,h)}function km(t){return new Va(t)}function V_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zE(t){return t.collectionGroup!==null}function Nl(t){const e=Ue(t);if(e.he===null){e.he=[];const n=new Set;for(const a of e.explicitOrderBy)e.he.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Ht(rn.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.he.push(new Yl(a,i))}),n.has(rn.keyField().canonicalString())||e.he.push(new Yl(rn.keyField(),i))}return e.he}function Zr(t){const e=Ue(t);return e.Pe||(e.Pe=g2(e,Nl(t))),e.Pe}function g2(t,e){if(t.limitType==="F")return b_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new Yl(o.field,a)});const n=t.endAt?new ah(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ah(t.startAt.position,t.startAt.inclusive):null;return b_(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function yp(t,e){const n=t.filters.concat([e]);return new Va(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vp(t,e,n){return new Va(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ih(t,e){return Rm(Zr(t),Zr(e))&&t.limitType===e.limitType}function $E(t){return`${Im(Zr(t))}|lt:${t.limitType}`}function sa(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(o=>UE(o)).join(", ")}]`),Ah(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(o=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(o)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(o=>Ta(o)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(o=>Ta(o)).join(",")),`Target(${i})`}(Zr(t))}; limitType=${t.limitType})`}function Rh(t,e){return e.isFoundDocument()&&function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ie.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(t,e)&&function(i,o){for(const a of Nl(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(t,e)&&function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0}(t,e)&&function(i,o){return!(i.startAt&&!function(u,h,f){const p=D_(u,h,f);return u.inclusive?p<=0:p<0}(i.startAt,Nl(i),o)||i.endAt&&!function(u,h,f){const p=D_(u,h,f);return u.inclusive?p>=0:p>0}(i.endAt,Nl(i),o))}(t,e)}function y2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HE(t){return(e,n)=>{let i=!1;for(const o of Nl(t)){const a=v2(o,e,n);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function v2(t,e,n){const i=t.field.isKeyField()?Ie.comparator(e.key,n.key):function(a,u,h){const f=u.data.field(a),p=h.data.field(a);return f!==null&&p!==null?Ea(f,p):Ve()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,(n,i)=>{for(const[o,a]of i)e(o,a)})}isEmpty(){return PE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=new Rt(Ie.comparator);function Ni(){return _2}const WE=new Rt(Ie.comparator);function Cl(...t){let e=WE;for(const n of t)e=e.insert(n.key,n);return e}function qE(t){let e=WE;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function co(){return bl()}function KE(){return bl()}function bl(){return new wo(t=>t.toString(),(t,e)=>t.isEqual(e))}const w2=new Rt(Ie.comparator),x2=new Ht(Ie.comparator);function He(...t){let e=x2;for(const n of t)e=e.add(n);return e}const E2=new Ht(Ke);function T2(){return E2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ih(e)?"-0":e}}function GE(t){return{integerValue:""+t}}function S2(t,e){return XN(e)?GE(e):Dm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this._=void 0}}function C2(t,e,n){return t instanceof Xl?function(o,a){const u={fields:{[kE]:{stringValue:RE},[NE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Am(a)&&(a=Ph(a)),a&&(u.fields[DE]=a),{mapValue:u}}(n,e):t instanceof Jl?YE(t,e):t instanceof Zl?XE(t,e):function(o,a){const u=QE(o,a),h=L_(u)+L_(o.Ie);return pp(u)&&pp(o.Ie)?GE(h):Dm(o.serializer,h)}(t,e)}function A2(t,e,n){return t instanceof Jl?YE(t,e):t instanceof Zl?XE(t,e):n}function QE(t,e){return t instanceof lh?function(i){return pp(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Xl extends kh{}class Jl extends kh{constructor(e){super(),this.elements=e}}function YE(t,e){const n=JE(e);for(const i of t.elements)n.some(o=>ti(o,i))||n.push(i);return{arrayValue:{values:n}}}class Zl extends kh{constructor(e){super(),this.elements=e}}function XE(t,e){let n=JE(e);for(const i of t.elements)n=n.filter(o=>!ti(o,i));return{arrayValue:{values:n}}}class lh extends kh{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function L_(t){return Vt(t.integerValue||t.doubleValue)}function JE(t){return Pm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n){this.field=e,this.transform=n}}function I2(t,e){return t.field.isEqual(e.field)&&function(i,o){return i instanceof Jl&&o instanceof Jl||i instanceof Zl&&o instanceof Zl?xa(i.elements,o.elements,ti):i instanceof lh&&o instanceof lh?ti(i.Ie,o.Ie):i instanceof Xl&&o instanceof Xl}(t.transform,e.transform)}class R2{constructor(e,n){this.version=e,this.transformResults=n}}class Ar{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ar}static exists(e){return new Ar(void 0,e)}static updateTime(e){return new Ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dh{}function ZE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tT(t.key,Ar.none()):new au(t.key,t.data,Ar.none());{const n=t.data,i=jn.empty();let o=new Ht(rn.comparator);for(let a of e.fields)if(!o.has(a)){let u=n.field(a);u===null&&a.length>1&&(a=a.popLast(),u=n.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new bs(t.key,i,new qn(o.toArray()),Ar.none())}}function k2(t,e,n){t instanceof au?function(o,a,u){const h=o.value.clone(),f=j_(o.fieldTransforms,a,u.transformResults);h.setAll(f),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(t,e,n):t instanceof bs?function(o,a,u){if(!Bc(o.precondition,a))return void a.convertToUnknownDocument(u.version);const h=j_(o.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(eT(o)),f.setAll(h),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(t,e,n):function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,n)}function Vl(t,e,n,i){return t instanceof au?function(a,u,h,f){if(!Bc(a.precondition,u))return h;const p=a.value.clone(),g=F_(a.fieldTransforms,f,u);return p.setAll(g),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof bs?function(a,u,h,f){if(!Bc(a.precondition,u))return h;const p=F_(a.fieldTransforms,f,u),g=u.data;return g.setAll(eT(a)),g.setAll(p),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(_=>_.field))}(t,e,n,i):function(a,u,h){return Bc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(t,e,n)}function D2(t,e){let n=null;for(const i of t.fieldTransforms){const o=e.data.field(i.field),a=QE(i.transform,o||null);a!=null&&(n===null&&(n=jn.empty()),n.set(i.field,a))}return n||null}function M_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&xa(i,o,(a,u)=>I2(a,u))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class au extends Dh{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class bs extends Dh{constructor(e,n,i,o,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function eT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function j_(t,e,n){const i=new Map;ot(t.length===n.length);for(let o=0;o<n.length;o++){const a=t[o],u=a.transform,h=e.data.field(a.field);i.set(a.field,A2(u,h,n[o]))}return i}function F_(t,e,n){const i=new Map;for(const o of t){const a=o.transform,u=n.data.field(o.field);i.set(o.field,C2(a,u,e))}return i}class tT extends Dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class N2 extends Dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&k2(a,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Vl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Vl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=KE();return this.mutations.forEach(o=>{const a=e.get(o.key),u=a.overlayedDocument;let h=this.applyToLocalView(u,a.mutatedFields);h=n.has(o.key)?null:h;const f=ZE(u,h);f!==null&&i.set(o.key,f),u.isValidDocument()||u.convertToNoDocument(Oe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),He())}isEqual(e){return this.batchId===e.batchId&&xa(this.mutations,e.mutations,(n,i)=>M_(n,i))&&xa(this.baseMutations,e.baseMutations,(n,i)=>M_(n,i))}}class Nm{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){ot(e.mutations.length===i.length);let o=function(){return w2}();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new Nm(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,Ze;function M2(t){switch(t){case ne.OK:return Ve();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ve()}}function nT(t){if(t===void 0)return Di("GRPC error has no .code"),ne.UNKNOWN;switch(t){case Ft.OK:return ne.OK;case Ft.CANCELLED:return ne.CANCELLED;case Ft.UNKNOWN:return ne.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return ne.INTERNAL;case Ft.UNAVAILABLE:return ne.UNAVAILABLE;case Ft.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Ft.NOT_FOUND:return ne.NOT_FOUND;case Ft.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Ft.ABORTED:return ne.ABORTED;case Ft.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Ft.DATA_LOSS:return ne.DATA_LOSS;default:return Ve()}}(Ze=Ft||(Ft={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=new vs([4294967295,4294967295],0);function O_(t){const e=j2().encode(t),n=new vE;return n.update(e),new Uint8Array(n.digest())}function U_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new vs([n,i],0),new vs([o,a],0)]}class bm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Al(`Invalid padding: ${n}`);if(i<0)throw new Al(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Al(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Al(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=vs.fromNumber(this.Ee)}Ae(e,n,i){let o=e.add(n.multiply(vs.fromNumber(i)));return o.compare(F2)===1&&(o=new vs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=O_(e),[i,o]=U_(n);for(let a=0;a<this.hashCount;a++){const u=this.Ae(i,o,a);if(!this.Re(u))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new bm(a,o,n);return i.forEach(h=>u.insert(h)),u}insert(e){if(this.Ee===0)return;const n=O_(e),[i,o]=U_(n);for(let a=0;a<this.hashCount;a++){const u=this.Ae(i,o,a);this.Ve(u)}}Ve(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Al extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n,i,o,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,lu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Nh(Oe.min(),o,new Rt(Ke),Ni(),He())}}class lu{constructor(e,n,i,o,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new lu(i,n,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n,i,o){this.me=e,this.removedTargetIds=n,this.key=i,this.fe=o}}class rT{constructor(e,n){this.targetId=e,this.ge=n}}class iT{constructor(e,n,i=on.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class B_{constructor(){this.pe=0,this.ye=z_(),this.we=on.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=He(),n=He(),i=He();return this.ye.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Ve()}}),new lu(this.we,this.be,e,n,i)}Me(){this.Se=!1,this.ye=z_()}xe(e,n){this.Se=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,ot(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class O2{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ni(),this.$e=kc(),this.Ke=kc(),this.Ue=new Rt(Ke)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const i=this.He(n);switch(e.state){case 0:this.Je(n)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(n);break;case 3:this.Je(n)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),i.Ce(e.resumeToken));break;default:Ve()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((i,o)=>{this.Je(o)&&n(o)})}Ze(e){const n=e.targetId,i=e.ge.count,o=this.Xe(n);if(o){const a=o.target;if(gp(a))if(i===0){const u=new Ie(a.path);this.ze(n,u,vn.newNoDocument(u,Oe.min()))}else ot(i===1);else{const u=this.et(n);if(u!==i){const h=this.tt(e),f=h?this.nt(h,e,u):1;if(f!==0){this.Ye(n);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,p)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=n;let u,h;try{u=As(i).toUint8Array()}catch(f){if(f instanceof IE)return wa("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new bm(u,o,a)}catch(f){return wa(f instanceof Al?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.Ee===0?null:h}nt(e,n,i){return n.ge.count===i-this.st(e,n.targetId)?0:2}st(e,n){const i=this.ke.getRemoteKeysForTarget(n);let o=0;return i.forEach(a=>{const u=this.ke.it(),h=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.ze(n,a,null),o++)}),o}ot(e){const n=new Map;this.qe.forEach((a,u)=>{const h=this.Xe(u);if(h){if(a.current&&gp(h.target)){const f=new Ie(h.target.path);this._t(f).has(u)||this.ut(u,f)||this.ze(u,f,vn.newNoDocument(f,e))}a.ve&&(n.set(u,a.Fe()),a.Me())}});let i=He();this.Ke.forEach((a,u)=>{let h=!0;u.forEachWhile(f=>{const p=this.Xe(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(a))}),this.Qe.forEach((a,u)=>u.setReadTime(e));const o=new Nh(e,n,this.Ue,this.Qe,i);return this.Qe=Ni(),this.$e=kc(),this.Ke=kc(),this.Ue=new Rt(Ke),o}Ge(e,n){if(!this.Je(e))return;const i=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,i),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(e))}ze(e,n,i){if(!this.Je(e))return;const o=this.He(e);this.ut(e,n)?o.xe(n,1):o.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(e)),this.Ke=this.Ke.insert(n,this.ct(n).add(e)),i&&(this.Qe=this.Qe.insert(n,i))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new B_,this.qe.set(e,n)),n}ct(e){let n=this.Ke.get(e);return n||(n=new Ht(Ke),this.Ke=this.Ke.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new Ht(Ke),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||_e("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new B_),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function kc(){return new Rt(Ie.comparator)}function z_(){return new Rt(Ie.comparator)}const U2={asc:"ASCENDING",desc:"DESCENDING"},B2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z2={and:"AND",or:"OR"};class $2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _p(t,e){return t.useProto3Json||Ah(e)?e:{value:e}}function uh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function H2(t,e){return uh(t,e.toTimestamp())}function ei(t){return ot(!!t),Oe.fromTimestamp(function(n){const i=Cs(n);return new $t(i.seconds,i.nanos)}(t))}function Vm(t,e){return wp(t,e).canonicalString()}function wp(t,e){const n=function(o){return new wt(["projects",o.projectId,"databases",o.database])}(t).child("documents");return e===void 0?n:n.child(e)}function oT(t){const e=wt.fromString(t);return ot(hT(e)),e}function xp(t,e){return Vm(t.databaseId,e.path)}function Ff(t,e){const n=oT(e);if(n.get(1)!==t.databaseId.projectId)throw new we(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new we(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ie(lT(n))}function aT(t,e){return Vm(t.databaseId,e)}function W2(t){const e=oT(t);return e.length===4?wt.emptyPath():lT(e)}function Ep(t){return new wt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lT(t){return ot(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $_(t,e,n){return{name:xp(t,e),fields:n.value.mapValue.fields}}function q2(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(p,g){return p.useProto3Json?(ot(g===void 0||typeof g=="string"),on.fromBase64String(g||"")):(ot(g===void 0||g instanceof Buffer||g instanceof Uint8Array),on.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(p){const g=p.code===void 0?ne.UNKNOWN:nT(p.code);return new we(g,p.message||"")}(u);n=new iT(i,o,a,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Ff(t,i.document.name),a=ei(i.document.updateTime),u=i.document.createTime?ei(i.document.createTime):Oe.min(),h=new jn({mapValue:{fields:i.document.fields}}),f=vn.newFoundDocument(o,a,u,h),p=i.targetIds||[],g=i.removedTargetIds||[];n=new zc(p,g,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Ff(t,i.document),a=i.readTime?ei(i.readTime):Oe.min(),u=vn.newNoDocument(o,a),h=i.removedTargetIds||[];n=new zc([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Ff(t,i.document),a=i.removedTargetIds||[];n=new zc([],a,o,null)}else{if(!("filter"in e))return Ve();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new L2(o,a),h=i.targetId;n=new rT(h,u)}}return n}function K2(t,e){let n;if(e instanceof au)n={update:$_(t,e.key,e.value)};else if(e instanceof tT)n={delete:xp(t,e.key)};else if(e instanceof bs)n={update:$_(t,e.key,e.data),updateMask:nb(e.fieldMask)};else{if(!(e instanceof N2))return Ve();n={verify:xp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(a,u){const h=u.transform;if(h instanceof Xl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Jl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Zl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof lh)return{fieldPath:u.field.canonicalString(),increment:h.Ie};throw Ve()}(0,i))),e.precondition.isNone||(n.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:H2(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ve()}(t,e.precondition)),n}function G2(t,e){return t&&t.length>0?(ot(e!==void 0),t.map(n=>function(o,a){let u=o.updateTime?ei(o.updateTime):ei(a);return u.isEqual(Oe.min())&&(u=ei(a)),new R2(u,o.transformResults||[])}(n,e))):[]}function Q2(t,e){return{documents:[aT(t,e.path)]}}function Y2(t,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=aT(t,o);const a=function(p){if(p.length!==0)return cT(Ir.create(p,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const u=function(p){if(p.length!==0)return p.map(g=>function(E){return{field:oa(E.field),direction:Z2(E.dir)}}(g))}(e.orderBy);u&&(n.structuredQuery.orderBy=u);const h=_p(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:n,parent:o}}function X2(t){let e=W2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){ot(i===1);const g=n.from[0];g.allDescendants?o=g.collectionId:e=e.child(g.collectionId)}let a=[];n.where&&(a=function(_){const E=uT(_);return E instanceof Ir&&FE(E)?E.getFilters():[E]}(n.where));let u=[];n.orderBy&&(u=function(_){return _.map(E=>function(I){return new Yl(aa(I.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(E))}(n.orderBy));let h=null;n.limit&&(h=function(_){let E;return E=typeof _=="object"?_.value:_,Ah(E)?null:E}(n.limit));let f=null;n.startAt&&(f=function(_){const E=!!_.before,S=_.values||[];return new ah(S,E)}(n.startAt));let p=null;return n.endAt&&(p=function(_){const E=!_.before,S=_.values||[];return new ah(S,E)}(n.endAt)),m2(e,o,u,a,h,"F",f,p)}function J2(t,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=aa(n.unaryFilter.field);return Ot.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=aa(n.unaryFilter.field);return Ot.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=aa(n.unaryFilter.field);return Ot.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=aa(n.unaryFilter.field);return Ot.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ve()}}(t):t.fieldFilter!==void 0?function(n){return Ot.create(aa(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ve()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ir.create(n.compositeFilter.filters.map(i=>uT(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ve()}}(n.compositeFilter.op))}(t):Ve()}function Z2(t){return U2[t]}function eb(t){return B2[t]}function tb(t){return z2[t]}function oa(t){return{fieldPath:t.canonicalString()}}function aa(t){return rn.fromServerFormat(t.fieldPath)}function cT(t){return t instanceof Ot?function(n){if(n.op==="=="){if(k_(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NAN"}};if(R_(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(k_(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NOT_NAN"}};if(R_(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oa(n.field),op:eb(n.op),value:n.value}}}(t):t instanceof Ir?function(n){const i=n.getFilters().map(o=>cT(o));return i.length===1?i[0]:{compositeFilter:{op:tb(n.op),filters:i}}}(t):Ve()}function nb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n,i,o,a=Oe.min(),u=Oe.min(),h=on.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e){this.Tt=e}}function ib(t){const e=X2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(){this.Tn=new ob}addToCollectionParentIndex(e,n){return this.Tn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(Ss.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(Ss.min())}updateCollectionGroup(e,n,i){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class ob{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new Ht(wt.comparator),a=!o.has(i);return this.index[n]=o.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ht(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dT=41943040;class Mn{static withCacheSize(e){return new Mn(e,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(dT,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Sa(0)}static Un(){return new Sa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="LruGarbageCollector",ab=1048576;function q_([t,e],[n,i]){const o=Ke(t,n);return o===0?Ke(e,i):o}class lb{constructor(e){this.Hn=e,this.buffer=new Ht(q_),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();q_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ub{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){_e(W_,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ba(n)?_e(W_,"Ignoring IndexedDB error during garbage collection: ",n):await Na(n)}await this.er(3e5)})}}class cb{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return re.resolve(Ch.ae);const i=new lb(n);return this.tr.forEachTarget(e,o=>i.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>i.Zn(o))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.tr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(H_)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),H_):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let i,o,a,u,h,f,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),o=this.params.maximumSequenceNumbersToCollect):o=_,u=Date.now(),this.nthSequenceNumber(e,o))).next(_=>(i=_,h=Date.now(),this.removeTargets(e,i,n))).next(_=>(a=_,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(_=>(p=Date.now(),ia()<=et.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-g}ms
	Determined least recently used ${o} in `+(h-u)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${_} documents in `+(p-f)+`ms
Total Duration: ${p-g}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:_})))}}function hb(t,e){return new cb(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(){this.changes=new wo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?re.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(i!==null&&Vl(i.mutation,o,qn.empty(),$t.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,He()).next(()=>i))}getLocalViewOfDocuments(e,n,i=He()){const o=co();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,i).next(a=>{let u=Cl();return a.forEach((h,f)=>{u=u.insert(h,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,n){const i=co();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,He()))}populateOverlays(e,n,i){const o=[];return i.forEach(a=>{n.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((u,h)=>{n.set(u,h)})})}computeViews(e,n,i,o){let a=Ni();const u=bl(),h=function(){return bl()}();return n.forEach((f,p)=>{const g=i.get(p.key);o.has(p.key)&&(g===void 0||g.mutation instanceof bs)?a=a.insert(p.key,p):g!==void 0?(u.set(p.key,g.mutation.getFieldMask()),Vl(g.mutation,p,g.mutation.getFieldMask(),$t.now())):u.set(p.key,qn.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((p,g)=>u.set(p,g)),n.forEach((p,g)=>{var _;return h.set(p,new fb(g,(_=u.get(p))!==null&&_!==void 0?_:null))}),h))}recalculateAndSaveOverlays(e,n){const i=bl();let o=new Rt((u,h)=>u-h),a=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(u=>{for(const h of u)h.keys().forEach(f=>{const p=n.get(f);if(p===null)return;let g=i.get(f)||qn.empty();g=h.applyToLocalView(p,g),i.set(f,g);const _=(o.get(h.batchId)||He()).add(f);o=o.insert(h.batchId,_)})}).next(()=>{const u=[],h=o.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),p=f.key,g=f.value,_=KE();g.forEach(E=>{if(!a.has(E)){const S=ZE(n.get(E),i.get(E));S!==null&&_.set(E,S),a=a.add(E)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,_))}return re.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,o){return function(u){return Ie.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next(a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-a.size):re.resolve(co());let h=ql,f=a;return u.next(p=>re.forEach(p,(g,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),a.get(g)?re.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{f=f.insert(g,E)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,f,p,He())).next(g=>({batchId:h,changes:qE(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next(i=>{let o=Cl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const a=n.collectionGroup;let u=Cl();return this.indexManager.getCollectionParents(e,a).next(h=>re.forEach(h,f=>{const p=function(_,E){return new Va(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,i,o).next(g=>{g.forEach((_,E)=>{u=u.insert(_,E)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,n,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,o))).next(u=>{a.forEach((f,p)=>{const g=p.getKey();u.get(g)===null&&(u=u.insert(g,vn.newInvalidDocument(g)))});let h=Cl();return u.forEach((f,p)=>{const g=a.get(f);g!==void 0&&Vl(g.mutation,p,qn.empty(),$t.now()),Rh(n,p)&&(h=h.insert(f,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return re.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:ei(o.createTime)}}(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(o){return{name:o.name,query:ib(o.bundledQuery),readTime:ei(o.readTime)}}(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(){this.overlays=new Rt(Ie.comparator),this.Rr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const i=co();return re.forEach(n,o=>this.getOverlay(e,o).next(a=>{a!==null&&i.set(o,a)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((o,a)=>{this.Et(e,n,a)}),re.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.Rr.get(i);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(i)),re.resolve()}getOverlaysForCollection(e,n,i){const o=co(),a=n.length+1,u=new Ie(n.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,p=f.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===a&&f.largestBatchId>i&&o.set(f.getKey(),f)}return re.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let a=new Rt((p,g)=>p-g);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let g=a.get(p.largestBatchId);g===null&&(g=co(),a=a.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const h=co(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((p,g)=>h.set(p,g)),!(h.size()>=o)););return re.resolve(h)}Et(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Rr.get(o.largestBatchId).delete(i.key);this.Rr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new V2(n,i));let a=this.Rr.get(n);a===void 0&&(a=He(),this.Rr.set(n,a)),this.Rr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(){this.Vr=new Ht(Qt.mr),this.gr=new Ht(Qt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const i=new Qt(e,n);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.wr(new Qt(e,n))}br(e,n){e.forEach(i=>this.removeReference(i,n))}Sr(e){const n=new Ie(new wt([])),i=new Qt(n,e),o=new Qt(n,e+1),a=[];return this.gr.forEachInRange([i,o],u=>{this.wr(u),a.push(u.key)}),a}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new Ie(new wt([])),i=new Qt(n,e),o=new Qt(n,e+1);let a=He();return this.gr.forEachInRange([i,o],u=>{a=a.add(u.key)}),a}containsKey(e){const n=new Qt(e,0),i=this.Vr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Qt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return Ie.comparator(e.key,n.key)||Ke(e.Cr,n.Cr)}static pr(e,n){return Ke(e.Cr,n.Cr)||Ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Ht(Qt.mr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new b2(a,n,i,o);this.mutationQueue.push(u);for(const h of o)this.Mr=this.Mr.add(new Qt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return re.resolve(u)}lookupMutationBatch(e,n){return re.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.Nr(i),a=o<0?0:o;return re.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Cm:this.Fr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Qt(n,0),o=new Qt(n,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([i,o],u=>{const h=this.Or(u.Cr);a.push(h)}),re.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ht(Ke);return n.forEach(o=>{const a=new Qt(o,0),u=new Qt(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,u],h=>{i=i.add(h.Cr)})}),re.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let a=i;Ie.isDocumentKey(a)||(a=a.child(""));const u=new Qt(new Ie(a),0);let h=new Ht(Ke);return this.Mr.forEachWhile(f=>{const p=f.key.path;return!!i.isPrefixOf(p)&&(p.length===o&&(h=h.add(f.Cr)),!0)},u),re.resolve(this.Br(h))}Br(e){const n=[];return e.forEach(i=>{const o=this.Or(i);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){ot(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return re.forEach(n.mutations,o=>{const a=new Qt(o.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,n){const i=new Qt(n,0),o=this.Mr.firstAfterOrEqual(i);return re.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.kr=e,this.docs=function(){return new Rt(Ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),a=o?o.size:0,u=this.kr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return re.resolve(i?i.document.mutableCopy():vn.newInvalidDocument(n))}getEntries(e,n){let i=Ni();return n.forEach(o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():vn.newInvalidDocument(o))}),re.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let a=Ni();const u=n.path,h=new Ie(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:p,value:{document:g}}=f.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||KN(qN(g),i)<=0||(o.has(g.key)||Rh(n,g))&&(a=a.insert(g.key,g.mutableCopy()))}return re.resolve(a)}getAllFromCollectionGroup(e,n,i,o){Ve()}qr(e,n){return re.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new wb(this)}getSize(e){return re.resolve(this.size)}}class wb extends db{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?n.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(i)}),re.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){this.persistence=e,this.Qr=new wo(n=>Im(n),Rm),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Lm,this.targetCount=0,this.Ur=Sa.Kn()}forEachTarget(e,n){return this.Qr.forEach((i,o)=>n(o)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.$r&&(this.$r=n),re.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ur=new Sa(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.zn(n),re.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Kr.Sr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,i){let o=0;const a=[];return this.Qr.forEach((u,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.Qr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)}),re.waitFor(a).next(()=>o)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const i=this.Qr.get(n)||null;return re.resolve(i)}addMatchingKeys(e,n,i){return this.Kr.yr(n,i),re.resolve()}removeMatchingKeys(e,n,i){this.Kr.br(n,i);const o=this.persistence.referenceDelegate,a=[];return o&&n.forEach(u=>{a.push(o.markPotentiallyOrphaned(e,u))}),re.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Kr.Sr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Kr.vr(n);return re.resolve(i)}containsKey(e,n){return re.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Ch(0),this.zr=!1,this.zr=!0,this.jr=new yb,this.referenceDelegate=e(this),this.Hr=new xb(this),this.indexManager=new sb,this.remoteDocumentCache=function(o){return new _b(o)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new rb(n),this.Yr=new mb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Wr[e.toKey()];return i||(i=new vb(n,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,i){_e("MemoryPersistence","Starting transaction:",e);const o=new Eb(this.Gr.next());return this.referenceDelegate.Zr(),i(o).next(a=>this.referenceDelegate.Xr(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}ei(e,n){return re.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,n)))}}class Eb extends QN{constructor(e){super(),this.currentSequenceNumber=e}}class Mm{constructor(e){this.persistence=e,this.ti=new Lm,this.ni=null}static ri(e){return new Mm(e)}get ii(){if(this.ni)return this.ni;throw Ve()}addReference(e,n,i){return this.ti.addReference(i,n),this.ii.delete(i.toString()),re.resolve()}removeReference(e,n,i){return this.ti.removeReference(i,n),this.ii.add(i.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),re.resolve()}removeTarget(e,n){this.ti.Sr(n.targetId).forEach(o=>this.ii.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(a=>this.ii.add(a.toString()))}).next(()=>i.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.ii,i=>{const o=Ie.fromPath(i);return this.si(e,o).next(a=>{a||n.removeEntry(o,Oe.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(i=>{i?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return re.or([()=>re.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class ch{constructor(e,n){this.persistence=e,this.oi=new wo(i=>JN(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=hb(this,n)}static ri(e,n){return new ch(e,n)}Zr(){}Xr(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(o=>i+o))}sr(e){let n=0;return this.rr(e,i=>{n++}).next(()=>n)}rr(e,n){return re.forEach(this.oi,(i,o)=>this.ar(e,i,o).next(a=>a?re.resolve():n(o)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.qr(e,u=>this.ar(e,u,n).next(h=>{h||(i++,a.removeEntry(u,Oe.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.oi.set(i,e.currentSequenceNumber),re.resolve()}removeReference(e,n,i){return this.oi.set(i,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),re.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Oc(e.data.value)),n}ar(e,n,i){return re.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.oi.get(n);return re.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Hi=i,this.Ji=o}static Yi(e,n){let i=He(),o=He();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new jm(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return yD()?8:YN(mD())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,i,o){const a={result:null};return this.rs(e,n).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.ss(e,n,o,i).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new Tb;return this._s(e,n,u).next(h=>{if(a.result=h,this.Xi)return this.us(e,n,u,h.size)})}).next(()=>a.result)}us(e,n,i,o){return i.documentReadCount<this.es?(ia()<=et.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",sa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),re.resolve()):(ia()<=et.DEBUG&&_e("QueryEngine","Query:",sa(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ts*o?(ia()<=et.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",sa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zr(n))):re.resolve())}rs(e,n){if(V_(n))return re.resolve(null);let i=Zr(n);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=vp(n,null,"F"),i=Zr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const u=He(...a);return this.ns.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,i).next(f=>{const p=this.cs(n,h);return this.ls(n,p,u,f.readTime)?this.rs(e,vp(n,null,"F")):this.hs(e,p,n,f)}))})))}ss(e,n,i,o){return V_(n)||o.isEqual(Oe.min())?re.resolve(null):this.ns.getDocuments(e,i).next(a=>{const u=this.cs(n,a);return this.ls(n,u,i,o)?re.resolve(null):(ia()<=et.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),sa(n)),this.hs(e,u,n,WN(o,ql)).next(h=>h))})}cs(e,n){let i=new Ht(HE(e));return n.forEach((o,a)=>{Rh(e,a)&&(i=i.add(a))}),i}ls(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}_s(e,n,i){return ia()<=et.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",sa(n)),this.ns.getDocumentsMatchingQuery(e,n,Ss.min(),i)}hs(e,n,i,o){return this.ns.getDocumentsMatchingQuery(e,i,o).next(a=>(n.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="LocalStore",Cb=3e8;class Ab{constructor(e,n,i,o){this.persistence=e,this.Ps=n,this.serializer=o,this.Ts=new Rt(Ke),this.Is=new wo(a=>Im(a),Rm),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pb(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function Pb(t,e,n,i){return new Ab(t,e,n,i)}async function pT(t,e){const n=Ue(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next(a=>(o=a,n.As(e),n.mutationQueue.getAllMutationBatches(i))).next(a=>{const u=[],h=[];let f=He();for(const p of o){u.push(p.batchId);for(const g of p.mutations)f=f.add(g.key)}for(const p of a){h.push(p.batchId);for(const g of p.mutations)f=f.add(g.key)}return n.localDocuments.getDocuments(i,f).next(p=>({Rs:p,removedBatchIds:u,addedBatchIds:h}))})})}function Ib(t,e){const n=Ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),a=n.ds.newChangeBuffer({trackRemovals:!0});return function(h,f,p,g){const _=p.batch,E=_.keys();let S=re.resolve();return E.forEach(I=>{S=S.next(()=>g.getEntry(f,I)).next(k=>{const D=p.docVersions.get(I);ot(D!==null),k.version.compareTo(D)<0&&(_.applyToRemoteDocument(k,p),k.isValidDocument()&&(k.setReadTime(p.commitVersion),g.addEntry(k)))})}),S.next(()=>h.mutationQueue.removeMutationBatch(f,_))}(n,i,e,a).next(()=>a.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let f=He();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(f=f.add(h.batch.mutations[p].key));return f}(e))).next(()=>n.localDocuments.getDocuments(i,o))})}function mT(t){const e=Ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function Rb(t,e){const n=Ue(t),i=e.snapshotVersion;let o=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=n.ds.newChangeBuffer({trackRemovals:!0});o=n.Ts;const h=[];e.targetChanges.forEach((g,_)=>{const E=o.get(_);if(!E)return;h.push(n.Hr.removeMatchingKeys(a,g.removedDocuments,_).next(()=>n.Hr.addMatchingKeys(a,g.addedDocuments,_)));let S=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(_)!==null?S=S.withResumeToken(on.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,i)),o=o.insert(_,S),function(k,D,j){return k.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=Cb?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(E,S,g)&&h.push(n.Hr.updateTargetData(a,S))});let f=Ni(),p=He();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,g))}),h.push(kb(a,u,e.documentUpdates).next(g=>{f=g.Vs,p=g.fs})),!i.isEqual(Oe.min())){const g=n.Hr.getLastRemoteSnapshotVersion(a).next(_=>n.Hr.setTargetsMetadata(a,a.currentSequenceNumber,i));h.push(g)}return re.waitFor(h).next(()=>u.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,f,p)).next(()=>f)}).then(a=>(n.Ts=o,a))}function kb(t,e,n){let i=He(),o=He();return n.forEach(a=>i=i.add(a)),e.getEntries(t,i).next(a=>{let u=Ni();return n.forEach((h,f)=>{const p=a.get(h);f.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(h)),f.isNoDocument()&&f.version.isEqual(Oe.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):_e(Fm,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",f.version)}),{Vs:u,fs:o}})}function Db(t,e){const n=Ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Cm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Nb(t,e){const n=Ue(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return n.Hr.getTargetData(i,e).next(a=>a?(o=a,re.resolve(o)):n.Hr.allocateTargetId(i).next(u=>(o=new ms(e,u,"TargetPurposeListen",i.currentSequenceNumber),n.Hr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=n.Ts.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(i.targetId,i),n.Is.set(e,i.targetId)),i})}async function Tp(t,e,n){const i=Ue(t),o=i.Ts.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,u=>i.persistence.referenceDelegate.removeTarget(u,o))}catch(u){if(!ba(u))throw u;_e(Fm,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ts=i.Ts.remove(e),i.Is.delete(o.target)}function K_(t,e,n){const i=Ue(t);let o=Oe.min(),a=He();return i.persistence.runTransaction("Execute query","readwrite",u=>function(f,p,g){const _=Ue(f),E=_.Is.get(g);return E!==void 0?re.resolve(_.Ts.get(E)):_.Hr.getTargetData(p,g)}(i,u,Zr(e)).next(h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(u,h.targetId).next(f=>{a=f})}).next(()=>i.Ps.getDocumentsMatchingQuery(u,e,n?o:Oe.min(),n?a:He())).next(h=>(bb(i,y2(e),h),{documents:h,gs:a})))}function bb(t,e,n){let i=t.Es.get(e)||Oe.min();n.forEach((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),t.Es.set(e,i)}class G_{constructor(){this.activeTargetIds=T2()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vb{constructor(){this.ho=new G_,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,i){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new G_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="ConnectivityMonitor";class Y_{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){_e(Q_,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){_e(Q_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc=null;function Sp(){return Dc===null?Dc=function(){return 268435456+Math.round(2147483648*Math.random())}():Dc++,"0x"+Dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="RestConnection",Mb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jb{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${i}/databases/${o}`,this.wo=this.databaseId.database===sh?`project_id=${i}`:`project_id=${i}&database_id=${o}`}bo(e,n,i,o,a){const u=Sp(),h=this.So(e,n.toUriEncodedString());_e(Of,`Sending RPC '${e}' ${u}:`,h,i);const f={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(f,o,a),this.vo(e,h,f,i).then(p=>(_e(Of,`Received RPC '${e}' ${u}: `,p),p),p=>{throw wa(Of,`RPC '${e}' ${u} failed with error: `,p,"url: ",h,"request:",i),p})}Co(e,n,i,o,a,u){return this.bo(e,n,i,o,a)}Do(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Da}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,a)=>e[a]=o),i&&i.headers.forEach((o,a)=>e[a]=o)}So(e,n){const i=Mb[e];return`${this.po}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class Ob extends jb{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,i,o){const a=Sp();return new Promise((u,h)=>{const f=new _E;f.setWithCredentials(!0),f.listenOnce(wE.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Fc.NO_ERROR:const g=f.getResponseJson();_e(mn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case Fc.TIMEOUT:_e(mn,`RPC '${e}' ${a} timed out`),h(new we(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Fc.HTTP_ERROR:const _=f.getStatus();if(_e(mn,`RPC '${e}' ${a} failed with status:`,_,"response text:",f.getResponseText()),_>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const S=E==null?void 0:E.error;if(S&&S.status&&S.message){const I=function(D){const j=D.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(j)>=0?j:ne.UNKNOWN}(S.status);h(new we(I,S.message))}else h(new we(ne.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new we(ne.UNAVAILABLE,"Connection failed."));break;default:Ve()}}finally{_e(mn,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(o);_e(mn,`RPC '${e}' ${a} sending request:`,o),f.send(n,"POST",p,i,15)})}Wo(e,n,i){const o=Sp(),a=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=TE(),h=EE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Do(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const g=a.join("");_e(mn,`Creating RPC '${e}' stream ${o}: ${g}`,f);const _=u.createWebChannel(g,f);let E=!1,S=!1;const I=new Fb({Fo:D=>{S?_e(mn,`Not sending because RPC '${e}' stream ${o} is closed:`,D):(E||(_e(mn,`Opening RPC '${e}' stream ${o} transport.`),_.open(),E=!0),_e(mn,`RPC '${e}' stream ${o} sending:`,D),_.send(D))},Mo:()=>_.close()}),k=(D,j,z)=>{D.listen(j,W=>{try{z(W)}catch(ee){setTimeout(()=>{throw ee},0)}})};return k(_,Sl.EventType.OPEN,()=>{S||(_e(mn,`RPC '${e}' stream ${o} transport opened.`),I.Qo())}),k(_,Sl.EventType.CLOSE,()=>{S||(S=!0,_e(mn,`RPC '${e}' stream ${o} transport closed`),I.Ko())}),k(_,Sl.EventType.ERROR,D=>{S||(S=!0,wa(mn,`RPC '${e}' stream ${o} transport errored:`,D),I.Ko(new we(ne.UNAVAILABLE,"The operation could not be completed")))}),k(_,Sl.EventType.MESSAGE,D=>{var j;if(!S){const z=D.data[0];ot(!!z);const W=z,ee=(W==null?void 0:W.error)||((j=W[0])===null||j===void 0?void 0:j.error);if(ee){_e(mn,`RPC '${e}' stream ${o} received error:`,ee);const X=ee.status;let b=function(P){const L=Ft[P];if(L!==void 0)return nT(L)}(X),R=ee.message;b===void 0&&(b=ne.INTERNAL,R="Unknown error status: "+X+" with message "+ee.message),S=!0,I.Ko(new we(b,R)),_.close()}else _e(mn,`RPC '${e}' stream ${o} received:`,z),I.Uo(z)}}),k(h,xE.STAT_EVENT,D=>{D.stat===dp.PROXY?_e(mn,`RPC '${e}' stream ${o} detected buffering proxy`):D.stat===dp.NOPROXY&&_e(mn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{I.$o()},0),I}}function Uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(t){return new $2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n,i=1e3,o=1.5,a=6e4){this.Ti=e,this.timerId=n,this.Go=i,this.zo=o,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),o=Math.max(0,n-i);o>0&&_e("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="PersistentStream";class yT{constructor(e,n,i,o,a,u,h,f){this.Ti=e,this.n_=i,this.r_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new gT(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(Di(n.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.i_===n&&this.V_(i,o)},i=>{e(()=>{const o=new we(ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(o)})})}V_(e,n){const i=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{i(()=>this.m_(o))}),this.stream.onMessage(o=>{i(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return _e(X_,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(_e(X_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ub extends yT{constructor(e,n,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,u),this.serializer=a}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=q2(this.serializer,e),i=function(a){if(!("targetChange"in a))return Oe.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Oe.min():u.readTime?ei(u.readTime):Oe.min()}(e);return this.listener.p_(n,i)}y_(e){const n={};n.database=Ep(this.serializer),n.addTarget=function(a,u){let h;const f=u.target;if(h=gp(f)?{documents:Q2(a,f)}:{query:Y2(a,f).ht},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=sT(a,u.resumeToken);const p=_p(a,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(Oe.min())>0){h.readTime=uh(a,u.snapshotVersion.toTimestamp());const p=_p(a,u.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const i=J2(this.serializer,e);i&&(n.labels=i),this.I_(n)}w_(e){const n={};n.database=Ep(this.serializer),n.removeTarget=e,this.I_(n)}}class Bb extends yT{constructor(e,n,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,u),this.serializer=a}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return ot(!!e.streamToken),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=G2(e.writeResults,e.commitTime),i=ei(e.commitTime);return this.listener.v_(i,n)}C_(){const e={};e.database=Ep(this.serializer),this.I_(e)}S_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>K2(this.serializer,i))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{}class $b extends zb{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new we(ne.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,n,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.bo(e,wp(n,i),o,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new we(ne.UNKNOWN,a.toString())})}Co(e,n,i,o,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Co(e,wp(n,i),o,u,h,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new we(ne.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Hb{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Di(n),this.N_=!1):_e("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="RemoteStore";class Wb{constructor(e,n,i,o,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(u=>{i.enqueueAndForget(async()=>{xo(this)&&(_e(mo,"Restarting streams for network reachability change."),await async function(f){const p=Ue(f);p.W_.add(4),await uu(p),p.j_.set("Unknown"),p.W_.delete(4),await Vh(p)}(this))})}),this.j_=new Hb(i,o)}}async function Vh(t){if(xo(t))for(const e of t.G_)await e(!0)}async function uu(t){for(const e of t.G_)await e(!1)}function vT(t,e){const n=Ue(t);n.U_.has(e.targetId)||(n.U_.set(e.targetId,e),zm(n)?Bm(n):La(n).c_()&&Um(n,e))}function Om(t,e){const n=Ue(t),i=La(n);n.U_.delete(e),i.c_()&&_T(n,e),n.U_.size===0&&(i.c_()?i.P_():xo(n)&&n.j_.set("Unknown"))}function Um(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}La(t).y_(e)}function _T(t,e){t.H_.Ne(e),La(t).w_(e)}function Bm(t){t.H_=new O2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.U_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),La(t).start(),t.j_.B_()}function zm(t){return xo(t)&&!La(t).u_()&&t.U_.size>0}function xo(t){return Ue(t).W_.size===0}function wT(t){t.H_=void 0}async function qb(t){t.j_.set("Online")}async function Kb(t){t.U_.forEach((e,n)=>{Um(t,e)})}async function Gb(t,e){wT(t),zm(t)?(t.j_.q_(e),Bm(t)):t.j_.set("Unknown")}async function Qb(t,e,n){if(t.j_.set("Online"),e instanceof iT&&e.state===2&&e.cause)try{await async function(o,a){const u=a.cause;for(const h of a.targetIds)o.U_.has(h)&&(await o.remoteSyncer.rejectListen(h,u),o.U_.delete(h),o.H_.removeTarget(h))}(t,e)}catch(i){_e(mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await hh(t,i)}else if(e instanceof zc?t.H_.We(e):e instanceof rT?t.H_.Ze(e):t.H_.je(e),!n.isEqual(Oe.min()))try{const i=await mT(t.localStore);n.compareTo(i)>=0&&await function(a,u){const h=a.H_.ot(u);return h.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const g=a.U_.get(p);g&&a.U_.set(p,g.withResumeToken(f.resumeToken,u))}}),h.targetMismatches.forEach((f,p)=>{const g=a.U_.get(f);if(!g)return;a.U_.set(f,g.withResumeToken(on.EMPTY_BYTE_STRING,g.snapshotVersion)),_T(a,f);const _=new ms(g.target,f,p,g.sequenceNumber);Um(a,_)}),a.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){_e(mo,"Failed to raise snapshot:",i),await hh(t,i)}}async function hh(t,e,n){if(!ba(e))throw e;t.W_.add(1),await uu(t),t.j_.set("Offline"),n||(n=()=>mT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{_e(mo,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await Vh(t)})}function xT(t,e){return e().catch(n=>hh(t,n,e))}async function Lh(t){const e=Ue(t),n=Is(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:Cm;for(;Yb(e);)try{const o=await Db(e.localStore,i);if(o===null){e.K_.length===0&&n.P_();break}i=o.batchId,Xb(e,o)}catch(o){await hh(e,o)}ET(e)&&TT(e)}function Yb(t){return xo(t)&&t.K_.length<10}function Xb(t,e){t.K_.push(e);const n=Is(t);n.c_()&&n.b_&&n.S_(e.mutations)}function ET(t){return xo(t)&&!Is(t).u_()&&t.K_.length>0}function TT(t){Is(t).start()}async function Jb(t){Is(t).C_()}async function Zb(t){const e=Is(t);for(const n of t.K_)e.S_(n.mutations)}async function eV(t,e,n){const i=t.K_.shift(),o=Nm.from(i,e,n);await xT(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),await Lh(t)}async function tV(t,e){e&&Is(t).b_&&await async function(i,o){if(function(u){return M2(u)&&u!==ne.ABORTED}(o.code)){const a=i.K_.shift();Is(i).h_(),await xT(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o)),await Lh(i)}}(t,e),ET(t)&&TT(t)}async function J_(t,e){const n=Ue(t);n.asyncQueue.verifyOperationInProgress(),_e(mo,"RemoteStore received new credentials");const i=xo(n);n.W_.add(3),await uu(n),i&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await Vh(n)}async function nV(t,e){const n=Ue(t);e?(n.W_.delete(2),await Vh(n)):e||(n.W_.add(2),await uu(n),n.j_.set("Unknown"))}function La(t){return t.J_||(t.J_=function(n,i,o){const a=Ue(n);return a.M_(),new Ub(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(t.datastore,t.asyncQueue,{xo:qb.bind(null,t),No:Kb.bind(null,t),Lo:Gb.bind(null,t),p_:Qb.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),zm(t)?Bm(t):t.j_.set("Unknown")):(await t.J_.stop(),wT(t))})),t.J_}function Is(t){return t.Y_||(t.Y_=function(n,i,o){const a=Ue(n);return a.M_(),new Bb(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:Jb.bind(null,t),Lo:tV.bind(null,t),D_:Zb.bind(null,t),v_:eV.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Lh(t)):(await t.Y_.stop(),t.K_.length>0&&(_e(mo,`Stopping write stream with ${t.K_.length} pending writes`),t.K_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n,i,o,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,a){const u=Date.now()+i,h=new $m(e,n,u,o,a);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hm(t,e){if(Di("AsyncQueue",`${e}: ${t}`),ba(t))return new we(ne.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{static emptySet(e){return new ma(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ie.comparator(n.key,i.key):(n,i)=>Ie.comparator(n.key,i.key),this.keyedMap=Cl(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ma)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ma;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(){this.Z_=new Rt(Ie.comparator)}track(e){const n=e.doc.key,i=this.Z_.get(n);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(n):e.type===1&&i.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):Ve():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ca{constructor(e,n,i,o,a,u,h,f,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,o,a){const u=[];return n.forEach(h=>{u.push({type:0,doc:h})}),new Ca(e,n,ma.emptySet(n),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class iV{constructor(){this.queries=ew(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,i){const o=Ue(n),a=o.queries;o.queries=ew(),a.forEach((u,h)=>{for(const f of h.ta)f.onError(i)})})(this,new we(ne.ABORTED,"Firestore shutting down"))}}function ew(){return new wo(t=>$E(t),Ih)}async function ST(t,e){const n=Ue(t);let i=3;const o=e.query;let a=n.queries.get(o);a?!a.na()&&e.ra()&&(i=2):(a=new rV,i=e.ra()?0:1);try{switch(i){case 0:a.ea=await n.onListen(o,!0);break;case 1:a.ea=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(u){const h=Hm(u,`Initialization of query '${sa(e.query)}' failed`);return void e.onError(h)}n.queries.set(o,a),a.ta.push(e),e.sa(n.onlineState),a.ea&&e.oa(a.ea)&&Wm(n)}async function CT(t,e){const n=Ue(t),i=e.query;let o=3;const a=n.queries.get(i);if(a){const u=a.ta.indexOf(e);u>=0&&(a.ta.splice(u,1),a.ta.length===0?o=e.ra()?0:1:!a.na()&&e.ra()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function sV(t,e){const n=Ue(t);let i=!1;for(const o of e){const a=o.query,u=n.queries.get(a);if(u){for(const h of u.ta)h.oa(o)&&(i=!0);u.ea=o}}i&&Wm(n)}function oV(t,e,n){const i=Ue(t),o=i.queries.get(e);if(o)for(const a of o.ta)a.onError(n);i.queries.delete(e)}function Wm(t){t.ia.forEach(e=>{e.next()})}var Cp,tw;(tw=Cp||(Cp={}))._a="default",tw.Cache="cache";class AT{constructor(e,n,i){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ca(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const i=n!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Cp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.key=e}}class IT{constructor(e){this.key=e}}class aV{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=He(),this.mutatedKeys=He(),this.ya=HE(e),this.wa=new ma(this.ya)}get ba(){return this.fa}Sa(e,n){const i=n?n.Da:new Z_,o=n?n.wa:this.wa;let a=n?n.mutatedKeys:this.mutatedKeys,u=o,h=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((g,_)=>{const E=o.get(g),S=Rh(this.query,_)?_:null,I=!!E&&this.mutatedKeys.has(E.key),k=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let D=!1;E&&S?E.data.isEqual(S.data)?I!==k&&(i.track({type:3,doc:S}),D=!0):this.va(E,S)||(i.track({type:2,doc:S}),D=!0,(f&&this.ya(S,f)>0||p&&this.ya(S,p)<0)&&(h=!0)):!E&&S?(i.track({type:0,doc:S}),D=!0):E&&!S&&(i.track({type:1,doc:E}),D=!0,(f||p)&&(h=!0)),D&&(S?(u=u.add(S),a=k?a.add(g):a.delete(g)):(u=u.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const g=this.query.limitType==="F"?u.last():u.first();u=u.delete(g.key),a=a.delete(g.key),i.track({type:1,doc:g})}return{wa:u,Da:i,ls:h,mutatedKeys:a}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const a=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((g,_)=>function(S,I){const k=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve()}};return k(S)-k(I)}(g.type,_.type)||this.ya(g.doc,_.doc)),this.Ca(i),o=o!=null&&o;const h=n&&!o?this.Fa():[],f=this.pa.size===0&&this.current&&!o?1:0,p=f!==this.ga;return this.ga=f,u.length!==0||p?{snapshot:new Ca(this.query,e.wa,a,u,e.mutatedKeys,f===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Z_,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=He(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const n=[];return e.forEach(i=>{this.pa.has(i)||n.push(new IT(i))}),this.pa.forEach(i=>{e.has(i)||n.push(new PT(i))}),n}Oa(e){this.fa=e.gs,this.pa=He();const n=this.Sa(e.documents);return this.applyChanges(n,!0)}Na(){return Ca.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const qm="SyncEngine";class lV{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class uV{constructor(e){this.key=e,this.Ba=!1}}class cV{constructor(e,n,i,o,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new wo(h=>$E(h),Ih),this.qa=new Map,this.Qa=new Set,this.$a=new Rt(Ie.comparator),this.Ka=new Map,this.Ua=new Lm,this.Wa={},this.Ga=new Map,this.za=Sa.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function hV(t,e,n=!0){const i=VT(t);let o;const a=i.ka.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Na()):o=await RT(i,e,n,!0),o}async function dV(t,e){const n=VT(t);await RT(n,e,!0,!1)}async function RT(t,e,n,i){const o=await Nb(t.localStore,Zr(e)),a=o.targetId,u=t.sharedClientState.addLocalQueryTarget(a,n);let h;return i&&(h=await fV(t,e,a,u==="current",o.resumeToken)),t.isPrimaryClient&&n&&vT(t.remoteStore,o),h}async function fV(t,e,n,i,o){t.Ha=(_,E,S)=>async function(k,D,j,z){let W=D.view.Sa(j);W.ls&&(W=await K_(k.localStore,D.query,!1).then(({documents:R})=>D.view.Sa(R,W)));const ee=z&&z.targetChanges.get(D.targetId),X=z&&z.targetMismatches.get(D.targetId)!=null,b=D.view.applyChanges(W,k.isPrimaryClient,ee,X);return rw(k,D.targetId,b.Ma),b.snapshot}(t,_,E,S);const a=await K_(t.localStore,e,!0),u=new aV(e,a.gs),h=u.Sa(a.documents),f=lu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",o),p=u.applyChanges(h,t.isPrimaryClient,f);rw(t,n,p.Ma);const g=new lV(e,n,u);return t.ka.set(e,g),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),p.snapshot}async function pV(t,e,n){const i=Ue(t),o=i.ka.get(e),a=i.qa.get(o.targetId);if(a.length>1)return i.qa.set(o.targetId,a.filter(u=>!Ih(u,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Tp(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),n&&Om(i.remoteStore,o.targetId),Ap(i,o.targetId)}).catch(Na)):(Ap(i,o.targetId),await Tp(i.localStore,o.targetId,!0))}async function mV(t,e){const n=Ue(t),i=n.ka.get(e),o=n.qa.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Om(n.remoteStore,i.targetId))}async function gV(t,e,n){const i=TV(t);try{const o=await function(u,h){const f=Ue(u),p=$t.now(),g=h.reduce((S,I)=>S.add(I.key),He());let _,E;return f.persistence.runTransaction("Locally write mutations","readwrite",S=>{let I=Ni(),k=He();return f.ds.getEntries(S,g).next(D=>{I=D,I.forEach((j,z)=>{z.isValidDocument()||(k=k.add(j))})}).next(()=>f.localDocuments.getOverlayedDocuments(S,I)).next(D=>{_=D;const j=[];for(const z of h){const W=D2(z,_.get(z.key).overlayedDocument);W!=null&&j.push(new bs(z.key,W,LE(W.value.mapValue),Ar.exists(!0)))}return f.mutationQueue.addMutationBatch(S,p,j,h)}).next(D=>{E=D;const j=D.applyToLocalDocumentSet(_,k);return f.documentOverlayCache.saveOverlays(S,D.batchId,j)})}).then(()=>({batchId:E.batchId,changes:qE(_)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(u,h,f){let p=u.Wa[u.currentUser.toKey()];p||(p=new Rt(Ke)),p=p.insert(h,f),u.Wa[u.currentUser.toKey()]=p}(i,o.batchId,n),await cu(i,o.changes),await Lh(i.remoteStore)}catch(o){const a=Hm(o,"Failed to persist write");n.reject(a)}}async function kT(t,e){const n=Ue(t);try{const i=await Rb(n.localStore,e);e.targetChanges.forEach((o,a)=>{const u=n.Ka.get(a);u&&(ot(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.Ba=!0:o.modifiedDocuments.size>0?ot(u.Ba):o.removedDocuments.size>0&&(ot(u.Ba),u.Ba=!1))}),await cu(n,i,e)}catch(i){await Na(i)}}function nw(t,e,n){const i=Ue(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.ka.forEach((a,u)=>{const h=u.view.sa(e);h.snapshot&&o.push(h.snapshot)}),function(u,h){const f=Ue(u);f.onlineState=h;let p=!1;f.queries.forEach((g,_)=>{for(const E of _.ta)E.sa(h)&&(p=!0)}),p&&Wm(f)}(i.eventManager,e),o.length&&i.La.p_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function yV(t,e,n){const i=Ue(t);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Ka.get(e),a=o&&o.key;if(a){let u=new Rt(Ie.comparator);u=u.insert(a,vn.newNoDocument(a,Oe.min()));const h=He().add(a),f=new Nh(Oe.min(),new Map,new Rt(Ke),u,h);await kT(i,f),i.$a=i.$a.remove(a),i.Ka.delete(e),Km(i)}else await Tp(i.localStore,e,!1).then(()=>Ap(i,e,n)).catch(Na)}async function vV(t,e){const n=Ue(t),i=e.batch.batchId;try{const o=await Ib(n.localStore,e);NT(n,i,null),DT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await cu(n,o)}catch(o){await Na(o)}}async function _V(t,e,n){const i=Ue(t);try{const o=await function(u,h){const f=Ue(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let g;return f.mutationQueue.lookupMutationBatch(p,h).next(_=>(ot(_!==null),g=_.keys(),f.mutationQueue.removeMutationBatch(p,_))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,g,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g)).next(()=>f.localDocuments.getDocuments(p,g))})}(i.localStore,e);NT(i,e,n),DT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await cu(i,o)}catch(o){await Na(o)}}function DT(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function NT(t,e,n){const i=Ue(t);let o=i.Wa[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(n?a.reject(n):a.resolve(),o=o.remove(e)),i.Wa[i.currentUser.toKey()]=o}}function Ap(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.qa.get(e))t.ka.delete(i),n&&t.La.Ja(i,n);t.qa.delete(e),t.isPrimaryClient&&t.Ua.Sr(e).forEach(i=>{t.Ua.containsKey(i)||bT(t,i)})}function bT(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(Om(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ka.delete(n),Km(t))}function rw(t,e,n){for(const i of n)i instanceof PT?(t.Ua.addReference(i.key,e),wV(t,i)):i instanceof IT?(_e(qm,"Document no longer in limbo: "+i.key),t.Ua.removeReference(i.key,e),t.Ua.containsKey(i.key)||bT(t,i.key)):Ve()}function wV(t,e){const n=e.key,i=n.path.canonicalString();t.$a.get(n)||t.Qa.has(i)||(_e(qm,"New document in limbo: "+n),t.Qa.add(i),Km(t))}function Km(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new Ie(wt.fromString(e)),i=t.za.next();t.Ka.set(i,new uV(n)),t.$a=t.$a.insert(n,i),vT(t.remoteStore,new ms(Zr(km(n.path)),i,"TargetPurposeLimboResolution",Ch.ae))}}async function cu(t,e,n){const i=Ue(t),o=[],a=[],u=[];i.ka.isEmpty()||(i.ka.forEach((h,f)=>{u.push(i.Ha(f,e,n).then(p=>{var g;if((p||n)&&i.isPrimaryClient){const _=p?!p.fromCache:(g=n==null?void 0:n.targetChanges.get(f.targetId))===null||g===void 0?void 0:g.current;i.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(p){o.push(p);const _=jm.Yi(f.targetId,p);a.push(_)}}))}),await Promise.all(u),i.La.p_(o),await async function(f,p){const g=Ue(f);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>re.forEach(p,E=>re.forEach(E.Hi,S=>g.persistence.referenceDelegate.addReference(_,E.targetId,S)).next(()=>re.forEach(E.Ji,S=>g.persistence.referenceDelegate.removeReference(_,E.targetId,S)))))}catch(_){if(!ba(_))throw _;_e(Fm,"Failed to update sequence numbers: "+_)}for(const _ of p){const E=_.targetId;if(!_.fromCache){const S=g.Ts.get(E),I=S.snapshotVersion,k=S.withLastLimboFreeSnapshotVersion(I);g.Ts=g.Ts.insert(E,k)}}}(i.localStore,a))}async function xV(t,e){const n=Ue(t);if(!n.currentUser.isEqual(e)){_e(qm,"User change. New user:",e.toKey());const i=await pT(n.localStore,e);n.currentUser=e,function(a,u){a.Ga.forEach(h=>{h.forEach(f=>{f.reject(new we(ne.CANCELLED,u))})}),a.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await cu(n,i.Rs)}}function EV(t,e){const n=Ue(t),i=n.Ka.get(e);if(i&&i.Ba)return He().add(i.key);{let o=He();const a=n.qa.get(e);if(!a)return o;for(const u of a){const h=n.ka.get(u);o=o.unionWith(h.view.ba)}return o}}function VT(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yV.bind(null,e),e.La.p_=sV.bind(null,e.eventManager),e.La.Ja=oV.bind(null,e.eventManager),e}function TV(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_V.bind(null,e),e}class dh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bh(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return Pb(this.persistence,new Sb,e.initialUser,this.serializer)}Xa(e){return new fT(Mm.ri,this.serializer)}Za(e){return new Vb}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dh.provider={build:()=>new dh};class SV extends dh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){ot(this.persistence.referenceDelegate instanceof ch);const i=this.persistence.referenceDelegate.garbageCollector;return new ub(i,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Mn.withCacheSize(this.cacheSizeBytes):Mn.DEFAULT;return new fT(i=>ch.ri(i,n),this.serializer)}}class Pp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=xV.bind(null,this.syncEngine),await nV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new iV}()}createDatastore(e){const n=bh(e.databaseInfo.databaseId),i=function(a){return new Ob(a)}(e.databaseInfo);return function(a,u,h,f){return new $b(a,u,h,f)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,o,a,u,h){return new Wb(i,o,a,u,h)}(this.localStore,this.datastore,e.asyncQueue,n=>nw(this.syncEngine,n,0),function(){return Y_.D()?new Y_:new Lb}())}createSyncEngine(e,n){return function(o,a,u,h,f,p,g){const _=new cV(o,a,u,h,f,p);return g&&(_.ja=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const a=Ue(o);_e(mo,"RemoteStore shutting down."),a.W_.add(5),await uu(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Pp.provider={build:()=>new Pp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="FirestoreClient";class CV{constructor(e,n,i,o,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=yn.UNAUTHENTICATED,this.clientId=CE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async u=>{_e(Rs,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(_e(Rs,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Hm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Bf(t,e){t.asyncQueue.verifyOperationInProgress(),_e(Rs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async o=>{i.isEqual(o)||(await pT(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function iw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await AV(t);_e(Rs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>J_(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>J_(e.remoteStore,o)),t._onlineComponents=e}async function AV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){_e(Rs,"Using user provided OfflineComponentProvider");try{await Bf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;wa("Error using user provided cache. Falling back to memory cache: "+n),await Bf(t,new dh)}}else _e(Rs,"Using default OfflineComponentProvider"),await Bf(t,new SV(void 0));return t._offlineComponents}async function MT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(_e(Rs,"Using user provided OnlineComponentProvider"),await iw(t,t._uninitializedComponentsProvider._online)):(_e(Rs,"Using default OnlineComponentProvider"),await iw(t,new Pp))),t._onlineComponents}function PV(t){return MT(t).then(e=>e.syncEngine)}async function jT(t){const e=await MT(t),n=e.eventManager;return n.onListen=hV.bind(null,e.syncEngine),n.onUnlisten=pV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mV.bind(null,e.syncEngine),n}function IV(t,e,n={}){const i=new Pi;return t.asyncQueue.enqueueAndForget(async()=>function(a,u,h,f,p){const g=new LT({next:E=>{g.su(),u.enqueueAndForget(()=>CT(a,_));const S=E.docs.has(h);!S&&E.fromCache?p.reject(new we(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&E.fromCache&&f&&f.source==="server"?p.reject(new we(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),_=new AT(km(h.path),g,{includeMetadataChanges:!0,Ta:!0});return ST(a,_)}(await jT(t),t.asyncQueue,e,n,i)),i.promise}function RV(t,e,n={}){const i=new Pi;return t.asyncQueue.enqueueAndForget(async()=>function(a,u,h,f,p){const g=new LT({next:E=>{g.su(),u.enqueueAndForget(()=>CT(a,_)),E.fromCache&&f.source==="server"?p.reject(new we(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),_=new AT(h,g,{includeMetadataChanges:!0,Ta:!0});return ST(a,_)}(await jT(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t,e,n){if(!n)throw new we(ne.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kV(t,e,n,i){if(e===!0&&i===!0)throw new we(ne.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ow(t){if(!Ie.isDocumentKey(t))throw new we(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function aw(t){if(Ie.isDocumentKey(t))throw new we(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Mh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ve()}function ni(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new we(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mh(t);throw new we(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="firestore.googleapis.com",lw=!0;class uw{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new we(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UT,this.ssl=lw}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:lw;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ab)throw new we(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FT((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new we(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new we(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new we(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jh{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new jN;switch(i.type){case"firstParty":return new BN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new we(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=sw.get(n);i&&(_e("ComponentProvider","Removing Datastore"),sw.delete(n),i.terminate())}(this),Promise.resolve()}}function DV(t,e,n,i={}){var o;const a=(t=ni(t,jh))._getSettings(),u=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),h=`${e}:${n}`;a.host!==UT&&a.host!==h&&wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},a),{host:h,ssl:!1,emulatorOptions:i});if(!th(f,u)&&(t._setSettings(f),i.mockUserToken)){let p,g;if(typeof i.mockUserToken=="string")p=i.mockUserToken,g=yn.MOCK_USER;else{p=pD(i.mockUserToken,(o=t._app)===null||o===void 0?void 0:o.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new we(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new yn(_)}t._authCredentials=new FN(new SE(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Eo(this.firestore,e,this._query)}}class Pn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pn(this.firestore,e,this._key)}}class _s extends Eo{constructor(e,n,i){super(e,n,km(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pn(this.firestore,null,new Ie(e))}withConverter(e){return new _s(this.firestore,e,this._path)}}function Gm(t,e,...n){if(t=Ri(t),OT("collection","path",e),t instanceof jh){const i=wt.fromString(e,...n);return aw(i),new _s(t,null,i)}{if(!(t instanceof Pn||t instanceof _s))throw new we(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(wt.fromString(e,...n));return aw(i),new _s(t.firestore,null,i)}}function ws(t,e,...n){if(t=Ri(t),arguments.length===1&&(e=CE.newId()),OT("doc","path",e),t instanceof jh){const i=wt.fromString(e,...n);return ow(i),new Pn(t,null,new Ie(i))}{if(!(t instanceof Pn||t instanceof _s))throw new we(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(wt.fromString(e,...n));return ow(i),new Pn(t.firestore,t instanceof _s?t.converter:null,new Ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="AsyncQueue";class hw{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new gT(this,"async_queue_retry"),this.bu=()=>{const i=Uf();i&&_e(cw,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.Su=e;const n=Uf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Uf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Pi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!ba(e))throw e;_e(cw,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.Su.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const o=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(i);throw Di("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.pu=!1,i))));return this.Su=n,n}enqueueAfterDelay(e,n,i){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const o=$m.createAndSchedule(this,e,n,i,a=>this.Fu(a));return this.fu.push(o),o}Du(){this.gu&&Ve()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class Ma extends jh{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new hw,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hw(e),this._firestoreClient=void 0,await e}}}function NV(t,e){const n=typeof t=="object"?t:SN(),i=typeof t=="string"?t:sh,o=_N(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=dD("firestore");a&&DV(o,...a)}return o}function Qm(t){if(t._terminated)throw new we(ne.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||bV(t),t._firestoreClient}function bV(t){var e,n,i;const o=t._freezeSettings(),a=function(h,f,p,g){return new t2(h,f,p,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,FT(g.experimentalLongPollingOptions),g.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,o);t._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),t._firestoreClient=new CV(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Aa(on.fromBase64String(e))}catch(n){throw new we(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Aa(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new we(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new we(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new we(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV=/^__.*__$/;class LV{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new bs(e,this.data,this.fieldMask,n,this.fieldTransforms):new au(e,this.data,n,this.fieldTransforms)}}class BT{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new bs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve()}}class Jm{constructor(e,n,i,o,a,u){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Bu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Jm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:i,Qu:!1});return o.$u(e),o}Ku(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:i,Qu:!1});return o.Bu(),o}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return fh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(zT(this.Lu)&&VV.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class MV{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||bh(e)}ju(e,n,i,o=!1){return new Jm({Lu:e,methodName:n,zu:i,path:rn.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uh(t){const e=t._freezeSettings(),n=bh(t._databaseId);return new MV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $T(t,e,n,i,o,a={}){const u=t.ju(a.merge||a.mergeFields?2:0,e,n,o);eg("Data must be an object, but it was:",u,i);const h=HT(i,u);let f,p;if(a.merge)f=new qn(u.fieldMask),p=u.fieldTransforms;else if(a.mergeFields){const g=[];for(const _ of a.mergeFields){const E=Ip(e,_,n);if(!u.contains(E))throw new we(ne.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);qT(g,E)||g.push(E)}f=new qn(g),p=u.fieldTransforms.filter(_=>f.covers(_.field))}else f=null,p=u.fieldTransforms;return new LV(new jn(h),f,p)}class Bh extends Oh{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bh}}class Zm extends Oh{_toFieldTransform(e){return new P2(e.path,new Xl)}isEqual(e){return e instanceof Zm}}function jV(t,e,n,i){const o=t.ju(1,e,n);eg("Data must be an object, but it was:",o,i);const a=[],u=jn.empty();Ns(i,(f,p)=>{const g=tg(e,f,n);p=Ri(p);const _=o.Ku(g);if(p instanceof Bh)a.push(g);else{const E=hu(p,_);E!=null&&(a.push(g),u.set(g,E))}});const h=new qn(a);return new BT(u,h,o.fieldTransforms)}function FV(t,e,n,i,o,a){const u=t.ju(1,e,n),h=[Ip(e,i,n)],f=[o];if(a.length%2!=0)throw new we(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)h.push(Ip(e,a[E])),f.push(a[E+1]);const p=[],g=jn.empty();for(let E=h.length-1;E>=0;--E)if(!qT(p,h[E])){const S=h[E];let I=f[E];I=Ri(I);const k=u.Ku(S);if(I instanceof Bh)p.push(S);else{const D=hu(I,k);D!=null&&(p.push(S),g.set(S,D))}}const _=new qn(p);return new BT(g,_,u.fieldTransforms)}function OV(t,e,n,i=!1){return hu(n,t.ju(i?4:3,e))}function hu(t,e){if(WT(t=Ri(t)))return eg("Unsupported field value:",e,t),HT(t,e);if(t instanceof Oh)return function(i,o){if(!zT(o.Lu))throw o.Wu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,o){const a=[];let u=0;for(const h of i){let f=hu(h,o.Uu(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}}(t,e)}return function(i,o){if((i=Ri(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return S2(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=$t.fromDate(i);return{timestampValue:uh(o.serializer,a)}}if(i instanceof $t){const a=new $t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:uh(o.serializer,a)}}if(i instanceof Ym)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Aa)return{bytesValue:sT(o.serializer,i._byteString)};if(i instanceof Pn){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Vm(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Xm)return function(u,h){return{mapValue:{fields:{[bE]:{stringValue:VE},[oh]:{arrayValue:{values:u.toArray().map(p=>{if(typeof p!="number")throw h.Wu("VectorValues must only contain numeric values.");return Dm(h.serializer,p)})}}}}}}(i,o);throw o.Wu(`Unsupported field value: ${Mh(i)}`)}(t,e)}function HT(t,e){const n={};return PE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(t,(i,o)=>{const a=hu(o,e.qu(i));a!=null&&(n[i]=a)}),{mapValue:{fields:n}}}function WT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $t||t instanceof Ym||t instanceof Aa||t instanceof Pn||t instanceof Oh||t instanceof Xm)}function eg(t,e,n){if(!WT(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const i=Mh(n);throw i==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+i)}}function Ip(t,e,n){if((e=Ri(e))instanceof Fh)return e._internalPath;if(typeof e=="string")return tg(t,e);throw fh("Field path arguments must be of type string or ",t,!1,void 0,n)}const UV=new RegExp("[~\\*/\\[\\]]");function tg(t,e,n){if(e.search(UV)>=0)throw fh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fh(...e.split("."))._internalPath}catch{throw fh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fh(t,e,n,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${i}`),u&&(f+=` in document ${o}`),f+=")"),new we(ne.INVALID_ARGUMENT,h+t+f)}function qT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n,i,o,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ng("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BV extends KT{data(){return super.data()}}function ng(t,e){return typeof e=="string"?tg(t,e):e instanceof Fh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new we(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rg{}class GT extends rg{}function $V(t,e,...n){let i=[];e instanceof rg&&i.push(e),i=i.concat(n),function(a){const u=a.filter(f=>f instanceof sg).length,h=a.filter(f=>f instanceof ig).length;if(u>1||u>0&&h>0)throw new we(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)t=o._apply(t);return t}class ig extends GT{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new ig(e,n,i)}_apply(e){const n=this._parse(e);return QT(e._query,n),new Eo(e.firestore,e.converter,yp(e._query,n))}_parse(e){const n=Uh(e.firestore);return function(a,u,h,f,p,g,_){let E;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new we(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){fw(_,g);const I=[];for(const k of _)I.push(dw(f,a,k));E={arrayValue:{values:I}}}else E=dw(f,a,_)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||fw(_,g),E=OV(h,u,_,g==="in"||g==="not-in");return Ot.create(p,g,E)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class sg extends rg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new sg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Ir.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,a){let u=o;const h=a.getFlattenedFilters();for(const f of h)QT(u,f),u=yp(u,f)}(e._query,n),new Eo(e.firestore,e.converter,yp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class og extends GT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new og(e,n)}_apply(e){const n=function(o,a,u){if(o.startAt!==null)throw new we(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new we(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yl(a,u)}(e._query,this._field,this._direction);return new Eo(e.firestore,e.converter,function(o,a){const u=o.explicitOrderBy.concat([a]);return new Va(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function HV(t,e="asc"){const n=e,i=ng("orderBy",t);return og._create(i,n)}function dw(t,e,n){if(typeof(n=Ri(n))=="string"){if(n==="")throw new we(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zE(e)&&n.indexOf("/")!==-1)throw new we(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(wt.fromString(n));if(!Ie.isDocumentKey(i))throw new we(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return I_(t,new Ie(i))}if(n instanceof Pn)return I_(t,n._key);throw new we(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mh(n)}.`)}function fw(t,e){if(!Array.isArray(t)||t.length===0)throw new we(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QT(t,e){const n=function(o,a){for(const u of o)for(const h of u.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new we(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class WV{convertValue(e,n="none"){switch(Ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ns(e,(o,a)=>{i[o]=this.convertValue(a,n)}),i}convertVectorValue(e){var n,i,o;const a=(o=(i=(n=e.fields)===null||n===void 0?void 0:n[oh].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(u=>Vt(u.doubleValue));return new Xm(a)}convertGeoPoint(e){return new Ym(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Ph(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Kl(e));default:return null}}convertTimestamp(e){const n=Cs(e);return new $t(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=wt.fromString(e);ot(hT(i));const o=new Gl(i.get(1),i.get(3)),a=new Ie(i.popFirst(5));return o.isEqual(n)||Di(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class XT extends KT{constructor(e,n,i,o,a,u){super(e,n,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $c(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ng("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class $c extends XT{data(e={}){return super.data(e)}}class qV{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Pl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new $c(this._firestore,this._userDataWriter,i.key,i,new Pl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new we(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map(h=>{const f=new $c(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Pl(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const f=new $c(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Pl(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,g=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),g=u.indexOf(h.doc.key)),{type:KV(h.type),doc:f,oldIndex:p,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function KV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(t){t=ni(t,Pn);const e=ni(t.firestore,Ma);return IV(Qm(e),t._key).then(n=>YV(e,t,n))}class JT extends WV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Aa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pn(this.firestore,null,n)}}function ZT(t){t=ni(t,Eo);const e=ni(t.firestore,Ma),n=Qm(e),i=new JT(e);return zV(t._query),RV(n,t._query).then(o=>new qV(e,i,t,o))}function GV(t,e,n){t=ni(t,Pn);const i=ni(t.firestore,Ma),o=YT(t.converter,e);return ag(i,[$T(Uh(i),"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,Ar.none())])}function eS(t,e,n,...i){t=ni(t,Pn);const o=ni(t.firestore,Ma),a=Uh(o);let u;return u=typeof(e=Ri(e))=="string"||e instanceof Fh?FV(a,"updateDoc",t._key,e,n,i):jV(a,"updateDoc",t._key,e),ag(o,[u.toMutation(t._key,Ar.exists(!0))])}function QV(t,e){const n=ni(t.firestore,Ma),i=ws(t),o=YT(t.converter,e);return ag(n,[$T(Uh(t.firestore),"addDoc",i._key,o,t.converter!==null,{}).toMutation(i._key,Ar.exists(!1))]).then(()=>i)}function ag(t,e){return function(i,o){const a=new Pi;return i.asyncQueue.enqueueAndForget(async()=>gV(await PV(i),o,a)),a.promise}(Qm(t),e)}function YV(t,e,n){const i=n.docs.get(e._key),o=new JT(t);return new XT(t,o,e._key,i,new Pl(n.hasPendingWrites,n.fromCache),e.converter)}function XV(){return new Zm("serverTimestamp")}(function(e,n=!0){(function(o){Da=o})(TN),rh(new Hl("firestore",(i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),h=new Ma(new ON(i.getProvider("auth-internal")),new zN(u,i.getProvider("app-check-internal")),function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new we(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(p.options.projectId,g)}(u,o),u);return a=Object.assign({useFetchStreams:n},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),pa(y_,v_,e),pa(y_,v_,"esm2017")})();const JV={apiKey:"AIzaSyB50dBZcPhp1WqNxzshrJlIdB6UHw3DZao",authDomain:"ecommercecw-b7a24.firebaseapp.com",projectId:"ecommercecw-b7a24",storageBucket:"ecommercecw-b7a24.firebasestorage.app",messagingSenderId:"324553281505",appId:"1:324553281505:web:62b7d04bd16aa7ab32cca0",measurementId:"G-XTPPR74DKP"},ZV=mE(JV),Qr=NV(ZV),Rp=async()=>(await ZT(Gm(Qr,"products"))).docs.map(e=>({...e.data(),productId:e.id}));var tS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},pw=ho.createContext&&ho.createContext(tS),eL=["attr","size","title"];function tL(t,e){if(t==null)return{};var n=nL(t,e),i,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)i=a[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function nL(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function mh(){return mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},mh.apply(this,arguments)}function mw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function gh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mw(Object(n),!0).forEach(function(i){rL(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mw(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function rL(t,e,n){return e=iL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iL(t){var e=sL(t,"string");return typeof e=="symbol"?e:e+""}function sL(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nS(t){return t&&t.map((e,n)=>ho.createElement(e.tag,gh({key:n},e.attr),nS(e.child)))}function oL(t){return e=>ho.createElement(aL,mh({attr:gh({},t.attr)},e),nS(t.child))}function aL(t){var e=n=>{var{attr:i,size:o,title:a}=t,u=tL(t,eL),h=o||n.size||"1em",f;return n.className&&(f=n.className),t.className&&(f=(f?f+" ":"")+t.className),ho.createElement("svg",mh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,u,{className:f,style:gh(gh({color:t.color||n.color},n.style),t.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),a&&ho.createElement("title",null,a),t.children)};return pw!==void 0?ho.createElement(pw.Consumer,null,n=>e(n)):e(tS)}function lL(t){return oL({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 0 0-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 1 0 0 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 0 0-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 0 0-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 0 0-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 0 0-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 0 1-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 0 1-31.6 31.6z"},child:[]}]})(t)}const uL="/EcommerceCw/assets/bench-CkJfrU0v.avif",cL="/EcommerceCw/assets/whitedesk-oZF03kvb.avif",ro=[{image:cL,title:"Explore Styles",subtitle:"Curated For Your Home"},{image:uL,title:"Browse Collection",subtitle:"Find Your Perfect Piece"}];function hL(){const[t,e]=M.useState(null),n=M.useRef(null),i=()=>{var o;(o=n.current)==null||o.scrollIntoView({behavior:"smooth"})};return w.jsxs("div",{className:"min-h-screen flex flex-col",children:[w.jsxs("div",{className:"z-[99] pt-[32px]",children:[w.jsx(yo,{}),w.jsx("div",{className:"max-w-[1440px] m-auto",children:w.jsxs("section",{children:[w.jsx(dL,{onShopNowClick:i}),w.jsx("div",{ref:n,children:w.jsx(fL,{onCategorySelect:e,selectedCategory:t})}),w.jsx("div",{children:w.jsx(mL,{selectedCategory:t,scrollToProducts:i})})]})})]}),w.jsx("div",{className:"mt-auto",children:w.jsx("div",{className:"max-w-[1440px] m-auto mt-[64px]",children:w.jsx(Ra,{})})})]})}const dL=({onShopNowClick:t})=>{var i;const[e,n]=M.useState(0);return M.useEffect(()=>{const o=setInterval(()=>{n(a=>(a+1)%ro.length)},5e3);return()=>clearInterval(o)},[]),w.jsxs("div",{className:"relative h-[30vh] w-full overflow-hidden border-r border-l border-b",children:[w.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${((i=ro[(e+1)%ro.length])==null?void 0:i.image)||ro[0].image})`}}),w.jsx(Mw,{children:w.jsxs(Ct.div,{className:"absolute inset-0 overflow-hidden",initial:{y:"0%"},animate:{y:"100%"},exit:{y:"100%"},transition:{ease:"easeInOut",duration:.5,delay:4},children:[w.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${ro[e].image})`}}),w.jsxs("div",{className:"absolute left-[32px] bottom-[32px] text-white p-4 rounded-lg text-left gap-[16px] flex flex-col",children:[w.jsx(Ct.h3,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"text-2xl",children:ro[e].subtitle}),w.jsx(Ct.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"text-7xl pb-[16px] drop-shadow-lg",children:ro[e].title}),w.jsx(Ct.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},onClick:t,className:"px-6 py-3 text-white border border-white text-lg w-fit hover:bg-black/20 hover:backdrop-blur-sm transition-all duration-300",children:"Shop Now"})]})]},e)})]})},fL=({onCategorySelect:t,selectedCategory:e})=>{const n=["Sofa","Bench","Chair","Table"];return w.jsxs("div",{className:"flex justify-between items-center mt-[128px] px-[32px]",children:[w.jsx("h2",{className:"text-2xl font-medium",children:"Crafted with excellent material"}),w.jsx("div",{className:"flex gap-4",children:n.map(i=>w.jsx("button",{onClick:()=>t(e===i?null:i),className:`px-4 py-2 border border-black ${e===i?"bg-black text-[#f6f1eb]":"bg"}`,children:i},i))})]})},pL=({onPriceChange:t,onColourChange:e,selectedPrice:n,selectedColour:i})=>{const o=["All Prices","Under 100","100 - 300","300 - 600","Above 600"],a=["All Colours","Black","White","Brown","Beige","Blue"];return w.jsxs("div",{className:"w-[250px] pr-8",children:[w.jsxs("div",{className:"mb-8",children:[w.jsx("h3",{className:"text-lg font-medium mb-4",children:"Price Range"}),o.map(u=>w.jsx("button",{onClick:()=>t(u),className:`block mb-2 ${n===u?"font-bold":""}`,children:u},u))]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-medium mb-4",children:"Colour"}),a.map(u=>w.jsx("button",{onClick:()=>e(u),className:`block mb-2 ${i===u?"font-bold":""}`,children:u},u))]})]})},mL=({selectedCategory:t,scrollToProducts:e})=>{const[n,i]=M.useState([]),[o,a]=M.useState("All Prices"),[u,h]=M.useState("All Colours"),[f,p]=M.useState(1),g=9,_=vh();M.useEffect(()=>{(async()=>{try{const ee=await Rp();console.log("Fetched products:",ee),i(ee)}catch(ee){console.error("Error fetching products:",ee)}})()},[]);const S=(W=>W.filter(ee=>{var C;console.log("Product filters:",ee.filters);const X=!t||((C=ee.categories)==null?void 0:C.includes(t)),b=u==="All Colours"||Array.isArray(ee.colour)&&ee.colour.some(P=>P.toLowerCase()===u.toLowerCase());let R=!0;if(o!=="All Prices"){const P=ee.cost;switch(o){case"Under 100":R=P<100;break;case"100 - 300":R=P>=100&&P<=300;break;case"300 - 600":R=P>300&&P<=600;break;case"Above 600":R=P>600;break}}return X&&b&&R}))(n),I=f*g,k=I-g,D=S.slice(k,I),j=Math.ceil(S.length/g),z=W=>{p(W),e()};return w.jsxs("div",{className:"flex gap-8 mt-[64px] px-[32px] relative",children:[w.jsxs("div",{className:"relative",children:[w.jsx(pL,{onPriceChange:a,onColourChange:h,selectedPrice:o,selectedColour:u}),w.jsx("div",{className:"absolute top-0 right-0 w-[1px] h-full bg-[#000000]"})]}),w.jsxs("div",{className:"flex-1",children:[w.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 pb-8",children:D.length>0?D.map(W=>w.jsx(gL,{product:W,onClick:()=>_("/item-preview",{state:{product:W}})},W.productId)):w.jsx("p",{className:"col-span-full text-center text-lg",children:"No products found with selected filters"})}),j>1&&w.jsx("div",{className:"flex justify-center gap-2 mt-[32px]",children:Array.from({length:j},(W,ee)=>ee+1).map(W=>w.jsx("button",{onClick:()=>z(W),className:`px-4 py-2 border ${f===W?"bg-black text-[#f6f1eb]":"border-black"}`,children:W},W))})]})]})},gL=({product:t,onClick:e})=>{const[n,i]=M.useState(!1);M.useEffect(()=>{const u=JSON.parse(localStorage.getItem("cart")||"[]").some(h=>h.productId===t.productId);i(u)},[t.productId]);const o=a=>{a.stopPropagation();const u=JSON.parse(localStorage.getItem("cart")||"[]"),h=u.findIndex(f=>f.productId===t.productId);h>=0?(u.splice(h,1),i(!1)):(u.push({...t,quantity:1}),i(!0)),localStorage.setItem("cart",JSON.stringify(u))};return w.jsxs("div",{className:"relative group max-w-[220px] w-full mx-auto",onClick:e,children:[w.jsx("div",{className:"aspect-square overflow-hidden",children:w.jsx("img",{src:t.images[0],alt:t.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration:300"})}),w.jsxs("div",{className:"mt-4 space-y-2",children:[w.jsx("h3",{className:"text-lg font-medium",children:t.name}),w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsxs("span",{className:"font-semibold",children:["",t.cost]}),w.jsx("button",{className:`p-2 rounded-full transition-colors ${n?"bg-black text-white":"hover:bg-gray-100"}`,onClick:o,children:w.jsx(lL,{size:20})})]})]})]})},yL="/EcommerceCw/assets/hero-rDqbke-7.jpg",vL="/EcommerceCw/assets/jw-C5oPafap.jpg",_L=()=>w.jsxs("div",{className:"min-h-screen flex flex-col",children:[w.jsxs("div",{className:"z-[99] pt-[32px]",children:[w.jsx(yo,{}),w.jsxs("div",{className:"max-w-[1440px] m-auto",children:[w.jsx(wL,{}),w.jsx(xL,{}),w.jsx(EL,{})]})]}),w.jsx("div",{className:"mt-auto",children:w.jsx("div",{className:"max-w-[1440px] m-auto",children:w.jsx(Ra,{})})})]}),wL=()=>w.jsx("div",{className:"relative h-[40vh] w-full overflow-hidden border-r border-l border-b",style:{backgroundImage:`url(${yL})`,backgroundSize:"cover",backgroundPosition:"center"},children:w.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col gap-6",children:[w.jsx(Ct.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-7xl font-medium text-white",children:"About Essence"}),w.jsx(Ct.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-xl max-w-[60%] text-center text-white",children:"Inspired by Nature, Designed for Modern Living, Crafted to Elevate Your Space"})]})}),xL=()=>w.jsxs("section",{className:"flex flex-col md:flex-row gap-12 mt-[128px] px-[32px]",children:[w.jsxs("div",{className:"md:w-1/2 justify-center flex flex-col gap-6",children:[w.jsx("h2",{className:"text-3xl font-medium mb-6",children:"Our Story"}),w.jsx("p",{className:"text-lg mb-6",children:"Founded in 2025, Essence was born from a passion for thoughtful design and sustainable craftsmanship. We believe that furniture should not only be beautiful but should also tell a story and stand the test of time."}),w.jsx("p",{className:"text-lg",children:"Our journey began when a group of six designers and craftsmen came together with a shared vision: to create furniture that brings the calming influence of nature into modern urban homes. Each piece in our collection is carefully designed to balance aesthetic appeal with functional excellence."})]}),w.jsx("div",{className:"md:w-1/2 bg-[#f8f5f0] h-[400px] flex items-center justify-center",style:{backgroundImage:`url(${vL})`,backgroundSize:"cover",backgroundPosition:"center"},children:w.jsx("p",{className:"text-3xl italic px-8 text-center text-white",children:'"We believe in creating spaces that inspire peace, creativity, and connection."'})})]}),EL=()=>{const t=[{title:"Sustainability",description:"We use responsibly sourced materials and ensure our production processes minimize environmental impact."},{title:"Quality Craftsmanship",description:"Every piece is made with meticulous attention to detail by skilled artisans who take pride in their work."},{title:"Timeless Design",description:"We create furniture that transcends trends, pieces you'll love for years to come."},{title:"Customer Satisfaction",description:"Your happiness is our priority. We strive to provide exceptional service from browsing to delivery."}];return w.jsxs("section",{className:"mt-[128px] mb-[128px] px-[32px]",children:[w.jsx("h2",{className:"text-3xl font-medium mb-12 text-center",children:"Our Values"}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:t.map((e,n)=>w.jsxs("div",{className:"border p-6",children:[w.jsx("h3",{className:"text-2xl mb-4",children:e.title}),w.jsx("p",{className:"text-lg",children:e.description})]},n))})]})},TL=(t,e=10,n=50,i=.005,o=.02,a)=>{{const u=Array.from({length:t.length},(h,f)=>f.toString());return{getSimilarProducts:(h,f=5)=>{const p=u.indexOf(h);return p===-1?[]:t[p].map((_,E)=>({productId:u[E],similarity:_})).filter(_=>_.productId!==h).sort((_,E)=>E.similarity-_.similarity).slice(0,f).map(_=>_.productId)}}}};function SL(){return w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"mt-[32px]",children:w.jsx(yo,{})}),w.jsx(CL,{}),w.jsx(Ra,{})]})}const CL=()=>{var n;const e=(n=Vi().state)==null?void 0:n.product;return w.jsxs(w.Fragment,{children:[w.jsxs("section",{className:"flex justify-between items-center max-w-[1440px] m-auto mt-[64px]",children:[w.jsx(AL,{images:(e==null?void 0:e.images)||[]}),w.jsx(PL,{product:e})]}),w.jsx(IL,{})]})},AL=({images:t})=>w.jsxs("div",{className:"max-w-[654px] flex-1",children:[w.jsx("div",{className:"aspect-square flex-1 bg-(--secondary)",children:t[0]&&w.jsx("img",{src:t[0],alt:"Product",className:"w-full h-full object-cover"})}),w.jsx("div",{className:"flex mt-[8px] justify-between",children:t.slice(1).map((e,n)=>w.jsx("div",{className:"aspect-square flex-1 max-w-[120px] bg-blue-500",children:w.jsx("img",{src:e,alt:`Product ${n+1}`,className:"w-full h-full object-cover"})},n))})]}),PL=({product:t})=>{if(!t)return null;const e=()=>{const n=JSON.parse(localStorage.getItem("cart")||"[]"),i=n.findIndex(o=>o.productId===t.productId);i>=0?n[i].quantity+=1:n.push({...t,quantity:1}),localStorage.setItem("cart",JSON.stringify(n))};return w.jsxs("aside",{className:"text-left max-w-[548px] flex-1",children:[w.jsxs("div",{className:"gap-[16px] flex flex-col",children:[w.jsx("div",{className:"flex items-center justify-between",children:w.jsx("h1",{className:"text-4xl",children:t.name})}),w.jsxs("div",{className:"flex",children:[[1,2,3,4,5].map(n=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:n<=(t.rating||0)?"#FFD700":"none",stroke:"#FFD700",strokeWidth:"2",children:w.jsx("path",{d:"M12 2l2.4 7.4h7.6l-6 4.4 2.3 7.2-6.3-4.6-6.3 4.6 2.3-7.2-6-4.4h7.6z"})},n)),w.jsxs("span",{className:"ml-2 text-gray-600",children:["(",t.rating||0,"/5)"]})]})]}),w.jsxs("h1",{className:"mt-[32px] text-4xl",children:[" ",t.cost]}),w.jsx("p",{className:"mt-[32px] text-lg",children:t.description}),w.jsxs("p",{className:"mt-[16px] text-lg",children:["Room: ",(t.room??[]).join(", ")]}),w.jsx("div",{className:"mt-[64px]",children:w.jsx(_o,{name:"ADD TO CART",onClick:e})})]})},IL=()=>{var a;const[t,e]=M.useState([]),i=(a=Vi().state)==null?void 0:a.product,o=vh();return M.useEffect(()=>{i&&(async()=>{var h,f;try{if(!i||!i.productId){console.error("Product information is missing");return}const p=await Rp();console.log(`Fetched ${p.length} products total`);const g=p.filter(k=>k.productId!==i.productId);if(g.length<4){console.log("Not enough products for meaningful recommendations, showing available products"),e(g.map(k=>({...k,rating:k.rating??0})).slice(0,4));return}const _=[i,...g],E=_.map(k=>k.productId),S=Object.fromEntries(_.map(k=>[k.productId,k]));console.log(`Creating similarity matrix for ${E.length} products`);const I=[];for(let k=0;k<E.length;k++){I[k]=[];const D=S[E[k]];for(let j=0;j<E.length;j++){if(k===j){I[k][j]=1;continue}const z=S[E[j]];let W=0;if((h=D.room)!=null&&h.length&&((f=z.room)!=null&&f.length)){const ee=D.room.filter(b=>z.room.some(R=>R.toLowerCase()===b.toLowerCase())).length,X=new Set([...D.room,...z.room]).size;W+=.5*(ee/Math.max(1,X))}if(D.rating!==void 0&&z.rating!==void 0){const ee=1-Math.abs(D.rating-z.rating)/5;W+=.3*ee}D.colour&&z.colour&&D.colour.some(ee=>z.colour.some(X=>ee.toLowerCase()===X.toLowerCase()))&&(W+=.2),I[k][j]=W}}try{console.log("Applying matrix factorization");const k=TL(I,2,100,.01,.01);if(E.findIndex(ee=>ee===i.productId)===-1)throw new Error("Current product not found in product IDs array");const j=k.getSimilarProducts(i.productId,4).map(ee=>parseInt(ee,10));console.log("Similar indices:",j);const z=j.map(ee=>E[ee]);console.log("Top product IDs:",z);const W=z.map(ee=>S[ee]).filter(Boolean);if(console.log(`Found ${W.length} recommended products`),W.length>0)e(W);else throw new Error("No valid recommended products found")}catch(k){throw console.error("Error in matrix factorization:",k),k}}catch(p){console.error("Error fetching related products:",p);const g=(await Rp()).filter(_=>_.productId!==i.productId).sort((_,E)=>{var k,D;const S=(k=_.room)!=null&&k.some(j=>{var z;return(z=i.room)==null?void 0:z.includes(j)})?1:0;return((D=E.room)!=null&&D.some(j=>{var z;return(z=i.room)==null?void 0:z.includes(j)})?1:0)-S}).slice(0,4);console.log(`Using fallback: showing ${g.length} products`),e(g)}})()},[i]),w.jsxs("div",{className:"flex flex-col uppercase text-left max-w-[1440px] m-auto mt-[80px]",children:[w.jsx("h2",{className:"text-3xl",children:"You might also like"}),w.jsx("div",{className:"flex mt-[16px] justify-between",children:t.length>0?t.map(u=>w.jsx("div",{className:"flex-1 max-w-[225px] aspect-square cursor-pointer overflow-hidden",onClick:()=>o("/item-preview",{state:{product:u}}),children:w.jsx("img",{src:u.images[0],alt:u.name,className:"w-full h-full object-cover transform scale-110 hover:scale-100 transition-transform duration-300"})},u.productId)):w.jsx("p",{children:"No related products found"})})]})},RL=()=>{const[t,e]=M.useState([]);M.useEffect(()=>{const i=JSON.parse(localStorage.getItem("cart")||"[]");e(i)},[]);const n=(i,o)=>{const a=t.map(u=>u.productId===i?{...u,quantity:Math.max(0,u.quantity+o)}:u).filter(u=>u.quantity>0);e(a),localStorage.setItem("cart",JSON.stringify(a))};return w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"m-auto mt-[32px] mb-[128px]",children:w.jsx(yo,{})}),t.length===0?w.jsx(kL,{}):w.jsxs("div",{className:"max-w-[1440px] m-auto flex gap-[64px] justify-between",children:[w.jsx("div",{className:"flex-1 flex flex-col gap-[64px]",children:t.map(i=>w.jsx(DL,{item:i,updateQuantity:n},i.productId))}),w.jsx(NL,{cartItems:t})]}),w.jsx(Ra,{})]})},kL=()=>w.jsxs("div",{className:"max-w-[1440px] m-auto flex flex-col items-center justify-center py-[64px] min-h-[400px]",children:[w.jsx("h1",{className:"text-4xl mb-[32px]",children:"YOUR CART IS EMPTY"}),w.jsx("p",{className:"text-2xl mb-[48px]",children:"Add some products to begin shopping"}),w.jsx("a",{href:"/explore",children:w.jsx(_o,{name:"EXPLORE PRODUCTS"})})]}),DL=({item:t,updateQuantity:e})=>w.jsx(w.Fragment,{children:w.jsxs("ul",{className:"flex gap-[32px] w-full uppercase text-left",children:[w.jsx("li",{children:w.jsx("div",{className:"min-w-[450px] aspect-square",children:t.images&&t.images[0]&&w.jsx("img",{src:t.images[0],alt:t.name,className:"w-full h-full object-cover"})})}),w.jsxs("li",{className:"w-full",children:[w.jsx("h1",{className:"text-4xl text-(--secondary) mb-[16px]",children:t.name}),w.jsxs("h2",{className:"text-4xl font-[500] mb-[64px]",children:["",t.cost]}),w.jsxs("div",{className:"text-2xl flex justify-between mb-[8px]",children:[w.jsx("h4",{children:"ROOM:"}),w.jsx("h4",{children:t.room})]}),w.jsxs("div",{className:"text-2xl flex justify-between",children:[w.jsx("h4",{children:"COLOUR:"}),w.jsx("h4",{children:t.color})]}),w.jsxs("div",{className:"flex justify-between mt-[64px] text-3xl items-center max-w-[200px]",children:[w.jsx("button",{className:"border p-[8px]",onClick:()=>e(t.productId,-1),children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-6 h-6",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),w.jsx("h3",{children:t.quantity}),w.jsx("button",{className:"border p-[8px]",onClick:()=>e(t.productId,1),children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 24 24",stroke:"currentColor",className:"w-6 h-6",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]})]})}),NL=({cartItems:t})=>{const e=t.reduce((o,a)=>o+a.cost*a.quantity,0),n=20,i=e+n;return w.jsx(w.Fragment,{children:w.jsxs("div",{className:"border p-[32px] flex flex-col justify-around w-[450px] h-[450px]",children:[w.jsx("h1",{className:"text-4xl",children:"ORDER SUMMARY"}),w.jsxs("div",{className:"flex justify-between text-2xl",children:[w.jsx("h2",{children:"Subtotal"}),w.jsxs("h2",{children:["",e]})]}),w.jsxs("div",{className:"flex justify-between text-2xl",children:[w.jsx("h2",{children:"Shipping"}),w.jsxs("h2",{children:["",n]})]}),w.jsxs("div",{className:"flex justify-between text-2xl",children:[w.jsx("h2",{children:"Total"}),w.jsxs("h2",{children:["",i]})]}),w.jsx("div",{className:"ml-auto mr-auto",children:w.jsx("a",{href:"/checkout",children:w.jsx(_o,{name:"CHECKOUT"})})})]})})},bL=({onSignUp:t,onBack:e})=>{const[n,i]=M.useState(""),[o,a]=M.useState(""),[u,h]=M.useState(""),f=async()=>{try{const p={fullName:n,email:o,password:u};await GV(ws(Qr,"users",o),p),t(p),alert("Sign up successful!")}catch(p){console.error("Sign up error:",p),alert("An error occurred while signing up.")}};return w.jsxs("div",{children:[w.jsxs("div",{style:{marginBottom:"1rem"},children:[w.jsx("label",{htmlFor:"fullName",style:{display:"block",marginBottom:"0.5rem",color:"#4E4B46"},children:"Full Name"}),w.jsx("input",{id:"fullName",type:"text",value:n,onChange:p=>i(p.target.value),style:{backgroundColor:"#FFFFFF",borderColor:"#D6CFC7",color:"#4E4B46",padding:"0.5rem",borderRadius:"0.5rem",width:"100%"}})]}),w.jsxs("div",{style:{marginBottom:"1rem"},children:[w.jsx("label",{htmlFor:"email",style:{display:"block",marginBottom:"0.5rem",color:"#4E4B46"},children:"Email"}),w.jsx("input",{id:"email",type:"email",value:o,onChange:p=>a(p.target.value),style:{backgroundColor:"#FFFFFF",borderColor:"#D6CFC7",color:"#4E4B46",padding:"0.5rem",borderRadius:"0.5rem",width:"100%"}})]}),w.jsxs("div",{style:{marginBottom:"1rem"},children:[w.jsx("label",{htmlFor:"password",style:{display:"block",marginBottom:"0.5rem",color:"#4E4B46"},children:"Password"}),w.jsx("input",{id:"password",type:"password",value:u,onChange:p=>h(p.target.value),style:{backgroundColor:"#FFFFFF",borderColor:"#D6CFC7",color:"#4E4B46",padding:"0.5rem",borderRadius:"0.5rem",width:"100%"}})]}),w.jsx("button",{onClick:f,style:{backgroundColor:"#7A746E",color:"#FFFFFF",padding:"0.5rem 1rem",borderRadius:"0.5rem",marginRight:"0.5rem"},children:"Sign Up"}),w.jsx("button",{onClick:e,style:{backgroundColor:"#C1B6A4",color:"#FFFFFF",padding:"0.5rem 1rem",borderRadius:"0.5rem"},children:"Back"})]})},VL=({onLogin:t,onBack:e})=>{const[n,i]=M.useState(""),[o,a]=M.useState(""),u=async()=>{try{const h=await ph(ws(Qr,"users",n));h.exists()&&h.data().password===o?(t(h.data()),alert("Login successful!")):alert("Invalid email or password!")}catch(h){console.error("Login error:",h),alert("An error occurred while logging in.")}};return w.jsxs("div",{children:[w.jsxs("div",{style:{marginBottom:"1rem"},children:[w.jsx("label",{htmlFor:"email",style:{display:"block",marginBottom:"0.5rem",color:"#4E4B46"},children:"Email"}),w.jsx("input",{id:"email",type:"email",value:n,onChange:h=>i(h.target.value),style:{backgroundColor:"#FFFFFF",borderColor:"#D6CFC7",color:"#4E4B46",padding:"0.5rem",borderRadius:"0.5rem",width:"100%"}})]}),w.jsxs("div",{style:{marginBottom:"1rem"},children:[w.jsx("label",{htmlFor:"password",style:{display:"block",marginBottom:"0.5rem",color:"#4E4B46"},children:"Password"}),w.jsx("input",{id:"password",type:"password",value:o,onChange:h=>a(h.target.value),style:{backgroundColor:"#FFFFFF",borderColor:"#D6CFC7",color:"#4E4B46",padding:"0.5rem",borderRadius:"0.5rem",width:"100%"}})]}),w.jsx("button",{onClick:u,style:{backgroundColor:"#7A746E",color:"#FFFFFF",padding:"0.5rem 1rem",borderRadius:"0.5rem",marginRight:"0.5rem"},children:"Login"}),w.jsx("button",{onClick:e,style:{backgroundColor:"#C1B6A4",color:"#FFFFFF",padding:"0.5rem 1rem",borderRadius:"0.5rem"},children:"Back"})]})},LL=()=>{const[t,e]=M.useState({fullName:"",email:"",password:""}),[n,i]=M.useState(!0),[o,a]=M.useState(!1),[u,h]=M.useState(!1),[f,p]=M.useState(!1),[g,_]=M.useState("details"),[E,S]=M.useState([]),[I,k]=M.useState(0);M.useEffect(()=>{(async()=>{const b=localStorage.getItem("USER_ID");if(!b){i(!1);return}const R=await ph(ws(Qr,"users",b));if(R.exists()){const C=R.data();C&&C.fullName&&C.email&&C.password?e({fullName:C.fullName,email:C.email,password:C.password}):console.error("Invalid user data:",C),k(C.loyaltyPoints||0),a(!0),await D(b)}i(!1)})()},[]);const D=async X=>{try{const b=$V(Gm(Qr,"users",X,"orders"),HV("date","desc")),R=await ZT(b),C=[];R.forEach(P=>{var L,O;C.push({id:P.id,...P.data(),date:((O=(L=P.data().date)==null?void 0:L.toDate())==null?void 0:O.toLocaleDateString())||"N/A"})}),S(C)}catch(b){console.error("Error fetching orders:",b)}},j=async()=>{const X=localStorage.getItem("USER_ID");if(!X){alert("No user logged in.");return}try{await eS(ws(Qr,"users",X),t),alert("Details updated successfully!")}catch(b){console.error("Update error:",b),alert("Failed to update details.")}},z=async X=>{const b={...X,loyaltyPoints:0};e(b),k(0),localStorage.setItem("USER_ID",X.email),a(!0),p(!1)},W=async X=>{e(X),localStorage.setItem("USER_ID",X.email),a(!0),h(!1),await D(X.email)},ee=()=>{e({fullName:"",email:"",password:""}),a(!1),k(0),S([]),localStorage.removeItem("USER_ID")};return n?w.jsx("div",{className:"text-center mt-10",children:"Loading..."}):w.jsxs("div",{className:"bg-[#F5F1E8] min-h-screen mt-10",children:[w.jsx(yo,{}),w.jsx("main",{className:"max-w-4xl mx-auto mt-10 py-10 px-6 bg-[#FAF7F2] shadow-lg border border-[#D6CFC7]",children:o?w.jsxs(w.Fragment,{children:[w.jsxs("section",{className:"flex items-center gap-6 border-b border-[#D6CFC7] pb-6",children:[w.jsx("div",{className:"w-24 h-24 bg-[#C1B6A4] rounded-full flex items-center justify-center text-white text-xl font-semibold",children:t.fullName.split(" ").map(X=>X[0]).join("")}),w.jsxs("div",{className:"flex-1",children:[w.jsx("h2",{className:"text-2xl font-semibold text-[#4E4B46]",children:t.fullName}),w.jsx("p",{className:"text-[#7A746E]",children:t.email})]}),w.jsx("div",{className:"flex items-center justify-center bg-[#EFE9DE] rounded-lg p-4 shadow-sm",children:w.jsxs("div",{className:"text-center",children:[w.jsx("p",{className:"text-[#4E4B46] text-sm",children:"Loyalty Points"}),w.jsx("p",{className:"text-2xl font-bold text-[#7A746E]",children:I}),w.jsxs("p",{className:"text-xs text-[#7A746E]",children:["Worth ",Math.floor(I/50).toFixed(2)]})]})})]}),w.jsxs("div",{className:"flex border-b border-[#D6CFC7] mt-6",children:[w.jsx("button",{onClick:()=>_("details"),className:`px-4 py-2 ${g==="details"?"border-b-2 border-[#7A746E] font-medium":""}`,children:"Account Details"}),w.jsx("button",{onClick:()=>_("orders"),className:`px-4 py-2 ${g==="orders"?"border-b-2 border-[#7A746E] font-medium":""}`,children:"Orders"})]}),g==="details"&&w.jsxs("section",{className:"mt-6",children:[w.jsx("h3",{className:"text-lg font-semibold text-[#4E4B46] mb-4",children:"Account Details"}),w.jsxs("div",{className:"grid gap-4",children:[w.jsx("input",{type:"text",value:t.fullName,onChange:X=>e({...t,fullName:X.target.value}),style:{backgroundColor:"#FAF7F2",borderColor:"#D6CFC7",color:"#4E4B46"},className:"p-2 rounded-lg"}),w.jsx("input",{type:"email",value:t.email,disabled:!0,style:{backgroundColor:"#FAF7F2",borderColor:"#D6CFC7",color:"#4E4B46"},className:"p-2 rounded-lg"}),w.jsx("button",{onClick:j,className:"bg-[#7A746E] text-white py-2 px-4 hover:bg-[#4E4B46] transition",children:"Update Details"})]})]}),g==="orders"&&w.jsxs("section",{className:"mt-6",children:[w.jsx("h3",{className:"text-lg font-semibold text-[#4E4B46] mb-4",children:"Your Orders"}),E.length>0?w.jsx("div",{className:"space-y-4",children:E.map(X=>{var b;return w.jsxs("div",{className:"border border-[#D6CFC7] rounded-lg p-4 bg-white",children:[w.jsxs("div",{className:"flex justify-between items-center mb-3",children:[w.jsxs("div",{children:[w.jsxs("p",{className:"font-medium",children:["Order Date: ",X.date]}),w.jsxs("p",{className:"text-sm text-[#7A746E]",children:["Status: ",X.status]})]}),w.jsxs("div",{className:"text-right",children:[w.jsxs("p",{className:"font-bold",children:["Total: ",X.total]}),w.jsxs("p",{className:"text-sm text-[#7A746E]",children:["Points earned: ",X.loyaltyPoints]})]})]}),w.jsx("h4",{className:"font-medium border-b pb-1 mb-2",children:"Items"}),(b=X.items)==null?void 0:b.map((R,C)=>w.jsxs("div",{className:"flex justify-between py-2 border-b border-dotted",children:[w.jsxs("div",{className:"flex gap-3",children:[R.images&&R.images[0]&&w.jsx("img",{src:R.images[0],alt:R.name,className:"w-12 h-12 object-cover"}),w.jsxs("div",{children:[w.jsx("p",{className:"font-medium",children:R.name}),w.jsxs("p",{className:"text-xs text-[#7A746E]",children:["Room: ",R.room,", Color: ",R.color]})]})]}),w.jsxs("div",{className:"text-right",children:[w.jsxs("p",{children:["",R.cost,"  ",R.quantity]}),w.jsxs("p",{className:"font-medium",children:["",R.cost*R.quantity]})]})]},C)),w.jsx("div",{className:"mt-3 text-sm text-[#7A746E]",children:w.jsxs("p",{children:["Delivery:"," ",X.deliveryOption==="home"?"Home Delivery (20)":"Click and Collect (Free)"]})}),w.jsx("div",{className:"mt-4 text-right",children:w.jsx("button",{className:"bg-[#C1B6A4] text-white py-1 px-3 text-sm rounded hover:bg-[#A19182] transition",onClick:()=>alert("We will contact you via email to arrange a refund."),children:"Request Refund"})})]},X.id)})}):w.jsx("div",{className:"text-center py-10 text-[#7A746E]",children:w.jsx("p",{children:"You haven't placed any orders yet."})})]}),w.jsx("div",{className:"text-center mt-8",children:w.jsx("button",{onClick:ee,className:"bg-[#C1B6A4] text-white py-2 px-4 hover:bg-[#A19182] transition",children:"Logout"})})]}):w.jsx(w.Fragment,{children:w.jsxs("div",{className:"text-center space-y-4",children:[!u&&!f&&w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:()=>{h(!0),p(!1)},className:"bg-[#7A746E] text-white py-2 px-4 rounded-lg hover:bg-[#4E4B46] transition",children:"Login"}),w.jsx("button",{onClick:()=>{p(!0),h(!1)},className:"bg-[#C1B6A4] text-white py-2 px-4 rounded-lg hover:bg-[#A19182] transition ml-4",children:"Sign Up"})]}),u&&w.jsx(VL,{onLogin:W,onBack:()=>h(!1)}),f&&w.jsx(bL,{onSignUp:z,onBack:()=>p(!1)})]})})})]})},ML=()=>{const[t,e]=M.useState([]),[n,i]=M.useState("home"),[o,a]=M.useState(!1),[u,h]=M.useState(0),[f,p]=M.useState(!1),[g,_]=M.useState({fullName:"",addressLine1:"",addressLine2:"",city:"",postcode:"",specialInstructions:""}),[E,S]=M.useState([]),[I,k]=M.useState(-1),[D,j]=M.useState(!1),z=vh();M.useEffect(()=>{const Ce=JSON.parse(localStorage.getItem("cart")||"[]");e(Ce),(async()=>{const ie=localStorage.getItem("USER_ID");if(ie)try{const pe=await ph(ws(Qr,"users",ie));if(pe.exists()){const ue=pe.data();h(ue.loyaltyPoints||0),ue.deliveryAddresses&&ue.deliveryAddresses.length>0&&(S(ue.deliveryAddresses),k(0),_(ue.deliveryAddresses[0]))}}catch(pe){console.error("Error fetching user data:",pe)}})()},[]);const W=t.reduce((Ce,Ae)=>Ce+Ae.cost*Ae.quantity,0),ee=n==="home"?20:0,X=Math.min(Math.floor(u/50),Math.floor(W+ee)),b=f?X:0,R=b*50,C=W+ee-b,P=Math.floor(C),L=Math.floor(P/50),O=()=>{p(!f)},$=Ce=>{const{name:Ae,value:ie}=Ce.target;_(pe=>({...pe,[Ae]:ie})),I!==-1&&k(-1)},V=Ce=>{_(Ce===-1?{fullName:"",addressLine1:"",addressLine2:"",city:"",postcode:"",specialInstructions:""}:E[Ce]),k(Ce)},Qe=async()=>{const Ce=localStorage.getItem("USER_ID");if(n==="home"&&(!g.fullName||!g.addressLine1||!g.city||!g.postcode)){alert("Please complete all required address fields");return}const Ae={items:t,subtotal:W,shipping:ee,pointsUsed:f?R:0,pointsDiscount:b,total:C,deliveryOption:n,deliveryAddress:n==="home"?g:null,loyaltyPoints:P,date:XV(),status:"Processing"};try{if(Ce){await QV(Gm(Qr,"users",Ce,"orders"),Ae);const ie=await ph(ws(Qr,"users",Ce));if(ie.exists()){const pe=ie.data(),te={loyaltyPoints:(pe.loyaltyPoints||0)-(f?R:0)+P};if(n==="home"&&D&&I===-1){const me=pe.deliveryAddresses||[];me.some(je=>je.addressLine1===g.addressLine1&&je.postcode===g.postcode)||(te.deliveryAddresses=[...me,g])}await eS(ws(Qr,"users",Ce),te)}}a(!0),localStorage.setItem("cart","[]")}catch(ie){console.error("Error processing checkout:",ie),alert("There was an error processing your order. Please try again.")}},xt=()=>{z("/")};return w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"m-auto mt-[32px] mb-[128px]",children:w.jsx(yo,{})}),o?w.jsx("div",{className:"max-w-[1440px] m-auto flex flex-col gap-[64px] items-center text-center py-[128px]",children:w.jsxs(Ct.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col gap-[32px]",children:[w.jsx("h1",{className:"text-5xl font-[400]",children:"Thank You For Your Purchase!"}),w.jsxs("p",{className:"text-3xl",children:["You've earned"," ",w.jsxs("span",{className:"font-bold",children:[P," loyalty points"]})," ","with this order."]}),w.jsxs("p",{className:"text-xl",children:["These points are worth approximately ",L.toFixed(2)," for your future purchases."]}),w.jsx("div",{className:"mt-[32px]",onClick:xt,children:w.jsx(_o,{name:"RETURN TO HOME"})})]})}):w.jsxs("div",{className:"max-w-[1440px] m-auto flex flex-col gap-[64px]",children:[w.jsx("h1",{className:"text-5xl font-[400] mb-[32px]",children:"Checkout"}),w.jsxs("div",{className:"flex gap-[64px] justify-between",children:[w.jsxs("div",{className:"flex-1 flex flex-col gap-[32px]",children:[w.jsx("h2",{className:"text-3xl font-[400]",children:"Your Items"}),t.map(Ce=>w.jsx(jL,{item:Ce},Ce.productId)),w.jsxs("div",{className:"mt-[64px]",children:[w.jsx("h2",{className:"text-3xl font-[400] mb-[32px]",children:"Delivery Options"}),w.jsxs("div",{className:"flex flex-col gap-[16px]",children:[w.jsxs("label",{className:"flex items-center gap-[16px] text-2xl cursor-pointer",children:[w.jsx("input",{type:"radio",name:"delivery",checked:n==="home",onChange:()=>i("home"),className:"w-[24px] h-[24px]"}),"Home Delivery (20)"]}),w.jsxs("label",{className:"flex items-center gap-[16px] text-2xl cursor-pointer",children:[w.jsx("input",{type:"radio",name:"delivery",checked:n==="collect",onChange:()=>i("collect"),className:"w-[24px] h-[24px]"}),"Click and Collect (Free)"]})]})]}),n==="home"&&w.jsxs("div",{className:"mt-[32px] border-t pt-[32px]",children:[w.jsx("h2",{className:"text-3xl font-[400] mb-[32px]",children:"Delivery Address"}),E.length>0&&w.jsxs("div",{className:"mb-[24px]",children:[w.jsx("h3",{className:"text-xl mb-[16px]",children:"Select an address:"}),w.jsxs("div",{className:"flex flex-col gap-[12px]",children:[E.map((Ce,Ae)=>w.jsxs("label",{className:"flex items-center gap-[12px] cursor-pointer",children:[w.jsx("input",{type:"radio",name:"savedAddress",checked:I===Ae,onChange:()=>V(Ae),className:"w-[18px] h-[18px]"}),w.jsxs("span",{children:[Ce.fullName,", ",Ce.addressLine1,",",Ce.addressLine2&&` ${Ce.addressLine2},`," ",Ce.city,", ",Ce.postcode]})]},Ae)),w.jsxs("label",{className:"flex items-center gap-[12px] cursor-pointer",children:[w.jsx("input",{type:"radio",name:"savedAddress",checked:I===-1,onChange:()=>V(-1),className:"w-[18px] h-[18px]"}),w.jsx("span",{className:"font-medium",children:"Add a new address"})]})]})]}),(I===-1||E.length===0)&&w.jsxs("div",{className:"grid grid-cols-2 gap-[16px]",children:[w.jsxs("div",{className:"col-span-2",children:[w.jsx("label",{className:"block mb-[8px]",children:"Full Name *"}),w.jsx("input",{type:"text",name:"fullName",value:g.fullName,onChange:$,className:"border p-[12px] w-full",required:!0})]}),w.jsxs("div",{className:"col-span-2",children:[w.jsx("label",{className:"block mb-[8px]",children:"Address Line 1 *"}),w.jsx("input",{type:"text",name:"addressLine1",value:g.addressLine1,onChange:$,className:"border p-[12px] w-full",required:!0})]}),w.jsxs("div",{className:"col-span-2",children:[w.jsx("label",{className:"block mb-[8px]",children:"Address Line 2"}),w.jsx("input",{type:"text",name:"addressLine2",value:g.addressLine2,onChange:$,className:"border p-[12px] w-full"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block mb-[8px]",children:"City *"}),w.jsx("input",{type:"text",name:"city",value:g.city,onChange:$,className:"border p-[12px] w-full",required:!0})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block mb-[8px]",children:"Postcode *"}),w.jsx("input",{type:"text",name:"postcode",value:g.postcode,onChange:$,className:"border p-[12px] w-full",required:!0})]}),w.jsxs("div",{className:"col-span-2",children:[w.jsx("label",{className:"block mb-[8px]",children:"Special Instructions"}),w.jsx("textarea",{name:"specialInstructions",value:g.specialInstructions,onChange:$,className:"border p-[12px] w-full",rows:3,placeholder:"Any special delivery instructions..."})]}),w.jsx("div",{className:"col-span-2 mt-[8px]",children:w.jsxs("label",{className:"flex items-center gap-[12px] cursor-pointer",children:[w.jsx("input",{type:"checkbox",checked:D,onChange:()=>j(!D),className:"w-[18px] h-[18px]"}),w.jsx("span",{children:"Save this address for future orders"})]})})]})]})]}),w.jsx(FL,{subtotal:W,shipping:ee,total:C,loyaltyPoints:P,pointsValue:L,onCheckout:Qe,userLoyaltyPoints:u,usePoints:f,toggleUsePoints:O,pointsDiscount:b,pointsUsed:R})]})]}),w.jsx(Ra,{})]})},jL=({item:t})=>w.jsxs("div",{className:"flex gap-[32px] w-full border-b pb-[32px]",children:[w.jsx("div",{className:"w-[150px] aspect-square",children:t.images&&t.images[0]&&w.jsx("img",{src:t.images[0],alt:t.name,className:"w-full h-full object-cover"})}),w.jsxs("div",{className:"flex-1",children:[w.jsx("h3",{className:"text-2xl font-[500] mb-[16px]",children:t.name}),w.jsxs("div",{className:"flex justify-between text-xl mb-[8px]",children:[w.jsxs("span",{children:["Room: ",t.room]}),w.jsxs("span",{children:["Colour: ",t.color]})]}),w.jsxs("div",{className:"flex justify-between text-xl",children:[w.jsxs("span",{children:["Quantity: ",t.quantity]}),w.jsxs("span",{className:"font-[500]",children:["",t.cost*t.quantity]})]})]})]}),FL=({subtotal:t,shipping:e,total:n,loyaltyPoints:i,pointsValue:o,onCheckout:a,userLoyaltyPoints:u,usePoints:h,toggleUsePoints:f,pointsDiscount:p,pointsUsed:g})=>w.jsxs("div",{className:"border p-[32px] flex flex-col gap-[32px] w-[450px] h-fit sticky top-[32px]",children:[w.jsx("h2",{className:"text-3xl font-[400]",children:"ORDER SUMMARY"}),w.jsxs("div",{className:"flex justify-between text-xl",children:[w.jsx("span",{children:"Subtotal"}),w.jsxs("span",{children:["",t]})]}),w.jsxs("div",{className:"flex justify-between text-xl",children:[w.jsx("span",{children:"Shipping"}),w.jsxs("span",{children:["",e]})]}),u>0&&w.jsxs("div",{className:"flex flex-col gap-[8px] border-t border-b py-[16px]",children:[w.jsxs("div",{className:"flex items-center gap-[12px]",children:[w.jsx("input",{type:"checkbox",id:"usePoints",checked:h,onChange:f,className:"w-[20px] h-[20px]"}),w.jsxs("label",{htmlFor:"usePoints",className:"text-lg cursor-pointer",children:["Use ",g," loyalty points"]})]}),h&&w.jsxs("div",{className:"flex justify-between text-xl text-green-600",children:[w.jsx("span",{children:"Points discount"}),w.jsxs("span",{children:["-",p]})]}),w.jsxs("p",{className:"text-sm text-gray-500",children:["You have ",u," points available (worth ",Math.floor(u/50),")"]})]}),w.jsxs("div",{className:"flex justify-between text-xl font-[500]",children:[w.jsx("span",{children:"Total"}),w.jsxs("span",{children:["",n]})]}),w.jsxs("div",{className:"border-t pt-[16px]",children:[w.jsx("h3",{className:"text-xl mb-[16px]",children:"Loyalty Points"}),w.jsxs("div",{className:"text-lg flex flex-col gap-[8px] mb-[32px]",children:[w.jsxs("div",{className:"flex justify-between",children:[w.jsx("span",{children:"Points earned with this order:"}),w.jsxs("span",{className:"font-[500]",children:[i," points"]})]}),w.jsxs("div",{className:"flex justify-between",children:[w.jsx("span",{children:"Value of points:"}),w.jsxs("span",{className:"font-[500]",children:["",o.toFixed(2)]})]}),w.jsx("p",{className:"text-sm text-gray-500 mt-[8px]",children:"(You earn 1 point for every 1 spent. 50 points = 1)"})]})]}),w.jsx("div",{className:"ml-auto mr-auto",onClick:a,children:w.jsx(_o,{name:"CONTINUE"})})]});function OL(){const t=iA([{path:"/",element:w.jsx(Xk,{})},{path:"/explore",element:w.jsx(hL,{})},{path:"/about",element:w.jsx(_L,{})},{path:"/item-preview",element:w.jsx(SL,{})},{path:"/cart",element:w.jsx(RL,{})},{path:"/account",element:w.jsx(LL,{})},{path:"/checkout",element:w.jsx(ML,{})},{path:"*",element:w.jsx("div",{children:"Not Found"})}],{basename:"/EcommerceCw"});return w.jsx(yA,{router:t})}p1.createRoot(document.getElementById("root")).render(w.jsx(M.StrictMode,{children:w.jsx(OL,{})}));
